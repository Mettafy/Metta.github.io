<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Rsyncå¤‡ä»½æœåŠ¡</title>
      <link href="/2024/07/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/%E5%A4%87%E4%BB%BD%E4%B8%8E%E5%AD%98%E5%82%A8/01-Rsync%E5%A4%87%E4%BB%BD/"/>
      <url>/2024/07/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/%E5%A4%87%E4%BB%BD%E4%B8%8E%E5%AD%98%E5%82%A8/01-Rsync%E5%A4%87%E4%BB%BD/</url>
      
        <content type="html"><![CDATA[<p><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Rsync+NFS/202403281337589.png" alt="æœåŠ¡ä½¿ç”¨æµç¨‹"></p><h1 id="0-é…ç½®æ–‡ä»¶è¯¦è§£"><a href="#0-é…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="0. é…ç½®æ–‡ä»¶è¯¦è§£"></a>0. é…ç½®æ–‡ä»¶è¯¦è§£</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /etc/rsyncd.conf </span><br><span class="line"><span class="comment">###å…¨å±€é…ç½®</span></span><br><span class="line">fake super = <span class="built_in">yes</span>  </span><br><span class="line">uid = rsync   </span><br><span class="line">gid = rsync   </span><br><span class="line">use <span class="built_in">chroot</span> = no   </span><br><span class="line">max connections = 2000</span><br><span class="line"><span class="built_in">timeout</span> = 600</span><br><span class="line">pid file = /var/run/rsyncd.pid</span><br><span class="line">lock file = /var/run/rsync.lock</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span> file = /var/log/rsyncd.log</span><br><span class="line">ignore errors</span><br><span class="line"><span class="built_in">read</span> only = <span class="literal">false</span></span><br><span class="line">list = <span class="literal">false</span></span><br><span class="line">hosts allow = x.x.x.x/24</span><br><span class="line">hosts deny = x.x.x.x/32</span><br><span class="line">auth <span class="built_in">users</span> = rsync_backup</span><br><span class="line">secrets file = /etc/rsync.password</span><br><span class="line"></span><br><span class="line"><span class="comment">### å±€éƒ¨é…ç½®ï¼ˆæ¨¡å—ï¼‰</span></span><br><span class="line">[xxxx]</span><br><span class="line">comment = xxxx</span><br><span class="line">path = /xxx</span><br></pre></td></tr></table></figure><table><thead><tr><th>å…¨å±€é…ç½®</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>fake super</td><td>ä¸å¼€å¯ï¼Œåˆ™ centos7 ä¼ è¾“æŠ¥é”™<br>ï¼ˆä¼ªè£…æˆ root æƒé™ï¼‰</td></tr><tr><td>uid</td><td>rsync è¿è¡Œæ—¶æ‰€æœ‰è€…</td></tr><tr><td>gid</td><td>rsync è¿è¡Œæ—¶æ‰€å±ç»„</td></tr><tr><td>use chroot</td><td>å®ç°é¢å¤–çš„å®‰å…¨é˜²æŠ¤ï¼Œä¸€èˆ¬ä¸å¼€å¯</td></tr><tr><td>max connections</td><td>æœ€å¤§è¿æ¥æ•°</td></tr><tr><td>timeout</td><td>è¿æ¥è¶…æ—¶æ—¶é—´</td></tr><tr><td>pid file</td><td>pid æ–‡ä»¶å­˜æ”¾ç›®å½•</td></tr><tr><td>lock file</td><td>è¿›ç¨‹&#x2F;æœåŠ¡çš„é”æ–‡ä»¶ï¼Œé˜²æ­¢é‡å¤è¿è¡Œ</td></tr><tr><td>log file</td><td>rsync æœåŠ¡ç«¯æ—¥å¿—</td></tr><tr><td>ignore errors</td><td>å¿½ç•¥ä¸€äº›é”™è¯¯ï¼ˆIO é”™è¯¯ï¼‰</td></tr><tr><td>read only</td><td>å¯ä»¥è¿›è¡Œè¯»å†™</td></tr><tr><td>list</td><td>å…³é—­ rsync æœåŠ¡ç«¯åˆ—è¡¨åŠŸèƒ½</td></tr><tr><td>hosts allow</td><td>å…è®¸å“ªä¸ª ip æˆ–ç½‘æ®µè®¿é—®ï¼Œç™½åå•</td></tr><tr><td>hosts deny</td><td>æ‹’ç»æŸä¸ª ip æˆ–ç½‘æ®µè®¿é—®ï¼Œé»‘åå•</td></tr><tr><td>auth users</td><td>rsync æœåŠ¡ç«¯ç”¨äºéªŒè¯çš„ç”¨æˆ·</td></tr><tr><td>secrets file</td><td>rsync æœåŠ¡ç«¯ç”¨äºéªŒè¯çš„å¯†ç æ–‡ä»¶</td></tr></tbody></table><table><thead><tr><th>å±€éƒ¨ï¼ˆæ¨¡å—ï¼‰</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>[xxxx]</td><td>æ¨¡å—åå­—ï¼Œç”¨æˆ·è®¿é—®æœåŠ¡ç«¯æ—¶æŒ‡å®š</td></tr><tr><td>comment</td><td>æ³¨é‡Šè¯´æ˜</td></tr><tr><td>path</td><td>æ¨¡å—å¯¹åº”çš„ç›®å½•</td></tr></tbody></table><h1 id="1-å¤‡ä»½æœåŠ¡æ¦‚è¿°"><a href="#1-å¤‡ä»½æœåŠ¡æ¦‚è¿°" class="headerlink" title="1.   å¤‡ä»½æœåŠ¡æ¦‚è¿°"></a>1.   å¤‡ä»½æœåŠ¡æ¦‚è¿°</h1><ul><li>å¤‡ä»½æœåŠ¡ï¼šrsyncd æœåŠ¡ï¼Œå¯ä»¥åœ¨ä¸åŒä¸»æœºä¹‹é—´ä¼ è¾“æ•°æ®</li><li>ç‰¹ç‚¹ï¼š<ul><li>rsync æ˜¯ä¸ªæœåŠ¡ä¹Ÿæ˜¯å‘½ä»¤</li><li>ä½¿ç”¨æ–¹ä¾¿ï¼Œå…·æœ‰å¤šç§æ¨¡å¼ï¼ˆæœ¬åœ°æ¨¡å¼ã€è¿œç¨‹æ¨¡å¼ã€å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼‰</li><li>ä¼ è¾“æ•°æ®æ—¶ä½¿ç”¨çš„æ˜¯å¢é‡ä¼ è¾“</li></ul></li></ul><blockquote><p>å¢é‡ä¸å…¨é‡ï¼š</p><ul><li><p>å…¨é‡ï¼šæ— è®ºå¤šå°‘æ•°æ®ï¼Œæ—§çš„æ•°æ®ä¸æ–°çš„æ•°æ® <code>å…¨éƒ¨</code> æ¨é€åˆ°æŒ‡å®šä¸»æœºï¼ˆä¾‹å¦‚ scpï¼‰</p></li><li><p>å¢é‡ï¼šç¬¬ä¸€æ¬¡å…¨é‡å¤‡ä»½ï¼Œä¹‹ååªä¼šæŠŠ <code>ä¿®æ”¹ã€æ–°å»º</code> çš„æ•°æ®æ¨é€åˆ°æŒ‡å®šä¸»æœºï¼ˆä¾‹å¦‚ rsyncï¼‰</p></li></ul></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†/etc/sysconfig/ æ¨é€åˆ°ç›®æ ‡ä¸»æœºçš„/mnt/ä¸‹</span></span><br><span class="line"></span><br><span class="line">å…¨é‡ï¼ˆé€šè¿‡scpï¼‰ï¼š</span><br><span class="line">scp -r /etc/sysconfig/  root@192.168.1.103:/mnt</span><br><span class="line"><span class="comment">## ä¼ è¾“ç»“æœä¸å±•ç¤º</span></span><br><span class="line">ç»“è®ºï¼šæ— è®ºæºæ•°æ®ä¸ç›®æ ‡æ•°æ®æ˜¯å¦é‡å¤ï¼Œä¾æ—§æ˜¯å…¨éƒ¨æ¨é€</span><br><span class="line"></span><br><span class="line">å¢é‡ï¼ˆé€šè¿‡rsyncï¼‰:</span><br><span class="line"><span class="comment"># ç¬¬ä¸€æ¬¡ä¼ è¾“æ—¶ç”±äºç›®æ ‡æ— æ–‡ä»¶ï¼Œæ‰€ä»¥æ˜¯å…¨é‡æ¨é€</span></span><br><span class="line">rsync -avz /etc/sysconfig/ root@192.168.1.103:/mnt</span><br><span class="line">root@192.168.1.103 password: </span><br><span class="line">sending incremental file list</span><br><span class="line">./</span><br><span class="line">anaconda</span><br><span class="line">authconfig</span><br><span class="line">chronyd</span><br><span class="line">cpupower</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒæ¬¡ä¼ è¾“ï¼Œæœ‰é‡å¤æ–‡ä»¶ä¸”æ— æ–°æ–‡ä»¶ï¼Œåˆ™æ²¡æœ‰æ¨é€ä»»ä½•æ–‡ä»¶åˆ°æŒ‡å®šä¸»æœº</span></span><br><span class="line">rsync -avz /etc/sysconfig/ root@192.168.1.103:/mnt</span><br><span class="line">root@192.168.1.103 password: </span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 1,340 bytes  received 16 bytes  542.40 bytes/sec</span><br><span class="line">total size is 169,720  speedup is 125.16</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="2-Rsync-ä¼ä¸šåº”ç”¨åœºæ™¯"><a href="#2-Rsync-ä¼ä¸šåº”ç”¨åœºæ™¯" class="headerlink" title="2.  Rsync ä¼ä¸šåº”ç”¨åœºæ™¯"></a>2.  Rsync ä¼ä¸šåº”ç”¨åœºæ™¯</h1><table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>åº”ç”¨å»ºè®®</th></tr></thead><tbody><tr><td>rsync ä½œä¸ºå‘½ä»¤ä½¿ç”¨</td><td>ä¸´æ—¶æ‹‰å–ã€æ¨é€æ•°æ®ã€‚ï¼ˆå¯ä»¥ä½¿ç”¨ scp ä»£æ›¿ï¼‰</td></tr><tr><td><code>å®šæ—¶å¤‡ä»½ï¼šrsyncæœåŠ¡+å®šæ—¶ä»»åŠ¡</code></td><td>å®šæ—¶å¤‡ä»½ã€‚ï¼ˆæ¡ˆä¾‹ï¼šå®šæ—¶ä»»åŠ¡è¿›è¡Œå¤‡ä»½+rsync æ¨é€å¤‡ä»½ï¼‰</td></tr><tr><td>å®æ—¶åŒæ­¥ï¼šrsync æœåŠ¡+sersync&#x2F;lsyncd</td><td>è§£å†³å­˜å‚¨æœåŠ¡å•ç‚¹é—®é¢˜</td></tr><tr><td>rsync æœåŠ¡è¿›è¡Œå¼‚åœ°å®¹ç¾</td><td>é€šè¿‡ rsync å°†å¤‡ä»½æ¨é€åˆ°å¼‚åœ°</td></tr></tbody></table><blockquote><p>å•ç‚¹é—®é¢˜ï¼šä¸€ä¸ªæœåŠ¡åªæœ‰ 1 ä¸ªèŠ‚ç‚¹ï¼Œä¸€æ—¦å‡ºé—®é¢˜ï¼Œè¯¥æœåŠ¡å°†æ— æ³•ä½¿ç”¨</p></blockquote><h1 id="3-æ¨é€ä¸æ‹‰å–çš„åŒºåˆ«"><a href="#3-æ¨é€ä¸æ‹‰å–çš„åŒºåˆ«" class="headerlink" title="3. æ¨é€ä¸æ‹‰å–çš„åŒºåˆ«"></a>3. æ¨é€ä¸æ‹‰å–çš„åŒºåˆ«</h1><blockquote><p>ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼šè¿›è¡Œçš„ä»€ä¹ˆæ“ä½œ</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨é€</span></span><br><span class="line">[root@backup01 ~]# rsync /etc/hostname 192.168.1.103:/root/</span><br><span class="line">root@192.168.1.103 password: </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰å–</span></span><br><span class="line">[root@backup01 ~]# rsync 192.168.1.103:/etc/hostname .</span><br><span class="line">root@192.168.1.103 password: </span><br><span class="line">[root@backup01 ~]# <span class="built_in">ls</span></span><br><span class="line">hostname</span><br><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> hostname </span><br><span class="line">nfs01</span><br></pre></td></tr></table></figure><p><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Rsync+NFS/202403291244249.png"></p><h1 id="4-åº”ç”¨åœºæ™¯ï¼ˆä½¿ç”¨æ¨¡å¼ï¼‰"><a href="#4-åº”ç”¨åœºæ™¯ï¼ˆä½¿ç”¨æ¨¡å¼ï¼‰" class="headerlink" title="4.  åº”ç”¨åœºæ™¯ï¼ˆä½¿ç”¨æ¨¡å¼ï¼‰"></a>4.  åº”ç”¨åœºæ™¯ï¼ˆä½¿ç”¨æ¨¡å¼ï¼‰</h1><table><thead><tr><th>æ¨¡å¼</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æœ¬åœ°æ¨¡å¼ï¼ˆäº†è§£ï¼‰</td><td>ä¸€å°æœºå™¨æœ¬åœ°è¿›è¡Œä¼ è¾“ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</td></tr><tr><td>è¿œç¨‹æ¨¡å¼</td><td>ä¸¤å°ä¹‹é—´ä¼ è¾“æ•°æ®ï¼ˆä¸´æ—¶ä½¿ç”¨å¯ä»¥ä½¿ç”¨ scp ä»£æ›¿ï¼‰</td></tr><tr><td><code>rsyncå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼(daemon)</code></td><td>å¤šå°ä¹‹é—´ä¼ è¾“æ•°æ® (ä¸éœ€è¦å¯†ç )ï¼Œç”¨äºå®šæ—¶å¤‡ä»½ã€å®šæ—¶åŒæ­¥</td></tr></tbody></table><h2 id="4-1-æœ¬åœ°æ¨¡å¼ï¼ˆä¸æ¨èï¼‰"><a href="#4-1-æœ¬åœ°æ¨¡å¼ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="4.1  æœ¬åœ°æ¨¡å¼ï¼ˆä¸æ¨èï¼‰"></a>4.1  æœ¬åœ°æ¨¡å¼ï¼ˆä¸æ¨èï¼‰</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a æºæ•°æ®ç›®å½•  ç›®æ ‡æ•°æ®ç›®å½•</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ‘º  æ³¨æ„ï¼šæºæ•°æ®ç›®å½• <code>/etc</code> å’Œ <code>/etc/</code> æ˜¯ä¸åŒçš„<br><code>/etc</code>ï¼šæŒ‡çš„æ˜¯ etc ç›®å½•ä»¥åŠä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶<br><code>/etc/</code> ï¼šä»…æŒ‡ etc ç›®å½•ä¸‹çš„æ–‡ä»¶</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@backup01 ~]# ll /mnt/</span><br><span class="line">total 0</span><br><span class="line"></span><br><span class="line"><span class="comment">## &#x27;/etc&#x27; æŠŠetcç›®å½•ä¹Ÿå¤åˆ¶äº†</span></span><br><span class="line">[root@backup01 ~]# rsync -a /etc /mnt</span><br><span class="line">[root@backup01 ~]# ll /mnt/</span><br><span class="line">total 12</span><br><span class="line">drwxr-xr-x 75 root root 8192 Mar  6 18:34 etc</span><br><span class="line"></span><br><span class="line"><span class="comment">## åªå¤åˆ¶äº†etcç›®å½•ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">[root@backup01 ~]# rsync -a /etc/ /mnt</span><br><span class="line">[root@backup01 ~]# ll /mnt/</span><br><span class="line">total 1060</span><br><span class="line">-rw-r--r--  1 root root       16 Jul 28  2023 adjtime</span><br><span class="line">-rw-r--r--  1 root root     1529 Apr  1  2020 aliases</span><br><span class="line">-rw-r--r--  1 root root    12288 Jul 28  2023 aliases.db</span><br><span class="line">drwxr-xr-x  2 root root      236 Jul 28  2023 alternatives</span><br><span class="line">-rw-------  1 root root      541 Aug  9  2019 anacrontab</span><br><span class="line">-rw-r--r--  1 root root       55 Aug  8  2019 asound.conf</span><br><span class="line">drwxr-x---  3 root root       43 Jul 28  2023 audisp</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="4-2-è¿œç¨‹æ¨¡å¼â­"><a href="#4-2-è¿œç¨‹æ¨¡å¼â­" class="headerlink" title="4.2 è¿œç¨‹æ¨¡å¼â­"></a>4.2 è¿œç¨‹æ¨¡å¼â­</h2><table><thead><tr><th align="center"></th><th align="left">æ ¼å¼</th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center"></td><td align="left">rsync -a</td><td align="center">æºæ–‡ä»¶</td><td align="center">ç›®æ ‡</td></tr><tr><td align="center">æ¨é€</td><td align="left">rsync</td><td align="center">&#x2F;etc&#x2F;hostname</td><td align="center">192.168.1.103:&#x2F;root</td></tr><tr><td align="center">æ‹‰å–</td><td align="left">rsync</td><td align="center">192.168.1.103:&#x2F;etc&#x2F;hostname</td><td align="center">&#x2F;root</td></tr></tbody></table><ul><li>ç®€å•æ¡ˆä¾‹<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å°†hostnameæ¨é€åˆ°103çš„/tmpç›®å½•ä¸‹</span></span><br><span class="line">[root@backup01 ~]# rsync -av /etc/hostname 192.168.1.103:/tmp</span><br><span class="line">sending incremental file list</span><br><span class="line">hostname</span><br><span class="line">sent 103 bytes  received 35 bytes  92.00 bytes/sec</span><br><span class="line">total size is 9  speedup is 0.07</span><br><span class="line"></span><br><span class="line">[root@nfs01 ~]# ll /tmp/</span><br><span class="line">-rw-r--r-- 1 root root  9 Mar  6 18:31 hostname</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ¨é€/etc ç›®å½•åŠå†…å®¹ åˆ°103çš„/tmpä¸‹</span></span><br><span class="line"><span class="comment">### ç¬¬ä¸€æ¬¡æ¨é€æ˜¯å…¨é‡</span></span><br><span class="line">[root@backup01 ~]# rsync -a /etc 192.168.1.103:/tmp/</span><br><span class="line"></span><br><span class="line">[root@nfs01 tmp]# ll</span><br><span class="line">total 12</span><br><span class="line">drwxr-xr-x 75 root root 8192 Mar  6 18:34 etc</span><br><span class="line"></span><br><span class="line"><span class="comment">### æ¨é€ç¬¬äºŒæ¬¡ï¼Œä¼šå‘ç°å¹¶æœªè¿›è¡Œæ¨é€</span></span><br><span class="line">[root@backup01 ~]# rsync -av /etc 192.168.1.103:/tmp/</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 45,814 bytes  received 634 bytes  18,579.20 bytes/sec</span><br><span class="line">total size is 28,357,060  speedup is 610.51</span><br><span class="line"></span><br><span class="line"><span class="comment">#### åˆ›å»ºæ–°æ–‡ä»¶å¹¶å†æ¬¡æ¨é€</span></span><br><span class="line">[root@backup01 ~]# <span class="built_in">touch</span> /etc/aaa1111111111111 </span><br><span class="line"></span><br><span class="line"><span class="comment">## - ä¼šå‘ç°æ¨é€äº†åˆšåˆ›å»ºçš„æ–°æ–‡ä»¶</span></span><br><span class="line">[root@backup01 ~]# rsync -av /etc 192.168.1.103:/tmp/</span><br><span class="line">sending incremental file list</span><br><span class="line">etc/</span><br><span class="line">etc/aaa1111111111111</span><br><span class="line"></span><br><span class="line">sent 45,880 bytes  received 648 bytes  31,018.67 bytes/sec</span><br><span class="line">total size is 28,357,060  speedup is 609.46</span><br></pre></td></tr></table></figure><ul><li>ä¸Šé¢æ¼”ç¤ºäº† rsync ä¼šå¢é‡æ¨é€ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨ scp è¿›è¡Œæ¨é€</li><li>ä¸´æ—¶ä¼ è¾“æ•°æ®ï¼Œä½¿ç”¨ scp å³å¯<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# scp -r /etc 192.168.1.103:/tmp/</span><br><span class="line">....</span><br><span class="line">fstab                                          100%  465   687.7KB/s   00:00    </span><br><span class="line">crypttab                                       100%    0     0.0KB/s   00:00    </span><br><span class="line">mtab                                           100%    0     0.0KB/s   00:00    </span><br><span class="line">resolv.conf                                    100%   72   127.8KB/s   00:00    </span><br><span class="line">00_header                                      100% 8702    11.5MB/s   00:00    </span><br><span class="line">01_users                                       100%  232   483.5KB/s   00:00    </span><br><span class="line">10_linux                                       100%   11KB  13.0MB/s   00:00    </span><br><span class="line">20_linux_xen                                   100%   10KB  12.5MB/s   00:00    </span><br><span class="line">20_ppc_terminfo                                100% 2559     3.9MB/s   00:00    </span><br><span class="line">30_os-prober                                   100%   11KB  15.4MB/s   00:00    </span><br><span class="line">40_custom                                      100%  214   412.8KB/s   00:00    </span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">ğŸ‘º <span class="comment">### ä¼šå‘ç°ï¼Œè™½ç„¶æœ‰é‡å¤æ–‡ä»¶ï¼Œä½†æ˜¯scpä¾æ—§ä¼šå…¨é‡æ¨é€</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="4-3-å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼ˆdaemonï¼‰â­ğŸŒŸ"><a href="#4-3-å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼ˆdaemonï¼‰â­ğŸŒŸ" class="headerlink" title="4.3 å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼ˆdaemonï¼‰â­ğŸŒŸ"></a>4.3 å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼ˆdaemonï¼‰â­ğŸŒŸ</h2><h3 id="aï¼‰é…ç½®æ–‡ä»¶å†…å®¹"><a href="#aï¼‰é…ç½®æ–‡ä»¶å†…å®¹" class="headerlink" title="aï¼‰é…ç½®æ–‡ä»¶å†…å®¹"></a>aï¼‰é…ç½®æ–‡ä»¶å†…å®¹</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###é…ç½®æ–‡ä»¶</span></span><br><span class="line">fake super = <span class="built_in">yes</span>  </span><br><span class="line">uid = rsync   </span><br><span class="line">gid = rsync   </span><br><span class="line">use <span class="built_in">chroot</span> = no   </span><br><span class="line">max connections = 2000</span><br><span class="line"><span class="built_in">timeout</span> = 600</span><br><span class="line">pid file = /var/run/rsyncd.pid</span><br><span class="line">lock file = /var/run/rsync.lock</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span> file = /var/log/rsyncd.log</span><br><span class="line">ignore errors</span><br><span class="line"><span class="built_in">read</span> only = <span class="literal">false</span></span><br><span class="line">list = <span class="literal">false</span></span><br><span class="line"><span class="comment">##hosts allow = 192.168.1.0/24</span></span><br><span class="line"><span class="comment">##hosts deny = 192.168.1.0/32</span></span><br><span class="line">auth <span class="built_in">users</span> = rsync_backup</span><br><span class="line">secrets file = /etc/rsync.password</span><br><span class="line"></span><br><span class="line"><span class="comment">#############          </span></span><br><span class="line">[data]</span><br><span class="line">comment = my rsync</span><br><span class="line">path = /data</span><br></pre></td></tr></table></figure><h3 id="bï¼‰å®‰è£…ã€éƒ¨ç½²"><a href="#bï¼‰å®‰è£…ã€éƒ¨ç½²" class="headerlink" title="bï¼‰å®‰è£…ã€éƒ¨ç½²"></a>bï¼‰å®‰è£…ã€éƒ¨ç½²</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">01.# å®‰è£…</span><br><span class="line">[root@backup01 ~]# yum install rsync</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.aliyun.com</span><br><span class="line"> * extras: mirrors.aliyun.com</span><br><span class="line"> * updates: mirrors.aliyun.com</span><br><span class="line">Package rsync-3.1.2-12.el7_9.x86_64 already installed and latest version</span><br><span class="line">Nothing to <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">02.## ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">[root@backup01 ~]# <span class="built_in">cp</span> /etc/rsyncd.conf /etc/rsyncd.conf.bak</span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /etc/rsyncd.conf</span><br><span class="line">fake super = <span class="built_in">yes</span>  </span><br><span class="line">uid = rsync   </span><br><span class="line">gid = rsync   </span><br><span class="line">use <span class="built_in">chroot</span> = no   </span><br><span class="line">max connections = 2000</span><br><span class="line"><span class="built_in">timeout</span> = 600</span><br><span class="line">pid file = /var/run/rsyncd.pid</span><br><span class="line">lock file = /var/run/rsync.lock</span><br><span class="line"><span class="built_in">log</span> file = /var/log/rsyncd.log</span><br><span class="line">ignore errors</span><br><span class="line"><span class="built_in">read</span> only = <span class="literal">false</span></span><br><span class="line">list = <span class="literal">false</span></span><br><span class="line"><span class="comment">##hosts allow = 192.168.1.0/24</span></span><br><span class="line"><span class="comment">###hosts deny = 192.168.1.0/32</span></span><br><span class="line">auth <span class="built_in">users</span> = rsync_backup</span><br><span class="line">secrets file = /etc/rsync.password</span><br><span class="line"><span class="comment">##############          </span></span><br><span class="line">[data]</span><br><span class="line">comment = my rsync</span><br><span class="line">path = /data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">03.## éƒ¨ç½²ä¸€äº›é…ç½®</span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">[root@backup01 ~]# <span class="built_in">id</span> rsync</span><br><span class="line"><span class="built_in">id</span>: rsync: no such user</span><br><span class="line">[root@backup01 ~]# useradd -s /sbin/nologin -M rsync</span><br><span class="line">[root@backup01 ~]# <span class="built_in">id</span> rsync</span><br><span class="line">uid=1000(rsync) gid=1000(rsync) <span class="built_in">groups</span>=1000(rsync)</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ›å»ºéªŒè¯å¯†ç æ–‡ä»¶ï¼Œä¿®æ”¹æƒé™</span></span><br><span class="line">[root@backup01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;rsync_backup:1&#x27;</span> &gt;/etc/rsync.password</span><br><span class="line">[root@backup01 ~]# <span class="built_in">chmod</span> 600 /etc/rsync.password </span><br><span class="line">[root@backup01 ~]# ll /etc/rsync.password </span><br><span class="line">-rw------- 1 root root 15 Mar  6 22:31 /etc/rsync.password</span><br><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /etc/rsync.password </span><br><span class="line">rsync_backup:1</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ›å»ºå¤‡ä»½ç›®å½•ï¼Œä¿®æ”¹æ‰€æœ‰è€…å’Œæ‰€å±ç»„</span></span><br><span class="line">[root@backup01 ~]# <span class="built_in">mkdir</span> /data</span><br><span class="line">[root@backup01 ~]# <span class="built_in">chown</span> -R rsync.rsync /data/</span><br><span class="line">[root@backup01 ~]# ll -d /data/</span><br><span class="line">drwxr-xr-x 2 rsync rsync 6 Mar  6 22:32 /data/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="cï¼‰å¯åŠ¨ã€å¼€æœºè‡ªå¯"><a href="#cï¼‰å¯åŠ¨ã€å¼€æœºè‡ªå¯" class="headerlink" title="cï¼‰å¯åŠ¨ã€å¼€æœºè‡ªå¯"></a>cï¼‰å¯åŠ¨ã€å¼€æœºè‡ªå¯</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">01.## å¯åŠ¨ã€å¼€æœºè‡ªå¯</span><br><span class="line">[root@backup01 ~]# systemctl start rsyncd</span><br><span class="line">[root@backup01 ~]# systemctl status rsyncd</span><br><span class="line">â— rsyncd.service - fast remote file copy program daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/rsyncd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Wed 2024-03-06 22:34:55 CST; 1s ago</span><br><span class="line"> Main PID: 11541 (rsync)</span><br><span class="line">   CGroup: /system.slice/rsyncd.service</span><br><span class="line">           â””â”€11541 /usr/bin/rsync --daemon --no-detach</span><br><span class="line"></span><br><span class="line">Mar 06 22:34:55 backup01 systemd[1]: Started fast remote file copy program daemon.</span><br><span class="line">[root@backup01 ~]# systemctl <span class="built_in">enable</span> rsyncd</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/rsyncd.service to /usr/lib/systemd/system/rsyncd.service.</span><br></pre></td></tr></table></figure><h3 id="dï¼‰éªŒè¯ï¼ˆæœ¬åœ°ã€è¿œç¨‹ï¼‰"><a href="#dï¼‰éªŒè¯ï¼ˆæœ¬åœ°ã€è¿œç¨‹ï¼‰" class="headerlink" title="dï¼‰éªŒè¯ï¼ˆæœ¬åœ°ã€è¿œç¨‹ï¼‰"></a>dï¼‰éªŒè¯ï¼ˆæœ¬åœ°ã€è¿œç¨‹ï¼‰</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">######### ç™»å½•éªŒè¯   ############</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### â‘ . è¿™é‡Œä½¿ç”¨æœ¬æœºè¿›è¡ŒéªŒè¯</span></span><br><span class="line">[root@backup01 ~]# rsync -av  /etc/hostname  rsync_backup@192.168.1.100::data</span><br><span class="line">Password: </span><br><span class="line">sending incremental file list</span><br><span class="line">hostname</span><br><span class="line"></span><br><span class="line">sent 107 bytes  received 43 bytes  9.68 bytes/sec</span><br><span class="line">total size is 9  speedup is 0.06</span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# ll /data/</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 rsync rsync 9 Mar  6 18:31 hostname</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### â‘¡. è¿œç¨‹è¿›è¡Œç™»å½•éªŒè¯</span></span><br><span class="line">[root@nfs01 ~]# rsync -avz /etc/hosts rsync_backup@192.168.1.100::data</span><br><span class="line">Password: </span><br><span class="line">sending incremental file list</span><br><span class="line">hosts</span><br><span class="line"></span><br><span class="line">sent 140 bytes  received 43 bytes  122.00 bytes/sec</span><br><span class="line">total size is 158  speedup is 0.86</span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# ll /data/</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r-- 1 rsync rsync 158 Jun  7  2013 hosts</span><br></pre></td></tr></table></figure><h1 id="5-å®ˆæŠ¤æ¨¡å¼è¡¥å……"><a href="#5-å®ˆæŠ¤æ¨¡å¼è¡¥å……" class="headerlink" title="5. å®ˆæŠ¤æ¨¡å¼è¡¥å……"></a>5. å®ˆæŠ¤æ¨¡å¼è¡¥å……</h1><h2 id="5-1-å®¢æˆ·ç«¯å…å¯†ç ç™»å½•"><a href="#5-1-å®¢æˆ·ç«¯å…å¯†ç ç™»å½•" class="headerlink" title="5.1  å®¢æˆ·ç«¯å…å¯†ç ç™»å½•"></a>5.1  å®¢æˆ·ç«¯å…å¯†ç ç™»å½•</h2><blockquote><p>åªéœ€è¦å®¢æˆ·ç«¯å°†å¯†ç ä¿å­˜åˆ°æœ¬åœ°å³å¯</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">01. <span class="comment">### å®¢æˆ·ç«¯å°†å¯†ç å†™å…¥ç©ºæ–‡ä»¶å†…ï¼ˆæ–‡ä»¶åè‡ªå·±å®šä¹‰ï¼‰</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;1&#x27;</span> &gt; /etc/rsync.client</span><br><span class="line"></span><br><span class="line">02. <span class="comment">### ä¿®æ”¹æƒé™</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">chmod</span> 600 /etc/rsync.client </span><br><span class="line"></span><br><span class="line">03. <span class="comment">### ä¼ è¾“æ—¶ä½¿ç”¨ &#x27;--password-file&#x27; å‚æ•°æŒ‡å®šå¯†ç æ–‡ä»¶</span></span><br><span class="line">[root@nfs01 ~]# rsync -avz etc.tar.gz rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client </span><br><span class="line">sending incremental file list</span><br><span class="line">etc.tar.gz</span><br><span class="line"></span><br><span class="line">sent 10,230,350 bytes  received 43 bytes  20,460,786.00 bytes/sec</span><br><span class="line">total size is 10,433,130  speedup is 1.02</span><br><span class="line"></span><br><span class="line">04. <span class="comment">### æœåŠ¡ç«¯æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">[root@backup01 ~]# ll /data/</span><br><span class="line">total 10200</span><br><span class="line">-rw-r--r-- 1 rsync rsync 10433130 Mar  7 17:15 etc.tar.gz</span><br><span class="line">-rw-r--r-- 1 rsync rsync        9 Mar  6 18:31 hostname</span><br><span class="line">-rw-r--r-- 1 rsync rsync      158 Jun  7  2013 hosts</span><br></pre></td></tr></table></figure><h2 id="5-2-è®¿é—®æ§åˆ¶-å®‰å…¨æªæ–½"><a href="#5-2-è®¿é—®æ§åˆ¶-å®‰å…¨æªæ–½" class="headerlink" title="5.2  è®¿é—®æ§åˆ¶-å®‰å…¨æªæ–½"></a>5.2  è®¿é—®æ§åˆ¶-å®‰å…¨æªæ–½</h2><ul><li><p>hosts allowï¼šåªå…è®¸æŸä¸ª ip æˆ–ç½‘æ®µè®¿é—®</p></li><li><p>hosts denyï¼šæ‹’ç»æŸä¸ª ip æˆ–ç½‘æ®µè®¿é—®</p></li><li><p>æ¡ˆä¾‹ï¼šåªå…è®¸ 10.0.0.0&#x2F;24 ç½‘æ®µè®¿é—®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# grep <span class="string">&#x27;hosts allow&#x27;</span> /etc/rsyncd.conf</span><br><span class="line">hosts allow = 10.0.0.0/24</span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# systemctl restart rsyncd</span><br><span class="line"></span><br><span class="line"><span class="comment">### æ­¤æ—¶å®¢æˆ·ç«¯è®¿é—®ï¼Œä¼šç›´æ¥æŠ¥é”™</span></span><br><span class="line">[root@nfs01 ~]# rsync -avz etc.tar.gz rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client </span><br><span class="line">@ERROR: Unknown module <span class="string">&#x27;data&#x27;</span></span><br><span class="line">rsync error: error starting client-server protocol (code 5) at main.c(1656) [sender=3.1.2]</span><br><span class="line"></span><br><span class="line"><span class="comment">####æ”¹å›å…è®¸å±€åŸŸç½‘ç½‘æ®µè®¿é—®</span></span><br><span class="line">[root@backup01 ~]# grep <span class="string">&#x27;hosts allow&#x27;</span> /etc/rsyncd.conf</span><br><span class="line">hosts allow = 192.168.1.0/24</span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# systemctl restart rsyncd</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ­¤æ—¶æ­£å¸¸è®¿é—®</span></span><br><span class="line">[root@nfs01 ~]# rsync -avz etc.tar.gz rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client </span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 54 bytes  received 20 bytes  148.00 bytes/sec</span><br><span class="line">total size is 10,433,130  speedup is 140,988.24</span><br></pre></td></tr></table></figure></li></ul><h1 id="6-Rsync-é€‰é¡¹"><a href="#6-Rsync-é€‰é¡¹" class="headerlink" title="6. Rsync é€‰é¡¹"></a>6. Rsync é€‰é¡¹</h1><table><thead><tr><th>rsync é€‰é¡¹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>-a</code> <br>åŒ…å«äº†[-rlptogD]</td><td>-rï¼šé€’å½’å¤åˆ¶ <br>-lï¼šå¤åˆ¶è½¯é“¾æ¥<br>-pï¼šä¿æŒæƒé™ä¸å˜<br>-tï¼šä¿æŒæ–‡ä»¶æ—¶é—´ä¸å˜<br>-oï¼šæ‰€æœ‰è€…ä¸å˜<br>-gï¼šæ‰€å±ç»„ä¸å˜<br>-Dï¼šâ€“devices â€“specials  è®¾å¤‡ä¸ç‰¹æ®Šæ–‡ä»¶ï¼Œä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯</td></tr><tr><td><code>-v</code></td><td>æ˜¾ç¤ºä¼ è¾“è¿‡ç¨‹è¯¦ç»†ä¿¡æ¯</td></tr><tr><td><code>-z</code></td><td>ä¼ è¾“æ•°æ®æ—¶å‹ç¼©<br>ï¼ˆä¸€èˆ¬å…¬ç½‘ä¼ è¾“ä½¿ç”¨ï¼Œä¼šè‡ªåŠ¨è§£å‹ç¼©ï¼‰<br>â€“compress-level&#x3D;numï¼šå¯æŒ‰çº§åˆ«å‹ç¼©</td></tr><tr><td>-P</td><td>â€“progress  æ˜¾ç¤ºåŒæ­¥çš„è¿‡ç¨‹åŠä¼ è¾“æ—¶çš„è¿›åº¦ç­‰ä¿¡æ¯ï¼ˆä¸€èˆ¬ä¸ä¸-z ä½¿ç”¨ï¼‰</td></tr><tr><td><code>--bwlimit</code></td><td>é™é€Ÿ</td></tr><tr><td>â€“exclude<br>â€“exclude-from</td><td>æ’é™¤</td></tr><tr><td>â€“delete</td><td>ä¸€èˆ¬ç”¨äºå®æ—¶åŒæ­¥ï¼Œå¤‡ä»½æ—¶ä¸ä½¿ç”¨<br>ä½¿åŒæ–¹æ•°æ®ä¸€è‡´ï¼Œå¤šä½™çš„æ–‡ä»¶å…¨éƒ¨åˆ é™¤</td></tr></tbody></table><h2 id="6-1-P-æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯"><a href="#6-1-P-æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯" class="headerlink" title="6.1  -P æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯"></a>6.1  <code>-P</code> æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯</h2><blockquote><p>æ¯” <code>-v</code> è¾“å‡ºçš„ä¿¡æ¯æ›´åŠ è¯¦ç»†ï¼Œæ˜¾ç¤ºä¼ è¾“é€Ÿåº¦ä¸è¿›åº¦ç­‰</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 tmp]# rsync -av -P . rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client </span><br><span class="line">sending incremental file list</span><br><span class="line">./</span><br><span class="line">100m </span><br><span class="line">    104,857,600 100%   58.77MB/s    0:00:01 (xfr#1, to-chk=5/7)</span><br><span class="line"></span><br><span class="line">sent 104,883,455 bytes  received 70 bytes  41,953,410.00 bytes/sec</span><br><span class="line">total size is 104,857,600  speedup is 1.00</span><br></pre></td></tr></table></figure><h2 id="6-2-bwlimit-é™é€Ÿ"><a href="#6-2-bwlimit-é™é€Ÿ" class="headerlink" title="6.2 --bwlimit é™é€Ÿ"></a>6.2 <code>--bwlimit</code> é™é€Ÿ</h2><blockquote><p>å…¬ç½‘ä¼ è¾“æ—¶ä¸ºäº†ä¸å ç”¨å¤ªå¤šå®½å¸¦ï¼Œä¸€èˆ¬ä¼šé™é€Ÿä¼ è¾“</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## é™é€Ÿåˆ°100kb/s</span></span><br><span class="line">[root@nfs01 tmp]# rsync -avP --bwlimit=100kb . rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client </span><br><span class="line">sending incremental file list</span><br><span class="line">./</span><br><span class="line">100m-v2</span><br><span class="line">        425,984   0%  103.31kB/s    0:16:50  </span><br></pre></td></tr></table></figure><h2 id="6-3-æ’é™¤æŒ‡å®šæ–‡ä»¶"><a href="#6-3-æ’é™¤æŒ‡å®šæ–‡ä»¶" class="headerlink" title="6.3 æ’é™¤æŒ‡å®šæ–‡ä»¶"></a>6.3 æ’é™¤æŒ‡å®šæ–‡ä»¶</h2><blockquote><p>ä¼ è¾“æ—¶å¯ä»¥æŒ‡å®šå“ªäº›æ–‡ä»¶ä¸è¿›è¡Œå¤‡ä»½ã€â€“excludeã€‘</p></blockquote><ul><li><ol><li><h2 id="åˆ›å»ºä¸€äº›æ–‡ä»¶"><a href="#åˆ›å»ºä¸€äº›æ–‡ä»¶" class="headerlink" title="åˆ›å»ºä¸€äº›æ–‡ä»¶"></a>åˆ›å»ºä¸€äº›æ–‡ä»¶</h2></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 tmp]# <span class="built_in">mkdir</span> xue</span><br><span class="line">[root@nfs01 tmp]# <span class="built_in">cd</span> xue/</span><br><span class="line">[root@nfs01 xue]# <span class="built_in">touch</span> xuexi-&#123;1..10&#125;.txt</span><br><span class="line">[root@nfs01 xue]# ll</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-10.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-1.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-2.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-3.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-4.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-5.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-6.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-7.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-8.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-9.txt</span><br></pre></td></tr></table></figure></li><li><ol start="2"><li><h3 id="ä¼ è¾“æ—¶æ’é™¤-xuexi-ã€1-2-3ã€‘æ–‡ä»¶"><a href="#ä¼ è¾“æ—¶æ’é™¤-xuexi-ã€1-2-3ã€‘æ–‡ä»¶" class="headerlink" title="ä¼ è¾“æ—¶æ’é™¤ xuexi-ã€1,2,3ã€‘æ–‡ä»¶"></a>ä¼ è¾“æ—¶æ’é™¤ xuexi-ã€1,2,3ã€‘æ–‡ä»¶</h3></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 xue]# rsync -avz . rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client --exclude=xuexi-&#123;1,2,3&#125;.txt</span><br><span class="line">sending incremental file list</span><br><span class="line">./</span><br><span class="line">xuexi-10.txt</span><br><span class="line">xuexi-4.txt</span><br><span class="line">xuexi-5.txt</span><br><span class="line">xuexi-6.txt</span><br><span class="line">xuexi-7.txt</span><br><span class="line">xuexi-8.txt</span><br><span class="line">xuexi-9.txt</span><br><span class="line"></span><br><span class="line">sent 424 bytes  received 160 bytes  1,168.00 bytes/sec</span><br><span class="line">total size is 0  speedup is 0.00</span><br><span class="line"></span><br><span class="line">[root@backup01 data]# ll</span><br><span class="line">total 112600</span><br><span class="line">-rw-r--r-- 1 rsync rsync 104857600 Mar  7 17:46 100m</span><br><span class="line">-rw-r--r-- 1 rsync rsync  10433130 Mar  7 17:15 etc.tar.gz</span><br><span class="line">-rw-r--r-- 1 rsync rsync         9 Mar  6 18:31 hostname</span><br><span class="line">-rw-r--r-- 1 rsync rsync       158 Jun  7  2013 hosts</span><br><span class="line">-rw-r--r-- 1 rsync rsync         0 Mar  7 17:54 xuexi-10.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync         0 Mar  7 17:54 xuexi-4.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync         0 Mar  7 17:54 xuexi-5.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync         0 Mar  7 17:54 xuexi-6.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync         0 Mar  7 17:54 xuexi-7.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync         0 Mar  7 17:54 xuexi-8.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync         0 Mar  7 17:54 xuexi-9.txt</span><br></pre></td></tr></table></figure></li><li><ol start="3"><li><h3 id="ä¹Ÿå¯ä»¥æ’é™¤-xuexi-1-3-txt-èŒƒå›´å†…æ–‡ä»¶"><a href="#ä¹Ÿå¯ä»¥æ’é™¤-xuexi-1-3-txt-èŒƒå›´å†…æ–‡ä»¶" class="headerlink" title="ä¹Ÿå¯ä»¥æ’é™¤ xuexi-{1.. 3}.txt èŒƒå›´å†…æ–‡ä»¶"></a>ä¹Ÿå¯ä»¥æ’é™¤ xuexi-{1.. 3}.txt èŒƒå›´å†…æ–‡ä»¶</h3></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 xue]# rsync -avz . rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client --exclude=xuexi-&#123;1..3&#125;.txt</span><br><span class="line">sending incremental file list</span><br><span class="line">./</span><br><span class="line">xuexi-10.txt</span><br><span class="line">xuexi-4.txt</span><br><span class="line">xuexi-5.txt</span><br><span class="line">xuexi-6.txt</span><br><span class="line">xuexi-7.txt</span><br><span class="line">xuexi-8.txt</span><br><span class="line">xuexi-9.txt</span><br><span class="line"></span><br><span class="line">sent 424 bytes  received 160 bytes  1,168.00 bytes/sec</span><br><span class="line">total size is 0  speedup is 0.00</span><br></pre></td></tr></table></figure></li></ul><h2 id="6-4-delete-æ•°æ®ä¸€è‡´"><a href="#6-4-delete-æ•°æ®ä¸€è‡´" class="headerlink" title="6.4  -delete  æ•°æ®ä¸€è‡´"></a>6.4  <code>-delete</code>  æ•°æ®ä¸€è‡´</h2><blockquote><p>ğŸ‘º æ³¨æ„ï¼šè¯¥é€‰é¡¹ä¼šå¼ºåˆ¶ä½¿åŒæ–¹æ•°æ®ä¸€è‡´ï¼ŒæœåŠ¡ç«¯å¤šä½™çš„æ•°æ®ä¼šç›´æ¥åˆ é™¤<br>    ä¸€èˆ¬ç”¨äºå®æ—¶åŒæ­¥ï¼Œå¤‡ä»½æ—¶ä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦ä½¿ç”¨</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## å…ˆæŸ¥çœ‹æœåŠ¡ç«¯çš„æ•°æ®æœ‰å“ªäº›</span></span></span><br><span class="line">[root@backup01 data]# ls</span><br><span class="line">100m  etc.tar.gz  hostname  hosts  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## æŸ¥çœ‹å®¢æˆ·ç«¯è¦æ¨é€çš„æ•°æ®</span></span> </span><br><span class="line">[root@nfs01 xue]# ll</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-10.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-1.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-2.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-3.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-4.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-5.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-6.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-7.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-8.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar  7 17:54 xuexi-9.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">####  ä¼šå‘ç°ä»–ä¼šåˆ é™¤æœåŠ¡ç«¯ä¸Šçš„æ–‡ä»¶ï¼Œå†ä¼ è¾“å®¢æˆ·ç«¯ä¸Šçš„æ•°æ®</span></span></span><br><span class="line">[root@nfs01 xue]# rsync -avz --delete  . rsync_backup@192.168.1.100::data --password-file=/etc/rsync.client </span><br><span class="line">sending incremental file list</span><br><span class="line">deleting .font-unix/</span><br><span class="line">deleting .XIM-unix/</span><br><span class="line">deleting .X11-unix/</span><br><span class="line">deleting .Test-unix/</span><br><span class="line">deleting .ICE-unix/</span><br><span class="line">deleting hosts</span><br><span class="line">deleting hostname</span><br><span class="line">deleting etc.tar.gz</span><br><span class="line">deleting 100m</span><br><span class="line">./</span><br><span class="line">xuexi-1.txt</span><br><span class="line">xuexi-10.txt</span><br><span class="line">xuexi-2.txt</span><br><span class="line">xuexi-3.txt</span><br><span class="line">xuexi-4.txt</span><br><span class="line">xuexi-5.txt</span><br><span class="line">xuexi-6.txt</span><br><span class="line">xuexi-7.txt</span><br><span class="line">xuexi-8.txt</span><br><span class="line">xuexi-9.txt</span><br><span class="line"></span><br><span class="line">sent 584 bytes  received 332 bytes  1,832.00 bytes/sec</span><br><span class="line">total size is 0  speedup is 0.00</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## æ­¤æ—¶æŸ¥çœ‹æœåŠ¡ç«¯çš„æ•°æ®ï¼Œä¼šå‘ç°åªå‰©ä¸‹xuexi-*çš„æ–‡ä»¶</span></span></span><br><span class="line">[root@backup01 data]# ll</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-10.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-1.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-2.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-3.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-4.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-5.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-6.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-7.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-8.txt</span><br><span class="line">-rw-r--r-- 1 rsync rsync 0 Mar  7 17:54 xuexi-9.txt</span><br></pre></td></tr></table></figure><h1 id="7-é¡¹ç›®æ¡ˆä¾‹ï¼šå®šæ—¶å¤‡ä»½"><a href="#7-é¡¹ç›®æ¡ˆä¾‹ï¼šå®šæ—¶å¤‡ä»½" class="headerlink" title="7. é¡¹ç›®æ¡ˆä¾‹ï¼šå®šæ—¶å¤‡ä»½"></a>7. é¡¹ç›®æ¡ˆä¾‹ï¼šå®šæ—¶å¤‡ä»½</h1><h2 id="7-1-é¡¹ç›®èƒŒæ™¯"><a href="#7-1-é¡¹ç›®èƒŒæ™¯" class="headerlink" title="7.1 é¡¹ç›®èƒŒæ™¯"></a>7.1 é¡¹ç›®èƒŒæ™¯</h2><ul><li><p>å¯èƒ½æºäºè€å¤§çš„ä¸€å¥è¯ï¼šä½ å»åšä¸€ä¸‹å¤‡ä»½</p></li><li><p>æ¥ä¸‹æ¥éœ€è¦ä½ è‡ªå·±æ€è€ƒï¼šæ€ä¹ˆå¤‡ä»½ã€å¤‡ä»½ä»€ä¹ˆå†…å®¹ï¼Ÿæ€ä¹ˆç»Ÿä¸€å­˜æ”¾å¤‡ä»½ï¼Œå¤‡ä»½ä¿å­˜å¤šé•¿æ—¶é—´ï¼Œéƒ½æ˜¯ä»€ä¹ˆç³»ç»Ÿã€ä»¥åŠç³»ç»Ÿä»€ä¹ˆç‰ˆæœ¬ã€‚</p></li><li><p>å¤‡ä»½ä»€ä¹ˆï¼Ÿ</p><ul><li>æ•°æ®åº“ã€å­˜å‚¨</li><li>é…ç½®æ–‡ä»¶</li><li>è„šæœ¬ã€ä»£ç â€¦</li><li>ç½‘ç«™ä»£ç </li><li>æ—¥å¿—ç­‰ç­‰</li><li>â€¦..</li></ul></li><li><p>æ€ä¹ˆå¤‡ä»½ï¼Ÿ</p><ul><li>tar æ‰“åŒ…å‹ç¼©+å®šæ—¶ä»»åŠ¡</li></ul></li><li><p>æ€ä¹ˆæ”¶é›†å­˜æ”¾å¤‡ä»½ï¼Ÿ</p><ul><li>rsync æœåŠ¡æ”¶é›†å¤‡ä»½ï¼ˆå®¢æˆ·ç«¯æ¨é€å¤‡ä»½åˆ° rsync æœåŠ¡ç«¯ï¼‰</li></ul></li></ul><h2 id="7-2-é¡¹ç›®æµç¨‹"><a href="#7-2-é¡¹ç›®æµç¨‹" class="headerlink" title="7.2 é¡¹ç›®æµç¨‹"></a>7.2 é¡¹ç›®æµç¨‹</h2><h3 id="aï¼‰ç¯å¢ƒå‡†å¤‡"><a href="#aï¼‰ç¯å¢ƒå‡†å¤‡" class="headerlink" title="aï¼‰ç¯å¢ƒå‡†å¤‡"></a>aï¼‰ç¯å¢ƒå‡†å¤‡</h3><table><thead><tr><th>è§’è‰²</th><th>ä¸»æœº</th><th>è¿è¡ŒæœåŠ¡</th></tr></thead><tbody><tr><td>å­˜æ”¾å¤‡ä»½</td><td>backup01</td><td>rsync æœåŠ¡ç«¯</td></tr><tr><td>ç”Ÿæˆå¤‡ä»½</td><td>nfs01</td><td>rsync å®¢æˆ·ç«¯ã€å…¶ä»–æœåŠ¡</td></tr><tr><td>ç”Ÿæˆå¤‡ä»½</td><td>web01</td><td>rsync å®¢æˆ·ç«¯ã€å…¶ä»–æœåŠ¡</td></tr><tr><td>â€¦â€¦</td><td></td><td></td></tr></tbody></table><h3 id="bï¼‰é¡¹ç›®æ­¥éª¤"><a href="#bï¼‰é¡¹ç›®æ­¥éª¤" class="headerlink" title="bï¼‰é¡¹ç›®æ­¥éª¤"></a>bï¼‰é¡¹ç›®æ­¥éª¤</h3><blockquote><p>ç›®å‰è¿™é‡Œåªåˆ—å‡ºäº†æ“ä½œæ­¥éª¤ï¼Œå·¥ä½œæ—¶è¿˜ä¼šæœ‰æ²Ÿé€šã€å¼€ä¼šã€å®šæœŸæ±‡æŠ¥ç­‰æ­¥éª¤ã€‚</p></blockquote><table><thead><tr><th>æ­¥éª¤è¯´æ˜</th><th>è¯¦ç»†å†…å®¹</th></tr></thead><tbody><tr><td>åˆ›å»º rsync æœåŠ¡ç«¯å¹¶è°ƒè¯•</td><td>é…ç½®æœåŠ¡ç«¯</td></tr><tr><td>rsync å®¢æˆ·ç«¯èŠ‚ç‚¹é…ç½®</td><td>ï¼ˆ1ï¼‰å¤‡ä»½<br>ï¼ˆ2ï¼‰æ¨é€<br>ï¼ˆ3ï¼‰æ¸…ç†</td></tr><tr><td>å…¶ä»–èŠ‚ç‚¹é…ç½®å®šæ—¶ä»»åŠ¡</td><td>å®šæ—¶è¿è¡Œå¤‡ä»½ä»»åŠ¡</td></tr><tr><td>å¤‡ä»½æœåŠ¡å™¨æ£€æŸ¥å¹¶å‘é€ç»“æœé‚®ä»¶</td><td></td></tr></tbody></table><h3 id="cï¼‰æœåŠ¡ç«¯é…ç½®åŠè°ƒè¯•"><a href="#cï¼‰æœåŠ¡ç«¯é…ç½®åŠè°ƒè¯•" class="headerlink" title="cï¼‰æœåŠ¡ç«¯é…ç½®åŠè°ƒè¯•"></a>cï¼‰æœåŠ¡ç«¯é…ç½®åŠè°ƒè¯•</h3><ol><li><h3 id="ä¿®æ”¹æœåŠ¡ç«¯é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹æœåŠ¡ç«¯é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æœåŠ¡ç«¯é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹æœåŠ¡ç«¯é…ç½®æ–‡ä»¶</h3></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /etc/rsyncd.conf</span><br><span class="line">fake super = <span class="built_in">yes</span>  </span><br><span class="line">uid = rsync   </span><br><span class="line">gid = rsync   </span><br><span class="line">use <span class="built_in">chroot</span> = no   </span><br><span class="line">max connections = 2000</span><br><span class="line"><span class="built_in">timeout</span> = 600</span><br><span class="line">pid file = /var/run/rsyncd.pid</span><br><span class="line">lock file = /var/run/rsync.lock</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span> file = /var/log/rsyncd.log</span><br><span class="line">ignore errors</span><br><span class="line"><span class="built_in">read</span> only = <span class="literal">false</span></span><br><span class="line">list = <span class="literal">false</span></span><br><span class="line">hosts allow = 192.168.1.0/24</span><br><span class="line"><span class="comment">###hosts deny = 192.168.1.0/32</span></span><br><span class="line">auth <span class="built_in">users</span> = rsync_backup</span><br><span class="line">secrets file = /etc/rsync.password</span><br><span class="line"></span><br><span class="line"><span class="comment">#############          </span></span><br><span class="line">[data]</span><br><span class="line">comment = my rsync</span><br><span class="line">path = /data</span><br><span class="line"></span><br><span class="line">[backup]   <span class="comment">##### æ·»åŠ æ–°çš„æ¨¡å—</span></span><br><span class="line">comment = shouji backups</span><br><span class="line">path = /backup </span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºå…±äº«ç›®å½•å¹¶ä¿®æ”¹æƒé™<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">mkdir</span> -p /backup</span><br><span class="line">[root@backup01 ~]# <span class="built_in">chown</span> -R rsync.rsync /backup</span><br><span class="line">[root@backup01 ~]# ll -d /backup/</span><br><span class="line">drwxr-xr-x 2 rsync rsync 6 Mar  8 13:50 /backup/</span><br></pre></td></tr></table></figure></li></ol><h3 id="dï¼‰å®¢æˆ·ç«¯é…ç½®"><a href="#dï¼‰å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="dï¼‰å®¢æˆ·ç«¯é…ç½®"></a>dï¼‰å®¢æˆ·ç«¯é…ç½®</h3><blockquote><p>01.åˆ›å»ºå¤‡ä»½è„šæœ¬</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /server/scripts/bak_conf.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#author: lsq 2024-03-08</span></span><br><span class="line"><span class="comment">#desc: å¤‡ä»½çš„ç›¸å…³é…ç½®-å®¢æˆ·ç«¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##01.å˜é‡</span></span><br><span class="line">ip=`hostname -I | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>`</span><br><span class="line">backup_dir=/backup/<span class="variable">$&#123;ip&#125;</span></span><br><span class="line">time=`<span class="built_in">date</span> +%F_%w`</span><br><span class="line">backup_file=conf-<span class="variable">$&#123;time&#125;</span>.tar.gz</span><br><span class="line">backup_server=192.168.1.100</span><br><span class="line"></span><br><span class="line"><span class="comment">##02.taræ‰“åŒ…å‹ç¼©</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$&#123;backup_dir&#125;</span></span><br><span class="line">tar -zcf <span class="variable">$&#123;backup_dir&#125;</span>/<span class="variable">$&#123;backup_file&#125;</span>  /etc/</span><br><span class="line"></span><br><span class="line"><span class="comment">##03.æ¨é€åˆ°æœåŠ¡ç«¯</span></span><br><span class="line">rsync -a <span class="variable">$&#123;backup_dir&#125;</span>  rsync_backup@<span class="variable">$&#123;backup_server&#125;</span>::backup --password-file=/etc/rsync.client</span><br><span class="line"></span><br><span class="line"><span class="comment">##04.åˆ é™¤æ—§å¤‡ä»½-7å¤©å‰çš„</span></span><br><span class="line">find <span class="variable">$&#123;backup_dir&#125;</span> -<span class="built_in">type</span> f -name  <span class="string">&quot;*.tar.gz&quot;</span>  -mtime +7 | xargs <span class="built_in">rm</span> -f</span><br></pre></td></tr></table></figure><blockquote><ol start="2"><li>åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼Œæ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å®šæ—¶ä»»åŠ¡</li></ol></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 ~]# vim /var/spool/cron/root</span><br><span class="line">* * * * *  sh /server/scripts/bak_conf.sh  &amp;&gt;&gt;/var/log/backup.log</span><br></pre></td></tr></table></figure><h3 id="eï¼‰å…¶ä»–èŠ‚ç‚¹é…ç½®å®¢æˆ·ç«¯"><a href="#eï¼‰å…¶ä»–èŠ‚ç‚¹é…ç½®å®¢æˆ·ç«¯" class="headerlink" title="eï¼‰å…¶ä»–èŠ‚ç‚¹é…ç½®å®¢æˆ·ç«¯"></a>eï¼‰å…¶ä»–èŠ‚ç‚¹é…ç½®å®¢æˆ·ç«¯</h3><blockquote><p>è¿™é‡Œä½¿ç”¨ web01 æœåŠ¡å™¨</p><h3 id="åœ¨é…ç½®å¥½çš„å®¢æˆ·ç«¯ä¸Šå¤åˆ¶å¤‡ä»½è„šæœ¬ã€crontab-æ–‡ä»¶ã€rsync-éªŒè¯å¯†ç æ–‡ä»¶åˆ°æ–°çš„å®¢æˆ·ç«¯"><a href="#åœ¨é…ç½®å¥½çš„å®¢æˆ·ç«¯ä¸Šå¤åˆ¶å¤‡ä»½è„šæœ¬ã€crontab-æ–‡ä»¶ã€rsync-éªŒè¯å¯†ç æ–‡ä»¶åˆ°æ–°çš„å®¢æˆ·ç«¯" class="headerlink" title="åœ¨é…ç½®å¥½çš„å®¢æˆ·ç«¯ä¸Šå¤åˆ¶å¤‡ä»½è„šæœ¬ã€crontab æ–‡ä»¶ã€rsync éªŒè¯å¯†ç æ–‡ä»¶åˆ°æ–°çš„å®¢æˆ·ç«¯"></a>åœ¨é…ç½®å¥½çš„å®¢æˆ·ç«¯ä¸Šå¤åˆ¶å¤‡ä»½è„šæœ¬ã€crontab æ–‡ä»¶ã€rsync éªŒè¯å¯†ç æ–‡ä»¶åˆ°æ–°çš„å®¢æˆ·ç«¯</h3></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 01.å¤‡ä»½è„šæœ¬</span></span><br><span class="line">scp  /server/scripts/bak_conf.sh root@192.168.1.20:/server/scripts/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 02.crontabå®šæ—¶ä»»åŠ¡æ–‡ä»¶</span></span><br><span class="line">scp /var/spool/cron/root 192.168.1.20:/var/spool/cron/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 03. rsyncå¯†ç æ–‡ä»¶</span></span><br><span class="line">scp /etc/rsync.client 192.168.1.20:/etc/</span><br></pre></td></tr></table></figure><ul><li>ç­‰å¾…ä¸€åˆ†é’Ÿåï¼Œcrontab è‡ªåŠ¨è¿è¡Œå¤‡ä»½è„šæœ¬</li><li>åœ¨æœåŠ¡ç«¯æŸ¥çœ‹æ˜¯å¦æœ‰æ–°å†…å®¹</li><li>ä¼šå‘ç°å·²ç»æœ‰äº† <code>192.168.1.20</code> æ–° ip å‡ºç°<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# tree /backup/</span><br><span class="line">/backup/</span><br><span class="line">â”œâ”€â”€ 192.168.1.103</span><br><span class="line">â”‚Â Â  â””â”€â”€ conf-2024-03-08_5.tar.gz</span><br><span class="line">â”œâ”€â”€ 192.168.1.20</span><br><span class="line">â”‚Â Â  â””â”€â”€ conf-2024-03-08_5.tar.gz</span><br><span class="line">â””â”€â”€ hostname</span><br><span class="line"></span><br><span class="line">2 directories, 3 files</span><br></pre></td></tr></table></figure></li></ul><h3 id="fï¼‰å¤‡ä»½æœåŠ¡å™¨æ£€æŸ¥åŠé‚®ä»¶"><a href="#fï¼‰å¤‡ä»½æœåŠ¡å™¨æ£€æŸ¥åŠé‚®ä»¶" class="headerlink" title="fï¼‰å¤‡ä»½æœåŠ¡å™¨æ£€æŸ¥åŠé‚®ä»¶"></a>fï¼‰å¤‡ä»½æœåŠ¡å™¨æ£€æŸ¥åŠé‚®ä»¶</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /server/scripts/check.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">##desc: æ£€æŸ¥å¤‡ä»½ã€æ¸…ç†æ—§å¤‡ä»½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##01.æ¸…ç†æ—§å¤‡ä»½</span></span><br><span class="line">find /backup -<span class="built_in">type</span> f -name <span class="string">&quot;*.tar.gz&quot;</span> -mtime +180 | xargs <span class="built_in">rm</span> -f</span><br><span class="line"></span><br><span class="line"><span class="comment">##02.ç»Ÿè®¡å¤‡ä»½ç»“æœ</span></span><br><span class="line">find /backup -<span class="built_in">type</span> f -name <span class="string">&quot;*.tar.gz&quot;</span> |\</span><br><span class="line">xargs <span class="built_in">ls</span> -lhd |\</span><br><span class="line">awk  -F<span class="string">&#x27;[ /]+&#x27;</span> <span class="string">&#x27;BEGIN&#123;print &quot;IP&quot;,&quot;å‹ç¼©æ–‡ä»¶&quot;,&quot;å¤§å°&quot;&#125; &#123;print $(NF-1),$NF,$5&#125;&#x27;</span> | column -t &gt; /server/scripts/result.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">##03.å‘é€é‚®ä»¶</span></span><br><span class="line">mail -s <span class="string">&quot;æ¯æ—¥å¤‡ä»½ç»“æœ&quot;</span> 2659612760@qq.com &lt;/server/scripts/result.txt</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ result.txt å†…å®¹<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /server/scripts/result.txt </span><br><span class="line">IP             å‹ç¼©æ–‡ä»¶                   å¤§å°</span><br><span class="line">192.168.1.103  conf-2024-03-08_5.tar.gz  10M</span><br><span class="line">192.168.1.20   conf-2024-03-08_5.tar.gz  10M</span><br></pre></td></tr></table></figure></li></ul><h3 id="gï¼‰å¢åŠ æ–‡ä»¶æ ¡éªŒåŠŸèƒ½"><a href="#gï¼‰å¢åŠ æ–‡ä»¶æ ¡éªŒåŠŸèƒ½" class="headerlink" title="gï¼‰å¢åŠ æ–‡ä»¶æ ¡éªŒåŠŸèƒ½"></a>gï¼‰å¢åŠ æ–‡ä»¶æ ¡éªŒåŠŸèƒ½</h3><blockquote><p>ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ–‡ä»¶å¯èƒ½ä¼šæŸåï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œ md5 æ£€éªŒ</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##ç»™/etc/ä¸‹é¢çš„æ–‡ä»¶åˆ›å»ºmd5å¹¶ä¿å­˜è‡³æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line">find /etc/ -<span class="built_in">type</span> f |xargs  <span class="built_in">md5sum</span> &gt;etc-all.md5</span><br><span class="line"></span><br><span class="line"><span class="comment">##æ ¡éªŒmd5</span></span><br><span class="line"><span class="built_in">md5sum</span> -c etc-all.md5 </span><br><span class="line"></span><br><span class="line"><span class="comment">## å°†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ä¿®æ”¹ï¼šæ¯”å¦‚åœ¨rsyncd.confé‡Œå¢åŠ ä¸€ä¸ª#å·</span></span><br><span class="line"><span class="built_in">md5sum</span> -c etc-all.md5 </span><br><span class="line">....</span><br><span class="line">/etc/rsyncd.conf: FAILED</span><br><span class="line">/etc/rsync.client: OK</span><br><span class="line"><span class="built_in">md5sum</span>: WARNING: 1 computed checksum did NOT match</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¦‚æœæ–‡ä»¶è¿‡å¤šï¼Œä¸å¤ªå¥½çœ‹ï¼Œå¯ä»¥ä½¿ç”¨--quietå‚æ•°ï¼Œåªæ˜¾ç¤ºæ ¡éªŒå¤±è´¥çš„</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">md5sum</span> -c --quiet etc-all.md5 </span><br><span class="line">/etc/rsyncd.conf: FAILED</span><br><span class="line"><span class="built_in">md5sum</span>: WARNING: 1 computed checksum did NOT match</span><br></pre></td></tr></table></figure><ul><li><p>å…·ä½“åº”ç”¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##å®¢æˆ·ç«¯å¤‡ä»½å®Œæˆçš„æ—¶å€™ï¼Œä¸ºå¤‡ä»½æ–‡ä»¶åˆ›å»ºmd5æ ¡éªŒæ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå®‰å…¨é˜²æŠ¤æªæ–½ï¼ˆçŸ¥è¯†è¡¥å……ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###ç»™ä¸€äº›å‘½ä»¤å’Œå›ºå®šé…ç½®æ–‡ä»¶ï¼Œè®¾ç½®md5ï¼Œå®šæœŸä»»åŠ¡è¿›è¡Œæ ¡éªŒï¼Œä»¥é˜²æ­¢ç—…æ¯’ä¿®æ”¹æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li></ul><ol><li><p>å®¢æˆ·ç«¯å¢åŠ ä¸€ä¸ªç”Ÿæˆ md5 çš„å‘½ä»¤å³å¯ã€ #2 .5ã€‘</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /server/scripts/bak_conf.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#author: lsq 2024-03-08</span></span><br><span class="line"><span class="comment">#desc: å¤‡ä»½çš„ç›¸å…³é…ç½®-å®¢æˆ·ç«¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##01.å˜é‡</span></span><br><span class="line">ip=`hostname -I | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>`</span><br><span class="line">backup_dir=/backup/<span class="variable">$&#123;ip&#125;</span></span><br><span class="line">time=`<span class="built_in">date</span> +%F_%w`</span><br><span class="line">backup_file=conf-<span class="variable">$&#123;time&#125;</span>.tar.gz</span><br><span class="line">backup_server=192.168.1.100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##02.taræ‰“åŒ…å‹ç¼©</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$&#123;backup_dir&#125;</span></span><br><span class="line">tar -zcf <span class="variable">$&#123;backup_dir&#125;</span>/<span class="variable">$&#123;backup_file&#125;</span>  /etc/</span><br><span class="line"></span><br><span class="line"><span class="comment">##2.5 åˆ›å»ºmd5</span></span><br><span class="line">find <span class="variable">$&#123;backup_dir&#125;</span>/<span class="variable">$&#123;backup_file&#125;</span> |xargs <span class="built_in">md5sum</span> &gt;<span class="variable">$&#123;backup_dir&#125;</span>/fingerprint.md5</span><br><span class="line"></span><br><span class="line"><span class="comment">##03.æ¨é€åˆ°æœåŠ¡ç«¯</span></span><br><span class="line">rsync -a <span class="variable">$&#123;backup_dir&#125;</span>  rsync_backup@<span class="variable">$&#123;backup_server&#125;</span>::backup --password-file=/etc/rsync.client</span><br><span class="line"></span><br><span class="line"><span class="comment">##04.åˆ é™¤æ—§å¤‡ä»½-7å¤©å‰çš„</span></span><br><span class="line">find <span class="variable">$&#123;backup_dir&#125;</span> -<span class="built_in">type</span> f -name  <span class="string">&quot;*.tar.gz&quot;</span>  -mtime +7 | xargs <span class="built_in">rm</span> -f</span><br></pre></td></tr></table></figure></li><li><p>ç­‰å¾…å®šæ—¶ä»»åŠ¡æ‰§è¡Œåï¼ŒæŸ¥çœ‹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯ä¸æ˜¯éƒ½æœ‰äº† md5 æ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### å®¢æˆ·ç«¯</span></span><br><span class="line">[root@nfs01 ~]# ll /backup/192.168.1.103/</span><br><span class="line">-rw-r--r-- 1 root root       81 Mar  9 15:58 fingerprint.md5</span><br><span class="line"></span><br><span class="line"><span class="comment">### æœåŠ¡ç«¯</span></span><br><span class="line">[root@backup01 ~]# ll /backup/192.168.1.103/</span><br><span class="line">-rw-r--r-- 1 rsync rsync       81 Mar  9 15:59 fingerprint.md5</span><br></pre></td></tr></table></figure></li><li><p>æœåŠ¡ç«¯åªæ˜¯æœ‰æ–‡ä»¶è¿˜ä¸è¡Œï¼Œè¿˜éœ€è¦è¿›è¡Œæ ¡éªŒï¼Œå¦åˆ™ä¸çŸ¥é“æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /server/scripts/check.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">##desc: æ£€æŸ¥å¤‡ä»½ã€æ¸…ç†æ—§å¤‡ä»½</span></span><br><span class="line"><span class="comment">###0. å˜é‡</span></span><br><span class="line">result_file=/server/scripts/result.txt</span><br><span class="line"><span class="comment">##01.æ¸…ç†æ—§å¤‡ä»½</span></span><br><span class="line">find /backup -<span class="built_in">type</span> f -name <span class="string">&quot;*.tar.gz&quot;</span> -mtime +180 | xargs <span class="built_in">rm</span> -f</span><br><span class="line"></span><br><span class="line"><span class="comment">##02.ç»Ÿè®¡å¤‡ä»½ç»“æœ</span></span><br><span class="line">find /backup -<span class="built_in">type</span> f -name <span class="string">&quot;*.tar.gz&quot;</span> |\</span><br><span class="line">xargs <span class="built_in">ls</span> -lhd |\</span><br><span class="line">awk  -F<span class="string">&#x27;[ /]+&#x27;</span> <span class="string">&#x27;BEGIN&#123;print &quot;IP&quot;,&quot;å‹ç¼©&quot;,&quot;å¤§å°&quot;&#125; &#123;print $(NF-1),$NF,$5&#125;&#x27;</span> | column -t &gt;<span class="variable">$result_file</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##2.5 æ ¡éªŒmd5</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ä¸‹é¢æ˜¯md5æ ¡éªŒç»“æœ&quot;</span> &gt;&gt;<span class="variable">$result_file</span></span><br><span class="line">find /backup/  -name <span class="string">&quot;fingerprint.md5&quot;</span> | xargs <span class="built_in">md5sum</span> -c &gt;&gt;<span class="variable">$result_file</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##03.å‘é€é‚®ä»¶</span></span><br><span class="line">mail -s <span class="string">&quot;æ¯æ—¥å¤‡ä»½ç»“æœ&quot;</span> 2659612760@qq.com &lt;<span class="variable">$result_file</span></span><br></pre></td></tr></table></figure></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> /server/scripts/result.txt </span><br><span class="line">IP             å‹ç¼©                      å¤§å°</span><br><span class="line">192.168.1.103  conf-2024-03-08_5.tar.gz  10M</span><br><span class="line">192.168.1.103  conf-2024-03-09_6.tar.gz  10M</span><br><span class="line">192.168.1.20   conf-2024-03-08_5.tar.gz  10M</span><br><span class="line">192.168.1.20   conf-2024-03-09_6.tar.gz  10M</span><br><span class="line">ä¸‹é¢æ˜¯md5æ ¡éªŒç»“æœ</span><br><span class="line">/backup/192.168.1.103/conf-2024-03-09_6.tar.gz: OK</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ‘ºğŸŒŸï¼šè¯¥è„šæœ¬è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå†è¯´â€¦..</p></blockquote><h2 id="7-3-é¡¹ç›®æ€»ç»“"><a href="#7-3-é¡¹ç›®æ€»ç»“" class="headerlink" title="7.3  é¡¹ç›®æ€»ç»“"></a>7.3  é¡¹ç›®æ€»ç»“</h2><ul><li>ç›®çš„ï¼šå¯¹æ•´ä¸ªç½‘ç«™çš„æ ¸å¿ƒæ•°æ®è¿›è¡Œå¤‡ä»½</li><li>ä½¿ç”¨åˆ°çš„æŠ€æœ¯ï¼š<ul><li>rsync å¤‡ä»½ï¼šå°†æ‰“åŒ…å¥½çš„å¤‡ä»½æ–‡ä»¶æ¨é€åˆ°æœåŠ¡ç«¯</li><li>å®šæ—¶ä»»åŠ¡ï¼šå®šæ—¶è¿è¡Œæ¨é€å‘½ä»¤</li><li>md5sumï¼šæ–‡ä»¶æ ¡éªŒ</li><li>é‚®ä»¶</li><li>shell è„šæœ¬ï¼šä¸‰å‰‘å®¢ã€findã€tar</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç»¼åˆæ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡æ¡£ </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NFSå­˜å‚¨</title>
      <link href="/2024/07/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/%E5%A4%87%E4%BB%BD%E4%B8%8E%E5%AD%98%E5%82%A8/02-NFS%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1/"/>
      <url>/2024/07/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/%E5%A4%87%E4%BB%BD%E4%B8%8E%E5%AD%98%E5%82%A8/02-NFS%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€nfs-æ¦‚è¿°"><a href="#ä¸€ã€nfs-æ¦‚è¿°" class="headerlink" title="ä¸€ã€nfs æ¦‚è¿°"></a>ä¸€ã€nfs æ¦‚è¿°</h1><ul><li><p>nfs æ˜¯ä»€ä¹ˆï¼Ÿ</p></li><li><p>å•çº¯çš„å­˜å‚¨ï¼šç¡¬ç›˜ã€u ç›˜ç­‰ç­‰</p></li><li><p><strong>nfsï¼šå…±äº«å­˜å‚¨ï¼ˆnetwork filesystemï¼‰ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ</strong></p><ul><li><strong>nfs ä¸»è¦ç”¨äº Linux ç³»ç»Ÿä¹‹é—´</strong></li><li>sambaï¼šå¯ç”¨äº linux ä¸ windows å…±äº«å­˜å‚¨</li><li>ftpï¼šwindowsã€linuxã€mac ä¹‹é—´å…±äº«</li></ul></li><li><p>åˆ†å¸ƒå¼å­˜å‚¨ï¼šFastDFSã€<strong>GlusterFSï¼ˆGFSï¼‰</strong>ï¼ŒHDFSï¼ˆå¤§æ•°æ®ï¼‰</p></li><li><p>ä¸ºä»€ä¹ˆä½¿ç”¨<br>[å¦‚æœæ²¡æœ‰ nfs å…±äº«]</p></li><li><p>A ä¸Šä¼ ä»¥åï¼Œåªæœ‰ web01 æœ‰å›¾ç‰‡ï¼Œè€Œæ­¤æ—¶ç”¨æˆ· B è®¿é—®çš„æ˜¯ web02 å°±ä¼šæ‰¾ä¸åˆ° A ä¸Šä¼ çš„å›¾ç‰‡</p></li></ul><p><img src="/images/202403291245681.png"></p><p>[å¦‚æœä½¿ç”¨äº† nfs]</p><ul><li>æ­¤æ—¶æ— è®ºæ˜¯å“ªä¸ªç”¨æˆ·ï¼Œéƒ½å¯ä»¥çœ‹åˆ° A ä¸Šä¼ çš„å›¾ç‰‡</li></ul><p><img src="/images/202403291245117.png"></p><ul><li>nfs å­˜æ”¾ä»€ä¹ˆï¼Ÿ</li><li>å­˜æ”¾ç”¨æˆ·ä¸Šä¼ çš„æ•°æ®ï¼ˆå›¾ç‰‡ã€è§†é¢‘ç­‰ç­‰ï¼‰</li></ul><h1 id="äºŒã€nfs-çš„å·¥ä½œåŸç†"><a href="#äºŒã€nfs-çš„å·¥ä½œåŸç†" class="headerlink" title="äºŒã€nfs çš„å·¥ä½œåŸç†"></a>äºŒã€nfs çš„å·¥ä½œåŸç†</h1><p><strong>- RPC å’Œ nfs çš„å…³ç³»</strong></p><blockquote><p>ğŸ‘ºï¼š ä»€ä¹ˆæ˜¯ RPCï¼Ÿ</p><ul><li>RPC æ˜¯ NFS çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç”±äº NFS æ²¡æœ‰å›ºå®šçš„ç«¯å£ï¼Œæ¯å¯åŠ¨ä¸€ä¸ªåŠŸèƒ½å°±éœ€è¦å¯åŠ¨ä¸€ä¸ªç«¯å£è¿›è¡Œä¼ è¾“æ•°æ®ï¼Œå®ƒä¼šéšæœºå¯ç”¨ä¸€äº›æœªè¢«ä½¿ç”¨çš„ç«¯å£è¿›è¡Œä¼ è¾“ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨RPCæœåŠ¡</li><li>RPC çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯è®°å½• NFS åŠŸèƒ½æ‰€å¯¹åº”çš„ç«¯å£ï¼Œå¹¶å°† NFS å®¢æˆ·ç«¯è¯·æ±‚æ—¶å°†å¯¹åº”çš„ä¿¡æ¯ä¼ é€’ç»™å®¢æˆ·ç«¯ï¼Œä»è€Œä½¿å®¢æˆ·ç«¯å¯ä»¥æ­£ç¡®è¿æ¥åˆ° NFS æœåŠ¡</li></ul></blockquote><ul><li>NFS å·¥ä½œæµç¨‹</li></ul><p><img src="/images/202403291246254.png"></p><h1 id="ä¸‰ã€å®æˆ˜"><a href="#ä¸‰ã€å®æˆ˜" class="headerlink" title="ä¸‰ã€å®æˆ˜"></a>ä¸‰ã€å®æˆ˜</h1><table><thead><tr><th align="left">ä¸»æœº</th><th align="left">ip</th><th align="left">è§’è‰²</th></tr></thead><tbody><tr><td align="left">nfs01</td><td align="left">192.168.1.40</td><td align="left">æœåŠ¡ç«¯</td></tr><tr><td align="left">web01</td><td align="left">192.168.1.20</td><td align="left">å®¢æˆ·ç«¯</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nfsæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½å®‰è£…ä¸Šnfsã€rpc</span></span><br><span class="line">yum install -y nfs-utils rpcbind</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##å…ˆå¯åŠ¨rpcbind</span></span><br><span class="line">[root@nfs01 ~]# systemctl start rpcbind</span><br><span class="line"></span><br><span class="line"><span class="comment">###æŸ¥çœ‹rpcä¿¡æ¯ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰nfsä¿¡æ¯</span></span><br><span class="line">[root@nfs01 ~]# rpcinfo -p</span><br><span class="line">   program vers proto   port  service</span><br><span class="line">    100000    4   tcp    111  portmapper</span><br><span class="line">    100000    3   tcp    111  portmapper</span><br><span class="line">    100000    2   tcp    111  portmapper</span><br><span class="line">    100000    4   udp    111  portmapper</span><br><span class="line">    100000    3   udp    111  portmapper</span><br><span class="line">    100000    2   udp    111  portmapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###å¯åŠ¨NFS</span></span><br><span class="line">[root@nfs01 ~]# systemctl start nfs</span><br><span class="line"></span><br><span class="line"><span class="comment">## å†æ¬¡æŸ¥çœ‹rpcä¿¡æ¯ï¼Œä¼šå¤šäº†ä¸€äº›nfsçš„ä¿¡æ¯</span></span><br><span class="line">[root@nfs01 ~]# rpcinfo -p</span><br><span class="line">   program vers proto   port  service</span><br><span class="line">    100000    4   tcp    111  portmapper</span><br><span class="line">    100000    3   tcp    111  portmapper</span><br><span class="line">    100000    2   tcp    111  portmapper</span><br><span class="line">    100000    4   udp    111  portmapper</span><br><span class="line">    100000    3   udp    111  portmapper</span><br><span class="line">    100000    2   udp    111  portmapper</span><br><span class="line">    100024    1   udp  55257  status</span><br><span class="line">    100024    1   tcp  51640  status</span><br><span class="line">    100005    1   udp  20048  mountd</span><br><span class="line">    100005    1   tcp  20048  mountd</span><br><span class="line">    100005    2   udp  20048  mountd</span><br><span class="line">    100005    2   tcp  20048  mountd</span><br><span class="line">    100005    3   udp  20048  mountd</span><br><span class="line">    100005    3   tcp  20048  mountd</span><br><span class="line">    100003    3   tcp   2049  nfs</span><br><span class="line">    100003    4   tcp   2049  nfs</span><br><span class="line">    100227    3   tcp   2049  nfs_acl</span><br><span class="line">    100003    3   udp   2049  nfs</span><br><span class="line">    100003    4   udp   2049  nfs</span><br><span class="line">    100227    3   udp   2049  nfs_acl</span><br><span class="line">    100021    1   udp  49965  nlockmgr</span><br><span class="line">    100021    3   udp  49965  nlockmgr</span><br><span class="line">    100021    4   udp  49965  nlockmgr</span><br><span class="line">    100021    1   tcp  42359  nlockmgr</span><br><span class="line">    100021    3   tcp  42359  nlockmgr</span><br><span class="line">    100021    4   tcp  42359  nlockmgr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line">[root@nfs01 ~]# systemctl <span class="built_in">enable</span> rpcbind nfs</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/nfs-server.service to /usr/lib/systemd/system/nfs-server.service.</span><br></pre></td></tr></table></figure><p><code>å‘½ä»¤æ ¼å¼ï¼š/data 192.168.168.1.0/24(rw)</code></p><blockquote><p>æ³¨æ„ï¼šæŒ‚è½½ç›®å½•å’Œ ip ä¹‹é—´æœ‰ç©ºæ ¼ï¼Œip å’Œæ‹¬å·ä¹‹é—´æ²¡æœ‰ç©ºæ ¼</p></blockquote><p><img src="/images/202403291247408.png"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹nfsé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /etc/exports</span><br><span class="line">/data 192.168.1.0/24(rw)</span><br><span class="line"></span><br><span class="line"><span class="comment">## å®‰è£…å®Œæˆåï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé»˜è®¤ç”¨æˆ·</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">id</span> nfsnobody</span><br><span class="line">uid=65534(nfsnobody) gid=65534(nfsnobody) <span class="built_in">groups</span>=65534(nfsnobody)</span><br><span class="line"></span><br><span class="line"><span class="comment">##æ­¤æ—¶ä¸è¦é‡å¯nfsï¼Œè¿˜æ²¡æœ‰åˆ›å»ºå…±äº«ç›®å½•</span></span><br><span class="line"><span class="comment">###åˆ›å»ºç›®å½•ï¼Œä¿®æ”¹ç”¨æˆ·å’Œç»„</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">mkdir</span> /data</span><br><span class="line">[root@nfs01 ~]# <span class="built_in">chown</span> -R nfsnobody.nfsnobody /data/</span><br><span class="line">[root@nfs01 ~]# ll -d /data/</span><br><span class="line">drwxr-xr-x 2 nfsnobody nfsnobody 6 Aug 22 19:41 /data/</span><br><span class="line"></span><br><span class="line">[root@nfs01 ~]# systemctl restart nfs</span><br><span class="line"></span><br><span class="line"><span class="comment">## åŠ ipæŸ¥çœ‹æŒ‡å®šipä¸‹æ˜¯å¦æœ‰å…±äº«ç›®å½•</span></span><br><span class="line"><span class="comment">## ä¸åŠ ipæŸ¥çœ‹å½“å‰æœºå™¨ä¸‹æœ‰æ²¡æœ‰å…±äº«ç›®å½•</span></span><br><span class="line">[root@nfs01 ~]# showmount -e 192.168.1.40</span><br><span class="line">Export list <span class="keyword">for</span> 192.168.1.40:</span><br><span class="line">/data 192.168.1.0/24</span><br><span class="line">[root@nfs01 ~]# showmount -e </span><br><span class="line">Export list <span class="keyword">for</span> nfs01:</span><br><span class="line">/data 192.168.1.0/24</span><br></pre></td></tr></table></figure><p><code>[æµ‹è¯•]</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯æœ¬åœ°æŒ‚è½½</span></span><br><span class="line">[root@nfs01 ~]# ll /mnt/</span><br><span class="line">total 0</span><br><span class="line">[root@nfs01 ~]# mount -t nfs 192.168.1.40:/data /mnt</span><br><span class="line">[root@nfs01 ~]# <span class="built_in">touch</span> /mnt/1.txt</span><br><span class="line">[root@nfs01 ~]# ll /mnt/</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:46 1.txt</span><br><span class="line">[root@nfs01 ~]# ll /data/</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:46 1.txt</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®¢æˆ·ç«¯web01æŒ‚è½½</span></span><br><span class="line">[root@web01 script]# showmount -e 192.168.1.40</span><br><span class="line">Export list <span class="keyword">for</span> 192.168.1.40:</span><br><span class="line">/data 192.168.1.0/24</span><br><span class="line"></span><br><span class="line">[root@web01 script]# mount -t nfs 192.168.1.40:/data /server/bbz</span><br><span class="line">[root@web01 script]# ll -d /server/bbz/</span><br><span class="line">drwxr-xr-x 2 nfsnobody nfsnobody 19 Aug 22 19:46 /server/bbz/</span><br><span class="line"></span><br><span class="line">[root@web01 script]# ll /server/bbz/</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:46 1.txt</span><br><span class="line"></span><br><span class="line">[root@web01 script]# <span class="built_in">touch</span> /server/bbz/&#123;2..100&#125;.txt</span><br><span class="line">[root@web01 script]# ll /server/bbz/</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:50 100.txt</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:50 10.txt</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:50 11.txt</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:50 12.txt</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"><span class="comment">## æˆ‘ä»¬å»nfsæœºå™¨ä¸Šçœ‹çœ‹æ˜¯ä¸æ˜¯ä¹Ÿæœ‰</span></span><br><span class="line">[root@nfs01 ~]# ll /data/</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:50 100.txt</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:50 10.txt</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 22 19:50 11.txt</span><br><span class="line">....</span><br></pre></td></tr></table></figure><h1 id="å››ã€æœåŠ¡ç«¯å‚æ•°"><a href="#å››ã€æœåŠ¡ç«¯å‚æ•°" class="headerlink" title="å››ã€æœåŠ¡ç«¯å‚æ•°"></a>å››ã€æœåŠ¡ç«¯å‚æ•°</h1><p><img src="/images/202403291247408.png"></p><blockquote><p>æœ¬èŠ‚ä¸»è¦è®²è§£æœ€åé¢çš„å‚æ•°ï¼ˆrwã€syncâ€¦.ï¼‰</p></blockquote><table><thead><tr><th align="left">nfs æœåŠ¡ç«¯ï¼Œå…±äº«å‚æ•°</th><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left">rw</td><td align="left">å¯è¯»å†™</td><td align="left"></td></tr><tr><td align="left">ro</td><td align="left">åªè¯»&nbsp; read only</td><td align="left"></td></tr><tr><td align="left">sync</td><td align="left">åŒæ­¥å†™å…¥</td><td align="left">åŒæ—¶å°†æ•°æ®å†™å…¥å†…å­˜å’Œç£ç›˜ä¸­ï¼Œä¸ä¼šä¸¢å¤±æ•°æ®</td></tr><tr><td align="left">async</td><td align="left">å¼‚æ­¥å†™å…¥</td><td align="left">ä¼˜å…ˆå°†æ•°æ®å†™å…¥å†…å­˜ï¼Œå†å†™å…¥ç£ç›˜ï¼Œæ•ˆç‡æ›´é«˜ï¼Œä½†å¯èƒ½ä¼šä¸¢å¤±æ•°æ®</td></tr><tr><td align="left">anonuid</td><td align="left">anonymousï¼šæŒ‡å®šç”¨æˆ·uid</td><td align="left">æŒ‡å®šå®¢æˆ·ç«¯æ˜ å°„åˆ°æœåŠ¡ç«¯ä½¿ç”¨çš„ç”¨æˆ·</td></tr><tr><td align="left">anongid</td><td align="left">æŒ‡å®šç”¨æˆ·gid</td><td align="left">æŒ‡å®šå®¢æˆ·ç«¯æ˜ å°„åˆ°æœåŠ¡ç«¯ä½¿ç”¨çš„ç”¨æˆ·ç»„</td></tr><tr><td align="left">root_squash</td><td align="left">NFS å®¢æˆ·ç«¯ä»¥ root ç®¡ç†å‘˜è®¿é—®æ—¶ï¼Œæ˜ å°„ä¸º NFS çš„åŒ¿åç”¨æˆ·ï¼ˆä¸å¸¸ç”¨ï¼‰</td><td align="left">root&nbsp; â€“&gt; nfsnobody</td></tr><tr><td align="left">no_root_squash</td><td align="left">NFSå®¢æˆ·ç«¯ä»¥rootè®¿é—®æ—¶ï¼Œæ˜ å°„ä¸ºNFSæœåŠ¡ç«¯çš„rootç”¨æˆ·ï¼ˆä¸å¸¸ç”¨ï¼‰</td><td align="left">å®¢æˆ·ç«¯root&nbsp; â€“&gt;&nbsp; æœåŠ¡ç«¯root</td></tr><tr><td align="left">all_squash</td><td align="left">æ— è®ºNFSå®¢æˆ·ç«¯ä½¿ç”¨ä»€ä¹ˆç”¨æˆ·è®¿é—®ï¼Œå‡æ˜ å°„ä¸ºåŒ¿åç”¨æˆ·</td><td align="left">all â€“&gt;&nbsp; nfsnobody</td></tr><tr><td align="left">no_all_squash</td><td align="left">æ— è®ºå®¢æˆ·ç«¯ä½¿ç”¨ä»€ä¹ˆç”¨æˆ·è®¿é—®ï¼Œéƒ½ä¸è¿›è¡Œå‹ç¼©</td><td align="left">all&nbsp; â€“&gt;&nbsp; all</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nfsæŒ‚è½½ï¼Œrwä¸ro</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /etc/exports</span><br><span class="line">/data/blog 192.168.1.0/24(rw)</span><br><span class="line">/data/rw   192.168.1.0/24(rw)</span><br><span class="line">/data/ro   192.168.1.0/24(ro)</span><br><span class="line"></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">mkdir</span> -p /data/&#123;rw,ro&#125;</span><br><span class="line"></span><br><span class="line">[root@nfs01 ~]# systemctl restart nfs</span><br><span class="line">[root@nfs01 ~]# showmount -e</span><br><span class="line">Export list <span class="keyword">for</span> nfs01:</span><br><span class="line">/data/ro   192.168.1.0/24</span><br><span class="line">/data/rw   192.168.1.0/24</span><br><span class="line">/data/blog 192.168.1.0/24</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æœ¬åœ°æŒ‚è½½ä¸€ä¸‹</span></span><br><span class="line"><span class="comment">### rwæ­£å¸¸å†™å…¥</span></span><br><span class="line">[root@nfs01 ~]# mount -t nfs 192.168.1.40:/data/rw /mnt</span><br><span class="line">[root@nfs01 ~]# <span class="built_in">chown</span> -R nfsnobody.nfsnobody /data</span><br><span class="line">[root@nfs01 ~]# <span class="built_in">touch</span> /mnt/1.txt</span><br><span class="line">[root@nfs01 ~]# ll /mnt/</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 25 19:08 1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">### å»æ‰æŒ‚è½½ç‚¹</span></span><br><span class="line">[root@nfs01 ~]# umount -v /mnt/</span><br><span class="line">/mnt: nfs4 mount point detected</span><br><span class="line">/mnt: umounted</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‚è½½roå¯è¯»ç›®å½•ï¼Œæ— æ³•å†™å…¥æ–‡ä»¶</span></span><br><span class="line">[root@nfs01 ~]# mount -t nfs 192.168.1.40:/data/ro /mnt/</span><br><span class="line">[root@nfs01 ~]# <span class="built_in">touch</span> /mnt/1.txt</span><br><span class="line"><span class="built_in">touch</span>: cannot <span class="built_in">touch</span> â€˜/mnt/1.txtâ€™: Read-only file system</span><br></pre></td></tr></table></figure><p>[sync å’Œ async]</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¦‚æœæˆ‘ä»¬ä¸é…ç½®ï¼Œåˆ™é»˜è®¤ä½¿ç”¨sync</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /var/lib/nfs/etab </span><br><span class="line">/data/rw192.168.1.0/24(rw,<span class="built_in">sync</span>,wdelay,hide,nocrossmnt,secure,root_squash,no_all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,root_squash,no_all_squash)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Œè¿›è¡Œæµ‹è¯•</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">rm</span> -rf /data/rw/*</span><br><span class="line"><span class="comment"># åŠ¨æ€æŸ¥çœ‹ç›®å½•å†…å®¹</span></span><br><span class="line">[root@nfs01 ~]# watch <span class="built_in">ls</span> -l /data/rw/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯å†™å…¥å¤§æ–‡ä»¶</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/tmp/big bs=1M count=500</span><br><span class="line">500+0 records <span class="keyword">in</span></span><br><span class="line">500+0 records out</span><br><span class="line">524288000 bytes (524 MB) copied, 5.18806 s, 101 MB/s</span><br><span class="line">[root@web01 ~]# <span class="built_in">cp</span> /tmp/big /mnt/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä½ ä¼šå‘ç°æœåŠ¡ç«¯ç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶ä¸æ˜¯ç›´æ¥å…¨éƒ¨å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯åœ¨æ…¢æ…¢å˜å¤§</span></span><br></pre></td></tr></table></figure><p><img src="/images/202403291249497.png"></p><p><img src="/images/202403291250570.png"></p><p>[anonuid å’Œ anongid]</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###  é»˜è®¤ä½¿ç”¨äº†è‡ªåŠ¨åˆ›å»ºçš„nfsnobodyç”¨æˆ·å’Œç»„</span></span><br><span class="line"><span class="comment">###  anonuid=65534,anongid=65534</span></span><br><span class="line"></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /var/lib/nfs/etab </span><br><span class="line">/data/rw192.168.1.0/24(rw,<span class="built_in">sync</span>,wdelay,hide,nocrossmnt,secure,root_squash,no_all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,root_squash,no_all_squash)</span><br></pre></td></tr></table></figure><ul><li>ç”¨æˆ·å‹ç¼©</li><li>é»˜è®¤ï¼šroot_squash, no_all_squash</li></ul><p><img src="/images/202403291250686.png"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## nfsé»˜è®¤çš„è®¾ç½®ï¼Œå½“å®¢æˆ·ç«¯ä½¿ç”¨rootè®¿é—®æ—¶å‹ç¼©ä¸ºåŒ¿åç”¨æˆ·</span></span><br><span class="line"><span class="comment">## å…¶ä»–ç”¨æˆ·è®¿é—®æ—¶ï¼Œä¸è¿›è¡Œå‹ç¼©</span></span><br><span class="line">/data/rw192.168.1.0/24(rw,<span class="built_in">sync</span>,wdelay,hide,nocrossmnt,secure,root_squash,no_all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,root_squash,no_all_squash)</span><br><span class="line"></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /etc/exports</span><br><span class="line">/data/blog 192.168.1.0/24(rw)</span><br><span class="line">/data/rw   192.168.1.0/24(rw)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## å…¶ä»–ç”¨æˆ·åªæœ‰è®¿é—®æƒé™ï¼Œæ²¡æœ‰å†™æƒé™</span></span><br><span class="line">[zzz@web01 ~]$ <span class="built_in">touch</span> /mnt/3.txt</span><br><span class="line"><span class="built_in">touch</span>: cannot <span class="built_in">touch</span> â€˜/mnt/3.txtâ€™: Permission denied</span><br><span class="line">[zzz@web01 ~]$ ll /mnt/</span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 25 22:00 1.txt</span><br><span class="line">-rw-rw-r-- 1 nfsnobody nfsnobody 0 Aug 25 22:00 2.txt</span><br></pre></td></tr></table></figure><ul><li><strong>all_squash</strong> ï¼ˆå¸¸ç”¨ï¼‰</li><li>ä¸è®ºä»€ä¹ˆç”¨æˆ·éƒ½è¿›è¡Œå‹ç¼©<br><img src="/images/202403291251648.png"></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å®¢æˆ·ç«¯ä½¿ç”¨rootç”¨æˆ·åˆ›å»ºæ–‡ä»¶</span></span></span><br><span class="line">[root@nfs01 ~]# touch /mnt/1.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æœåŠ¡ç«¯æŸ¥çœ‹åˆ›å»ºçš„æ–‡ä»¶uidã€gidï¼Œä¼šå‘ç°è¢«å‹ç¼©äº†</span></span><br><span class="line">-rw-r--r-- 1 nfsnobody nfsnobody 0 Aug 25 22:00 1.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># å®¢æˆ·ç«¯ä½¿ç”¨æ™®é€šç”¨æˆ·åˆ›å»ºæ–‡ä»¶</span></span></span><br><span class="line">[root@nfs01 ~]# su - zzz</span><br><span class="line">[zzz@nfs01 ~]$ touch /mnt/2.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># æœåŠ¡ç«¯æŸ¥çœ‹</span></span></span><br><span class="line">-rw-rw-r-- 1 nfsnobody nfsnobody 0 Aug 25 22:00 2.txt</span><br></pre></td></tr></table></figure><ul><li><strong>all_squash, anonuid+anongid</strong> ï¼ˆå¸¸ç”¨ï¼‰</li><li>å‹ç¼©ä¸ºæŒ‡å®šç”¨æˆ·ï¼Œé˜²æ­¢ä¸€äº›ç”¨æˆ·æƒé™é—®é¢˜</li></ul><p><img src="/images/202403291252397.png"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯åˆ›å»ºæŒ‡å®šç”¨æˆ·</span></span><br><span class="line">groupadd -g 888 www</span><br><span class="line">useradd -s /sbin/nologin -M -u 888 -g 888 www</span><br><span class="line"><span class="built_in">id</span> www</span><br><span class="line">uid=888(www) gid=888(www) <span class="built_in">groups</span>=888(www)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…±äº«ç›®å½•ä¸ºæŒ‡å®šç”¨æˆ·ï¼Œå¦åˆ™å®¢æˆ·ç«¯æ²¡æœ‰å†™å…¥æƒé™</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">chown</span> -R www.www /data/rw</span><br><span class="line">[root@nfs01 ~]# ll -d /data/rw</span><br><span class="line">drwxr-xr-x 2 www www 32 Aug 25 22:00 /data/rw</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@nfs01 ~]# <span class="built_in">cat</span> /etc/exports</span><br><span class="line">/data/blog 192.168.1.0/24(rw)</span><br><span class="line">/data/rw   192.168.1.0/24(rw,all_squash,anonuid=888,anongid=888)</span><br><span class="line"></span><br><span class="line"><span class="comment">## æµ‹è¯•</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">touch</span> /mnt/q.txt</span><br><span class="line">[root@web01 ~]# su - zzz</span><br><span class="line">Last login: Fri Aug 25 22:43:04 CST 2023 on pts/0</span><br><span class="line">[zzz@web01 ~]$ <span class="built_in">touch</span> /mnt/as.txt</span><br><span class="line"></span><br><span class="line">[root@nfs01 ~]# ll  /data/rw</span><br><span class="line">-rw-rw-r-- 1 www www 0 Aug 25 22:46 as.txt</span><br><span class="line">-rw-r--r-- 1 www www 0 Aug 25 22:46 q.txt</span><br></pre></td></tr></table></figure><h1 id="äº”ã€å®¢æˆ·ç«¯æŒ‚è½½å‚æ•°"><a href="#äº”ã€å®¢æˆ·ç«¯æŒ‚è½½å‚æ•°" class="headerlink" title="äº”ã€å®¢æˆ·ç«¯æŒ‚è½½å‚æ•°"></a>äº”ã€å®¢æˆ·ç«¯æŒ‚è½½å‚æ•°</h1><ul><li>å®¢æˆ·ç«¯æŒ‚è½½ï¼šmount å‘½ä»¤</li><li>æŒ‚è½½ä¿¡æ¯æ–‡ä»¶è·¯å¾„ï¼š&#x2F;proc&#x2F;mounts</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# grep 192.168.1.40 /proc/mounts </span><br><span class="line">192.168.1.40:/data/rw /mnt nfs4 rw,relatime,vers=4.1,rsize=131072,wsize=131072,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,clientaddr=192.168.1.20,local_lock=none,addr=192.168.1.40 0 0</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æè¿°</th><th align="left"></th></tr></thead><tbody><tr><td align="left">-t</td><td align="left">æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹</td><td align="left">æœ¬åœ°ï¼šxfsã€ext4&#x2F;ext3<div>è¿œç¨‹ï¼šnfs ç­‰ç­‰</div></td></tr><tr><td align="left">-o</td><td align="left">æŒ‡å®šæŒ‚è½½è¯¦ç»†å‚æ•°</td><td align="left"></td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æœ‰æ—¶å€™å¸è½½å…±äº«ç›®å½•ä¼šå‡ºç°å¡ä½å’ŒæŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `-lf` å‚æ•°å¼ºåˆ¶å¸è½½ </span></span><br><span class="line">[root@web01 ~]# umount -lf /mnt/</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nfså®¢æˆ·ç«¯æŒ‚è½½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `-o`å°†å¯è¯»å†™ç›®å½•æŒ‚è½½ä¸ºåªè¯»</span></span><br><span class="line"><span class="comment">## ro åˆ™ä¸ºåªè¯»</span></span><br><span class="line">[root@web01 ~]# mount -t nfs -o ro 192.168.1.40:/data/rw /mnt</span><br><span class="line">[root@web01 ~]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">devtmpfs                 898M     0  898M   0% /dev</span><br><span class="line">tmpfs                    910M     0  910M   0% /dev/shm</span><br><span class="line">tmpfs                    910M  9.6M  901M   2% /run</span><br><span class="line">tmpfs                    910M     0  910M   0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/centos-root   17G  7.2G  9.9G  43% /</span><br><span class="line">/dev/sda1               1014M  151M  864M  15% /boot</span><br><span class="line">tmpfs                    182M     0  182M   0% /run/user/0</span><br><span class="line">192.168.1.40:/data/rw     17G  1.9G   16G  11% /mnt</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# grep 192.168.1.40 /proc/mounts </span><br><span class="line">192.168.1.40:/data/rw /mnt nfs4 ro,relatime,vers=4.1,rsize=131072,wsize=131072,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,clientaddr=192.168.1.20,local_lock=none,addr=192.168.1.40 0 0</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# <span class="built_in">ls</span> /mnt/</span><br><span class="line">as.txt  q.txt</span><br><span class="line">[root@web01 ~]# <span class="built_in">touch</span> /mnt/3.txt</span><br><span class="line"><span class="built_in">touch</span>: cannot <span class="built_in">touch</span> â€˜/mnt/3.txtâ€™: Read-only file system</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## å°†ä¸Šé¢çš„roä¿®æ”¹ä¸ºrw</span></span><br><span class="line">[root@web01 ~]# mount -o rw,remount /mnt</span><br><span class="line">[root@web01 ~]# grep 192.168.1.40 /proc/mounts </span><br><span class="line">192.168.1.40:/data/rw /mnt nfs4 rw,relatime,vers=4.1,rsize=131072,wsize=131072,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,clientaddr=192.168.1.20,local_lock=none,addr=192.168.1.40 0 0</span><br></pre></td></tr></table></figure><ul><li><p><code>æ•…éšœæ¡ˆä¾‹ï¼š</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èƒŒæ™¯ï¼šä»¥ä¸ºå†…ä¸€äº›åŸå› ç£ç›˜æ•…éšœï¼Œæ•´ä¸ªç£ç›˜ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰å˜ä¸ºåªè¯»æ¨¡å¼ï¼ŒæŠ¥é”™ä¸ºï¼šRead-only file system</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’æŸ¥ï¼šæŸ¥è¯¢å…·ä½“æ˜¯å“ªä¸ªåˆ†åŒºå˜ä¸ºåªè¯»ï¼Œä¾‹å¦‚/mntåˆ†åŒºåªè¯»</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å†³ï¼šmount -o  rw,remount /mnt</span></span><br></pre></td></tr></table></figure></li><li><p><code>æ°¸ä¹…æŒ‚è½½</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬ç°åœ¨ä½¿ç”¨å‘½ä»¤æŒ‚è½½ï¼Œéƒ½æ˜¯ä¸´æ—¶çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ–¹æ³•1: å†™å…¥/etc/rc.local</span></span><br><span class="line"><span class="comment">## æ³¨æ„ï¼š/etc/rc.d/rc.localå¿…é¡»æœ‰æ‰§è¡Œæƒé™ chown +x</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">chmod</span> +x /etc/rc.d/rc.local </span><br><span class="line">[root@web01 ~]# ll /etc/rc.d/rc.local </span><br><span class="line">-rwxr-xr-x. 1 root root 473 Oct  2  2020 /etc/rc.d/rc.local</span><br><span class="line">[root@web01 ~]# <span class="built_in">tail</span> -1 /etc/rc.local </span><br><span class="line">mount -t nfs -o rw 192.168.1.40:/data/rw /mnt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ–¹æ³•2ï¼šå†™å…¥/etc/fstabé‡Œ</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">tail</span> -1 /etc/fstab </span><br><span class="line"><span class="comment"># è¿œç¨‹å…±äº«ç›®å½•ip+è·¯å¾„    #æœ¬åœ°æŒ‚è½½ç›®å½•  #æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿç±»å‹  #å‚æ•°ï¼ˆä»¥åå¯ä»¥å†™rwç­‰ç­‰ï¼‰ #0 0</span></span><br><span class="line">192.168.1.40:/data/rw  /code/blog  nfs defaults 0 0</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h1 id="å…­ã€-NFS-å­˜å‚¨å°ç»“"><a href="#å…­ã€-NFS-å­˜å‚¨å°ç»“" class="headerlink" title="å…­ã€ NFS å­˜å‚¨å°ç»“"></a>å…­ã€ NFS å­˜å‚¨å°ç»“</h1><h2 id="1-NFS-å­˜å‚¨ä¼˜ç‚¹"><a href="#1-NFS-å­˜å‚¨ä¼˜ç‚¹" class="headerlink" title="1. NFS å­˜å‚¨ä¼˜ç‚¹"></a>1. NFS å­˜å‚¨ä¼˜ç‚¹</h2><ul><li>01ï¼šNFS æ–‡ä»¶ç³»ç»Ÿç®€å•æ˜“ç”¨ã€æ–¹ä¾¿éƒ¨ç½²ã€æ•°æ®å¯é ã€æœåŠ¡ç¨³å®šï¼Œé€‚åˆä¸­å°å‹ä¼ä¸š</li><li>02ï¼šNFS æ–‡ä»¶ç³»ç»Ÿå†…å­˜æ”¾çš„æ•°æ®éƒ½åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼Œæ‰€æœ‰æ•°æ®éƒ½çœ‹å¾—è§</li></ul><h2 id="2-NFS-å­˜å‚¨å±€é™"><a href="#2-NFS-å­˜å‚¨å±€é™" class="headerlink" title="2. NFS å­˜å‚¨å±€é™"></a>2. NFS å­˜å‚¨å±€é™</h2><ul><li>01ï¼šå­˜åœ¨å•ç‚¹æ•…éšœï¼Œå¦‚æœæ„å»ºé«˜å¯ç”¨ç»´æŠ¤éº»çƒ¦</li><li>02ï¼šNFS æ•°æ®æ˜æ–‡ï¼Œå¹¶ä¸å¯¹æ•°æ®åšä»»ä½•æ ¡éªŒ</li><li>03ï¼šå®¢æˆ·ç«¯æŒ‚è½½ NFS æœåŠ¡æ²¡æœ‰å¯†ç éªŒè¯ï¼Œå®‰å…¨æ€§ä¸€èˆ¬ï¼ˆåªæ¨èå†…ç½‘ä½¿ç”¨ï¼‰</li></ul><h2 id="3-NFS-åº”ç”¨å»ºè®®"><a href="#3-NFS-åº”ç”¨å»ºè®®" class="headerlink" title="3. NFS åº”ç”¨å»ºè®®"></a>3. NFS åº”ç”¨å»ºè®®</h2><ul><li>01ï¼šç”Ÿäº§åœºæ™¯åº”å°†é™æ€æ•°æ®å°½å¯èƒ½å¾€å‰ç«¯æ¨ï¼Œå‡å°‘åç«¯å‹åŠ›</li><li>02ï¼šå¿…é¡»å°†å­˜å‚¨é‡Œçš„é™æ€èµ„æºé€šè¿‡ CDN ç¼“å­˜ï¼ˆjpg|png|mp4|css|jsï¼‰</li><li>03ï¼šå¦‚æœæ²¡æœ‰ç¼“å­˜æˆ–æ¶æ„æœ¬èº«å†å²é—ç•™é—®é¢˜å¤ªå¤§ï¼Œå†å¤šå­˜å‚¨ä¹Ÿæ²¡ç”¨</li></ul><h1 id="ä¸ƒã€ä¼˜åŒ–è®¾ç½®"><a href="#ä¸ƒã€ä¼˜åŒ–è®¾ç½®" class="headerlink" title="ä¸ƒã€ä¼˜åŒ–è®¾ç½®"></a>ä¸ƒã€ä¼˜åŒ–è®¾ç½®</h1><h2 id="a-å®‰å…¨ä¼˜åŒ–-ï¼ˆæŒæ¡ï¼‰"><a href="#a-å®‰å…¨ä¼˜åŒ–-ï¼ˆæŒæ¡ï¼‰" class="headerlink" title="a.å®‰å…¨ä¼˜åŒ– ï¼ˆæŒæ¡ï¼‰"></a>a.å®‰å…¨ä¼˜åŒ– ï¼ˆæŒæ¡ï¼‰</h2><blockquote><p>å®¢æˆ·ç«¯æŒ‚è½½æ—¶é€‰æ‹©ä¸€äº›ä¼˜åŒ–å‚æ•°</p><ul><li>nosuid</li><li>nodev</li><li>noexec</li></ul></blockquote><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æè¿°</th><th align="left"></th></tr></thead><tbody><tr><td align="left">suid<div>nosuid</div></td><td align="left">å½“æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿä¸Šæœ‰ SUID çš„ç¨‹åºæ—¶ï¼Œåªè¦ä½¿ç”¨ nosuid å°±èƒ½å–æ¶ˆè®¾ç½® SUID çš„åŠŸèƒ½</td><td align="left"></td></tr><tr><td align="left">rw<div>ro</div></td><td align="left">å¯ä»¥æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿæ˜¯åªè¯»ï¼ˆroï¼‰æˆ–è¯»å†™ï¼ˆrwï¼‰</td><td align="left"></td></tr><tr><td align="left">dev<div>nodev</div></td><td align="left">æ˜¯å¦å¯ä»¥ä¿ç•™æŸäº›æ–‡ä»¶çš„ç‰¹æ®ŠåŠŸèƒ½</td><td align="left">ä¸€èˆ¬æ¥è¯´åªæœ‰&#x2F;dev æ‰æœ‰ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå› æ­¤å¯ä»¥é€‰æ‹© nodev</td></tr><tr><td align="left">exec<div>noexec</div></td><td align="left">æ˜¯å¦å…·æœ‰æ‰§è¡Œæ–‡ä»¶çš„æƒé™</td><td align="left">å¦‚æœæŒ‚è½½çš„åªæ˜¯æ™®é€šæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€â€¦ï¼‰é‚£ä¹ˆå¯ä»¥é€‰æ‹© noexec</td></tr><tr><td align="left">user<div>nouser</div></td><td align="left">æ˜¯å¦å…è®¸ç”¨æˆ·è¿›è¡Œæ–‡ä»¶çš„æŒ‚è½½ä¸å¸è½½åŠŸèƒ½</td><td align="left">å¦‚æœè¦ä¿æŠ¤æ–‡ä»¶ç³»ç»Ÿï¼Œæœ€å¥½ä¸è¦æä¾›ç”¨æˆ·è¿›è¡ŒæŒ‚è½½ä¸å¸è½½ï¼Œå¯ä»¥é€‰æ‹© nouser</td></tr><tr><td align="left">auto<div>noauto</div></td><td align="left">è¿™ä¸ª auto æŒ‡çš„æ˜¯ <code>mount -a</code> æ—¶ä¼šä¸ä¼šè¢«æŒ‚è½½çš„é¡¹ç›®</td><td align="left">å¦‚æœä¸éœ€è¦æŸä¸ªåˆ†åŒºéšæ—¶è¢«æŒ‚è½½ï¼Œå¯ä»¥è®¾ç½®ä¸º noauto<div>ä¾‹å¦‚ï¼š&#x2F;etc&#x2F;fstab&nbsp; auto</div></td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h2 id="b-æ€§èƒ½ä¼˜åŒ–-äº†è§£"><a href="#b-æ€§èƒ½ä¼˜åŒ–-äº†è§£" class="headerlink" title="b. æ€§èƒ½ä¼˜åŒ– (äº†è§£)"></a>b. æ€§èƒ½ä¼˜åŒ– (äº†è§£)</h2><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æè¿°</th><th align="left"></th></tr></thead><tbody><tr><td align="left">rsize<div>wsize</div></td><td align="left">è®¾ç½®è¯»ï¼ˆrsizeï¼‰ä¸å†™å…¥ï¼ˆwsizeï¼‰çš„åŒºå—å¤§å°ï¼ˆblock sizeï¼‰</td><td align="left">è¿™ä¸ªå€¼å¯ä»¥å½±å“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¼ è¾“æ•°æ®çš„ç¼“å†²å­˜å‚¨é‡ï¼Œä¸€èˆ¬æ¥è¯´å¦‚æœåœ¨å±€åŸŸç½‘å†…ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯éƒ½æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œå¯ä»¥è®¾ç½®çš„å¤§ä¸€ç‚¹ï¼Œæ¯”å¦‚ 65535ï¼Œæå‡ç¼“å†²åŒºå¯æå‡ nfs æ–‡ä»¶ç³»ç»Ÿçš„ä¼ è¾“èƒ½åŠ›ï¼Œä½†è®¾ç½®çš„ä¸èƒ½å¤ªå¤§ï¼Œæœ€å¥½ä»¥ç½‘ç»œèƒ½å¤Ÿä¼ è¾“çš„æœ€å¤§å€¼ä¸ºé™</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## rsize=131072,wsize=131072</span></span><br><span class="line">[root@web01 ~]# grep 192.168.1.40 /proc/mounts </span><br><span class="line">192.168.1.40:/data/rw /mnt nfs4 rw,relatime,vers=4.1,rsize=131072,wsize=131072,n168.1.20,local_lock=none,addr=192.168.1.40 0 0</span><br></pre></td></tr></table></figure><h2 id="c-å†…æ ¸å‚æ•°ä¼˜åŒ–"><a href="#c-å†…æ ¸å‚æ•°ä¼˜åŒ–" class="headerlink" title="c. å†…æ ¸å‚æ•°ä¼˜åŒ–"></a>c. å†…æ ¸å‚æ•°ä¼˜åŒ–</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /proc/sys/net/core/rmem_max </span><br><span class="line">212992</span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /proc/sys/net/core/rmem_default </span><br><span class="line">212992</span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /proc/sys/net/core/wmem_default </span><br><span class="line">212992</span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /proc/sys/net/core/wmem_max </span><br><span class="line">212992</span><br></pre></td></tr></table></figure><ul><li>ä¸Šè¿°æ–‡ä»¶å¦‚ä½•ä¿®æ”¹å†…å®¹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt;&gt;/etc/sysctl.conf&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">net.core.wmem_default = 8388608</span></span><br><span class="line"><span class="string">net.core.rmem_default = 8388608</span></span><br><span class="line"><span class="string">net.core.rmem_max = 16777216</span></span><br><span class="line"><span class="string">net.core.wmem_max = 16777216</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></li></ul><h1 id="å…«ã€ä¼˜åŒ–å°ç»“"><a href="#å…«ã€ä¼˜åŒ–å°ç»“" class="headerlink" title="å…«ã€ä¼˜åŒ–å°ç»“"></a>å…«ã€ä¼˜åŒ–å°ç»“</h1><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æè¿°</th><th align="left"></th></tr></thead><tbody><tr><td align="left">rsize<div>wsize</div></td><td align="left">è®¾ç½®è¯»ï¼ˆrsizeï¼‰ä¸å†™å…¥ï¼ˆwsizeï¼‰çš„åŒºå—å¤§å°ï¼ˆblock sizeï¼‰</td><td align="left">è¿™ä¸ªå€¼å¯ä»¥å½±å“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¼ è¾“æ•°æ®çš„ç¼“å†²å­˜å‚¨é‡ï¼Œä¸€èˆ¬æ¥è¯´å¦‚æœåœ¨å±€åŸŸç½‘å†…ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯éƒ½æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œå¯ä»¥è®¾ç½®çš„å¤§ä¸€ç‚¹ï¼Œæ¯”å¦‚ 65535ï¼Œæå‡ç¼“å†²åŒºå¯æå‡ nfs æ–‡ä»¶ç³»ç»Ÿçš„ä¼ è¾“èƒ½åŠ›ï¼Œä½†è®¾ç½®çš„ä¸èƒ½å¤ªå¤§ï¼Œæœ€å¥½ä»¥ç½‘ç»œèƒ½å¤Ÿä¼ è¾“çš„æœ€å¤§å€¼ä¸ºé™</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><ul><li>æ·»åŠ ç¡¬ä»¶ï¼ˆæœ€ç®€å•ï¼‰ï¼šsas&#x2F;ssd ç¡¬ç›˜ï¼Œä¹°å¤šå—ç»„æˆ raidï¼Œåˆ¶ä½œ raid5 æˆ– raid10.</li><li>NFS æœåŠ¡å™¨ç«¯é…ç½®<ul><li>&#x2F;data xxxx&#x2F;24 (rw, sync, all_squash, anonuid&#x3D;65534, anongid&#x3D;65534)  xxxx&#x2F;24</li></ul></li><li>NFS å®¢æˆ·ç«¯æŒ‚è½½å‘½ä»¤ä¼˜åŒ–ï¼š<ul><li>mount -t nfs -o <span style="background:rgba(28, 210, 16, 0.55)">nosuid,noexec,nodev</span>,<span style="background:#40a9ff">noatime,nodiratime,rsize&#x3D;131072,wsize&#x3D;131072</span>  192.168.1.40&#x2F;24:&#x2F;data &#x2F;mnt</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nosuidï¼Œnoexecï¼Œnodevï¼šå®‰å…¨ç›¸å…³é€‰é¡¹</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">noatimeï¼Œnodiratimeï¼Œrsizeï¼Œwsizeï¼šæ€§èƒ½é€‰é¡¹</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#noatimeï¼Œnodiratimeï¼šæ—¶é—´ç›¸å…³</span></span></span><br><span class="line">1ã€å…³äºæ–‡ä»¶çš„å‡ ä¸ªæ—¶é—´</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬é€šè¿‡statå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„ä¿¡æ¯ï¼Œ</span><br><span class="line"></span><br><span class="line">[root@CentOS-6-5 /home]# stat a</span><br><span class="line">  File: `a</span><br><span class="line">  Size: 12552     Blocks: 32         IO Block: 4096   regular file</span><br><span class="line">Device: 802h/2050dInode: 1177548     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2019-10-23 16:54:55.259130660 +0800</span><br><span class="line">Modify: 2019-10-23 16:54:55.259130660 +0800</span><br><span class="line">Change: 2019-10-23 16:54:55.259130660 +0800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…¶ä¸­æœ‰ä¸‰ä¸ªæ—¶é—´ï¼Œ</span><br><span class="line">accessï¼šæ–‡ä»¶ä¸Šæ¬¡è¢«è¯»å–çš„æ—¶é—´ï¼Œæ–‡ä»¶è¢«è¯»å–ï¼Œæ‰§è¡Œï¼Œæ‰“å¼€éƒ½ä¼šè§¦å‘æ›´æ–°</span><br><span class="line">modifyï¼šæ–‡ä»¶ä¸Šæ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ï¼Œ</span><br><span class="line">changeï¼šæ–‡ä»¶ä¸Šæ¬¡æƒé™å±ä¸»è¢«ä¿®æ”¹çš„æ—¶é—´</span><br><span class="line"></span><br><span class="line">2ã€noatimeé€‰é¡¹</span><br><span class="line"></span><br><span class="line">å¯¹äºæ–‡ä»¶ç³»ç»Ÿï¼Œæœ‰æ—¶å€™ä¸ºäº†æä¾›æ€§èƒ½ï¼Œä¼šè®¾ç½®noatimeé€‰é¡¹ï¼Œè¿™ä¸ªé€‰é¡¹çš„æ„æ€æ˜¯ä¸æ›´æ–°æ–‡ä»¶çš„accessæ—¶é—´ã€‚æ‰€ä»¥åœ¨è¯»å–ã€æ‰“å¼€ã€æ‰§è¡Œæ–‡ä»¶æ—¶éƒ½ä¸ä¼šä¿®æ”¹ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå°±é™ä½äº†ç³»ç»Ÿçš„IOï¼Œå°¤å…¶æ˜¯å¯¹äºè¯»å–å±…å¤šçš„æœåŠ¡å™¨ã€‚</span><br><span class="line"></span><br><span class="line">æœªè®¾ç½®noatime</span><br><span class="line"></span><br><span class="line">[root@CentOS-6-5 /home]# mount | grep sda2</span><br><span class="line">/dev/sda2 on / type ext4 (rw)</span><br><span class="line">[root@CentOS-6-5 /home]# stat a</span><br><span class="line">  File: `a</span><br><span class="line">  Size: 6         Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: 802h/2050dInode: 1177548     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2019-10-23 16:54:55.259130660 +0800</span><br><span class="line">Modify: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line">Change: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line">[root@CentOS-6-5 /home]# cat a</span><br><span class="line">hello</span><br><span class="line">[root@CentOS-6-5 /home]# stat a</span><br><span class="line">  File: `a</span><br><span class="line">  Size: 6         Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: 802h/2050dInode: 1177548     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2019-10-26 22:25:14.722556455 +0800</span><br><span class="line">Modify: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line">Change: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ­¤æ—¶æ–‡ä»¶ç³»ç»Ÿæœªè®¾ç½®noatimeï¼Œè¯»å–æ–‡ä»¶åï¼Œæ–‡ä»¶çš„accessæ—¶é—´å‘ç”Ÿæ›´æ–°ã€‚</span><br><span class="line"></span><br><span class="line">ç°åœ¨æˆ‘ä»¬é€šè¿‡remountæ·»åŠ noatimeé€‰é¡¹ï¼Œ</span><br><span class="line"></span><br><span class="line">[root@CentOS-6-5 /home]# mount -o remount,noatime /dev/sda2</span><br><span class="line">[root@CentOS-6-5 /home]# mount  | grep sda2</span><br><span class="line">/dev/sda2 on / type ext4 (rw,noatime)</span><br><span class="line">[root@CentOS-6-5 /home]# stat a</span><br><span class="line">  File: `a</span><br><span class="line">  Size: 6         Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: 802h/2050dInode: 1177548     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2019-10-26 22:25:14.722556455 +0800</span><br><span class="line">Modify: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line">Change: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line">[root@CentOS-6-5 /home]# cat a</span><br><span class="line">hello</span><br><span class="line">[root@CentOS-6-5 /home]# stat a</span><br><span class="line">  File: `a</span><br><span class="line">  Size: 6         Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: 802h/2050dInode: 1177548     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2019-10-26 22:25:14.722556455 +0800</span><br><span class="line">Modify: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line">Change: 2019-10-26 22:16:49.186557777 +0800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¯è§ï¼Œæ·»åŠ noatimeåï¼Œæ‰§è¡ŒåŒæ ·çš„è¯»å–æ–‡ä»¶æ“ä½œï¼Œæ–‡ä»¶çš„accessæ—¶é—´å¹¶æ²¡æœ‰æ›´æ–°ï¼Œå› æ­¤å°±å¯ä»¥èŠ‚çº¦å¤§é‡çš„IOï¼Œæä¾›ç³»ç»Ÿæ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line">3ã€nodiratimeé€‰é¡¹</span><br><span class="line"></span><br><span class="line">noatimeæ˜¯å¯¹äºæ–‡ä»¶è€Œè¨€ï¼Œé‚£å¯¹äºç›®å½•å‘¢ã€‚å…¶å®åœ¨linuxä¸Šï¼Œç›®å½•ä¹Ÿæ˜¯ä¸€ç§æ–‡ä»¶ï¼Œæ¯•ç«Ÿåœ¨ linuxä¸Ševerything is a fileã€‚å› æ­¤å½“è®¾ç½®noatimeæ—¶ï¼Œå¯¹äºç›®å½•ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœã€‚å¦‚æœæƒ³è¦å•ç‹¬å¯¹ç›®å½•æœ‰æ­¤æ•ˆæœï¼Œå°±å¯ä»¥ä½¿ç”¨nodiratimeã€‚å› æ­¤noatimeè®¾ç½®åï¼Œå°±æ— éœ€å†è®¾ç½®nodiratimeã€‚</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ<span style="background:rgba(28, 210, 16, 0.55)">å¸è½½</span>çš„æ—¶å€™æç¤ºâ€œumount &#x2F;mnt: device is busyâ€<ul><li>éœ€è¦é€€å‡ºæŒ‚è½½ç›®å½•å†è¿›è¡Œå¸è½½</li><li>å¦‚æœæ˜¯ NFS æœåŠ¡ç«¯å®•æœºï¼Œéœ€è¦å¼ºåˆ¶å¸è½½ï¼Œ<code>umount -lf /mnt </code></li></ul></li><li>å¤§å‹ç½‘ç«™ NFS ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿçš„æ›¿ä»£è½¯ä»¶ä¸º&#x3D;&#x3D;åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ&#x3D;&#x3D;Moosefsï¼ˆMFSï¼‰ï¼ŒGlusterFS (å¤§æ–‡ä»¶)ã€FastDFS.</li></ul><h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><h2 id="1-é‡å¯åæ— æ•Œæ—¶é—´"><a href="#1-é‡å¯åæ— æ•Œæ—¶é—´" class="headerlink" title="1. é‡å¯åæ— æ•Œæ—¶é—´"></a>1. é‡å¯åæ— æ•Œæ—¶é—´</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨æˆ‘ä»¬ä½¿ç”¨restarté‡å¯nfsåï¼Œé»˜è®¤ä¼šæœ‰90ç§’çš„æ— æ•Œæ—¶é—´ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯æŒ‚è½½ä¼šå¡ä½æ— æ³•æ“ä½œ</span></span><br><span class="line"><span class="comment">## è§£å†³ï¼šä½¿ç”¨reloadåŠ è½½é…ç½®æ–‡ä»¶ï¼šsystemctl reload nfs</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯é‡å¯nfs</span></span><br><span class="line">[root@nfs01 ~]# systemctl restart nfs</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯è¿›è¡ŒæŒ‚è½½ä¼šå¤„äºç­‰å¾…çŠ¶æ€</span></span><br><span class="line">[root@web01 ~]# mount -t nfs 192.168.1.40:/data/ro /mnt/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@web01 ~]# </span><br></pre></td></tr></table></figure><p><img src="/images/202403291252635.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç»¼åˆæ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡æ¡£ </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenSSHè¿œç¨‹æœåŠ¡</title>
      <link href="/2024/07/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1/Openssh/"/>
      <url>/2024/07/29/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1/Openssh/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€æœåŠ¡æ¦‚è¿°"><a href="#ä¸€ã€æœåŠ¡æ¦‚è¿°" class="headerlink" title="ä¸€ã€æœåŠ¡æ¦‚è¿°"></a>ä¸€ã€æœåŠ¡æ¦‚è¿°</h1><ul><li>ä¸€èˆ¬ç”¨äºè¿œç¨‹è¿æ¥æˆ–è€…æœ¬åœ°è¿æ¥</li><li>è¿œç¨‹è¿æ¥ï¼šåœ¨åŠå…¬å®¤è¿æ¥ idc æœºæˆ¿æˆ–äº‘æœåŠ¡å™¨</li><li>æœ¬åœ°è¿æ¥ï¼šåœ¨æœºæˆ¿é‡Œç›´æ¥æ“ä½œæœåŠ¡å™¨</li><li>è¿œç¨‹ç®¡ç†å¡ï¼ˆç‰©ç†æœåŠ¡å™¨ï¼‰ï¼šæœåŠ¡å™¨å®•æœºã€å…³æœºã€æ­»æœºï¼Œé€šè¿‡è¿œç¨‹ç®¡ç†å¡è¿›è¡Œç»´æŠ¤</li></ul><p>ssh åŒ…æ‹¬å“ªäº›ä¸œè¥¿</p><ul><li>openssh-serverï¼šæœåŠ¡ç«¯</li><li>opssh-clientï¼šå®¢æˆ·ç«¯ï¼ˆxshell ç­‰è¿œç¨‹è¿æ¥å·¥å…·ï¼‰</li><li>opensslï¼ˆåŠ å¯†åŠŸèƒ½ï¼‰</li></ul><h2 id="1-ssh-ä»‹ç»"><a href="#1-ssh-ä»‹ç»" class="headerlink" title="1.  ssh ä»‹ç»"></a>1.  ssh ä»‹ç»</h2><pre><code>SSHæ˜¯Secure Shell Protocolçš„ç®€å†™ï¼Œç”± IETFç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰åˆ¶å®šï¼›åœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ä¹‹å‰ï¼ŒSSHå…ˆå¯¹è”æœºæ•°æ®è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†ååœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œç¡®ä¿äº†æ•°æ®çš„å®‰å…¨ åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼ŒSSHæœåŠ¡ä¸»è¦æä¾›ä¸¤ä¸ªåŠŸèƒ½ï¼š - ï¼ˆ1ï¼‰æä¾›ç±»ä¼¼telnetè¿œç¨‹è¿æ¥æœåŠ¡å™¨çš„åŠŸèƒ½ã€‚ - ï¼ˆ2ï¼‰ç±»ä¼¼FTPæœåŠ¡çš„sftp-serverï¼Œå€ŸåŠ©SSHåè®®æ¥ä¼ è¾“æ•°æ®ï¼Œæä¾›æ›´å®‰å…¨çš„SFTPæœåŠ¡ã€‚</code></pre><blockquote><p>ğŸ‘º ç‰¹åˆ«æé†’ï¼š<br>        SSH å®¢æˆ·ç«¯ï¼ˆssh å‘½ä»¤ï¼‰è¿˜åŒ…å«ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„è¿œç¨‹å®‰å…¨æ‹·è´å‘½ä»¤ï¼šscp<br>        å®ƒä¹Ÿæ˜¯é€šè¿‡ ssh åè®®å·¥ä½œçš„</p></blockquote><ul><li><p>çŸ¥è¯†å°ç»“ï¼š</p><ul><li>ï¼ˆ1ï¼‰SSH æ˜¯å®‰å…¨çš„åŠ å¯† <code>åè®®</code>ï¼Œç”¨äºè¿œç¨‹è¿æ¥ linux æœåŠ¡å™¨ã€‚</li><li>ï¼ˆ2ï¼‰SSH æœåŠ¡é»˜è®¤ç«¯å£æ˜¯ <code>22</code>ï¼Œå®‰å…¨åè®®ç‰ˆæœ¬ SSH2.ï¼ˆSSH1 æœ‰æ¼æ´ï¼ŒåŸºæœ¬ä¸å†ä½¿ç”¨ï¼‰</li><li>ï¼ˆ3ï¼‰SSH æœåŠ¡ç«¯ä¸»è¦åŒ…å«ä¸¤ä¸ªæœåŠ¡åŠŸèƒ½ï¼Œ<code>â‘ SSHè¿œç¨‹è¿æ¥ï¼Œâ‘¡SFTPæœåŠ¡</code></li><li>ï¼ˆ4ï¼‰Linux ä¸­ SSH å®¢æˆ·ç«¯åŒ…å« ssh è¿œç¨‹è¿æ¥å‘½ä»¤ï¼Œä»¥åŠ scp ç­‰ã€‚</li></ul></li><li><p>ssh-client åŒ…å«çš„å‘½ä»¤</p><ul><li>ï¼ˆ1ï¼‰ssh</li><li>ï¼ˆ2ï¼‰scp</li><li>ï¼ˆ3ï¼‰sftp</li></ul></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### sshæœåŠ¡ç«¯åŒ…å«çš„å‘½ä»¤å’Œæ–‡ä»¶è·¯å¾„</span></span><br><span class="line">[root@ssh01 ~]# rpm -ql openssh-server</span><br><span class="line">/etc/pam.d/sshd</span><br><span class="line">/etc/ssh/sshd_config</span><br><span class="line">/etc/sysconfig/sshd</span><br><span class="line">/usr/lib/systemd/system/sshd-keygen.service</span><br><span class="line">/usr/lib/systemd/system/sshd.service</span><br><span class="line">/usr/lib/systemd/system/sshd.socket</span><br><span class="line">/usr/lib/systemd/system/sshd@.service</span><br><span class="line">/usr/lib64/fipscheck/sshd.hmac</span><br><span class="line">/usr/libexec/openssh/sftp-server</span><br><span class="line">/usr/sbin/sshd</span><br><span class="line">/usr/sbin/sshd-keygen</span><br><span class="line">/usr/share/man/man5/moduli.5.gz</span><br><span class="line">/usr/share/man/man5/sshd_config.5.gz</span><br><span class="line">/usr/share/man/man8/sftp-server.8.gz</span><br><span class="line">/usr/share/man/man8/sshd.8.gz</span><br><span class="line">/var/empty/sshd</span><br><span class="line"></span><br><span class="line"><span class="comment">### å®¢æˆ·ç«¯å‘½ä»¤å’Œæ–‡ä»¶çš„è·¯å¾„   </span></span><br><span class="line">[root@ssh01 ~]# rpm -ql openssh-clients</span><br><span class="line">/etc/ssh/ssh_config</span><br><span class="line">/usr/bin/scp</span><br><span class="line">/usr/bin/sftp</span><br><span class="line">/usr/bin/slogin</span><br><span class="line">/usr/bin/ssh</span><br><span class="line">/usr/bin/ssh-add</span><br><span class="line">/usr/bin/ssh-agent</span><br><span class="line">/usr/bin/ssh-copy-id</span><br><span class="line">/usr/bin/ssh-keyscan</span><br><span class="line">/usr/lib64/fipscheck/ssh.hmac</span><br><span class="line">/usr/libexec/openssh/ssh-pkcs11-helper</span><br><span class="line">/usr/share/man/man1/scp.1.gz</span><br><span class="line">/usr/share/man/man1/sftp.1.gz</span><br><span class="line">/usr/share/man/man1/slogin.1.gz</span><br><span class="line">/usr/share/man/man1/ssh-add.1.gz</span><br><span class="line">/usr/share/man/man1/ssh-agent.1.gz</span><br><span class="line">/usr/share/man/man1/ssh-copy-id.1.gz</span><br><span class="line">/usr/share/man/man1/ssh-keyscan.1.gz</span><br><span class="line">/usr/share/man/man1/ssh.1.gz</span><br><span class="line">/usr/share/man/man5/ssh_config.5.gz</span><br><span class="line">/usr/share/man/man8/ssh-pkcs11-helper.8.gz</span><br></pre></td></tr></table></figure><h2 id="2-å¯†é’¥ç±»å‹-dsa-å’Œ-rsa"><a href="#2-å¯†é’¥ç±»å‹-dsa-å’Œ-rsa" class="headerlink" title="2. å¯†é’¥ç±»å‹ (dsa å’Œ rsa)"></a>2. å¯†é’¥ç±»å‹ (dsa å’Œ rsa)</h2><blockquote><p>dsa æ˜¯æ—§çš„å¯†é’¥ç±»å‹ï¼š<br>    - å¯¹ç§°åŠ å¯†ï¼ŒåŠ &#x2F;è§£é€Ÿåº¦å¿«ã€å¯†é’¥é‡çŸ­<br>    - åªèƒ½ç”¨äºç­¾å</p><p>rsa æ˜¯æ–°çš„ç±»å‹ï¼š<br>    - éå¯¹ç§°åŠ å¯†ã€åŠ &#x2F;è§£é€Ÿåº¦æ…¢ã€å¯†é’¥é‡é•¿ï¼Œå®‰å…¨æ€§é«˜<br>    - å¯ä»¥ç”¨äºç­¾åã€åŠ å¯†ã€è§£å¯†</p></blockquote><p><code>å¯¹ç§°å’Œéå¯¹ç§°åŠ å¯†</code>ï¼š</p><ul><li>å¯¹ç§°ï¼šä½¿ç”¨ä¸€ä¸ªå¯†é’¥è¿›è¡ŒåŠ &#x2F;è§£ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆå¤§é‡æ•°æ®è¿›è¡ŒåŠ å¯†</li><li>éå¯¹ç§°ï¼šä½¿ç”¨ä¸€å¯¹å¯†é’¥åˆ†åˆ«å®ŒæˆåŠ &#x2F;è§£ï¼Œå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼Œæœºåˆ¶çµæ´»ï¼Œä½†æ˜¯é€Ÿåº¦æ…¢</li></ul><h1 id="äºŒã€è¿œç¨‹è¿æ¥è¿‡ç¨‹"><a href="#äºŒã€è¿œç¨‹è¿æ¥è¿‡ç¨‹" class="headerlink" title="äºŒã€è¿œç¨‹è¿æ¥è¿‡ç¨‹"></a>äºŒã€è¿œç¨‹è¿æ¥è¿‡ç¨‹</h1><p><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Openssh/202403291304797.png"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 01.ç¬¬ä¸€æ¬¡è¿æ¥æ—¶ï¼Œä¼šè‡ªåŠ¨è®°å½•æŒ‡çº¹ä¿¡æ¯åˆ°å½“å‰ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„.sshç›®å½•ä¸­</span></span><br><span class="line">[root@ssh01 ~]# ssh 192.168.1.20</span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.1.20 (192.168.1.20)&#x27;</span> cant be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:xwVpL0zxUqhoVgWCmUpqbnYkdEZ0kK5rlUcCmAQWvrE.</span><br><span class="line">ECDSA key fingerprint is MD5:1e:cb:83:42:81:b4:65:d0:65:17:0d:5b:a7:40:14:56.</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no)? </span><br><span class="line"></span><br><span class="line">[root@ssh01 ~]# ll .ssh</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 root root 174 Mar 14 17:10 known_hosts</span><br><span class="line">[root@ssh01 ~]# <span class="built_in">cat</span> .ssh/known_hosts </span><br><span class="line">192.168.1.20 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBOvuOmtMEIXw3dvHxDYxYM5vVyPmlkQCmBxXIWie7iFD6W38C+uRoWjLr0QufaWhgkzm61i1cir0+UCJOxSOcQM=</span><br><span class="line"></span><br><span class="line"><span class="comment">### 02.è¾“å…¥yesç¡®è®¤ç»§ç»­è¿æ¥</span></span><br><span class="line">[root@ssh01 ~]# ssh 192.168.1.20</span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.1.20 (192.168.1.20)&#x27;</span> cant be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:xwVpL0zxUqhoVgWCmUpqbnYkdEZ0kK5rlUcCmAQWvrE.</span><br><span class="line">ECDSA key fingerprint is MD5:1e:cb:83:42:81:b4:65:d0:65:17:0d:5b:a7:40:14:56.</span><br><span class="line"><span class="comment">### ã€æ˜¯å¦ç»§ç»­è¿æ¥ã€‘</span></span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no)? <span class="built_in">yes</span></span><br><span class="line">Warning: Permanently added <span class="string">&#x27;192.168.1.20&#x27;</span> (ECDSA) to the list of known hosts.</span><br><span class="line"><span class="comment">#### è¾“å…¥ç›®æ ‡ä¸»æœºçš„å¯†ç </span></span><br><span class="line">root@192.168.1.20 password: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 03.è¾“å…¥å¯†ç ç™»å½•ç›®æ ‡ä¸»æœº</span></span><br><span class="line"><span class="comment">##### åªæœ‰ç¬¬ä¸€æ¬¡è¿æ¥æ—¶ä¼šå‡ºç°è®°å½•æŒ‡çº¹ä¿¡æ¯æç¤º</span></span><br><span class="line">[root@ssh01 ~]# ssh 192.168.1.20</span><br><span class="line">root@192.168.1.20 s password: </span><br><span class="line">Last login: Thu Mar 14 17:06:29 2024 from 192.168.1.25</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# hostname -I</span><br><span class="line">192.168.1.20 192.168.5.8 </span><br><span class="line"></span><br><span class="line"><span class="comment">### 04.é€€å‡ºç™»å½•</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">exit</span></span><br><span class="line"><span class="built_in">logout</span></span><br><span class="line">Connection to 192.168.1.20 closed.</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ‘ºæ³¨æ„ï¼šå¦‚æœæŠŠ .ssh&#x2F;known_hosts åˆ é™¤ï¼Œåˆ™è¿æ¥æ—¶ä¼šå†æ¬¡è®°å½•æŒ‡çº¹ä¿¡æ¯</p></blockquote><h1 id="ä¸‰ã€SSH-vs-Telnet"><a href="#ä¸‰ã€SSH-vs-Telnet" class="headerlink" title="ä¸‰ã€SSH  vs  Telnet"></a>ä¸‰ã€SSH  vs  Telnet</h1><ul><li>ssh ä¸ telnet çš„ä¸åŒç‚¹</li><li><strong>å®‰å…¨æ€§</strong>ï¼šssh æ˜¯åŠ å¯†è¿æ¥ï¼Œtelnet æ˜¯æ˜æ–‡ã€‚</li><li><strong>åŠŸèƒ½æ€§</strong>ï¼šssh ä¸ä»…å¯ä»¥è¿œç¨‹è¿æ¥ä¸æ‰§è¡Œå‘½ä»¤ï¼Œè¿˜å¯ä»¥è¿›è¡Œæ–‡ä»¶ä¼ è¾“ï¼ˆscpã€sftpï¼‰ç­‰ï¼Œè€Œ telnet ä¸»è¦ç”¨äºè¿æ¥å’Œæ‰§è¡Œå‘½ä»¤</li><li><strong>é…ç½®</strong>ï¼šssh é…ç½®å¤æ‚ä½†æ˜¯å®‰å…¨æ€§é«˜ï¼Œtelnet é…ç½®ç®€å•ã€å®‰å…¨æ€§ä½</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 01.å®‰è£…</span></span><br><span class="line">[root@ssh01 ~]# yum install -y telnet-server</span><br><span class="line"></span><br><span class="line">[root@ssh01 ~]# rpm -ql telnet-server</span><br><span class="line">/usr/lib/systemd/system/telnet.socket</span><br><span class="line">/usr/lib/systemd/system/telnet@.service</span><br><span class="line">/usr/sbin/in.telnetd</span><br><span class="line">/usr/share/man/man5/issue.net.5.gz</span><br><span class="line">/usr/share/man/man8/in.telnetd.8.gz</span><br><span class="line">/usr/share/man/man8/telnetd.8.gz</span><br><span class="line"></span><br><span class="line">[root@ssh01 ~]# systemctl restart telnet.socket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 02.ä½¿ç”¨</span></span><br><span class="line">[C:\~]$ telnet 192.168.1.244 23</span><br><span class="line"></span><br><span class="line">Connecting to 192.168.1.244:23...</span><br><span class="line">Connection established.</span><br><span class="line">To escape to <span class="built_in">local</span> shell, press <span class="string">&#x27;Ctrl+Alt+]&#x27;</span>.</span><br><span class="line">Kernel 3.10.0-1160.el7.x86_64 on an x86_64</span><br><span class="line">ssh01 login: lsq</span><br><span class="line">Password: </span><br><span class="line">Last login: Thu Mar 14 18:07:24 from ::ffff:192.168.1.254</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨æŠ“åŒ…å·¥å…·å¯ä»¥çœ‹åˆ°ï¼Œç™»å½•æ—¶ç”¨æˆ·å’Œå¯†ç éƒ½æ˜¯æ˜æ–‡çš„</p></blockquote><p><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Openssh/202403291304081.png"></p><p><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Openssh/202403291305777.png"></p><blockquote><p>æ‰§è¡Œçš„å‘½ä»¤ä¹Ÿå¯ä»¥è¢«æŠ“åŒ…åˆ°<br><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Openssh/202403291305764.png"></p></blockquote><h1 id="å››ã€å¯†é’¥è®¤è¯"><a href="#å››ã€å¯†é’¥è®¤è¯" class="headerlink" title="å››ã€å¯†é’¥è®¤è¯"></a>å››ã€å¯†é’¥è®¤è¯</h1><h2 id="1-åŸç†"><a href="#1-åŸç†" class="headerlink" title="1. åŸç†"></a>1. åŸç†</h2><p><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Openssh/202403291305563.png"></p><h2 id="2-ç¯å¢ƒé…ç½®"><a href="#2-ç¯å¢ƒé…ç½®" class="headerlink" title="2.  ç¯å¢ƒé…ç½®"></a>2.  ç¯å¢ƒé…ç½®</h2><table><thead><tr><th>è§’è‰²</th><th></th><th></th></tr></thead><tbody><tr><td>ç®¡ç†æœº</td><td>ssh01</td><td>192.168.1.244</td></tr><tr><td>è¢«ç®¡ç†</td><td>backup01</td><td>100</td></tr><tr><td>è¢«ç®¡ç†</td><td>nfs01</td><td>103</td></tr><tr><td>01. åˆ›å»ºå¯†é’¥å¯¹</td><td></td><td></td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh01 ~]# ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair. </span><br><span class="line"></span><br><span class="line"><span class="comment">### å¯†é’¥å¯¹å­˜æ”¾è·¯å¾„</span></span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class="line"></span><br><span class="line"><span class="comment">### å¯†ç </span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line"><span class="comment">## ç¡®è®¤å¯†ç </span></span><br><span class="line">Enter same passphrase again: </span><br><span class="line"></span><br><span class="line"><span class="comment">### å¯†é’¥ä¿¡æ¯å·²è¢«ä¿å­˜åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line"></span><br><span class="line"><span class="comment">### å¯†é’¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">## SHA256å“ˆå¸Œå€¼ï¼Œç”¨äºè¯¥å¯†é’¥çš„å”¯ä¸€æ ‡è¯†ï¼Œrootï¼ˆç”¨æˆ·ï¼‰ssh01ï¼ˆä¸»æœºï¼‰</span></span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:+ue1rVaz4gWAmRs7VdZwCMmKyR8bKouFmlj55t/G5HQ root@ssh01</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|         ..o++.  |</span></span><br><span class="line"><span class="string">|         +oo...  |</span></span><br><span class="line"><span class="string">|     . o=.o      |</span></span><br><span class="line"><span class="string">|      + += .     |</span></span><br><span class="line"><span class="string">|   o   oS+  .    |</span></span><br><span class="line"><span class="string">|  + o ..=.E  .o  |</span></span><br><span class="line"><span class="string">|.+ + o.= .  ...o |</span></span><br><span class="line"><span class="string">|+ . +  o+ ..o+.  |</span></span><br><span class="line"><span class="string">|   o....oo.o+o.  |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p>å‘é€å…¬é’¥</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh01 ~]# ssh-copy-id -i  /root/.ssh/id_rsa.pub 192.168.1.100</span><br><span class="line"><span class="comment">### å…¬é’¥æ‰€åœ¨ç›®å½•</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">&quot;/root/.ssh/id_rsa.pub&quot;</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.1.100 (192.168.1.100)&#x27;</span> cant be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:xwVpL0zxUqhoVgWCmUpqbnYkdEZ0kK5rlUcCmAQWvrE.</span><br><span class="line">ECDSA key fingerprint is MD5:1e:cb:83:42:81:b4:65:d0:65:17:0d:5b:a7:40:14:56.</span><br><span class="line"></span><br><span class="line"><span class="comment">### ç¡®å®šè¿æ¥å—</span></span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no)? <span class="built_in">yes</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to <span class="built_in">log</span> <span class="keyword">in</span> with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- <span class="keyword">if</span> you are prompted now it is to install the new keys</span><br><span class="line"></span><br><span class="line"><span class="comment">### ç›®æ ‡ä¸»æœºçš„å¯†ç </span></span><br><span class="line">root@192.168.1.100\&#x27;s password: </span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">&quot;ssh &#x27;192.168.1.100&#x27;&quot;</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### ç›®æ ‡ä¸»æœºçš„.sshç›®å½•ä¸‹å°±ä¼šæœ‰ &#x27;authorized_keys&#x27;æ–‡ä»¶</span></span><br><span class="line">[root@backup01 ~]# ll .ssh/</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 root root 175 Mar  6 18:46 known_hosts</span><br><span class="line">[root@backup01 ~]# ll .ssh/</span><br><span class="line">total 8</span><br><span class="line">-rw------- 1 root root 392 Mar 19 12:50 authorized_keys</span><br><span class="line">-rw-r--r-- 1 root root 175 Mar  6 18:46 known_hosts</span><br><span class="line"></span><br><span class="line"><span class="comment">#### å­˜å‚¨çš„æ˜¯å…¬é’¥ä¿¡æ¯</span></span><br><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> .ssh/authorized_keys </span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDj7FvgdxSO2SC+/wSvZXfALewabKK+oTZb6Pn0D5OKUGBQvX56CKfLY6XCm0AgPSs+0t0bj4/C+Jk73a7Z7+3Q9dRcf7PqVUzobRUAXVnT2vSC7z17Nha1adnf6fJqZtlmxfraM8Ah97tsOdRRlkU2pkA7vyP8ENC3csedyrVcI+4oo1QlH8/JF9TYq5cjRy3sW06QIxa07PgtcUBIBVbCydIzyjHpqJHp1kzr7+tZVIGpgbwW4KuHHz07FR8vdaOrNg6mhvjgfYf05//GRbyv+EFPyuZ7E4auhJVjA2JjgCl9X7qiR7oCfv2OTWimIFHnKBOKB8Cl/wiqzeMiF7kf root@ssh01</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### ä¸éœ€è¦å¯†ç </span></span><br><span class="line">[root@ssh01 ~]# ssh 192.168.1.100</span><br><span class="line">Last login: Tue Mar 19 12:47:44 2024 from 192.168.1.254</span><br><span class="line">[root@backup01 ~]# hostname -I</span><br><span class="line">192.168.1.100 192.168.5.6 </span><br></pre></td></tr></table></figure></li></ol><h2 id="3-ssh-copy-id-åŸç†"><a href="#3-ssh-copy-id-åŸç†" class="headerlink" title="3. ssh-copy-id åŸç†"></a>3. ssh-copy-id åŸç†</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@backup01 ~]# <span class="built_in">which</span> ssh-copy-id</span><br><span class="line">/usr/bin/ssh-copy-id</span><br><span class="line">[root@backup01 ~]# vim /usr/bin/ssh-copy-id </span><br><span class="line">295       ssh <span class="string">&quot;<span class="variable">$@</span>&quot;</span> <span class="string">&quot;exec sh -c &#x27;cd ; umask 077 ; mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys || exit 1 ; if type restorecon &gt;/dev/null 2&gt;&amp;1 ; then     restorecon -F .ssh .ssh/authorized_keys ; fi&#x27;&quot;</span> \</span><br><span class="line">         || <span class="built_in">exit</span> 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### è¿æ¥åˆ°æŒ‡å®šä¸»æœºï¼Œç„¶åæ‰§è¡Œä¸€äº›å‘½ä»¤</span></span><br><span class="line">ssh <span class="string">&quot;<span class="variable">$@</span>&quot;</span> <span class="string">&quot;exec sh -c &#x27;cd ; </span></span><br><span class="line"><span class="string">umask 077 ; mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys || exit 1 ; if type restorecon &gt;/dev/null 2&gt;&amp;1 ; then     restorecon -F .ssh .ssh/authorized_keys ; fi&#x27;&quot;</span> \</span><br><span class="line">         || <span class="built_in">exit</span> 1</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·å®¶ç›®å½•ä¸‹</span></span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¿®æ”¹æƒé™ï¼ˆç³»ç»Ÿçš„umaskæƒé™ï¼‰ï¼šç›®å½•700ï¼Œæ–‡ä»¶600</span></span><br><span class="line"><span class="comment">#è¿™æ˜¯æ­¤æ¡å‘½ä»¤ä¸´æ—¶ä¿®æ”¹ï¼Œåˆ‡å‹¿æ°¸ä¹…ä¿®æ”¹</span></span><br><span class="line"><span class="built_in">umask</span> 077</span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨å®¶ç›®å½•ä¸‹åˆ›å»º.sshç›®å½•ï¼ˆ-pæ˜¯ä¸ºäº†é˜²æ­¢æŠ¥é”™ï¼‰</span></span><br><span class="line"><span class="built_in">mkdir</span> -p .ssh</span><br><span class="line"></span><br><span class="line"><span class="comment">## å°†å…¬é’¥ä¿¡æ¯è¿½åŠ åˆ°authorized_keysæ–‡ä»¶ä¸­ï¼ˆå¦‚æœæ²¡æœ‰åˆ™æ˜¯åˆ›å»ºåå†™å…¥ï¼Œæœ‰åˆ™æ˜¯è¿½åŠ ï¼‰</span></span><br><span class="line"><span class="built_in">cat</span> &gt;&gt; .ssh/authorized_keys</span><br></pre></td></tr></table></figure><h1 id="äº”ã€æœåŠ¡ç«¯é…ç½®æ–‡ä»¶"><a href="#äº”ã€æœåŠ¡ç«¯é…ç½®æ–‡ä»¶" class="headerlink" title="äº”ã€æœåŠ¡ç«¯é…ç½®æ–‡ä»¶"></a>äº”ã€æœåŠ¡ç«¯é…ç½®æ–‡ä»¶</h1><h2 id="0-é…ç½®æ–‡ä»¶è§£æ"><a href="#0-é…ç½®æ–‡ä»¶è§£æ" class="headerlink" title="0. é…ç½®æ–‡ä»¶è§£æ"></a>0. é…ç½®æ–‡ä»¶è§£æ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">/etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿æ¥ç«¯å£</span></span><br><span class="line">Port 22</span><br><span class="line"></span><br><span class="line"><span class="comment">##ç›‘å¬ç½‘å¡ï¼šè¿æ¥æŒ‡å®šç½‘å¡ipæ‰èƒ½è¿›è¡Œè®¿é—®</span></span><br><span class="line"><span class="comment">## åé¢å¸¦çš„æ˜¯è¯¥ä¸»æœºæŸä¸ªç½‘å¡ipï¼Œä¸æ˜¯ç½‘æ®µ</span></span><br><span class="line">ListenAddress x.x.x.x </span><br><span class="line"></span><br><span class="line"><span class="comment">## é»˜è®¤åˆ›å»ºçš„å¯†é’¥æ–‡ä»¶ï¼ˆä¸€å®šä¸è¦åˆ é™¤ï¼Œåˆ äº†å°±ä¼šå‡ºé—®é¢˜ï¼‰</span></span><br><span class="line">HostKey /etc/ssh/ssh_host_rsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line">HostKey /etc/ssh/ssh_host_ed25519_key</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ—¥å¿—ç›¸å…³</span></span><br><span class="line">SyslogFacility AUTHPRIV</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ˜¯å¦å…è®¸rootç”¨æˆ·è¿œç¨‹ç™»å½•</span></span><br><span class="line">PermitRootLogin <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ˜¯å¦å…è®¸å¯†é’¥ç™»å½•</span></span><br><span class="line">PubkeyAuthentication <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## èƒ½è¿æ¥åˆ°æœ¬ä¸»æœºçš„å…¬é’¥ä¿¡æ¯ï¼Œéƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­</span></span><br><span class="line">AuthorizedKeysFile.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ˜¯å¦å…è®¸å¯†ç ç™»å½•</span></span><br><span class="line">PasswordAuthentication <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç¦æ­¢ä½¿ç”¨ç©ºå¯†ç ç™»å½•</span></span><br><span class="line">PermitEmptyPasswords no</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç”¨äºç¦ç”¨æŒ‘æˆ˜å“åº”è®¤è¯ï¼ˆChallenge-Response Authenticationï¼‰æ–¹å¼ã€‚</span></span><br><span class="line"><span class="comment">## æŒ‘æˆ˜å“åº”è®¤è¯æ˜¯ä¸€ç§åŸºäºå¯†ç çš„è®¤è¯æ–¹å¼ï¼Œå…¶ä¸­æœåŠ¡å™¨ä¼šå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå®¢æˆ·ç«¯éœ€è¦ç”¨æ­£ç¡®çš„å¯†ç æ¥å“åº”è¿™ä¸ªæŒ‘æˆ˜ä»¥é€šè¿‡[èº«ä»½éªŒè¯]</span></span><br><span class="line"><span class="comment">## ç¦ç”¨è¯¥è®¤è¯æ–¹å¼å¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œå› ä¸ºå®ƒå‡å°‘äº†å¯†ç åœ¨ç½‘ç»œä¼ è¾“ä¸­è¢«çªƒå–çš„é£é™©ã€‚</span></span><br><span class="line">ChallengeResponseAuthentication no</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ˜¯å¦å…è®¸åŸºäºGSSAPIç”¨æˆ·ç™»å½•</span></span><br><span class="line">GSSAPIAuthentication <span class="built_in">yes</span></span><br><span class="line"><span class="comment">## è¿æ¥ç»“æŸæ—¶æ˜¯å¦æ¸…ç†GSSAPIå‡­è¯</span></span><br><span class="line">GSSAPICleanupCredentials no</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¦‚æœè¦ç”¨å¯†ç éªŒè¯ï¼Œè¿™é‡Œå¿…é¡»å¼€å¯</span></span><br><span class="line">UsePAM <span class="built_in">yes</span></span><br><span class="line">X11Forwarding <span class="built_in">yes</span></span><br><span class="line">AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES</span><br><span class="line">AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT</span><br><span class="line">AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE</span><br><span class="line">AcceptEnv XMODIFIERS</span><br><span class="line">Subsystemsftp/usr/libexec/openssh/sftp-server</span><br></pre></td></tr></table></figure><h2 id="1-æ ¸å¿ƒé…ç½®"><a href="#1-æ ¸å¿ƒé…ç½®" class="headerlink" title="1.  æ ¸å¿ƒé…ç½®"></a>1.  <code>æ ¸å¿ƒé…ç½®</code></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰å…¨ç›¸å…³</span></span><br><span class="line">Port 22  <span class="comment">## è¿æ¥ç«¯å£</span></span><br><span class="line">PermitRootLogin no   <span class="comment">## æ˜¯å¦å…è®¸rootç”¨æˆ·è¿œç¨‹ç™»å½•</span></span><br><span class="line">PermitEmptyPasswords no  <span class="comment">## ç¦æ­¢ç©ºå¯†ç ç™»å½•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿æ¥é€Ÿåº¦</span></span><br><span class="line">UseDNS no   <span class="comment">## å°†è¿œç¨‹è¿æ¥çš„ipè§£æä¸ºåŸŸå</span></span><br><span class="line">GSSAPIAuthentication no  <span class="comment">## æ˜¯å¦å…è®¸åŸºäºGSSAPIçš„ç”¨æˆ·è®¤è¯</span></span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ListenAddress <span class="comment">## ç›‘å¬åœ°å€</span></span><br></pre></td></tr></table></figure><h2 id="2-å¸¸ç”¨é€‰é¡¹"><a href="#2-å¸¸ç”¨é€‰é¡¹" class="headerlink" title="2.  å¸¸ç”¨é€‰é¡¹"></a>2.  å¸¸ç”¨é€‰é¡¹</h2><table><thead><tr><th>SSH æœåŠ¡ç«¯é…ç½®</th><th></th></tr></thead><tbody><tr><td><strong>Port</strong></td><td>è¿æ¥ç«¯å£ï¼ˆä¸€èˆ¬å»ºè®®ä½¿ç”¨ 10000 ä»¥ä¸Šçš„ç«¯å£ï¼‰</td></tr><tr><td><strong>PermitRootLogin</strong></td><td>root è¿œç¨‹ç™»å½•</td></tr><tr><td><strong>PermitEmptyPasswords</strong></td><td>æ˜¯å¦å…è®¸ç©ºå¯†ç ç™»å½•</td></tr><tr><td><strong>ListenAddress</strong></td><td>ç›‘å¬ç½‘å¡</td></tr><tr><td>UseDNS</td><td>å°† ip è§£æä¸ºåŸŸå</td></tr><tr><td>GSSAPIAuthentication</td><td>GSSAPI éªŒè¯</td></tr><tr><td>PasswordAuthentication</td><td>æ˜¯å¦å…è®¸å¯†ç ç™»å½•</td></tr><tr><td>PubkeyAuthentication</td><td>æ˜¯å¦å…è®¸å¯†é’¥è®¤è¯</td></tr><tr><td>UsePAM</td><td>å¦‚æœå¼€å¯å¯†ç ç™»å½•ï¼Œè¿™é‡Œä¹Ÿè¦å¼€å¯</td></tr></tbody></table><h2 id="3-æ¡ˆä¾‹"><a href="#3-æ¡ˆä¾‹" class="headerlink" title="3.  æ¡ˆä¾‹"></a>3.  æ¡ˆä¾‹</h2><ul><li>åªèƒ½åœ¨å†…ç½‘ç™»å½• ssh01 è¿™ä¸ªä¸»æœºï¼Œç¦æ­¢å…¬ç½‘è®¿é—®ï¼Œä¸”ç«¯å£ä½¿ç”¨ 52113<ul><li>ï¼ˆ1ï¼‰é˜²ç«å¢™æ‹¦æˆª</li><li>ï¼ˆ2ï¼‰å…³é—­å…¬ç½‘ç½‘å¡</li><li>ï¼ˆ3ï¼‰ä¿®æ”¹ SSH ä¸­ Portã€ListenAddress é€‰é¡¹</li></ul></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh01 ~]# <span class="built_in">cat</span> &gt;&gt;/etc/ssh/sshd_config &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">&gt; Port 52113</span></span><br><span class="line"><span class="string">&gt; ListenAddress 192.168.1.244</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@ssh01 ~]# <span class="built_in">tail</span> -n2 /etc/ssh/sshd_config</span><br><span class="line">Port 52113</span><br><span class="line">ListenAddress 192.168.1.244</span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### è¿æ¥22ç«¯å£å¤±è´¥</span></span><br><span class="line">ssh 192.168.1.244</span><br><span class="line">Connecting to 192.168.1.244:22...</span><br><span class="line">Could not connect to <span class="string">&#x27;192.168.1.244&#x27;</span> (port 22): Connection failed.</span><br><span class="line">Type `<span class="built_in">help</span><span class="string">&#x27; to learn how to use Xshell prompt.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@backup01 ~]# ssh -p52113 192.168.1.244</span></span><br><span class="line"><span class="string">The authenticity of host &#x27;</span>[192.168.1.244]:52113 ([192.168.1.244]:52113)<span class="string">&#x27; can&#x27;</span>t be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:xwVpL0zxUqhoVgWCmUpqbnYkdEZ0kK5rlUcCmAQWvrE.</span><br><span class="line">ECDSA key fingerprint is MD5:1e:cb:83:42:81:b4:65:d0:65:17:0d:5b:a7:40:14:56.</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span> connecting (<span class="built_in">yes</span>/no)? <span class="built_in">yes</span></span><br><span class="line">Warning: Permanently added <span class="string">&#x27;[192.168.1.244]:52113&#x27;</span> (ECDSA) to the list of known hosts.</span><br><span class="line">root@192.168.1.244\&#x27;s password: </span><br><span class="line">Last failed login: Tue Mar 19 16:24:48 CST 2024 from ::ffff:192.168.1.254 on pts/0</span><br><span class="line">There was 1 failed login attempt since the last successful login.</span><br><span class="line">Last login: Tue Mar 19 13:54:58 2024 from 192.168.1.254</span><br><span class="line"></span><br><span class="line">[root@ssh01 ~]# hostname -I</span><br><span class="line">192.168.1.244 192.168.5.9 </span><br></pre></td></tr></table></figure></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ç«¯å£æ­£ç¡®ï¼Œç½‘å¡ipé”™è¯¯ä¹Ÿæ˜¯æ— æ³•è¿æ¥çš„</span></span><br><span class="line">[root@backup01 ~]# ssh -p52113 192.168.5.9</span><br><span class="line">ssh: connect to host 192.168.5.9 port 52113: Connection refused</span><br></pre></td></tr></table></figure><blockquote><p>åšå®Œæ¡ˆä¾‹è®°å¾—æ”¹å›å»</p></blockquote><h1 id="å…­ã€ssh-å®¢æˆ·ç«¯å‘½ä»¤é€‰é¡¹"><a href="#å…­ã€ssh-å®¢æˆ·ç«¯å‘½ä»¤é€‰é¡¹" class="headerlink" title="å…­ã€ssh å®¢æˆ·ç«¯å‘½ä»¤é€‰é¡¹"></a>å…­ã€ssh å®¢æˆ·ç«¯å‘½ä»¤é€‰é¡¹</h1><ul><li>åŒ…å«ä»¥ä¸‹å‡ ä¸ªå‘½ä»¤<ul><li>sshï¼ˆtelnetï¼‰</li><li>scpï¼ˆrcpï¼‰</li><li>sftpï¼ˆftpï¼‰</li></ul></li></ul><table><thead><tr><th>åŠ å¯†åè®®</th><th>ä¸åŠ å¯†åè®®ï¼ˆçŸ¥é“å°±è¡Œï¼‰</th></tr></thead><tbody><tr><td>ssh</td><td>telnet</td></tr><tr><td>scp</td><td>rcp</td></tr><tr><td>sftp\xftp<br>sftp: Linux ä½¿ç”¨<br>xftpï¼šwin ä½¿ç”¨</td><td>ftp</td></tr></tbody></table><h2 id="1-ssh-ç›¸å…³"><a href="#1-ssh-ç›¸å…³" class="headerlink" title="1.  ssh ç›¸å…³"></a>1.  ssh ç›¸å…³</h2><table><thead><tr><th>é€‰é¡¹</th><th>å«ä¹‰</th><th>æ¡ˆä¾‹</th></tr></thead><tbody><tr><td>-p</td><td>ç«¯å£</td><td>ssh -p23  x.x.x.x</td></tr><tr><td></td><td>æŒ‡å®šç”¨æˆ·</td><td>ssh  ç”¨æˆ·@x.x.x.x</td></tr><tr><td>-o StrictHostKeyChecking&#x3D;no</td><td>è¿æ¥æ—¶ä¸éªŒè¯ä¸»æœºå¯†é’¥<br>(åé¢è¿æ¥å¤šä¸ªä¸»æœºæ—¶ä½¿ç”¨)</td><td>ssh -o StrictHostKeyChecking&#x3D;no  x.x.x.x</td></tr><tr><td>-v<br>-vvv</td><td>æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹<br>ï¼ˆæœ€å¤šä¸‰ä¸ª vï¼Œè¯¦ç»†è¿‡ç¨‹ï¼‰</td><td>ssh  -v  x.x.x.x</td></tr></tbody></table><h2 id="2-sftpã€xftp"><a href="#2-sftpã€xftp" class="headerlink" title="2. sftpã€xftp"></a>2. sftpã€xftp</h2><h3 id="2-1-xftp"><a href="#2-1-xftp" class="headerlink" title="2.1   xftp"></a>2.1   xftp</h3><ul><li>xshell è‡ªå¸¦çš„ xftp å·¥å…·</li><li>ï¼ˆ1ï¼‰å¯ä»¥äº’ä¼ æ–‡ä»¶</li><li>ï¼ˆ2ï¼‰å¯ä»¥ä¿®æ”¹ linux ç³»ç»Ÿä¸­æ–‡ä»¶ã€ç›®å½•çš„æƒé™</li><li>ï¼ˆ3ï¼‰åˆ é™¤ã€åˆ›å»ºæ–‡ä»¶ç­‰<br><img src="https://jsd.cdn.zzko.cn/gh/Tripitz/Markdown-img@main/Openssh/202403291306365.png"></li></ul><h3 id="2-2-sftp"><a href="#2-2-sftp" class="headerlink" title="2.2   sftp"></a>2.2   sftp</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åšäº†å¯†é’¥è®¤è¯ï¼Œæ‰€ä»¥ä¸ç”¨è¾“å¯†ç </span></span><br><span class="line">[root@ssh01 ~]# sftp 192.168.1.100</span><br><span class="line">Connected to 192.168.1.100.</span><br><span class="line">sftp&gt; </span><br></pre></td></tr></table></figure><ul><li>ä¸€äº›å¸¸ç”¨é€‰é¡¹<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">sftp&gt; <span class="built_in">help</span></span><br><span class="line">Available commands:</span><br><span class="line"><span class="built_in">bye</span>                                Quit sftp</span><br><span class="line"><span class="built_in">cd</span> path                            Change remote directory to <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="built_in">chgrp</span> grp path                     Change group of file <span class="string">&#x27;path&#x27;</span> to <span class="string">&#x27;grp&#x27;</span></span><br><span class="line"><span class="built_in">chmod</span> mode path                    Change permissions of file <span class="string">&#x27;path&#x27;</span> to <span class="string">&#x27;mode&#x27;</span></span><br><span class="line"><span class="built_in">chown</span> own path                     Change owner of file <span class="string">&#x27;path&#x27;</span> to <span class="string">&#x27;own&#x27;</span></span><br><span class="line"><span class="built_in">df</span> [-hi] [path]                    Display statistics <span class="keyword">for</span> current directory or</span><br><span class="line">                                   filesystem containing <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="built_in">exit</span>                               Quit sftp</span><br><span class="line">get [-afPpRr] remote [<span class="built_in">local</span>]       Download file</span><br><span class="line">reget [-fPpRr] remote [<span class="built_in">local</span>]      Resume download file</span><br><span class="line">reput [-fPpRr] [<span class="built_in">local</span>] remote      Resume upload file</span><br><span class="line"><span class="built_in">help</span>                               Display this <span class="built_in">help</span> text</span><br><span class="line">lcd path                           Change <span class="built_in">local</span> directory to <span class="string">&#x27;path&#x27;</span></span><br><span class="line">lls [ls-options [path]]            Display <span class="built_in">local</span> directory listing</span><br><span class="line">lmkdir path                        Create <span class="built_in">local</span> directory</span><br><span class="line"><span class="built_in">ln</span> [-s] oldpath newpath            Link remote file (-s <span class="keyword">for</span> symlink)</span><br><span class="line">lpwd                               Print <span class="built_in">local</span> working directory</span><br><span class="line"><span class="built_in">ls</span> [-1afhlnrSt] [path]             Display remote directory listing</span><br><span class="line">lumask <span class="built_in">umask</span>                       Set <span class="built_in">local</span> <span class="built_in">umask</span> to <span class="string">&#x27;umask&#x27;</span></span><br><span class="line"><span class="built_in">mkdir</span> path                         Create remote directory</span><br><span class="line">progress                           Toggle display of progress meter</span><br><span class="line">put [-afPpRr] <span class="built_in">local</span> [remote]       Upload file</span><br><span class="line"><span class="built_in">pwd</span>                                Display remote working directory</span><br><span class="line">quit                               Quit sftp</span><br><span class="line">rename oldpath newpath             Rename remote file</span><br><span class="line"><span class="built_in">rm</span> path                            Delete remote file</span><br><span class="line"><span class="built_in">rmdir</span> path                         Remove remote directory</span><br><span class="line">symlink oldpath newpath            Symlink remote file</span><br><span class="line">version                            Show SFTP version</span><br><span class="line">!<span class="built_in">command</span>                           Execute <span class="string">&#x27;command&#x27;</span> <span class="keyword">in</span> <span class="built_in">local</span> shell</span><br><span class="line">!                                  Escape to <span class="built_in">local</span> shell</span><br><span class="line">?                                  Synonym <span class="keyword">for</span> <span class="built_in">help</span></span><br></pre></td></tr></table></figure></li></ul><table><thead><tr><th>é€‰é¡¹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>bye</td><td>é€€å‡º</td></tr><tr><td>get</td><td><code>æ‹‰å–</code>ï¼šå°†ç›®æ ‡ä¸»æœºæ–‡ä»¶ä¸‹è½½åˆ°æœ¬æœº</td></tr><tr><td>put</td><td><code>æ¨é€</code>ï¼šå°†æœ¬ä¸»æœºæ–‡ä»¶æ¨é€åˆ°ç›®æ ‡ä¸»æœº</td></tr><tr><td>ls</td><td>æŸ¥çœ‹ç›®æ ‡ä¸»æœºç›®å½•ä¸‹çš„æ–‡ä»¶</td></tr><tr><td>lls</td><td>æŸ¥çœ‹æœ¬æœºç›®å½•ä¸‹çš„æ–‡ä»¶</td></tr><tr><td>help</td><td>å¸®åŠ©</td></tr></tbody></table><h3 id="2-3-sftp-äº¤äº’å¼ä¸éäº¤äº’å¼"><a href="#2-3-sftp-äº¤äº’å¼ä¸éäº¤äº’å¼" class="headerlink" title="2.3   sftp äº¤äº’å¼ä¸éäº¤äº’å¼"></a>2.3   sftp äº¤äº’å¼ä¸éäº¤äº’å¼</h3><ol><li><p><code>äº¤äº’å¼ä½¿ç”¨ sftp</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh01 ~]# sftp 192.168.1.100</span><br><span class="line">sftp&gt; put /etc/hosts /tmp</span><br><span class="line">Uploading /etc/hosts to /tmp/hosts</span><br><span class="line">/etc/hosts                                                                                                        100%  158   285.4KB/s   00:00 </span><br><span class="line"></span><br><span class="line">sftp&gt; get /etc/hostname /root</span><br><span class="line">Fetching /etc/hostname to /root/hostname</span><br><span class="line">/etc/hostname                                                                                                     100%    9     9.7KB/s   00:00  </span><br></pre></td></tr></table></figure></li><li><p><code>éäº¤äº’å¼ï¼ˆä¸€èˆ¬ç”¨äºè„šæœ¬ï¼‰</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### å‘½ä»¤è¡Œå½¢å¼</span></span><br><span class="line">[root@ssh01 ~]# sftp --<span class="built_in">help</span></span><br><span class="line">unknown option -- -</span><br><span class="line">usage: sftp [-1246aCfpqrv] [-B buffer_size] [-b batchfile] [-c cipher]</span><br><span class="line">          [-D sftp_server_path] [-F ssh_config] [-i identity_file] [-l <span class="built_in">limit</span>]</span><br><span class="line">          [-o ssh_option] [-P port] [-R num_requests] [-S program]</span><br><span class="line">          [-s subsystem | sftp_server] host</span><br><span class="line">       sftp [user@]host[:file ...]</span><br><span class="line">       sftp [user@]host[:<span class="built_in">dir</span>[/]]</span><br><span class="line">       sftp -b batchfile [user@]host</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å°†è¦æ‰§è¡Œçš„å‘½ä»¤å†™å…¥æ–‡ä»¶</span></span><br><span class="line">[root@ssh01 ~]# <span class="built_in">cat</span> upload.ftp </span><br><span class="line">put /etc/hostname /tmp  </span><br><span class="line">put -r /etc /opt  <span class="comment">### ä¼ è¾“ç›®å½•ä½¿ç”¨-rå‚æ•°</span></span><br><span class="line">get /etc/hosts /root</span><br><span class="line"></span><br><span class="line"><span class="comment">## -b æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line">[root@ssh01 ~]# sftp -b upload.ftp 192.168.1.100</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th><th></th></tr></thead><tbody><tr><td>-b</td><td>æŒ‡å®š ftp è„šæœ¬</td><td></td></tr><tr><td>-o</td><td>æŒ‡å®šç«¯å£</td><td>sftp -o Port&#x3D;52113</td></tr><tr><td>-r</td><td>é€’å½’ï¼Œç”¨äºç›®å½•</td><td></td></tr></tbody></table><h2 id="3-scp-ç›¸å…³"><a href="#3-scp-ç›¸å…³" class="headerlink" title="3.  scp ç›¸å…³"></a>3.  scp ç›¸å…³</h2><ul><li>scp å‘½ä»¤ä¸€èˆ¬å°±ä½¿ç”¨ä»¥ä¸‹å‚æ•°<ul><li>ï¼ˆ1ï¼‰-r</li><li>ï¼ˆ2ï¼‰-P</li></ul></li></ul><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>-r</td><td>é€’å½’ä¼ è¾“ï¼Œç”¨äºç›®å½•</td></tr><tr><td>-P</td><td>æŒ‡å®šç«¯å£</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## é€’å½’</span></span><br><span class="line">[root@ssh01 ~]# scp -r /etc  192.168.1.100:/root</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç›®æ ‡ä¸»æœºæŸ¥çœ‹</span></span><br><span class="line">[root@backup01 ~]# ll</span><br><span class="line">total 724</span><br><span class="line">drwxr-xr-x 83 root root   8192 Mar 19 17:31 etc</span><br><span class="line">-rw-rw-rw-  1 root root 727290 Mar 12 15:12 sersync2.5.4_64bit_binary_stable_final.tar.gz</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŒ‡å®šç«¯å£</span></span><br><span class="line">[root@ssh01 ~]# scp -P22 /etc/hostname  192.168.1.100:/root</span><br><span class="line">hostname                                                                                                          100%    6     8.3KB/s   00:00   </span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# <span class="built_in">cat</span> hostname </span><br><span class="line">ssh01</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€æ‰¹é‡åˆ†å‘å¯†é’¥"><a href="#ä¸ƒã€æ‰¹é‡åˆ†å‘å¯†é’¥" class="headerlink" title="ä¸ƒã€æ‰¹é‡åˆ†å‘å¯†é’¥"></a>ä¸ƒã€æ‰¹é‡åˆ†å‘å¯†é’¥</h1><h2 id="1-éäº¤äº’å‘é€å¯†é’¥åˆ°-1-å°æœºå™¨"><a href="#1-éäº¤äº’å‘é€å¯†é’¥åˆ°-1-å°æœºå™¨" class="headerlink" title="1.   éäº¤äº’å‘é€å¯†é’¥åˆ° 1 å°æœºå™¨"></a>1.   éäº¤äº’å‘é€å¯†é’¥åˆ° 1 å°æœºå™¨</h2><ul><li><ol><li><code>å…äº¤äº’åˆ›å»ºå¯†é’¥å¯¹</code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### åˆ é™¤æ—§çš„.</span></span><br><span class="line"><span class="string">&#x27;ğŸ‘ºğŸŒŸåœ¨å·¥ä½œç¯å¢ƒä¸­ï¼Œä¸è¦åˆ é™¤!!ï¼ï¼Œæ­¤å¤„åªæ˜¯åšå®éªŒ&#x27;</span></span><br><span class="line">[root@ssh01 ~]# <span class="built_in">rm</span> -rf /root/.ssh/id_rsa*</span><br><span class="line">[root@ssh01 ~]# &gt; /root/.ssh/known_hosts </span><br><span class="line">[root@ssh01 ~]# </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;-f æŒ‡å®šå¯†é’¥æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶å&#x27;</span></span><br><span class="line"><span class="string">&#x27;-P æŒ‡å®šå¯†ç &#x27;</span></span><br><span class="line">[root@ssh01 ~]# ssh-keygen -t rsa -f /root/.ssh/id_rsa -P <span class="string">&#x27;&#x27;</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:4vAV+SMk17tG8zmSoRz2YcHFnRIiwdTfF6kAAtOtCSs root@ssh01</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|     oo+=+o.oo ..|</span></span><br><span class="line"><span class="string">|     ...o*.+o oo |</span></span><br><span class="line"><span class="string">|      + B +..o. .|</span></span><br><span class="line"><span class="string">|   E . * o o... .|</span></span><br><span class="line"><span class="string">|    o . S X    . |</span></span><br><span class="line"><span class="string">|     + = B O .   |</span></span><br><span class="line"><span class="string">|      o o * +    |</span></span><br><span class="line"><span class="string">|         . . .   |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure></li></ol></li><li><ol start="2"><li><code>å…äº¤äº’å‘é€å¯†é’¥åˆ°1å°æœºå™¨</code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;è§£å†³äº†ï¼ˆyes/noï¼‰é—®é¢˜ï¼Œä½†è¿˜æ˜¯éœ€è¦è¾“å…¥å¯†ç &#x27;</span></span><br><span class="line">[root@ssh01 ~]# ssh-copy-id -i /root/.ssh/id_rsa.pub -o StrictHostKeyChecking=no -p22 192.168.1.100</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">&quot;/root/.ssh/id_rsa.pub&quot;</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to <span class="built_in">log</span> <span class="keyword">in</span> with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- <span class="keyword">if</span> you are prompted now it is to install the new keys</span><br><span class="line">root@192.168.1.100\&#x27;s password: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### ä½¿ç”¨ [sshpass]å‘½ä»¤</span></span><br><span class="line"><span class="string">&#x27;æœ‰çš„é»˜è®¤ä¸å¸¦sshpass&#x27;</span></span><br><span class="line">[root@ssh01 ~]# sshpass</span><br><span class="line">-bash: sshapss: <span class="built_in">command</span> not found</span><br><span class="line"><span class="comment">## ä¸‹è½½å®‰è£…</span></span><br><span class="line"><span class="string">&#x27;é«˜ç‰ˆæœ¬sshpass,éœ€è¦ç¼–è¯‘å®‰è£…ï¼šhttps://sourceforge.net/projects/sshpass/files/sshpass/&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@ssh01 ~]# wget https://mirrors.tuna.tsinghua.edu.cn/centos/7.9.2009/extras/x86_64/Packages/sshpass-1.06-2.el7.x86_64.rpm</span><br><span class="line">[root@ssh01 ~]# rpm -ivh sshpass-1.06-2.el7.x86_64.rpm </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ğŸ‘ºğŸŒŸğŸŒŸ<span class="string">&#x27;å…äº¤äº’å‘é€å¯†é’¥&#x27;</span></span><br><span class="line">[root@ssh01 ~]# sshpass -p1 ssh-copy-id -i /root/.ssh/id_rsa.pub -o StrictHostKeyChecking=no -p22 192.168.1.100</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">&quot;/root/.ssh/id_rsa.pub&quot;</span></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to <span class="built_in">log</span> <span class="keyword">in</span> with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- <span class="keyword">if</span> you are prompted now it is to install the new keys</span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">&quot;ssh -o &#x27;StrictHostKeyChecking=no&#x27; -p &#x27;22&#x27; &#x27;192.168.1.100&#x27;&quot;</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure></li></ol></li><li><ol start="3"><li><code>æµ‹è¯•</code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh01 ~]# ssh 192.168.1.100 w</span><br><span class="line"> 18:07:45 up 19:28,  1 user,  load average: 0.00, 0.02, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/4    192.168.1.254    12:47   34:49   0.09s  0.09s -bash</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="2-æ‰¹é‡å‘é€å¯†é’¥"><a href="#2-æ‰¹é‡å‘é€å¯†é’¥" class="headerlink" title="2. æ‰¹é‡å‘é€å¯†é’¥"></a>2. æ‰¹é‡å‘é€å¯†é’¥</h2><blockquote><p>ğŸ‘ºğŸŒŸğŸ†ï¼šè„šæœ¬éƒ½ä¸å®Œå–„ï¼Œä»…ç”¨äºåˆæ­¥å­¦ä¹ <br>åç»­æ€è·¯ï¼š<br>    - æ£€æŸ¥æœ¬åœ°. ssh æ˜¯å¦æœ‰æ–‡ä»¶ï¼Œæœ‰åˆ™ä¸ç»§ç»­æ‰§è¡Œ<br>    - åˆ›å»ºå¯†é’¥å¯¹æ—¶ï¼Œå¯†é’¥æ”¾ç½®çš„è·¯å¾„å’Œæ–‡ä»¶åä¿®æ”¹ä¸ºå˜é‡<br>    - åˆ†å‘æ—¶ ip æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå…¬é’¥è·¯å¾„æ”¹ä¸ºå˜é‡ç­‰ç­‰</p></blockquote><ol><li><code>ä¹¦å†™åˆ›å»ºå¯†é’¥è„šæœ¬</code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ğŸ‘ºğŸŒŸ <span class="string">&#x27;æ­¤å¤„åªæ˜¯åšå®éªŒï¼Œå·¥ä½œç¯å¢ƒä¸è¦æ‰§è¡Œ!!!!!&#x27;</span></span><br><span class="line">[root@ssh01 ~]# <span class="built_in">rm</span> -rf /root/.ssh/id_rsa*</span><br><span class="line">[root@ssh01 ~]# &gt; /root/.ssh/known_hosts </span><br></pre></td></tr></table></figure></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh01 ~]# <span class="built_in">cat</span> /server/srcipts/fenfa.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å…äº¤äº’åˆ›å»ºå¯†é’¥å¯¹</span></span><br><span class="line">ssh-keygen -t rsa -f /root/.ssh/id_rsa -P <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰¹é‡åˆ†å‘å¯†é’¥</span></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> &#123;100,103&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">sshpass -p1 ssh-copy-id -i /root/.ssh/id_rsa.pub -o StrictHostKeyChecking=no -p22 192.168.1.<span class="variable">$ip</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">sh /server/srcipts/fenfa.sh </span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:YqBke+myBBo2AwrUHF+K5yQnsHmZvUqjvZAhpqRgeQ8 root@ssh01</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">| oo..  .         |</span><br><span class="line">|. +o* o          |</span><br><span class="line">|oooB.B           |</span><br><span class="line">|+oooBo.          |</span><br><span class="line">|*XoEooo S        |</span><br><span class="line">|@oXo=. .         |</span><br><span class="line">|++oo..           |</span><br><span class="line">| ..o.            |</span><br><span class="line">|  ..             |</span><br><span class="line">+----[SHA256]-----+</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/root/.ssh/id_rsa.pub&quot;</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   &quot;ssh -o &#x27;StrictHostKeyChecking=no&#x27; -p &#x27;22&#x27; &#x27;192.168.1.100&#x27;&quot;</span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/root/.ssh/id_rsa.pub&quot;</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   &quot;ssh -o &#x27;StrictHostKeyChecking=no&#x27; -p &#x27;22&#x27; &#x27;192.168.1.103&#x27;&quot;</span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li><code>ä¹¦å†™æ£€æŸ¥è„šæœ¬</code></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;$* æ˜¯æŒ‡æ‰§è¡Œè„šæœ¬åé¢å¸¦çš„å‚æ•°&#x27;</span>[hostname -I]ä¹Ÿå¯ä»¥æ¢æˆå…¶ä»–è¦æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line">[root@ssh01 ~]# <span class="built_in">cat</span> /server/srcipts/fenfa_check.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> &#123;100,103&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">ssh -o  StrictHostKeyChecking=no -p22 192.168.1.<span class="variable">$ip</span> $*</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## [hostname -I]ä¹Ÿå¯ä»¥æ¢æˆå…¶ä»–è¦æ‰§è¡Œçš„å‘½ä»¤</span></span><br><span class="line">[root@ssh01 ~]# sh /server/srcipts/fenfa_check.sh hostname -I</span><br><span class="line">192.168.1.100 192.168.5.6 </span><br><span class="line">192.168.1.103 192.168.5.7 </span><br><span class="line"></span><br><span class="line">[root@ssh01 ~]# sh /server/srcipts/fenfa_check.sh w</span><br><span class="line"> 18:36:27 up 19:56,  1 user,  load average: 0.05, 0.03, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/4    192.168.1.254    12:47    1:03m  0.09s  0.09s -bash</span><br><span class="line"> 18:36:28 up  8:20,  3 <span class="built_in">users</span>,  load average: 0.01, 0.03, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/0    192.168.1.254    13Mar24  6days  0.02s  0.02s -bash</span><br><span class="line">root     pts/1    192.168.1.254    Thu15    5days  0.56s  0.56s -bash</span><br><span class="line">root     pts/2    192.168.1.254    13Mar24  6days  0.42s  0.42s -bash</span><br></pre></td></tr></table></figure></li></ul><h1 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h1><h2 id="1-æ–‡ä»¶æƒé™"><a href="#1-æ–‡ä»¶æƒé™" class="headerlink" title="1. æ–‡ä»¶æƒé™"></a>1. æ–‡ä»¶æƒé™</h2><ul><li>ä¸€èˆ¬æ¥è¯´ï¼Œå¤§éƒ¨åˆ†æ˜¯å› ä¸ºæƒé™ä¸å¯¹å¯¼è‡´çš„é”™è¯¯<ul><li>ï¼ˆ1ï¼‰æ£€æŸ¥.ssh ç›®å½•æƒé™</li><li>ï¼ˆ2ï¼‰æ£€æŸ¥ authorized_keys æ–‡ä»¶æƒé™</li></ul></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### ä¿®æ”¹å®¢æˆ·æœºauthorized_keysæ–‡ä»¶æƒé™</span></span><br><span class="line">[root@backup01 ~]# ll .ssh/</span><br><span class="line">total 8</span><br><span class="line">-rw------- 1 root root 392 Mar 19 13:37 authorized_keys</span><br><span class="line">-rw-r--r-- 1 root root 175 Mar  6 18:46 known_hosts</span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# <span class="built_in">chmod</span> 777 .ssh/authorized_keys </span><br><span class="line"></span><br><span class="line">[root@backup01 ~]# ll .ssh/</span><br><span class="line">total 8</span><br><span class="line">-rwxrwxrwx 1 root root 392 Mar 19 13:37 authorized_keys</span><br><span class="line">-rw-r--r-- 1 root root 175 Mar  6 18:46 known_hosts</span><br><span class="line"></span><br><span class="line"><span class="comment">### æœåŠ¡ç«¯è¿›è¡Œè¿æ¥</span></span><br><span class="line"><span class="comment">## ä¼šè®©è¾“å…¥ç›®æ ‡ä¸»æœºå¯†ç </span></span><br><span class="line">[root@ssh01 ~]# ssh 192.168.1.100 w</span><br><span class="line">root@192.168.1.100\&#x27;s password: </span><br><span class="line"></span><br><span class="line"><span class="comment">### æœåŠ¡ç«¯å¯ä»¥æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼ˆ-vï¼šç®€å•ä¿¡æ¯ï¼Œ-vvvï¼šæ›´åŠ è¯¦ç»†çš„ä¿¡æ¯ï¼‰</span></span><br><span class="line">[root@ssh01 ~]# ssh -vvv 192.168.1.100 w</span><br><span class="line"></span><br><span class="line"><span class="comment">### åœ¨ç›®æ ‡ä¸»æœºæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—</span></span><br><span class="line">[root@backup01 ~]# <span class="built_in">tail</span> -f /var/log/secure</span><br><span class="line"><span class="comment">## è¿™ä¸ªé”™è¯¯é€šå¸¸è¡¨ç¤ºåœ¨ SSH è¿æ¥è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨æ‹’ç»äº†è®¤è¯ï¼ŒåŸå› å¯èƒ½æ˜¯æ–‡ä»¶çš„æ‰€æœ‰æƒæˆ–æƒé™è®¾ç½®ä¸æ­£ç¡®ã€‚</span></span><br><span class="line">Mar 19 13:40:21 backup01 sshd[37447]: Authentication refused: bad ownership or modes <span class="keyword">for</span> file /root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><ul><li>å°†æƒé™ä¿®æ”¹å› 600<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹å®¢æˆ·ç«¯ç³»ç»Ÿæ—¥å¿—</span></span><br><span class="line"><span class="built_in">tail</span> -f /var/log/secure</span><br><span class="line"></span><br><span class="line">Mar 19 13:44:14 backup01 sshd[37638]: Accepted publickey <span class="keyword">for</span> root from 192.168.1.244 port 36198 ssh2: RSA SHA256:+ue1rVaz4gWAmRs7VdZwCMmKyR8bKouFmlj55t/G5HQ</span><br><span class="line">Mar 19 13:44:14 backup01 sshd[37638]: pam_unix(sshd:session): session opened <span class="keyword">for</span> user root by (uid=0)</span><br><span class="line">Mar 19 13:44:14 backup01 sshd[37638]: Received disconnect from 192.168.1.244 port 36198:11: disconnected by user</span><br><span class="line">Mar 19 13:44:14 backup01 sshd[37638]: Disconnected from 192.168.1.244 port 36198</span><br><span class="line">Mar 19 13:44:14 backup01 sshd[37638]: pam_unix(sshd:session): session closed <span class="keyword">for</span> user root</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-å¯†é’¥æˆ–å¯†ç è®¤è¯"><a href="#2-å¯†é’¥æˆ–å¯†ç è®¤è¯" class="headerlink" title="2.  å¯†é’¥æˆ–å¯†ç è®¤è¯"></a>2.  å¯†é’¥æˆ–å¯†ç è®¤è¯</h2><ul><li>åœ¨ä¸€äº›å®‰å…¨è¦æ±‚é«˜çš„åœºæ™¯ä¸­ï¼Œä¼šç¦æ­¢å¯†ç éªŒè¯ï¼Œåªå…è®¸å¯†é’¥</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@ssh01 ~]# egrep <span class="string">&quot;#PubkeyAuthentication|^PasswordAuthentication&quot;</span> /etc/ssh/sshd_config </span><br><span class="line"><span class="comment">#PubkeyAuthentication yes ## æ˜¯å¦å¼€å¯å¯†é’¥è®¤è¯</span></span><br><span class="line">PasswordAuthentication <span class="built_in">yes</span> <span class="comment">## æ˜¯å¦å¼€å¯å¯†ç éªŒè¯</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç»¼åˆæ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡æ¡£ </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxåŸºç¡€</title>
      <link href="/2024/07/29/Linux%E5%9F%BA%E7%A1%80/Linux%E5%9F%BA%E7%A1%80/"/>
      <url>/2024/07/29/Linux%E5%9F%BA%E7%A1%80/Linux%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="é¦–é¡µ"><a href="#é¦–é¡µ" class="headerlink" title="é¦–é¡µ"></a>é¦–é¡µ</h1><h1 id="1-LinuxåŸºæœ¬ä½¿ç”¨å’Œé…ç½®"><a href="#1-LinuxåŸºæœ¬ä½¿ç”¨å’Œé…ç½®" class="headerlink" title="1. LinuxåŸºæœ¬ä½¿ç”¨å’Œé…ç½®"></a>1. LinuxåŸºæœ¬ä½¿ç”¨å’Œé…ç½®</h1><h3 id="1-1-æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œçº§åˆ«"><a href="#1-1-æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œçº§åˆ«" class="headerlink" title="1.1 æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œçº§åˆ«"></a>1.1 æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œçº§åˆ«</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç³»ç»Ÿå½“å‰è¿è¡Œçº§åˆ«,Nè¡¨ç¤ºä¸Šä¸€æ¬¡æ²¡æœ‰æ¨¡å¼,å³å¼€æœºåå°±æ˜¯3æ¨¡å¼(å‘½ä»¤è¡Œæ¨¡å¼)</span></span><br><span class="line">[root@rocky ~][0]# runlevel </span><br><span class="line">N 3</span><br></pre></td></tr></table></figure><h3 id="1-2-åˆ‡æ¢ç³»ç»Ÿè¿è¡Œçº§åˆ«"><a href="#1-2-åˆ‡æ¢ç³»ç»Ÿè¿è¡Œçº§åˆ«" class="headerlink" title="1.2 åˆ‡æ¢ç³»ç»Ÿè¿è¡Œçº§åˆ«"></a>1.2 åˆ‡æ¢ç³»ç»Ÿè¿è¡Œçº§åˆ«</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0: å…³æœº</span><br><span class="line">1: å•ç”¨æˆ·æ¨¡å¼ï¼ˆç”¨äºç³»ç»Ÿç»´æŠ¤ï¼‰</span><br><span class="line">2: å¤šç”¨æˆ·æ¨¡å¼ï¼Œæ²¡æœ‰ç½‘ç»œæ”¯æŒ</span><br><span class="line">3: å¤šç”¨æˆ·æ¨¡å¼ï¼Œå…·æœ‰ç½‘ç»œæ”¯æŒ</span><br><span class="line">4: æœªåˆ†é…ï¼ˆå¯ä»¥ç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼‰</span><br><span class="line">5: å¤šç”¨æˆ·æ¨¡å¼ï¼Œå…·æœ‰å›¾å½¢ç”¨æˆ·ç•Œé¢</span><br><span class="line">6: é‡å¯</span><br><span class="line"></span><br><span class="line">[root@rocky ~][0]# init 3</span><br></pre></td></tr></table></figure><h3 id="1-3-ç³»ç»Ÿç™»å½•åæ¬¢è¿æç¤º"><a href="#1-3-ç³»ç»Ÿç™»å½•åæ¬¢è¿æç¤º" class="headerlink" title="1.3 ç³»ç»Ÿç™»å½•åæ¬¢è¿æç¤º"></a>1.3 ç³»ç»Ÿç™»å½•åæ¬¢è¿æç¤º</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç™»å½•åæ¬¢è¿æç¤º</span></span><br><span class="line">vim /etc/motd</span><br></pre></td></tr></table></figure><h3 id="1-4-ç³»ç»Ÿç™»å½•å‰æ¬¢è¿æç¤º"><a href="#1-4-ç³»ç»Ÿç™»å½•å‰æ¬¢è¿æç¤º" class="headerlink" title="1.4 ç³»ç»Ÿç™»å½•å‰æ¬¢è¿æç¤º"></a>1.4 ç³»ç»Ÿç™»å½•å‰æ¬¢è¿æç¤º</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç™»å½•å‰æ¬¢è¿æç¤º</span></span><br><span class="line">vim /etc/issue</span><br></pre></td></tr></table></figure><h3 id="1-5-ä¿®æ”¹ä¸»æœºå"><a href="#1-5-ä¿®æ”¹ä¸»æœºå" class="headerlink" title="1.5 ä¿®æ”¹ä¸»æœºå"></a>1.5 ä¿®æ”¹ä¸»æœºå</h3><p>&#x3D;&#x3D;æ³¨æ„ï¼šä¸»æœºåä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ä¸»æœºå</span></span><br><span class="line">hostnamectl set-hostname Rocky &amp;&amp; exec $SHELL -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡æ–‡ä»¶ä¿®æ”¹</span></span><br><span class="line">vim /etc/hostname</span><br><span class="line">exec $SHELL -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶ä¿®æ”¹,é‡å¯å¤±æ•ˆ</span></span><br><span class="line">hostname Rocky &amp;&amp; exec $SHELL -l</span><br></pre></td></tr></table></figure><h3 id="1-6-æŸ¥çœ‹å½“å‰ç™»å½•è´¦æˆ·-ä¼šè¯"><a href="#1-6-æŸ¥çœ‹å½“å‰ç™»å½•è´¦æˆ·-ä¼šè¯" class="headerlink" title="1.6 æŸ¥çœ‹å½“å‰ç™»å½•è´¦æˆ·&#x2F;ä¼šè¯"></a>1.6 æŸ¥çœ‹å½“å‰ç™»å½•è´¦æˆ·&#x2F;ä¼šè¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰ç™»å½•æœ‰æ•ˆç”¨æˆ·</span></span><br><span class="line">[root@Rocky ~][0]# whoami </span><br><span class="line">root</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# who am i</span><br><span class="line">root     pts/0        2023-10-23 17:20 (221.178.140.146)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç³»ç»Ÿå½“å‰æ‰€æœ‰çš„ç™»å½•ä¼šè¯åŠæ‰€ä½œæ“ä½œ</span></span><br><span class="line">w</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç³»ç»Ÿå½“å‰æ‰€æœ‰ç™»å½•ä¼šè¯</span></span><br><span class="line">[root@Rocky ~][0]# who</span><br><span class="line">root     pts/0        2023-10-24 10:10 (221.178.140.146)</span><br></pre></td></tr></table></figure><h3 id="1-7-å‘½ä»¤è¡Œæç¤ºç¬¦"><a href="#1-7-å‘½ä»¤è¡Œæç¤ºç¬¦" class="headerlink" title="1.7 å‘½ä»¤è¡Œæç¤ºç¬¦"></a>1.7 å‘½ä»¤è¡Œæç¤ºç¬¦</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç®¡ç†å‘˜</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">æ™®é€šç”¨æˆ·</span></span><br><span class="line"></span><br><span class="line">le æ§åˆ¶ç¬¦\033</span><br><span class="line">\uå½“å‰ç”¨æˆ·</span><br><span class="line">\hä¸»æœºåç®€ç§°</span><br><span class="line">\Hä¸»æœºå</span><br><span class="line">\wå½“å‰å·¥ä½œç›®å½•</span><br><span class="line">\Wå½“å‰å·¥ä½œç›®å½•åŸºå</span><br><span class="line">\t24å°æ—¶æ—¶é—´æ ¼å¼</span><br><span class="line">\T12å°æ—¶æ—¶é—´æ ¼å¼</span><br><span class="line">!å‘½ä»¤å†å²æ•°</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€æœºåå‘½ä»¤å†å²æ•°</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨è¿™ä¸ª</span></span><br><span class="line">export PS1=&#x27;[\[\e[34;1m\]\u@\[\e[0m\]\[\e[32;1m\]\H\[\e[0m\] \[\e[31;1m\]\W\[\e[0m\]]\$ &#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æç¤ºç¬¦,ç»¿è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼</span></span><br><span class="line">PS1=&#x27;\[\e[32;1m\][\u@\h \w][$?]\$ \[\e[0m\]&#x27; </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æç¤ºç¬¦,è“è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼</span></span><br><span class="line">PS1=&#x27;\[\e[34;1m\][\u@\h \w][$?]\$ \[\e[0m\]&#x27; </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æç¤ºç¬¦,çº¢è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼</span></span><br><span class="line">PS1=&#x27;\[\e[31;1m\][\u@\h \w][$?]\$ \[\e[0m\]&#x27; </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æç¤ºç¬¦,é’è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼</span></span><br><span class="line">PS1=&#x27;\[\e[36;1m\][\u@\h \w][$?]\$ \[\e[0m\]&#x27; </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æç¤ºç¬¦,æ´‹çº¢è‰²è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼</span></span><br><span class="line">PS1=&#x27;\[\e[36;1m\][\u@\h \w][$?]\$ \[\e[0m\]&#x27; </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æç¤ºç¬¦,é»„è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼</span></span><br><span class="line">PS1=&#x27;\[\e[33;1m\][\u@\h \w][$?]\$ \[\e[0m\]&#x27; </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»¿è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼å’Œæ—¶é—´çš„æç¤ºç¬¦</span></span><br><span class="line">PS1=&#x27;\[\e[32;1m\][\[\e[0m\]\t\[\e[32;1m\]] [\u@\h \w][$?]\$ \[\e[0m\]&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è“è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼å’Œæ—¶é—´çš„æç¤ºç¬¦</span></span><br><span class="line">PS1=&#x27;\[\e[34;1m\][\[\e[0m\]\t\[\e[34;1m\]] [\u@\h \w][$?]\$ \[\e[0m\]&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">çº¢è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼å’Œæ—¶é—´çš„æç¤ºç¬¦</span></span><br><span class="line">PS1=&#x27;\[\e[31;1m\][\[\e[0m\]\t\[\e[31;1m\]] [\u@\h \w][$?]\$ \[\e[0m\]&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é’è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼å’Œæ—¶é—´çš„æç¤ºç¬¦</span></span><br><span class="line">PS1=&#x27;\[\e[36;1m\][\[\e[0m\]\t\[\e[36;1m\]] [\u@\h \w][$?]\$ \[\e[0m\]&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ´‹çº¢è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼å’Œæ—¶é—´çš„æç¤ºç¬¦</span></span><br><span class="line">PS1=&#x27;\[\e[35;1m\][\[\e[0m\]\t\[\e[35;1m\]] [\u@\h \w][$?]\$ \[\e[0m\]&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é»„è‰²é«˜äº®å¸¦å‘½ä»¤è¿”å›å€¼å’Œæ—¶é—´çš„æç¤ºç¬¦</span></span><br><span class="line">PS1=&#x27;\[\e[33;1m\][\[\e[0m\]\t\[\e[33;1m\]] [\u@\h \w][$?]\$ \[\e[0m\]&#x27;</span><br></pre></td></tr></table></figure><h3 id="1-8-å¸è½½è™šæ‹Ÿç½‘å¡"><a href="#1-8-å¸è½½è™šæ‹Ÿç½‘å¡" class="headerlink" title="1.8 å¸è½½è™šæ‹Ÿç½‘å¡"></a>1.8 å¸è½½è™šæ‹Ÿç½‘å¡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove libirt-daemon</span><br></pre></td></tr></table></figure><h1 id="2-å‘½ä»¤å’Œå‘½ä»¤ç±»å‹"><a href="#2-å‘½ä»¤å’Œå‘½ä»¤ç±»å‹" class="headerlink" title="2. å‘½ä»¤å’Œå‘½ä»¤ç±»å‹"></a>2. å‘½ä»¤å’Œå‘½ä»¤ç±»å‹</h1><h3 id="2-1-å†…éƒ¨å‘½ä»¤å’Œå¤–éƒ¨å‘½ä»¤"><a href="#2-1-å†…éƒ¨å‘½ä»¤å’Œå¤–éƒ¨å‘½ä»¤" class="headerlink" title="2.1 å†…éƒ¨å‘½ä»¤å’Œå¤–éƒ¨å‘½ä»¤"></a>2.1 å†…éƒ¨å‘½ä»¤å’Œå¤–éƒ¨å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">å¤–éƒ¨å‘½ä»¤åœ¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ä¸‹æœ‰å¯¹åº”çš„å¯æ‰§è¡Œç¨‹åº</span><br><span class="line">å†…éƒ¨å‘½ä»¤/bin/bash/*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†…éƒ¨å‘½ä»¤</span></span><br><span class="line">[root@Rocky ~][0]# type echo</span><br><span class="line">echo is a shell builtin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤–éƒ¨å‘½ä»¤</span></span><br><span class="line">[root@Rocky ~][1]# type shutdown</span><br><span class="line">shutdown is /usr/sbin/shutdown</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤–éƒ¨å‘½ä»¤çš„å­˜æ”¾(æœç´¢)è·¯å¾„</span></span><br><span class="line">[root@Rocky ~][0]# echo $PATH</span><br><span class="line">/root/.local/bin:/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span>æ—¢æ˜¯å¤–éƒ¨å‘½ä»¤,ä¹Ÿæ˜¯å†…éƒ¨å‘½ä»¤</span></span><br><span class="line">[root@Rocky ~][0]# type -a echo</span><br><span class="line">echo is a shell builtin</span><br><span class="line">echo is /usr/bin/echo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">hash</span>å‘½ä»¤è®°å½•ç€æ›¾ç»æ‰§è¡Œè¿‡çš„å¤–éƒ¨å‘½ä»¤</span></span><br><span class="line">[root@Rocky ~][0]# hash   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰å†…éƒ¨å‘½ä»¤</span></span><br><span class="line">enable | awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¤–éƒ¨å‘½ä»¤è·¯å¾„</span></span><br><span class="line">[root@Rocky ~][0]# which reboot</span><br><span class="line">/usr/sbin/reboot</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¤–éƒ¨å‘½ä»¤è·¯å¾„,åŒæ—¶æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£çš„è·¯å¾„</span></span><br><span class="line">[root@Rocky ~][0]# whereis ls</span><br><span class="line">ls: /usr/bin/ls /usr/share/man/man1/ls.1.gz /usr/share/man/man1p/ls.1p.gz</span><br></pre></td></tr></table></figure><h3 id="2-2-Hashç¼“å­˜è¡¨"><a href="#2-2-Hashç¼“å­˜è¡¨" class="headerlink" title="2.2 Hashç¼“å­˜è¡¨"></a>2.2 Hashç¼“å­˜è¡¨</h3><p>ç³»ç»Ÿåˆå§‹hashè¡¨ä¸ºç©ºï¼Œå½“å¤–éƒ¨å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œé»˜è®¤ä¼šä»PATHè·¯å¾„ä¸‹å¯»æ‰¾è¯¥å‘½ä»¤ï¼Œæ‰¾åˆ°åä¼šå°†è¿™æ¡å‘½ä»¤çš„è·¯å¾„è®°å½•åˆ°hashè¡¨ä¸­ï¼Œå½“å†æ¬¡ä½¿ç”¨è¯¥å‘½ä»¤æ—¶ï¼Œshelè§£é‡Šå™¨é¦–å…ˆä¼šæŸ¥çœ‹hashè¡¨ï¼Œå­˜åœ¨å°†æ‰§è¡Œä¹‹ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°†ä¼šå»PATHè·¯å¾„ä¸‹å¯»æ‰¾ï¼Œåˆ©ç”¨hashç¼“å­˜è¡¨å¯å¤§å¤§æé«˜å‘½ä»¤çš„è°ƒç”¨é€Ÿç‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hashæ˜¾ç¤ºç¼“å­˜</span><br><span class="line">hash -læ˜¾ç¤ºhashç¼“å­˜,å¯ä½œä¸ºè¾“å…¥ä½¿ç”¨</span><br><span class="line">hash -p path name å°†å‘½ä»¤å…¨è·¯å¾„pathèµ·åˆ«åä¸ºname</span><br><span class="line">hash -d name æ¸…æ¥šnameç¼“å­˜</span><br><span class="line">hash -ræ¸…æ¥šæ‰€æœ‰ç¼“å­˜</span><br></pre></td></tr></table></figure><h3 id="2-3-å‘½ä»¤åˆ«å"><a href="#2-3-å‘½ä»¤åˆ«å" class="headerlink" title="2.3 å‘½ä»¤åˆ«å"></a>2.3 å‘½ä»¤åˆ«å</h3><p><strong>åˆ«åæ°¸ä¹…ç”Ÿæ•ˆï¼š</strong></p><ul><li>ä»…å¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼š~&#x2F;.bashrc</li><li>å¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆï¼š&#x2F;etc&#x2F;bashrc</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºå½“å‰shellè¿›ç¨‹ä¸­æ‰€æœ‰å¯ç”¨çš„å‘½ä»¤åˆ«å</span></span><br><span class="line">alias</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®šä¹‰åˆ«å</span></span><br><span class="line">type eth0 || alias eth0=&quot;vim /etc/sysconfig/network-scripts/ifcfg-eth0&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶å–æ¶ˆæ‰€æœ‰åˆ«å</span></span><br><span class="line">unalias -a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ«åç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line">exec $SHELL -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ¶ˆåˆ«å,å½“ä½œæ™®é€šå‘½ä»¤æ¥æ¥æ‰§è¡Œ</span></span><br><span class="line">\aliasname</span><br><span class="line">&quot;aliasname&quot;</span><br><span class="line">&#x27;aliasname&#x27;</span><br><span class="line">/PATH/cmd# åªé€‚åˆå¤–éƒ¨å‘½ä»¤</span><br></pre></td></tr></table></figure><h3 id="2-4-å‘½ä»¤çš„ä¼˜å…ˆçº§"><a href="#2-4-å‘½ä»¤çš„ä¼˜å…ˆçº§" class="headerlink" title="2.4 å‘½ä»¤çš„ä¼˜å…ˆçº§"></a>2.4 å‘½ä»¤çš„ä¼˜å…ˆçº§</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ«å &gt; å†…éƒ¨å‘½ä»¤ &gt; å¤–éƒ¨å‘½ä»¤ </span><br></pre></td></tr></table></figure><h3 id="2-5-å‘½ä»¤æ ¼å¼"><a href="#2-5-å‘½ä»¤æ ¼å¼" class="headerlink" title="2.5 å‘½ä»¤æ ¼å¼"></a>2.5 å‘½ä»¤æ ¼å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMD[é€‰é¡¹...] [å‚æ•°...]</span><br></pre></td></tr></table></figure><ul><li>çŸ­é€‰é¡¹ï¼šUNIXé£æ ¼é€‰é¡¹ï¼Œä¾‹å¦‚ï¼š-lï¼Œ-h</li><li>é•¿é€‰é¡¹ï¼šGNUé£æ ¼é€‰é¡¹ï¼Œä¾‹å¦‚ï¼šâ€“allï¼Œâ€“host</li><li>BSDé£æ ¼é€‰é¡¹ï¼šä¸€ä¸ªå­—æ¯ï¼Œä¾‹å¦‚ï¼ša</li></ul><p>æ³¨æ„ï¼š</p><ul><li>å¤šä¸ªé€‰é¡¹ä»¥åŠå‚æ•°å’Œå‘½ä»¤ä¹‹é—´ä½¿ç”¨ç©ºç™½å­—ç¬¦åˆ†å‰²</li><li>å–æ¶ˆå’Œç»“æŸå‘½ä»¤æ‰§è¡Œï¼šCtrl+cå¼ºè¡Œç»ˆæ­¢ï¼ŒCtrl+dæ­£å¸¸é€€å‡º</li><li>å¤šä¸ªå‘½ä»¤å¯ä»¥ç”¨â€ ; â€œç¬¦å·åˆ†å¼€</li><li>ä¸€ä¸ªå‘½ä»¤å¯ä»¥ç”¨ \ åˆ†æˆå¤šè¡Œ</li></ul><h1 id="3-ç³»ç»Ÿç›¸å…³å¸¸è§å‘½ä»¤"><a href="#3-ç³»ç»Ÿç›¸å…³å¸¸è§å‘½ä»¤" class="headerlink" title="3. ç³»ç»Ÿç›¸å…³å¸¸è§å‘½ä»¤"></a>3. ç³»ç»Ÿç›¸å…³å¸¸è§å‘½ä»¤</h1><h3 id="3-1-æŸ¥çœ‹CPU"><a href="#3-1-æŸ¥çœ‹CPU" class="headerlink" title="3.1 æŸ¥çœ‹CPU"></a>3.1 æŸ¥çœ‹CPU</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lscpu</span><br><span class="line">cat /proc/cpuinfo</span><br></pre></td></tr></table></figure><h3 id="3-2-æŸ¥çœ‹å†…å­˜å¤§å°"><a href="#3-2-æŸ¥çœ‹å†…å­˜å¤§å°" class="headerlink" title="3.2 æŸ¥çœ‹å†…å­˜å¤§å°"></a>3.2 æŸ¥çœ‹å†…å­˜å¤§å°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">free [é€‰é¡¹]</span><br><span class="line"></span><br><span class="line">-bä»¥å­—èŠ‚ä¸ºå•ä½</span><br><span class="line">-mä»¥MBä¸ºå•ä½</span><br><span class="line">-gä»¥GBä¸ºå•ä½</span><br><span class="line">-hæ˜“è¯»æ ¼å¼</span><br><span class="line">-tæ˜¾ç¤ºRAM+SWAPçš„æ€»å’Œ</span><br><span class="line">-s ?æ¯éš”?ç§’åˆ·æ–°ä¸€æ¬¡</span><br><span class="line">-c ?åˆ·æ–°?æ¬¡åé€€å‡º</span><br><span class="line"></span><br><span class="line">[root@Centos7 ~]$ free -h</span><br><span class="line">              total        used        free      shared         buff/cache      available</span><br><span class="line">Mem:           2.8G        343M        2.1G        9.8M               359M           2.3G</span><br><span class="line">Swap:          3.0G          0B        3.0G</span><br><span class="line">           æ€»å†…å­˜å¤§å°å·²ç”¨         å‰©ä½™    è¢«å…±äº«çš„å†…å­˜        ç¼“å†²/ç¼“å­˜     å®é™…æœ€å¤§å¯ç”¨</span><br><span class="line">           </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…é™¤ç¼“å­˜,é»˜è®¤å€¼æ˜¯0,é‡å¯æ‰èƒ½æ¢å¤ï¼ˆæ²¡æœ‰å¿…è¦ï¼Œç³»ç»Ÿè¿˜è¦é‡æ–°è¯»å–ï¼‰</span></span><br><span class="line">echo 3 &gt; /proc/sys/vm/drop_caches</span><br></pre></td></tr></table></figure><h3 id="3-3-æŸ¥çœ‹ç¡¬ç›˜å¤§å°"><a href="#3-3-æŸ¥çœ‹ç¡¬ç›˜å¤§å°" class="headerlink" title="3.3 æŸ¥çœ‹ç¡¬ç›˜å¤§å°"></a>3.3 æŸ¥çœ‹ç¡¬ç›˜å¤§å°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df </span><br><span class="line"></span><br><span class="line">-Hä»¥10ä¸ºå•ä½</span><br><span class="line">-Tæ–‡ä»¶ç³»ç»Ÿç±»å‹</span><br><span class="line">-hæŒ‰2è¿›åˆ¶è®¡ç®—</span><br><span class="line">-iæŸ¥çœ‹idone</span><br><span class="line">-Pç¨å¾®æ•´é½ç‚¹çš„è¾“å‡º</span><br><span class="line">-fæ‰€æœ‰åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿ</span><br></pre></td></tr></table></figure><h3 id="3-4-æŸ¥çœ‹ç¡¬ç›˜å’Œåˆ†åŒºæƒ…å†µ"><a href="#3-4-æŸ¥çœ‹ç¡¬ç›˜å’Œåˆ†åŒºæƒ…å†µ" class="headerlink" title="3.4 æŸ¥çœ‹ç¡¬ç›˜å’Œåˆ†åŒºæƒ…å†µ"></a>3.4 æŸ¥çœ‹ç¡¬ç›˜å’Œåˆ†åŒºæƒ…å†µ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br><span class="line"></span><br><span class="line">-fæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line">cat /proc/partitions</span><br></pre></td></tr></table></figure><h3 id="3-5-æŸ¥çœ‹ç›®å½•å¤§å°"><a href="#3-5-æŸ¥çœ‹ç›®å½•å¤§å°" class="headerlink" title="3.5 æŸ¥çœ‹ç›®å½•å¤§å°"></a>3.5 æŸ¥çœ‹ç›®å½•å¤§å°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">du [é€‰é¡¹] ç›®å½•</span><br><span class="line"></span><br><span class="line">-h</span><br><span class="line">-sç©ºé—´æ€»å’Œ</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹/etcå¤§å°</span></span><br><span class="line">du -sh /etc/</span><br></pre></td></tr></table></figure><h3 id="3-6-æŸ¥çœ‹æ“ä½œå†…æ ¸ç‰ˆæœ¬"><a href="#3-6-æŸ¥çœ‹æ“ä½œå†…æ ¸ç‰ˆæœ¬" class="headerlink" title="3.6 æŸ¥çœ‹æ“ä½œå†…æ ¸ç‰ˆæœ¬"></a>3.6 æŸ¥çœ‹æ“ä½œå†…æ ¸ç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><h3 id="3-7-æŸ¥çœ‹æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆæœ¬"><a href="#3-7-æŸ¥çœ‹æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆæœ¬" class="headerlink" title="3.7 æŸ¥çœ‹æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆæœ¬"></a>3.7 æŸ¥çœ‹æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br><span class="line">cat /etc/os-release</span><br></pre></td></tr></table></figure><h3 id="3-8-æŸ¥çœ‹æ—¥æœŸå’Œæ—¶é—´"><a href="#3-8-æŸ¥çœ‹æ—¥æœŸå’Œæ—¶é—´" class="headerlink" title="3.8 æŸ¥çœ‹æ—¥æœŸå’Œæ—¶é—´"></a>3.8 æŸ¥çœ‹æ—¥æœŸå’Œæ—¶é—´</h3><p>Linuxçš„ä¸¤ç§æ—¶é’Ÿ</p><p>â€‹ç³»ç»Ÿæ—¶é’Ÿï¼šç”±Linuxå†…æ ¸é€šè¿‡CPUçš„å·¥ä½œé¢‘ç‡æ¥è¿›è¡Œçš„</p><p>â€‹ç¡¬ä»¶æ—¶é’Ÿï¼šä¸»æ¿</p><p>ç›¸å…³å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">date</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç¡¬ä»¶æ—¶é—´</span></span><br><span class="line">clock</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥ç¡¬ä»¶æ—¶é—´ä¸ºå‡†,åŒæ­¥æ“ä½œç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">clock -s</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥æ“ä½œç³»ç»Ÿæ—¶é—´ä¸ºå‡†,åŒæ­¥ç¡¬ä»¶æ—¶é—´</span></span><br><span class="line">clock -w</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æŒ‡å®šæ—¶é—´</span></span><br><span class="line">date -s &quot;2023-10-24 15:30:00&quot;</span><br><span class="line"></span><br><span class="line">date &quot;+%Yå¹´ %mæœˆ %dæ—¥ æ˜ŸæœŸ%u %H:%M:%S %Z&quot;</span><br></pre></td></tr></table></figure><h3 id="3-9-æŸ¥çœ‹-ä¿®æ”¹æ—¶åŒº"><a href="#3-9-æŸ¥çœ‹-ä¿®æ”¹æ—¶åŒº" class="headerlink" title="3.9 æŸ¥çœ‹&#x2F;ä¿®æ”¹æ—¶åŒº"></a>3.9 æŸ¥çœ‹&#x2F;ä¿®æ”¹æ—¶åŒº</h3><p>æ—¶åŒºæ–‡ä»¶æ¥è‡ªç›¸å…³å·¥å…·ï¼štâ€™z</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç³»ç»Ÿå½“å‰æ—¶åŒº</span></span><br><span class="line">ll /etc/localtime</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰æ—¶åŒºåˆ—è¡¨</span></span><br><span class="line">timedatectl list-timezones</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æ—¶åŒºä¸ºæŒ‡å®šæ—¶åŒº</span></span><br><span class="line">timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure><h3 id="3-10-æŸ¥çœ‹æ—¥å†"><a href="#3-10-æŸ¥çœ‹æ—¥å†" class="headerlink" title="3.10 æŸ¥çœ‹æ—¥å†"></a>3.10 æŸ¥çœ‹æ—¥å†</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ä»Šå¹´æ—¥å†</span></span><br><span class="line">cal -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å…¨å¹´</span></span><br><span class="line">cal 12</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹2020å¹´æ—¥å†</span></span><br><span class="line">cal 2020</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹2020å¹´10æœˆä»½æ—¥å¿—</span></span><br><span class="line">cal 10 2020</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹1752å¹´9æœˆä»½æ—¥å†</span></span><br><span class="line">cal 9 1752</span><br></pre></td></tr></table></figure><h3 id="3-11-å…³æœºå’Œé‡å¯"><a href="#3-11-å…³æœºå’Œé‡å¯" class="headerlink" title="3.11 å…³æœºå’Œé‡å¯"></a>3.11 å…³æœºå’Œé‡å¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…³æœº</span></span><br><span class="line">halt</span><br><span class="line">poweroff</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯</span></span><br><span class="line">-få¼ºåˆ¶å…³æœº,ä¸è°ƒç”¨shutdown</span><br><span class="line">-påˆ‡æ–­ç”µæº</span><br><span class="line">reboot</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…³æœºæˆ–é‡å¯</span></span><br><span class="line">shutdown é€‰é¡¹</span><br><span class="line">-ré‡å¯</span><br><span class="line">-hå…³æœº</span><br><span class="line">-cæ¸…é™¤</span><br><span class="line"></span><br><span class="line">shutdown å‚æ•°</span><br><span class="line">TIMEä¸æŒ‡å®š,é»˜è®¤ç›¸å½“äº+1ï¼ˆCentos 7ï¼‰</span><br><span class="line">nowç«‹åˆ»,ç›¸å½“äº+0</span><br><span class="line">+#å‡ åˆ†é’Ÿå,ä¾‹å¦‚+3</span><br><span class="line">hh:mmç»å¯¹æ—¶é—´è¡¨ç¤º,æŒ‡æ˜å…·ä½“æ—¶é—´</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç«‹å³é‡å¯</span></span><br><span class="line">shutdown -r now</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç«‹å³å…³æœº</span></span><br><span class="line">shutdown -h now</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">10åˆ†é’Ÿåå…³æœº</span></span><br><span class="line">shutdown -r +10</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">11ç‚¹å®šæ—¶å…³æœº</span></span><br><span class="line">shutdown -r 11:00</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…é™¤è®¾å®šçš„æ“ä½œ</span></span><br><span class="line">shutdown -c</span><br></pre></td></tr></table></figure><h3 id="3-12-ä¼šè¯ç®¡ç†"><a href="#3-12-ä¼šè¯ç®¡ç†" class="headerlink" title="3.12 ä¼šè¯ç®¡ç†"></a>3.12 ä¼šè¯ç®¡ç†</h3><p><strong>screen</strong></p><p>åˆ©ç”¨screenå¯ä»¥å®ç°ä¼šè¯ç®¡ç†ï¼Œå¦‚ï¼šæ–°å»ºä¼šè¯ï¼Œå…±äº«ä¼šè¯ç­‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…screenæ¥è‡ªEPELæº</span></span><br><span class="line">yum -y install screen</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯</span></span><br><span class="line">screen -S [ screen_name ]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŠ å…¥ä¸€ä¸ªä¼šè¯</span></span><br><span class="line">screen -x [ screen_name ]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€€å‡ºå¹¶å…³é—­ä¼šè¯</span></span><br><span class="line">exit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‰¥ç¦»å½“å‰screenä¼šè¯</span></span><br><span class="line">Ctrl+a+d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ‰€æœ‰å·²ç»æ‰“å¼€çš„screenä¼šè¯</span></span><br><span class="line">screen -ls</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤æŸscreenä¼šè¯</span></span><br><span class="line">screen -r [ screen_name ]</span><br></pre></td></tr></table></figure><h3 id="3-13-è¾“å‡ºä¿¡æ¯echo"><a href="#3-13-è¾“å‡ºä¿¡æ¯echo" class="headerlink" title="3.13 è¾“å‡ºä¿¡æ¯echo"></a>3.13 è¾“å‡ºä¿¡æ¯echo</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-Eï¼ˆé»˜è®¤ï¼‰ä¸æ”¯æŒ\è§£é‡ŠåŠŸèƒ½</span><br><span class="line">-n ä¸è‡ªåŠ¨æ¢è¡Œ</span><br><span class="line">-e å¯ç”¨\å­—ç¬¦çš„è§£é‡ŠåŠŸèƒ½</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‹¥å¯ç”¨å‘½ä»¤-e,è‹¥å­—ç¬¦ä¸²ä¸­å‡ºç°ä¸€ä¸‹å­—ç¬¦,åˆ™ç‰¹åˆ«åŠ ä»¥å¤„ç†,è€Œä¸ä¼šå°†ä»–å½“æˆä¸€èˆ¬æ–‡å­—è¾“å‡º</span></span><br><span class="line">\aå‘å‡ºè­¦æŠ¥å£°</span><br><span class="line">\bé€€æ ¼é”®</span><br><span class="line">\cæœ€åä¸åŠ ä¸Šæ¢è¡Œç¬¦å·</span><br><span class="line">\eescape,ç›¸å½“äº\033</span><br><span class="line">\næ¢è¡Œä¸”å…‰æ ‡ç§»è‡³è¡Œé¦–</span><br><span class="line">\rå›è½¦,å³å…‰æ ‡ç§»è‡³è¡Œé¦–,ä½†ä¸æ¢è¡Œ</span><br><span class="line">\tæ’å…¥tab</span><br><span class="line">\\æ’å…¥\å­—ç¬¦</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">echo -e &quot;\a&quot;</span><br></pre></td></tr></table></figure><p><strong>å˜é‡å¼•ç”¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å˜é‡ä¼šæ›¿æ¢,å¼±å¼•ç”¨</span></span><br><span class="line">echo &quot;$VAR_NAME&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å˜é‡ä¸ä¼šè¢«æ›¿æ¢,å¼ºå¼•ç”¨</span></span><br><span class="line">echo &#x27;$VAR_NAME&#x27;</span><br></pre></td></tr></table></figure><h3 id="3-14-å‘½ä»¤è¡Œæ‰©å±•å’Œè¢«æ‹¬èµ·æ¥çš„é›†åˆ"><a href="#3-14-å‘½ä»¤è¡Œæ‰©å±•å’Œè¢«æ‹¬èµ·æ¥çš„é›†åˆ" class="headerlink" title="3.14 å‘½ä»¤è¡Œæ‰©å±•å’Œè¢«æ‹¬èµ·æ¥çš„é›†åˆ"></a>3.14 å‘½ä»¤è¡Œæ‰©å±•å’Œè¢«æ‹¬èµ·æ¥çš„é›†åˆ</h3><h4 id="3-14-1-å‘½ä»¤è¡Œæ‰©å±•-å’Œ"><a href="#3-14-1-å‘½ä»¤è¡Œæ‰©å±•-å’Œ" class="headerlink" title="3.14.1 å‘½ä»¤è¡Œæ‰©å±•` `å’Œ$( )"></a>3.14.1 å‘½ä»¤è¡Œæ‰©å±•` `å’Œ$( )</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŠŠä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºæ‰“å°ç»™å¦ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(CMD) æˆ– `CMD`</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">echo &quot;my IP is $(hostname -I)&quot;</span><br></pre></td></tr></table></figure><h4 id="3-14-2-æ‹¬å·æ‰©å±•ï¼š"><a href="#3-14-2-æ‹¬å·æ‰©å±•ï¼š" class="headerlink" title="3.14.2 æ‹¬å·æ‰©å±•ï¼š{  }"></a>3.14.2 æ‹¬å·æ‰©å±•ï¼š{  }</h4><p>{ }å¯ä»¥å®ç°æ‰“å°é‡å¤å­—ç¬¦ä¸²çš„ç®€åŒ–å½¢å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky ~][0]# echo file&#123;1,2,3&#125;</span><br><span class="line">file1 file2 file3</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# echo &#123;1..10&#125;</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# echo &#123;1..10&#125;</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line"></span><br><span class="line">echo &#123;a..z&#125;</span><br><span class="line">a b c d e f g h i j k l m n o p q r s t u v w x y z</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][130]# echo &#123;10..1&#125;</span><br><span class="line">10 9 8 7 6 5 4 3 2 1</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# echo &#123;1..20..2&#125;</span><br><span class="line">1 3 5 7 9 11 13 15 17 19</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# echo &#123;000..20..4&#125;</span><br><span class="line">000 004 008 012 016 020</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# echo &#123;A..z&#125;</span><br><span class="line">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [  ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z</span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# echo file&#123;1..2&#125;.&#123;txt,log&#125;</span><br><span class="line">file1.txt file1.log file2.txt file2.log</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-14-3-å•å¼•å·ï¼ŒåŒå¼•å·å’Œåå‘å•å¼•å·çš„åŒºåˆ«åŒºåˆ«"><a href="#3-14-3-å•å¼•å·ï¼ŒåŒå¼•å·å’Œåå‘å•å¼•å·çš„åŒºåˆ«åŒºåˆ«" class="headerlink" title="3.14.3 å•å¼•å·ï¼ŒåŒå¼•å·å’Œåå‘å•å¼•å·çš„åŒºåˆ«åŒºåˆ«"></a>3.14.3 å•å¼•å·ï¼ŒåŒå¼•å·å’Œåå‘å•å¼•å·çš„åŒºåˆ«åŒºåˆ«</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å•å¼•å·ï¼šå˜é‡å’Œå‘½ä»¤éƒ½ä¸è¯†åˆ«,å½“ä½œæ™®é€šå­—ç¬¦ä¸²æ¥å¤„ç†</span><br><span class="line">åŒå¼•å·ï¼šä¸èƒ½è¯†åˆ«å‘½ä»¤,å¯ä»¥è¯†åˆ«å˜é‡</span><br><span class="line">åå‘å•å¼•å·ï¼šå˜é‡å’Œå‘½ä»¤éƒ½è¯†åˆ«,å¹¶ä¸”ä¼šå°†åå‘å•å¼•å·çš„å†…å®¹å½“ä½œå‘½ä»¤è¿›è¡Œæ‰§è¡Œå,å†äº¤ç»™è°ƒç”¨åå‘å•å¼•å·çš„å‘½ä»¤ç»§ç»­</span><br></pre></td></tr></table></figure><h3 id="3-15-tabé”®è¡¥å…¨"><a href="#3-15-tabé”®è¡¥å…¨" class="headerlink" title="3.15 tabé”®è¡¥å…¨"></a>3.15 tabé”®è¡¥å…¨</h3><p>tabé”®å¯ä»¥å®ç°å‘½ä»¤åŠè·¯å¾„è¡¥å…¨ï¼Œæé«˜è¾“å…¥æ•ˆç‡ï¼Œé¿å…å‡ºé”™ï¼Œ&#x3D;&#x3D;åŠŸèƒ½æ¥è‡ªbash-completionè½¯ä»¶åŒ…&#x3D;&#x3D;</p><h4 id="3-15-1-å‘½ä»¤è¡¥å…¨"><a href="#3-15-1-å‘½ä»¤è¡¥å…¨" class="headerlink" title="3.15.1  å‘½ä»¤è¡¥å…¨"></a>3.15.1  å‘½ä»¤è¡¥å…¨</h4><ul><li>å†…éƒ¨å‘½ä»¤ï¼š</li><li>å¤–éƒ¨å‘½ä»¤ï¼šbashæ ¹æ®PATHç¯å¢ƒå˜é‡å®šä¹‰çš„è·¯å¾„ï¼Œè‡ªå·¦è€Œå³å†æ¯ä¸ªè·¯å¾„æœå¯»ä»¥ç»™å®šå‘½ä»¤åå‘½åçš„æ–‡ä»¶ï¼Œç¬¬ä¸€æ¬¡æ‰¾åˆ°çš„å‘½ä»¤å³ä¸ºè¦æ‰§è¡Œçš„å‘½ä»¤</li></ul><p>æ³¨æ„ï¼šç”¨æˆ·ç»™å®šçš„å­—ç¬¦ä¸²åªæœ‰ä¸€æ¡å”¯ä¸€å¯¹åº”çš„å‘½ä»¤ï¼Œç›´æ¥è¡¥å…¨ï¼Œå¦åˆ™ï¼Œå†æ¬¡tabä¼šç»™å‡ºåˆ—è¡¨</p><h4 id="3-15-2-è·¯å¾„è¡¥å…¨"><a href="#3-15-2-è·¯å¾„è¡¥å…¨" class="headerlink" title="3.15.2 è·¯å¾„è¡¥å…¨"></a>3.15.2 è·¯å¾„è¡¥å…¨</h4><p>æŠŠç”¨æˆ·ç»™å‡ºçš„å­—ç¬¦ä¸²å½“ä½œè·¯å¾„å¼€å¤´ï¼Œå¹¶åœ¨å…¶æŒ‡å®šä¸Šçº§ç›®å½•ä¸‹æœç´¢ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²å¼€å¤´çš„æ–‡ä»¶å</p><p>å¦‚æœå”¯ä¸€ï¼šåˆ™ç›´æ¥è¡¥å…¨</p><p>å¦åˆ™ï¼šå†æ¬¡Tabç»™å‡ºåˆ—è¡¨</p><h4 id="3-15-3-åŒå‡»Tabé”®"><a href="#3-15-3-åŒå‡»Tabé”®" class="headerlink" title="3.15.3 åŒå‡»Tabé”®"></a>3.15.3 åŒå‡»Tabé”®</h4><p>CMD 2Tabæ‰€æœ‰å­å‘½ä»¤æˆ–æ–‡ä»¶è¡¥å…¨</p><p>string 2Tabä»¥srtingå¼€å¤´å‘½ä»¤</p><p>&#x2F;2Tabæ˜¾ç¤ºæ ¹ç›®å½•ä¸‹ä¸€çº§ç›®å½•ï¼ŒåŒ…æ‹¬éšè—ç›®å½•</p><p>.&#x2F;2Tabæ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹å­ç›®å½•ï¼ŒåŒ…æ‹¬éšè—ç›®å½•</p><p>*2Tabå½“å‰ç›®å½•ä¸‹å­ç›®å½•ï¼Œä¸åŒ…æ‹¬éšè—ç›®å½•</p><p>~2Tabæ‰€æœ‰ç”¨æˆ·åˆ—è¡¨</p><p>$2Tabæ‰€æœ‰å˜é‡</p><p>@2Tab&#x2F;etc&#x2F;hostsè®°å½•ï¼ˆCentos 7 ä¸æ”¯æŒï¼‰</p><p>&#x3D;2Tabç›¸å½“äºls -A ï¼ˆCentos 7ä¸æ”¯æŒï¼‰</p><h3 id="3-16-å‘½ä»¤è¡Œå†å²"><a href="#3-16-å‘½ä»¤è¡Œå†å²" class="headerlink" title="3.16 å‘½ä»¤è¡Œå†å²"></a>3.16 å‘½ä»¤è¡Œå†å²</h3><p>ä¿å­˜ä½ è¾“å…¥çš„å‘½ä»¤å†å²ã€‚å¯ä»¥ç”¨å®ƒæ¥é‡å¤æ‰§è¡Œå‘½ä»¤</p><p>ç™»å½•shellæ—¶ï¼Œä¼šè¯»å–å‘½ä»¤å†å²æ–‡ä»¶ä¸­è®°å½•ä¸‹çš„å‘½ä»¤<code>~/.bash_history</code></p><p>ç™»å½•è¿›shellåæ–°æ‰§è¡Œçš„å‘½ä»¤åªä¼šè®°å½•åœ¨ç¼“å­˜ä¸­;è¿™äº›å‘½ä»¤ä¼šåœ¨ç”¨æˆ·é€€å‡ºæ—¶â€è¿½åŠ â€è‡³å‘½ä»¤å†å²æ–‡ä»¶ä¸­</p><p>å½“ç”¨æˆ·æ­£å¸¸é€€å‡ºæ—¶ï¼ˆexitï¼ŒCtrl+dï¼‰ï¼Œä¼šå°†å†…å­˜çš„å‘½ä»¤å†å²å­˜æ”¾å¯¹åº”çš„å†å²æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ˜¯<code>~/.bash_history</code></p><p><strong>å‘½ä»¤ï¼šhistory</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-cæ¸…ç©ºå‘½ä»¤å†å²</span><br><span class="line">-doffset:åˆ é™¤å†å²ä¸­æŒ‡å®šçš„ç¬¬offset</span><br><span class="line"> næ˜¾ç¤ºæœ€è¿‘çš„næ¡å†å²</span><br><span class="line">-aè¿½åŠ æœ¬æ¬¡ä¼šè¯æ–°æ‰§è¡Œçš„å‘½ä»¤å†å²åˆ—è¡¨è‡³å†å²åˆ—è¡¨æ–‡ä»¶</span><br><span class="line">-rè¯»å†å²æ–‡ä»¶é™„åŠ åˆ°å†å²åˆ—è¡¨</span><br><span class="line">-wä¿å­˜å†å²åˆ—è¡¨åˆ°æŒ‡å®šçš„å†å²æ–‡ä»¶</span><br><span class="line">-nè¯»å†å²æ–‡ä»¶ä¸­æœªåº¦è¿‡çš„è¡Œåˆ°å†å²åˆ—è¡¨</span><br><span class="line">-på±•å¼€å†å²å‚æ•°æˆå¤šè¡Œ,ä½†ä¸å­˜åœ¨å†å²åˆ—è¡¨ä¸­</span><br><span class="line">-så±•ç¤ºå†å²å‚æ•°æˆä¸€è¡Œ,é™„åŠ åœ¨å†å²åˆ—è¡¨å</span><br></pre></td></tr></table></figure><p>å†å²å‘½ä»¤è®°å½•çš„æ•°é‡ç”±å˜é‡<code>$HISTSIZE</code>æ§åˆ¶</p><p>å†å²æ–‡ä»¶ç”±å˜é‡<code>$HISFILE</code>æ§åˆ¶</p><p>å‘½ä»¤å†å²æ–‡ä»¶è®°å½•æ¡æ•°ç”±å˜é‡<code>$HISTFILESIZE</code>æ§åˆ¶</p><p>å‘½ä»¤å†å²ä¿å­˜æ ¼å¼ç”±å˜é‡<code>export HISTTIMEFORMAT=&quot;%F %T $(whoami) &quot;</code>å®šä¹‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹è®°å½•æ•°</span></span><br><span class="line">sed -i &#x27;s|HISTSIZE=1000|HISTSIZE=5000|&#x27; /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line">. /etc/profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆä¸€æ¡å‡çš„å‘½ä»¤å†å²</span></span><br><span class="line">history -s rm -rf /*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹å†å²å‘½ä»¤æ ¼å¼</span></span><br><span class="line">export HISTTIMEFORMAT=&quot;%F %T &quot;</span><br><span class="line"></span><br><span class="line">[15:13:25] [root@Rocky ~][0]# history </span><br><span class="line">    1  2023-10-24 15:09:36 echo 1</span><br><span class="line">    2  2023-10-24 15:09:36 echo 2</span><br></pre></td></tr></table></figure><h3 id="3-17-Bashå¿«æ·é”®"><a href="#3-17-Bashå¿«æ·é”®" class="headerlink" title="3.17 Bashå¿«æ·é”®"></a>3.17 Bashå¿«æ·é”®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + læ¸…å±</span><br><span class="line">Ctrl + oæ‰§è¡Œå½“å‰å‘½ä»¤ï¼Œå¹¶é‡æ–°æ˜¾ç¤ºæœ¬å‘½ä»¤</span><br><span class="line">Ctrl + sé˜»æ­¢å±å¹•è¾“å‡ºï¼Œé”å®š</span><br><span class="line">Ctrl + qå…è®¸å±å¹•è¾“å‡ºï¼Œè§£é”</span><br><span class="line">Ctrl + cç»ˆæ­¢å‘½ä»¤</span><br><span class="line">Ctrl + zæŒ‚èµ·å‘½ä»¤</span><br><span class="line">Ctrl + aå…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œé¦–ï¼Œç›¸å½“äºHome</span><br><span class="line">Ctrl + eå…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œå°¾ï¼Œç›¸å½“äºEnd</span><br><span class="line">Ctrl + få…‰æ ‡å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">Ctrl + bå…‰æ ‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">Ctrl + xxå…‰æ ‡åœ¨å‘½ä»¤è¡Œé¦–å’Œå…‰æ ‡ä¹‹é—´ç§»åŠ¨</span><br><span class="line">Ctrl + uä»å…‰æ ‡å‡ºåˆ é™¤è‡³å‘½ä»¤è¡Œé¦–</span><br><span class="line">Ctrl + kä»å…‰æ ‡å¤„åˆ é™¤è‡³å‘½ä»¤è¡Œå°¾</span><br><span class="line">Alt  + råˆ é™¤å½“å‰æ•´è¡Œ</span><br><span class="line">Ctrl + wä»å…‰æ ‡å¤„å‘å·¦åˆ é™¤è‡³å•è¯å°¾</span><br><span class="line">Alt  + dä»å…‰æ ‡å¤„å‘å³åˆ é™¤è‡³å•è¯å°¾</span><br><span class="line">Ctrl + dåˆ é™¤å…‰æ ‡å¤„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">Ctrl + håˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">Ctrl + yå°†åˆ é™¤çš„å­—ç¬¦ç²˜è´´è‡³å…‰æ ‡å</span><br><span class="line">Alt  + cä»å…‰æ ‡å¤„å¼€å§‹å‘å³æ›´æ”¹ä¸ºé¦–å­—æ¯å¤§å†™çš„å•è¯</span><br><span class="line">Alt  + uä»å…‰æ ‡å¤„å¼€å§‹ï¼Œå°†å³è¾¹ä¸€å…±å•è¯æ”¹ä¸ºå¤§å†™</span><br><span class="line">Alt  + lä»å…‰æ ‡å¤„å¼€å§‹ï¼Œå°†å³è¾¹ä¸€å…±å•è¯æ›´æ”¹ä¸ºå¤§å†™</span><br><span class="line">Ctrl + täº¤æ¢å…‰æ ‡å¤„å’Œä¹‹å‰çš„å­—ç¬¦ä½ç½®</span><br><span class="line">Alt  + täº¤æ¢å…‰æ ‡å¤„å’Œä¹‹å‰çš„å•è¯ä½ç½®</span><br><span class="line">Alt  + #æç¤ºè¾“å…¥æŒ‡å®šå­—ç¬¦åï¼Œé‡å¤æ˜¾ç¤ºæ”¹å­—ç¬¦#æ¬¡</span><br></pre></td></tr></table></figure><h3 id="3-18-åˆ†æç³»ç»Ÿå¯åŠ¨æ—¶çš„æ¶ˆæ¯"><a href="#3-18-åˆ†æç³»ç»Ÿå¯åŠ¨æ—¶çš„æ¶ˆæ¯" class="headerlink" title="3.18 åˆ†æç³»ç»Ÿå¯åŠ¨æ—¶çš„æ¶ˆæ¯"></a>3.18 åˆ†æç³»ç»Ÿå¯åŠ¨æ—¶çš„æ¶ˆæ¯</h3><p>å®ƒæ˜¾ç¤ºå†…æ ¸åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å‘å‡ºçš„æ¶ˆæ¯ï¼ŒåŒ…æ‹¬è®¾å¤‡æ£€æµ‹ã€é©±åŠ¨åŠ è½½ã€ç¡¬ä»¶é”™è¯¯ç­‰ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œ<code>dmesg</code> ä¹Ÿå¯ä»¥ç”¨äºæŸ¥çœ‹å®æ—¶å†…æ ¸æ¶ˆæ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg</span><br></pre></td></tr></table></figure><h3 id="3-19-åˆ¤æ–­æ“ä½œç³»ç»Ÿå®‰è£…æ—¶é—´"><a href="#3-19-åˆ¤æ–­æ“ä½œç³»ç»Ÿå®‰è£…æ—¶é—´" class="headerlink" title="3.19 åˆ¤æ–­æ“ä½œç³»ç»Ÿå®‰è£…æ—¶é—´"></a>3.19 åˆ¤æ–­æ“ä½œç³»ç»Ÿå®‰è£…æ—¶é—´</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum history | grep &#x27;System&#x27; | awk -F &#x27;|&#x27; &#x27;&#123;print $3&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="3-20-å°†ç¼“å†²åŒºæ•°æ®å†™å…¥ç¡¬ç›˜"><a href="#3-20-å°†ç¼“å†²åŒºæ•°æ®å†™å…¥ç¡¬ç›˜" class="headerlink" title="3.20 å°†ç¼“å†²åŒºæ•°æ®å†™å…¥ç¡¬ç›˜"></a>3.20 å°†ç¼“å†²åŒºæ•°æ®å†™å…¥ç¡¬ç›˜</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sync</span><br></pre></td></tr></table></figure><h3 id="3-21-å‘¨æœŸæ€§è¿è¡Œä¸€ä¸ªå‘½ä»¤"><a href="#3-21-å‘¨æœŸæ€§è¿è¡Œä¸€ä¸ªå‘½ä»¤" class="headerlink" title="3.21 å‘¨æœŸæ€§è¿è¡Œä¸€ä¸ªå‘½ä»¤"></a>3.21 å‘¨æœŸæ€§è¿è¡Œä¸€ä¸ªå‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-n ?æŒ‡å®šåˆ·æ–°æ—¶é—´é—´éš”</span><br><span class="line">-dé«˜äº®æ˜¾ç¤ºå…¶å˜åŒ–</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘è§†ç³»ç»Ÿå½“å‰è¿è¡Œæ—¶é—´</span></span><br><span class="line">watch -n 1 date</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘è§†ç½‘ç»œè¿æ¥</span></span><br><span class="line">watch ss -tulpn</span><br></pre></td></tr></table></figure><h1 id="4-è·å¾—å¸®åŠ©"><a href="#4-è·å¾—å¸®åŠ©" class="headerlink" title="4. è·å¾—å¸®åŠ©"></a>4. è·å¾—å¸®åŠ©</h1><h3 id="4-1-whatis"><a href="#4-1-whatis" class="headerlink" title="4.1 whatis"></a>4.1 whatis</h3><p>whatis ä½¿ç”¨æ•°æ®åº“æ¥æ˜¾ç¤ºå‘½ä»¤çš„ç®€çŸ­æè¿°ï¼Œåˆšå®‰è£…åä¸å¯ç«‹å³ä½¿ç”¨ï¼Œéœ€è¦åˆ¶ä½œæ•°æ®åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Centos 7ä»¥ååˆ¶ä½œæ•°æ®åº“</span></span><br><span class="line">mandb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Centos 6ä¹‹å‰åˆ¶ä½œæ•°æ®åº“</span></span><br><span class="line">makewhatis</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">whatis cat  ç­‰ä»·äº   man -f cat</span><br></pre></td></tr></table></figure><h3 id="4-2-æŸ¥çœ‹å‘½ä»¤å¸®åŠ©"><a href="#4-2-æŸ¥çœ‹å‘½ä»¤å¸®åŠ©" class="headerlink" title="4.2 æŸ¥çœ‹å‘½ä»¤å¸®åŠ©"></a>4.2 æŸ¥çœ‹å‘½ä»¤å¸®åŠ©</h3><p>å†…éƒ¨å‘½ä»¤ï¼š</p><ul><li>help CMD</li><li>man CMD</li></ul><p>å¤–éƒ¨å‘½ä»¤æˆ–è€…è½¯ä»¶ï¼š</p><ul><li>CMD â€“help æˆ– CMD -h</li><li>ä½¿ç”¨æ‰‹å†Œï¼ˆmanualï¼‰</li></ul><p>â€‹man CMD</p><ul><li>ä¿¡æ¯é¡µ</li></ul><p>â€‹info CMD</p><ul><li>ç¨‹åºè‡ªèº«å¸®åŠ©æ–‡æ¡£</li><li>ç¨‹åºå®˜æ–¹æ–‡æ¡£</li><li>å‘è¡Œç‰ˆçš„å®˜æ–¹æ–‡æ¡£</li><li>ç™¾åº¦ï¼ŒGoogle</li></ul><h3 id="4-3-â€“help-å’Œ-h-é€‰é¡¹"><a href="#4-3-â€“help-å’Œ-h-é€‰é¡¹" class="headerlink" title="4.3 â€“help å’Œ -h é€‰é¡¹"></a>4.3 â€“help å’Œ -h é€‰é¡¹</h3><p>æ ¼å¼è¯´æ˜ï¼š</p><ul><li>[] è¡¨ç¤ºå¯é€‰é¡¹</li><li>CPSæˆ–&lt;&gt;è¡¨ç¤ºå˜åŒ–çš„æ•°æ®</li><li>â€¦è¡¨ç¤ºä¸€ä¸ªåˆ—è¡¨</li><li>x|y|zçš„æ„æ€æ˜¯â€xâ€æˆ–â€yâ€æˆ–â€zâ€</li><li>-abcçš„æ„æ€æ˜¯-a -b -c</li><li>{ } è¡¨ç¤ºåˆ†ç»„</li></ul><h3 id="4-4-manå‘½ä»¤"><a href="#4-4-manå‘½ä»¤" class="headerlink" title="4.4 manå‘½ä»¤"></a>4.4 manå‘½ä»¤</h3><p>man æä¾›å‘½ä»¤å¸®åŠ©çš„æ–‡ä»¶ï¼Œæ‰‹å†Œä¹Ÿå­˜æ”¾åœ¨&#x2F;usr&#x2F;share&#x2F;man</p><p>å‡ ä¹æ¯ä¸ªå‘½ä»¤éƒ½æœ‰mançš„â€é¡µé¢â€</p><p>ä¸­æ–‡manå¸®åŠ©éœ€è¦å®‰è£…åŒ…</p><ul><li>man-pages</li><li>man-pages-zh-CN</li></ul><p>man é¡µé¢åˆ†ç»„ä¸ºä¸åŒçš„â€ç« èŠ‚â€ï¼Œç»Ÿç§°ä¸ºLinuxæ‰‹å†Œï¼Œman 1 man</p><ul><li>1ï¼šç”¨æˆ·å‘½ä»¤</li><li>2ï¼šç³»ç»Ÿè°ƒç”¨</li><li>3ï¼šCåº“è°ƒç”¨</li><li>4ï¼šè®¾å¤‡æ–‡ä»¶åŠç‰¹æ®Šæ–‡ä»¶</li><li>5ï¼šé…ç½®æ–‡ä»¶æ ¼å¼</li><li>6ï¼šæ¸¸æˆ</li><li>7ï¼šæ‚é¡¹</li><li>8ï¼šç®¡ç†ç±»å‘½ä»¤</li><li>8ï¼šLinuxå†…æ ¸API</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Centos 6 ä¹‹å‰ç‰ˆ man çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/man.config</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Centos 7 ä¹‹åç‰ˆ man çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/man_db.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ubuntu man çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/manpath.config</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹manæ‰‹å†Œé¡µï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¸®åŠ©</span></span><br><span class="line">man -f keyword</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ ¹æ®ä¸Šé¢çš„ç« èŠ‚æŸ¥è¯¢å¯¹åº”å¸®åŠ©</span></span><br><span class="line">man [ ç« èŠ‚ ] keyword</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°manå¸®åŠ©æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">man -w [ ç« èŠ‚ ] keyword</span><br></pre></td></tr></table></figure><p>manå¸®åŠ©æ®µè½è¯´æ˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">NAMEåç§°åŠç®€è¦è¯´æ˜</span><br><span class="line">SYNOPSISç”¨æ³•æ ¼å¼è¯´æ˜</span><br><span class="line">[ ]å¯é€‰å†…å®¹</span><br><span class="line">&lt; &gt;å¿…é€‰å†…å®¹</span><br><span class="line">a|bäºŒé€‰ä¸€</span><br><span class="line">&#123; &#125;åˆ†ç»„</span><br><span class="line">...ç”¨ä¸€ä¸ªå†…å®¹å¯å‡ºç°å¤šæ¬¡</span><br><span class="line">DESCRIPTIONè¯¦ç»†è¯´æ˜</span><br><span class="line">OPTIONSé€‰é¡¹è¯´æ˜</span><br><span class="line">EXAMPLESç¤ºä¾‹</span><br><span class="line">FILESç›¸å…³æ–‡ä»¶</span><br><span class="line">AUTHORä½œè€…</span><br><span class="line">COPYRUGHTç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">REPORTING BUGbugä¿¡æ¯</span><br><span class="line">SEE ALSOå…¶ä»–å¸®åŠ©æŸ¥çœ‹</span><br></pre></td></tr></table></figure><h3 id="4-6-info"><a href="#4-6-info" class="headerlink" title="4.6 info"></a>4.6 info</h3><p>manå¸¸ç”¨äºå‘½ä»¤å‚è€ƒï¼ŒGNUå·¥å…·info é€‚åˆé€šç”¨æ–‡æ¡£å‚è€ƒ<br>æ²¡æœ‰å‚æ•°ï¼Œåˆ—å‡ºæ‰€æœ‰çš„é¡µé¢<br>infoé¡µé¢çš„ç»“æ„å°±åƒä¸€ä¸ªç½‘ç«™<br>æ¯ä¸€é¡µåˆ†ä¸ºâ€èŠ‚ç‚¹â€<br>é“¾æ¥èŠ‚ç‚¹ä¹‹å‰*<br>infoå‘½ä»¤æ ¼å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info [å‘½ä»¤]</span><br></pre></td></tr></table></figure><p>å¯¼èˆªinfoé¡µ</p><ul><li>æ–¹å‘é”®ï¼ŒPgUpï¼ŒPgDn å¯¼èˆª</li><li>Tab é”®ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªé“¾æ¥</li><li>d æ˜¾ç¤ºä¸»é¢˜ç›®å½•</li><li>Home æ˜¾ç¤ºä¸»é¢˜é¦–éƒ¨</li><li>Enter è¿›å…¥é€‰å®šé“¾æ¥</li><li>n&#x2F;p&#x2F;u&#x2F;l è¿›å…¥ä¸‹&#x2F;å‰&#x2F;ä¸Šä¸€å±‚&#x2F;æœ€åä¸€ä¸ªé“¾æ¥</li><li>s æ–‡å­—æ–‡æœ¬æœç´¢</li><li>q é€€å‡ºinfo</li></ul><h1 id="5-ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç±»å‹"><a href="#5-ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç±»å‹" class="headerlink" title="5. ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç±»å‹"></a>5. ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç±»å‹</h1><h3 id="5-1-æ–‡ä»¶ç›®å½•ç»“æ„"><a href="#5-1-æ–‡ä»¶ç›®å½•ç»“æ„" class="headerlink" title="5.1 æ–‡ä»¶ç›®å½•ç»“æ„"></a>5.1 æ–‡ä»¶ç›®å½•ç»“æ„</h3><p>&#x3D;&#x3D;è“è‰²â€“&gt;ç›®å½•ï¼Œç»¿è‰²â€“&gt;å¯æ‰§è¡Œæ–‡ä»¶ï¼Œçº¢è‰²â€“&gt;å‹ç¼©æ–‡ä»¶ï¼Œæµ…è“è‰²â€“&gt;é“¾æ¥æ–‡ä»¶ï¼Œç°è‰²â€“&gt;å…¶ä»–æ–‡ä»¶&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/afs: AFS æ ¹ç›®å½•ï¼Œé€šå¸¸ç”¨äºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ AFSã€‚</span><br><span class="line">/bin: å­˜æ”¾ç³»ç»Ÿå¯åŠ¨å’Œä¿®å¤æ‰€éœ€çš„åŸºæœ¬å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹ä¹Ÿå¯ç”¨ã€‚</span><br><span class="line">/boot: åŒ…å«å¼•å¯¼åŠ è½½ç¨‹åºã€å†…æ ¸å’Œå…¶ä»–å¼•å¯¼æ‰€éœ€çš„æ–‡ä»¶ã€‚</span><br><span class="line">/dev: åŒ…å«è®¾å¤‡æ–‡ä»¶ï¼Œç”¨äºè®¿é—®ç³»ç»Ÿç¡¬ä»¶è®¾å¤‡ï¼Œå¦‚ç£ç›˜ã€ç»ˆç«¯ã€é”®ç›˜ç­‰ã€‚</span><br><span class="line">/etc: å­˜æ”¾ç³»ç»Ÿå…¨å±€é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç»œé…ç½®ã€ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ç­‰ã€‚</span><br><span class="line">/home: ç”¨æˆ·çš„ä¸»ç›®å½•é€šå¸¸ä½äºæ­¤ï¼Œæ¯ä¸ªç”¨æˆ·æœ‰è‡ªå·±çš„å­ç›®å½•ã€‚</span><br><span class="line">/lib: åŒ…å«ç³»ç»Ÿå¯åŠ¨å’Œè¿è¡Œæ—¶æ‰€éœ€çš„å…±äº«åº“ã€‚</span><br><span class="line">/lib64: 64ä½ç³»ç»Ÿçš„å…±äº«åº“ç›®å½•ï¼Œå­˜æ”¾64ä½åº“æ–‡ä»¶ã€‚</span><br><span class="line">/media: ç”¨äºæŒ‚è½½å¯ç§»åŠ¨åª’ä½“è®¾å¤‡ï¼Œå¦‚å…‰ç›˜ã€USBé©±åŠ¨å™¨ç­‰ã€‚</span><br><span class="line">/mnt: ç”¨äºæ‰‹åŠ¨æŒ‚è½½ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œé€šå¸¸ç”±ç®¡ç†å‘˜ä½¿ç”¨ã€‚</span><br><span class="line">/opt: ç”¨äºå®‰è£…å¯é€‰çš„è½¯ä»¶åŒ…ï¼Œé€šå¸¸æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºã€‚</span><br><span class="line">/proc: è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œæä¾›å…³äºæ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿè¿›ç¨‹çš„ä¿¡æ¯ã€‚</span><br><span class="line">/root: è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰çš„ä¸»ç›®å½•ã€‚</span><br><span class="line">/run: è¿è¡Œæ—¶ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…å«è¿è¡Œæ—¶æ–‡ä»¶å’Œè¿›ç¨‹ä¿¡æ¯ã€‚</span><br><span class="line">/sbin: å­˜æ”¾ç³»ç»Ÿå¯åŠ¨ã€ä¿®å¤å’Œç³»ç»Ÿç»´æŠ¤çš„åŸºæœ¬å‘½ä»¤ï¼Œé€šå¸¸éœ€è¦è¶…çº§ç”¨æˆ·æƒé™ã€‚</span><br><span class="line">/srv: ç”¨äºå­˜æ”¾æœåŠ¡æ•°æ®ï¼Œé€šå¸¸ç”±å„ç§æœåŠ¡ç¨‹åºä½¿ç”¨ã€‚</span><br><span class="line">/sys: æä¾›å¯¹å†…æ ¸å‚æ•°å’ŒçŠ¶æ€çš„è®¿é—®ï¼Œé€šå¸¸ç”¨äºç³»ç»Ÿç®¡ç†ã€‚</span><br><span class="line">/tmp: ç”¨äºå­˜æ”¾ä¸´æ—¶æ–‡ä»¶ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥å†™å…¥ï¼Œä½†æ–‡ä»¶å¯èƒ½åœ¨ç³»ç»Ÿé‡å¯æ—¶è¢«åˆ é™¤ã€‚</span><br><span class="line">/usr: å­˜æ”¾ç”¨æˆ·æ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·å®‰è£…çš„è½¯ä»¶ã€æ–‡æ¡£ã€åº“ç­‰ã€‚</span><br><span class="line">/var: å­˜æ”¾å¯å˜æ•°æ®ï¼Œå¦‚æ—¥å¿—æ–‡ä»¶ã€æ•°æ®åº“æ–‡ä»¶ã€é‚®ä»¶ç­‰ã€‚</span><br></pre></td></tr></table></figure><h3 id="5-2-åº”ç”¨ç¨‹åºçš„ç»„æˆéƒ¨åˆ†"><a href="#5-2-åº”ç”¨ç¨‹åºçš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="5.2 åº”ç”¨ç¨‹åºçš„ç»„æˆéƒ¨åˆ†"></a>5.2 åº”ç”¨ç¨‹åºçš„ç»„æˆéƒ¨åˆ†</h3><p>è¿›åˆ¶ç¨‹åº: &#x2F;binï¼Œ&#x2F;sbinï¼Œ&#x2F;usr&#x2F;binï¼Œ&#x2F;usr&#x2F;sbinï¼Œ&#x2F;usr&#x2F;local&#x2F;binï¼Œ&#x2F;usr&#x2F;local&#x2F;sbin<br>åº“æ–‡ä»¶: &#x2F;libï¼Œ&#x2F;lib64ï¼Œ&#x2F;usr&#x2F;libï¼Œ&#x2F;usr&#x2F;lib64ï¼Œ&#x2F;usr&#x2F;local&#x2F;libï¼Œ&#x2F;usr&#x2F;local&#x2F;lib64<br>é…ç½®æ–‡ä»¶: &#x2F;etcï¼Œ&#x2F;etc&#x2F;DIRECTORYï¼Œ&#x2F;usr&#x2F;local&#x2F;etc<br>å¸®åŠ©æ–‡ä»¶: &#x2F;usr&#x2F;share&#x2F;manï¼Œ&#x2F;usr&#x2F;share&#x2F;docï¼Œ&#x2F;usr&#x2F;local&#x2F;share&#x2F;manï¼Œ&#x2F;usr&#x2F;local&#x2F;share&#x2F;doc</p><h3 id="5-3-Linuxä¸‹çš„æ–‡ä»¶ç±»å‹"><a href="#5-3-Linuxä¸‹çš„æ–‡ä»¶ç±»å‹" class="headerlink" title="5.3 Linuxä¸‹çš„æ–‡ä»¶ç±»å‹"></a>5.3 Linuxä¸‹çš„æ–‡ä»¶ç±»å‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ™®é€šæ–‡ä»¶</span></span><br><span class="line">- æ™®é€šæ–‡ä»¶æ˜¯åŒ…å«æ•°æ®çš„ä¸€èˆ¬æ–‡ä»¶ç±»å‹ã€‚å®ƒå¯ä»¥æ˜¯æ–‡æœ¬æ–‡ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶æˆ–ä»»ä½•å…¶ä»–æ•°æ®æ–‡ä»¶ã€‚</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›®å½•</span></span><br><span class="line">d ç›®å½•æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­ç”¨äºç»„ç»‡å’Œå­˜å‚¨å…¶ä»–æ–‡ä»¶å’Œç›®å½•çš„ç‰¹æ®Šç±»å‹çš„æ–‡ä»¶ã€‚</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¬¦å·é“¾æ¥æ–‡ä»¶</span></span><br><span class="line">l ç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰æ˜¯æŒ‡å‘å¦ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„å¼•ç”¨æ–‡ä»¶ã€‚</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å­—ç¬¦è®¾å¤‡æ–‡ä»¶</span></span><br><span class="line">c å­—ç¬¦è®¾å¤‡æ–‡ä»¶ç”¨äºä¸å­—ç¬¦è®¾å¤‡è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚ç»ˆç«¯æˆ–ä¸²å£è®¾å¤‡ã€‚</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å—è®¾å¤‡æ–‡ä»¶</span></span><br><span class="line">b å—è®¾å¤‡æ–‡ä»¶ç”¨äºä¸å—è®¾å¤‡è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚ç¡¬ç›˜é©±åŠ¨å™¨æˆ–åˆ†åŒºã€‚</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç®¡é“æ–‡ä»¶</span></span><br><span class="line">p å‘½åç®¡é“ï¼ˆFIFOï¼‰ç”¨äºè¿›ç¨‹é—´é€šä¿¡ï¼Œé€šå¸¸ä»¥ç®¡é“(|)çš„å½¢å¼åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¥—æ¥å­—</span></span><br><span class="line">s å¥—æ¥å­—æ–‡ä»¶ç”¨äºè¿›ç¨‹é—´çš„æœ¬åœ°é€šä¿¡ï¼Œé€šå¸¸åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure><h1 id="6-æ–‡ä»¶æ“ä½œå‘½ä»¤"><a href="#6-æ–‡ä»¶æ“ä½œå‘½ä»¤" class="headerlink" title="6. æ–‡ä»¶æ“ä½œå‘½ä»¤"></a>6. æ–‡ä»¶æ“ä½œå‘½ä»¤</h1><h3 id="6-1-æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•"><a href="#6-1-æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•" class="headerlink" title="6.1 æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•"></a>6.1 æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-Pæ˜¾ç¤ºçœŸå®ç‰©ç†è·¯å¾„</span><br><span class="line">-Læ˜¾ç¤ºè¿æ¥è·¯å¾„(é»˜è®¤)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰ç›®å½•</span></span><br><span class="line">pwd</span><br></pre></td></tr></table></figure><h3 id="6-2-æ–‡ä»¶è·¯å¾„åˆ†å‰²"><a href="#6-2-æ–‡ä»¶è·¯å¾„åˆ†å‰²" class="headerlink" title="6.2 æ–‡ä»¶è·¯å¾„åˆ†å‰²"></a>6.2 æ–‡ä»¶è·¯å¾„åˆ†å‰²</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“å‰å·¥ä½œç›®å½•çš„çˆ¶ç›®å½•åç§°</span></span><br><span class="line">dirname $(pwd)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“å‰å·¥ä½œç›®å½•çš„åŸºæœ¬ç›®å½•åç§°</span></span><br><span class="line">basename $(pwd)</span><br></pre></td></tr></table></figure><h3 id="6-3-ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„"><a href="#6-3-ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„" class="headerlink" title="6.3 ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„"></a>6.3 ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„</h3><ul><li><p>ç»å¯¹è·¯å¾„</p><p>ç»å¯¹è·¯å¾„æ˜¯ä»æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ï¼ˆé€šå¸¸è¡¨ç¤ºä¸º<code>/</code>ï¼‰å¼€å§‹çš„å®Œæ•´è·¯å¾„ï¼Œä»¥å®šä½æ–‡ä»¶æˆ–ç›®å½•ã€‚å®ƒæä¾›äº†æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´ä½ç½®ä¿¡æ¯ï¼Œä¸ä¾èµ–äºå½“å‰å·¥ä½œç›®å½•ã€‚</p></li><li><p>ç›¸å¯¹è·¯å¾„</p><p>ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ï¼Œç”¨äºå®šä½æ–‡ä»¶æˆ–ç›®å½•ã€‚å®ƒä¸æä¾›æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´ä½ç½®ä¿¡æ¯ï¼Œè€Œæ˜¯ç›¸å¯¹äºå½“å‰ä½ç½®çš„è·¯å¾„ã€‚</p></li></ul><h3 id="6-4-åˆ‡æ¢ç›®å½•"><a href="#6-4-åˆ‡æ¢ç›®å½•" class="headerlink" title="6.4 åˆ‡æ¢ç›®å½•"></a>6.4 åˆ‡æ¢ç›®å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°ç»å¯¹è·¯å¾„</span></span><br><span class="line">cd /path/to/directory</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">cd relative/path/to/directory</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°ä¸Šçº§ç›®å½•</span></span><br><span class="line">cd ..</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°ä¸Šä¸Šçº§ç›®å½•</span></span><br><span class="line">cd ../../</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°å®¶ç›®å½•</span></span><br><span class="line">cd ~</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°ä¸Šæ¬¡è®¿é—®çš„ç›®å½•</span></span><br><span class="line">cd -</span><br></pre></td></tr></table></figure><h3 id="6-5-åˆ—å‡ºç›®å½•ç±»å®¹"><a href="#6-5-åˆ—å‡ºç›®å½•ç±»å®¹" class="headerlink" title="6.5 åˆ—å‡ºç›®å½•ç±»å®¹"></a>6.5 åˆ—å‡ºç›®å½•ç±»å®¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ls [é€‰é¡¹] [ç›®å½•]</span><br><span class="line"></span><br><span class="line">-aæŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶,åŒ…æ‹¬éšè—æ–‡ä»¶</span><br><span class="line">-låˆ—å‡ºæ–‡ä»¶è¯¦ç»†ä¿¡æ¯</span><br><span class="line">-Ré€’å½’æ˜¾ç¤ºç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•</span><br><span class="line">-ldç›®å½•å’Œç¬¦å·è¿æ¥ä¿¡æ¯</span><br><span class="line">-1ç›®å½•åˆ†è¡Œæ˜¾ç¤º</span><br><span class="line">-d  åªåˆ—å‡ºç›®å½•ï¼ˆä¸é€’å½’åˆ—å‡ºç›®å½•å†…çš„æ–‡ä»¶ï¼‰</span><br><span class="line">-rå€’åº</span><br><span class="line">-SæŒ‰æ–‡ä»¶å¤§å°,ä»å¤§åˆ°å°æ’åº</span><br><span class="line">-SræŒ‰æ–‡ä»¶å¤§å°,ä»å°åˆ°å¤§æ’åº</span><br><span class="line">-tæŒ‰æ–‡ä»¶æ—¶é—´æ’åº,æœ€æ–°çš„å°†æ’åœ¨æœ€å‰é¢</span><br><span class="line">-træŒ‰æ–‡ä»¶æ—¶é—´æ’åº,æœ€æ—§çš„å°†æ’åœ¨æœ€å‰é¢</span><br><span class="line">-UæŒ‰ç›®å½•å­˜æ”¾é¡ºåºæ˜¾ç¤º</span><br><span class="line">-XæŒ‰æ–‡ä»¶åç¼€æ’åº</span><br><span class="line">-iæ˜¾ç¤ºæ–‡ä»¶Inodeç¼–å·</span><br><span class="line">-hæ›´ç›´è§‚çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°</span><br></pre></td></tr></table></figure><h3 id="6-6-æŸ¥çœ‹æ–‡ä»¶æ—¶é—´å±æ€§stat"><a href="#6-6-æŸ¥çœ‹æ–‡ä»¶æ—¶é—´å±æ€§stat" class="headerlink" title="6.6 æŸ¥çœ‹æ–‡ä»¶æ—¶é—´å±æ€§stat"></a>6.6 æŸ¥çœ‹æ–‡ä»¶æ—¶é—´å±æ€§stat</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ–‡ä»¶è®¿é—®æ—¶é—´</span></span><br><span class="line">ls -lu filename</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ–‡ä»¶æƒé™,å…ƒæ•°æ®æ›´æ”¹æ—¶é—´</span></span><br><span class="line">ls -lc filename</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">ls -l filename</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ–‡ä»¶ä¸‰ä¸ªæ—¶é—´çŠ¶æ€è¯¦ç»†çŠ¶æ€</span></span><br><span class="line">stat filename</span><br></pre></td></tr></table></figure><h3 id="6-7-ç¡®è®¤æ–‡ä»¶ç±»å‹å’Œæ–‡ä»¶ç±»å‹è½¬æ¢"><a href="#6-7-ç¡®è®¤æ–‡ä»¶ç±»å‹å’Œæ–‡ä»¶ç±»å‹è½¬æ¢" class="headerlink" title="6.7 ç¡®è®¤æ–‡ä»¶ç±»å‹å’Œæ–‡ä»¶ç±»å‹è½¬æ¢"></a>6.7 ç¡®è®¤æ–‡ä»¶ç±»å‹å’Œæ–‡ä»¶ç±»å‹è½¬æ¢</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-båˆ—å‡ºæ–‡ä»¶è¾¨è¯†ç»“æœ,ä¸æ˜¾ç¤ºæ–‡ä»¶åç§°</span><br><span class="line">-fåˆ—å‡ºæ–‡ä»¶ä¸­æ–‡ä»¶åçš„æ–‡ä»¶ç±»å‹</span><br><span class="line">-LæŸ¥çœ‹å¯¹åº”è½¯é“¾æ¥å¯¹åº”æ–‡ä»¶çš„ç±»å‹</span><br><span class="line"></span><br><span class="line">file dir.txt</span><br></pre></td></tr></table></figure><p>èŒƒä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºç¼–ç åˆ—è¡¨</span></span><br><span class="line">iconv -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†windows10ä¸Šæ–‡æœ¬é»˜è®¤çš„ç¼–ç è½¬æ¢UTF-8</span></span><br><span class="line">iconv -f gb2312 win.txt -o win2.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æ–‡æœ¬win.txtçš„ç¼–ç utf8è½¬æ¢æˆgb2312,å¹¶å°†è½¬æ¢åçš„æ–‡æœ¬ä¿å­˜åˆ°win2.txt</span></span><br><span class="line">iconv -f utf8 -t gb2312 win.txt -o win2.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†windowsçš„æ–‡æœ¬æ ¼å¼è½¬æ¢æˆLinuxçš„æ–‡æœ¬æ ¼å¼</span></span><br><span class="line">dos2unix windows.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†linuxçš„æ–‡æœ¬æ ¼å¼è½¬åŒ–æˆwindowsçš„æ–‡æœ¬æ ¼å¼</span></span><br><span class="line">unix2dos Linux.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç ,å°†æ–‡ä»¶file.txtè½¬æ¢æˆUTF-8</span></span><br><span class="line">enca -L none -x utf-8 file.txt</span><br></pre></td></tr></table></figure><h3 id="6-8-é€šé…ç¬¦"><a href="#6-8-é€šé…ç¬¦" class="headerlink" title="6.8 é€šé…ç¬¦"></a>6.8 é€šé…ç¬¦</h3><p>æ–‡ä»¶é€šé…ç¬¦å¯ä»¥ç”¨æ¥åŒ¹é…ç¬¦åˆæ¡ä»¶çš„å¤šä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿æ‰¹é‡ç®¡ç†æ–‡ä»¶</p><p>é€šé…ç¬¦é‡‡æ‰ç‰¹å®šçš„ç¬¦å·ï¼Œè¡¨ç¤ºç‰¹æ®Šå«ä¹‰ï¼Œæ­¤ç‰¹æ®Šç¬¦å·ç§°ä¹‹ä¸ºå…ƒå­—ç¬¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦,ä¸åŒ¹é…éšè—æ–‡ä»¶</span><br><span class="line">?åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line">~å½“å‰ç”¨æˆ·å®¶ç›®å½•</span><br><span class="line">~zyç”¨æˆ·zyå®¶ç›®å½•</span><br><span class="line">~+å’Œ.å½“å‰å·¥ä½œç›®å½•</span><br><span class="line">~-å‰ä¸€ä¸ªå·¥ä½œç›®å½•</span><br><span class="line">[0-9]0-9çš„æ‰€æœ‰æ•°å­—</span><br><span class="line">[a-z]a-zçš„æ‰€æœ‰å­—æ¯</span><br><span class="line">[A-Z]A-Zçš„æ‰€æœ‰å­—æ¯</span><br><span class="line">[wang]åŒ¹é…åˆ—è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">[^wang]åŒ¹é…åˆ—è¡¨ä¸­çš„æ‰€æœ‰å­—ç¬¦ä»¥å¤–çš„å­—ç¬¦</span><br></pre></td></tr></table></figure><p>ç‰¹æ®Šç¬¦å·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[:digit:]: ä»»æ„æ•°å­—ï¼Œç›¸å½“äº0-9</span><br><span class="line">[:1ower:]: ä»»æ„å°å†™å­—æ¯,è¡¨ç¤º a-z</span><br><span class="line">[:upper:]: ä»»æ„å¤§å†™å­—æ¯,è¡¨ç¤º A-Z</span><br><span class="line">[:alpha:]: ä»»æ„å¤§å°å†™å­—æ¯</span><br><span class="line">[:alnum:]: ä»»æ„æ•°å­—æˆ–å­—æ¯</span><br><span class="line">[:blank:]: æ°´å¹³ç©ºç™½å­—ç¬¦</span><br><span class="line">[:space:]: æ°´å¹³æˆ–å‚ç›´ç©ºç™½å­—ç¬¦</span><br><span class="line">[:punct:]: æ ‡ç‚¹ç¬¦å·</span><br><span class="line">[:print:]: å¯æ‰“å°å­—ç¬¦</span><br><span class="line">[:cntr1:]: æ§åˆ¶(éæ‰“å°) å­—ç¬¦</span><br><span class="line">[:graph:]: å›¾å½¢å­—ç¬¦</span><br><span class="line">[:xdigit:]:åå…­è¿›åˆ¶å­—ç¬¦</span><br></pre></td></tr></table></figure><h3 id="6-9-åˆ›å»ºæ–‡ä»¶å’Œåˆ·æ–°æ–‡ä»¶æ—¶é—´"><a href="#6-9-åˆ›å»ºæ–‡ä»¶å’Œåˆ·æ–°æ–‡ä»¶æ—¶é—´" class="headerlink" title="6.9 åˆ›å»ºæ–‡ä»¶å’Œåˆ·æ–°æ–‡ä»¶æ—¶é—´"></a>6.9 åˆ›å»ºæ–‡ä»¶å’Œåˆ·æ–°æ–‡ä»¶æ—¶é—´</h3><p>touchå‘½ä»¤å¯ä»¥ç”¨æ¥åˆ›å»ºç©ºæ–‡ä»¶æˆ–åˆ·æ–°æ–‡ä»¶çš„æ—¶é—´</p><p>ä¸å­˜åœ¨çš„æ–‡ä»¶å°†ä¼šåˆ›å»º</p><p>å­˜åœ¨çš„æ–‡ä»¶å°†ä¼šåˆ·æ–°æ—¶é—´ï¼Œä¸ä¼šæ¸…ç©ºæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">touch [é€‰é¡¹] file...</span><br><span class="line"></span><br><span class="line">-aä»…æ”¹å˜atimeå’Œctime</span><br><span class="line">-mä»…æ”¹å˜mtimeå’Œctime</span><br><span class="line">-cå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨,åˆ™ä¸äºˆåˆ›å»º</span><br></pre></td></tr></table></figure><h3 id="6-10-å¤åˆ¶æ–‡ä»¶å’Œç›®å½•"><a href="#6-10-å¤åˆ¶æ–‡ä»¶å’Œç›®å½•" class="headerlink" title="6.10 å¤åˆ¶æ–‡ä»¶å’Œç›®å½•"></a>6.10 å¤åˆ¶æ–‡ä»¶å’Œç›®å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cp [é€‰é¡¹] æºæ–‡ä»¶ ç›®æ ‡</span><br><span class="line"></span><br><span class="line">-aä¿ç•™é“¾æ¥ã€æ–‡ä»¶å±æ€§ï¼Œå¹¶å¤åˆ¶ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹</span><br><span class="line">-pä¿ç•™æºæ–‡ä»¶æƒé™,æ‰€æœ‰è€…å’Œæ—¶é—´æˆ³ä¿¡æ¯</span><br><span class="line">-dä¸å¤åˆ¶æºæ–‡ä»¶,åªå¤åˆ¶è½¯é“¾æ¥</span><br><span class="line">-iå¦‚æœç›®æ ‡å­˜åœ¨,è¦†ç›–å‰æç¤ºæ˜¯å¦è¦†ç›–</span><br><span class="line">-nä¸è¦†ç›–</span><br><span class="line">-r,-Ré€’å½’å¤åˆ¶ç›®å½•åŠå†…éƒ¨çš„æ‰€æœ‰å†…å®¹</span><br><span class="line">-væ˜¾ç¤ºæ‹·è´è¿‡ç¨‹</span><br><span class="line">-få¦‚æœæ–‡ä»¶ä¸èƒ½æ‰“å¼€,åˆ™å°è¯•åˆ é™¤åå†å¤åˆ¶</span><br><span class="line">-uåªå¤åˆ¶æºæ¯”ç›®æ ‡æ›´æ–°çš„æ–‡ä»¶,æˆ–è€…ç›®æ ‡æ²¡æœ‰çš„æ–‡ä»¶</span><br><span class="line">-bç›®æ ‡å­˜åœ¨,è¦†ç›–ä¹‹å‰å…ˆå¤‡ä»½ä¸€æ¬¡,å½¢å¼ä¸ºfilename~,åªä¿ç•™ä¸€ä¸ªç‰ˆæœ¬</span><br><span class="line">--backup=numberedç›®æ ‡å­˜åœ¨,è¦†ç›–ä¹‹å‰å…ˆå¤‡ä»½åŠ æ•°å­—åç¼€,ä¿ç•™å¤šä¸ªç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@Rocky ~][0]# cp --backup=numbered /etc/fstab fstab</span><br><span class="line">-rw-r--r-- 1 root root 534 Oct 25 16:52 fstab</span><br><span class="line">-rw-r--r-- 1 root root 534 Oct 25 16:53 fstab.~1~</span><br><span class="line">-rw-r--r-- 1 root root 534 Oct 25 16:54 fstab.~2~</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤åˆ¶å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">cp -a . /PATH</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨æ–‡ä»¶æºè·¯å¾„ä¸‹å¤‡ä»½</span></span><br><span class="line">cp -a /apps/nginx/sbin/nginx&#123;,.bak&#125;</span><br></pre></td></tr></table></figure><h3 id="6-11-ç§»åŠ¨å’Œé‡å‘½åæ–‡ä»¶"><a href="#6-11-ç§»åŠ¨å’Œé‡å‘½åæ–‡ä»¶" class="headerlink" title="6.11 ç§»åŠ¨å’Œé‡å‘½åæ–‡ä»¶"></a>6.11 ç§»åŠ¨å’Œé‡å‘½åæ–‡ä»¶</h3><p>mvå¯ä»¥å®ç°æ–‡ä»¶æˆ–ç›®å½•çš„ç§»åŠ¨å’Œæ”¹å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">mv [é€‰é¡¹] æºæ–‡ä»¶æˆ–ç›®å½• ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">mv [é€‰é¡¹]æºæ–‡ä»¶æˆ–ç›®å½• ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">mv [é€‰é¡¹]æºæ–‡ä»¶æˆ–ç›®å½•1 æºæ–‡ä»¶æˆ–ç›®å½•2 æºæ–‡ä»¶æˆ–ç›®å½•3 ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line"></span><br><span class="line">-iäº¤äº’å¼</span><br><span class="line">-få¼ºåˆ¶</span><br><span class="line">-bç›®æ ‡å­˜åœ¨,è¦†ç›–å‰å…ˆå¤‡ä»½</span><br><span class="line">-tåè½¬ï¼Œmv [é€‰é¡¹] ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½• æºæ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure><h3 id="6-12-æ‰¹é‡é‡å‘½åæ–‡ä»¶"><a href="#6-12-æ‰¹é‡é‡å‘½åæ–‡ä»¶" class="headerlink" title="6.12 æ‰¹é‡é‡å‘½åæ–‡ä»¶"></a>6.12 æ‰¹é‡é‡å‘½åæ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºæ‰€æœ‰confæ–‡ä»¶åŠ ä¸Š.bakåç¼€</span></span><br><span class="line">renameconf &#x27;conf.bak&#x27;  /PATH/*</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å»æ‰æ‰€æœ‰çš„bakåç¼€</span></span><br><span class="line">rename &#x27;.bak&#x27; &#x27;&#x27; /PATH/*.bak</span><br></pre></td></tr></table></figure><h3 id="6-13-åˆ é™¤æ–‡ä»¶"><a href="#6-13-åˆ é™¤æ–‡ä»¶" class="headerlink" title="6.13 åˆ é™¤æ–‡ä»¶"></a>6.13 åˆ é™¤æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">rm [é€‰é¡¹] æ–‡ä»¶è·¯å¾„</span><br><span class="line"></span><br><span class="line">-iäº¤äº’å¼åˆ é™¤</span><br><span class="line">-få¼ºåˆ¶åˆ é™¤</span><br><span class="line">-ré€’å½’åˆ é™¤</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤éšè—æ–‡ä»¶</span></span><br><span class="line">rm -rf .[^.]*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æ‰€æœ‰æ•°æ®,åŒ…æ‹¬éšè—æ–‡ä»¶</span></span><br><span class="line">rm -rf * .[^.]*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å˜é‡å¦‚æœä¸ºç©º,ä¼šå¯¼è‡´åˆ æ ¹</span></span><br><span class="line">var=&#x27;&#x27;</span><br><span class="line">rm -rf var/*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç‰¹æ®Šæ–‡ä»¶-f</span></span><br><span class="line">touch /data/-f</span><br><span class="line">rm -rf /data/-f</span><br><span class="line">rm -rf ./-f</span><br><span class="line">rm -- -f</span><br><span class="line">touch /-f</span><br><span class="line">rm -rf /-f</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç‰¹æ®Šæ–‡ä»¶ ~</span></span><br><span class="line">touch &#x27;~&#x27;</span><br><span class="line">rm -f ./~</span><br></pre></td></tr></table></figure><p>rm è™½ç„¶åˆ é™¤äº†æ–‡ä»¶ï¼Œä½†æ˜¯è¢«åˆ é™¤çš„æ–‡ä»¶ä»ç„¶æœ‰å¯èƒ½è¢«æ¢å¤ï¼Œåœ¨å®‰å…¨è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨shredå®‰å…¨åˆ é™¤æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">shred [é€‰é¡¹] æ–‡ä»¶è·¯å¾„</span><br><span class="line"></span><br><span class="line">-zæœ€åä¸€æ¬¡è¦†ç›–æ·»åŠ 0,ä»¥éšè—è¦†ç›–æ“ä½œ</span><br><span class="line">-vèƒ½å¤Ÿæ˜¾ç¤ºæ“ä½œè¿›åº¦</span><br><span class="line">-uè¦†ç›–åæˆªæ–­å¹¶åˆ é™¤æ–‡ä»¶</span><br><span class="line">-n #æŒ‡å®šè¦†ç›–æ–‡ä»¶å†…å®¹çš„æ¬¡æ•°ï¼ˆé»˜è®¤æ¬¡æ•°æ˜¯3æ¬¡ï¼‰</span><br><span class="line"></span><br><span class="line">èŒƒä¾‹ï¼š</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">[root@Rocky /][0]# <span class="built_in">shred</span> -zvun 5 passwd.txt</span></span><br><span class="line">shred: passwd.txt: pass 1/6 (random)...</span><br><span class="line">shred: passwd.txt: pass 2/6 (ffffff)...</span><br><span class="line">shred: passwd.txt: pass 3/6 (random)...</span><br><span class="line">shred: passwd.txt: pass 4/6 (000000)...</span><br><span class="line">shred: passwd.txt: pass 5/6 (random)...</span><br><span class="line">shred: passwd.txt: pass 6/6 (000000)...</span><br><span class="line">shred: passwd.txt: removing</span><br><span class="line">shred: passwd.txt: renamed to 000000</span><br><span class="line">shred: 000000: renamed to 00000</span><br><span class="line">shred: 00000: renamed to 0000</span><br><span class="line">shred: 0000: renamed to 000</span><br><span class="line">shred: 000: renamed to 00</span><br><span class="line">shred: 00: renamed to 0</span><br><span class="line">shred: passwd.txt: removed</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-14-æ¸…ç©ºæ–‡ä»¶"><a href="#6-14-æ¸…ç©ºæ–‡ä»¶" class="headerlink" title="6.14 æ¸…ç©ºæ–‡ä»¶"></a>6.14 æ¸…ç©ºæ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ä¼šåˆ é™¤æ–‡ä»¶,ä¼šå°†æ–‡ä»¶å†…å®¹æ¸…ç©º</span></span><br><span class="line">cat /dev/null &gt; biglog.txt</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹å¼äºŒ,ä¸é€šç”¨</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">biglog.txt</span></span><br></pre></td></tr></table></figure><h3 id="6-15-ç›®å½•æ“ä½œ"><a href="#6-15-ç›®å½•æ“ä½œ" class="headerlink" title="6.15 ç›®å½•æ“ä½œ"></a>6.15 ç›®å½•æ“ä½œ</h3><p><strong>æŸ¥çœ‹ç›®å½•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tree ç›®å½•å</span><br><span class="line"></span><br><span class="line">-dåªæ˜¾ç¤ºæ–‡ä»¶å¤¹</span><br><span class="line">-L #æ˜¾ç¤ºæŒ‡å®šå±‚çº§çš„æ•°ç›®</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºç›®å½•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir [é€‰é¡¹] ç›®å½•å</span><br><span class="line"></span><br><span class="line">-pé€’å½’åˆ›å»ºç›®å½•</span><br><span class="line">-væ˜¾ç¤ºåˆ›å»ºç›®å½•è¿‡ç¨‹</span><br><span class="line">-måˆ›å»ºç›®å½•æ—¶ç›´æ¥æŒ‡å®šæƒé™</span><br><span class="line"></span><br><span class="line">èŒƒä¾‹ï¼š</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€’å½’åˆ›å»ºç›®å½•</span></span><br><span class="line">mkdir -pv /dir1/dir2/dir3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºç›®å½•æ—¶æŒ‡å®šæƒé™</span></span><br><span class="line">mkdir -m 000 /dir1</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤ç©ºç›®å½•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rmdir </span><br><span class="line"></span><br><span class="line">èŒƒä¾‹ï¼š</span><br><span class="line">rmdir /dir</span><br></pre></td></tr></table></figure><h1 id="7-æ–‡ä»¶å…ƒæ•°æ®å’ŒèŠ‚ç‚¹è¡¨ç»“æ„"><a href="#7-æ–‡ä»¶å…ƒæ•°æ®å’ŒèŠ‚ç‚¹è¡¨ç»“æ„" class="headerlink" title="7. æ–‡ä»¶å…ƒæ•°æ®å’ŒèŠ‚ç‚¹è¡¨ç»“æ„"></a>7. æ–‡ä»¶å…ƒæ•°æ®å’ŒèŠ‚ç‚¹è¡¨ç»“æ„</h1><h3 id="7-1-inodeè¡¨ç»“æ„"><a href="#7-1-inodeè¡¨ç»“æ„" class="headerlink" title="7.1 inodeè¡¨ç»“æ„"></a>7.1 inodeè¡¨ç»“æ„</h3><p>æ¯ä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæ–‡ä»¶çš„å¤§å°ï¼Œæ—¶é—´ï¼Œç±»å‹ç­‰ï¼Œç§°ä¸ºæ–‡ä»¶çš„å…ƒæ•°æ®ï¼ˆmeta dataï¼‰ã€‚è¿™äº›å…ƒæ•°æ®æ˜¯å­˜æ”¾åœ¨nodeï¼ˆindex nodeï¼‰è¡¨ä¸­ã€‚nodeè¡¨ä¸­æœ‰å¾ˆå¤šæ¡è®°å½•ç»„æˆï¼Œç¬¬ä¸€æ¡è®°å½•å¯¹åº”å­˜æ”¾äº†ä¸€ä¸ªæ–‡ä»¶çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œç¬¬ä¸€ä¸ªnodeè¡¨è®°å½•å¯¹åº”çš„ä¿å­˜äº†ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li><p>æ–‡ä»¶ç±»å‹å’Œæƒé™ä¿¡æ¯ï¼šinode åŒ…æ‹¬æ–‡ä»¶çš„ç±»å‹ï¼ˆæ™®é€šæ–‡ä»¶ã€ç›®å½•ã€ç¬¦å·é“¾æ¥ç­‰ï¼‰ä»¥åŠæ–‡ä»¶çš„æƒé™ä¿¡æ¯ï¼Œå¦‚æ‰€æœ‰è€…ã€æ‰€å±ç»„å’Œå…¶ä»–ç”¨æˆ·çš„è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ã€‚</p></li><li><p>é“¾æ¥è®¡æ•°ï¼ˆLink Countï¼‰ï¼šé“¾æ¥è®¡æ•°æ˜¯æŒ‡æœ‰å¤šå°‘ä¸ªç›®å½•é¡¹æŒ‡å‘åŒä¸€ä¸ªinodeã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥ï¼ˆhard linkï¼‰æ—¶ï¼Œé“¾æ¥è®¡æ•°ä¼šå¢åŠ ã€‚å½“é“¾æ¥è®¡æ•°ä¸ºé›¶æ—¶ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šå›æ”¶inodeã€‚</p></li><li><p>æ‰€æœ‰è€…å’Œæ‰€å±ç»„ï¼šinode è®°å½•äº†æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„çš„æ ‡è¯†ç¬¦ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·å’Œç»„çš„IDï¼‰ã€‚</p></li><li><p>æ–‡ä»¶å¤§å°ï¼šinode åŒ…æ‹¬æ–‡ä»¶çš„å®é™…å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</p></li><li><p>æ—¶é—´æˆ³ï¼šinode åŒ…æ‹¬ä¸‰ä¸ªæ—¶é—´æˆ³ï¼š</p></li></ul><p>â€‹è®¿é—®æ—¶é—´ï¼ˆAccess Timeï¼‰ï¼šæ–‡ä»¶æˆ–ç›®å½•æœ€åä¸€æ¬¡è¢«è®¿é—®çš„æ—¶é—´ã€‚</p><p>â€‹ä¿®æ”¹æ—¶é—´ï¼ˆModification Timeï¼‰ï¼šæ–‡ä»¶æˆ–ç›®å½•å†…å®¹æœ€åä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ã€‚</p><p>â€‹æ›´æ”¹æ—¶é—´ï¼ˆChange Timeï¼‰ï¼šinode å…ƒæ•°æ®æœ€åä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ï¼Œä¾‹å¦‚æƒé™ã€æ‰€æœ‰è€…ç­‰çš„æ›´æ”¹ã€‚</p><ul><li>æ•°æ®å—æŒ‡é’ˆï¼šinode åŒ…å«æŒ‡å‘æ–‡ä»¶æ•°æ®å—çš„æŒ‡é’ˆã€‚è¿™äº›æŒ‡é’ˆé€šå¸¸åŒ…æ‹¬ç›´æ¥å—ã€é—´æ¥å—å’ŒåŒé‡é—´æ¥å—ï¼Œç”¨äºå®šä½å’Œè®¿é—®æ–‡ä»¶çš„å®é™…æ•°æ®ã€‚</li></ul><p>â€‹ç›´æ¥å—ï¼šå‰12ä¸ªæŒ‡é’ˆç›´æ¥æŒ‡å‘æ–‡ä»¶çš„æ•°æ®å—ã€‚<br>â€‹é—´æ¥å—ï¼šç¬¬13ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå—ï¼Œè¯¥å—åŒ…å«å…¶ä»–æŒ‡å‘æ•°æ®å—çš„æŒ‡é’ˆã€‚<br>â€‹åŒé‡é—´æ¥å—ï¼šç¬¬14ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå—ï¼Œè¯¥å—åŒ…å«æŒ‡å‘åŒ…å«å…¶ä»–æŒ‡å‘æ•°æ®å—çš„æŒ‡é’ˆçš„å—çš„æŒ‡é’ˆã€‚<br>â€‹inode è¡¨ç»“æ„çš„ä¸»è¦ç›®çš„æ˜¯ä½¿æ–‡ä»¶ç³»ç»Ÿèƒ½å¤Ÿé«˜æ•ˆåœ°ç®¡ç†æ–‡ä»¶å’Œç›®å½•çš„å…ƒæ•°æ®ä»¥åŠå®šä½æ•°æ®å—ã€‚å®ƒå…è®¸æ–‡ä»¶ç³»ç»Ÿè·Ÿè¸ªå’Œç»„ç»‡æ–‡ä»¶ä¿¡æ¯ï¼Œä»¥ä¾¿æ“ä½œç³»ç»Ÿå¯ä»¥æ­£ç¡®åœ°è®¿é—®å’Œç®¡ç†æ–‡ä»¶ã€‚</p><h3 id="7-2-æ¡ˆä¾‹ï¼š"><a href="#7-2-æ¡ˆä¾‹ï¼š" class="headerlink" title="7.2 æ¡ˆä¾‹ï¼š"></a>7.2 æ¡ˆä¾‹ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æç¤ºç©ºé—´æ»¡No space left on device,ä½†<span class="built_in">df</span>å¯ä»¥çœ‹åˆ°ç©ºé—´å¾ˆå¤š,ä¸ºä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">1. ç£ç›˜é…é¢é™åˆ¶ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç£ç›˜é…é¢ï¼ˆdisk quotasï¼‰å¯èƒ½ä¼šè¢«å¯ç”¨ï¼Œè¿™ä¼šé™åˆ¶æ¯ä¸ªç”¨æˆ·æˆ–ç»„çš„å¯ç”¨ç£ç›˜ç©ºé—´ã€‚å³ä½¿æ–‡ä»¶ç³»ç»Ÿæ€»ä½“ä¸Šæœ‰è¶³å¤Ÿçš„å¯ç”¨ç©ºé—´ï¼Œä½†å¦‚æœç”¨æˆ·æˆ–ç»„çš„ç£ç›˜é…é¢å·²ç”¨å°½ï¼Œä»–ä»¬å°†æ— æ³•åˆ›å»ºæ›´å¤šæ–‡ä»¶ã€‚</span><br><span class="line">2. ç£ç›˜ç¢ç‰‡ï¼šå³ä½¿ df æ˜¾ç¤ºç£ç›˜æœ‰è¶³å¤Ÿçš„æ€»å¯ç”¨ç©ºé—´ï¼Œå¦‚æœæ–‡ä»¶ç³»ç»Ÿä¸­æœ‰å¤ªå¤šç¢ç‰‡ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ²¡æœ‰è¶³å¤Ÿçš„è¿ç»­ç©ºé—´æ¥å­˜å‚¨å¤§æ–‡ä»¶æˆ–æ‰©å±•ç°æœ‰æ–‡ä»¶ã€‚è¿™å¯èƒ½å¯¼è‡´ &quot;No space left on device&quot; é”™è¯¯ã€‚</span><br><span class="line">3. å·²åˆ é™¤ä½†ä»è¢«è¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶ï¼šå¦‚æœæœ‰ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å†™å…¥æˆ–æ‰“å¼€ä¸€ä¸ªå·²è¢«åˆ é™¤çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå³ä½¿æ–‡ä»¶å·²è¢«æ ‡è®°ä¸ºåˆ é™¤ï¼Œç£ç›˜ç©ºé—´ä¹Ÿä¸ä¼šè¢«ç«‹å³é‡Šæ”¾ã€‚</span><br><span class="line">4. è¶…å‡ºæ–‡ä»¶ç³»ç»Ÿé™åˆ¶ï¼šæŸäº›æ–‡ä»¶ç³»ç»Ÿï¼ˆç‰¹åˆ«æ˜¯æ—§çš„æ–‡ä»¶ç³»ç»Ÿï¼‰å¯èƒ½æœ‰æ–‡ä»¶æ•°é‡æˆ–æ–‡ä»¶å¤§å°çš„é™åˆ¶ã€‚å¦‚æœè¾¾åˆ°äº†è¿™äº›é™åˆ¶ï¼Œä½ å°†æ— æ³•åˆ›å»ºæ›´å¤šæ–‡ä»¶ï¼Œå³ä½¿ç£ç›˜ç©ºé—´ä»ç„¶å¯ç”¨ã€‚</span><br><span class="line">5. æ–‡ä»¶ç³»ç»ŸæŸåï¼šåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ç³»ç»ŸæŸåå¯èƒ½å¯¼è‡´ &quot;No space left on device&quot; é”™è¯¯ã€‚æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥å·¥å…·å¦‚fsck å¯ä»¥ç”¨äºæ£€æŸ¥å’Œä¿®å¤æ–‡ä»¶ç³»ç»Ÿä¸­çš„é—®é¢˜</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æç¤ºç©ºé—´å¿«æ»¡äº†,ä½†<span class="built_in">df</span>å’Œ<span class="built_in">df</span> -iéƒ½å¯ä»¥çœ‹åˆ°ç©ºé—´å¾ˆå¤š,ä¸ºä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">1. å·²åˆ é™¤ä½†ä»è¢«è¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶ï¼šæœ‰æ—¶ï¼Œå·²åˆ é™¤çš„æ–‡ä»¶ä»ç„¶è¢«æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä½¿ç”¨ã€‚è¿™äº›æ–‡ä»¶ä»å ç”¨ç£ç›˜ç©ºé—´ï¼Œå°½ç®¡å®ƒä»¬ä¸å†åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å¯è§ã€‚ä½ å¯ä»¥ä½¿ç”¨å·¥å…·å¦‚ lsof æ¥æŸ¥æ‰¾è¿™äº›è¢«åˆ é™¤ä½†ä»ç„¶è¢«æ‰“å¼€çš„æ–‡ä»¶ï¼Œç„¶åå°†è¿™äº›æ–‡ä»¶å…³é—­æˆ–ç»ˆæ­¢ç›¸å…³è¿›ç¨‹ã€‚</span><br><span class="line">2. ç¡¬é“¾æ¥çš„é—®é¢˜ï¼šç¡¬é“¾æ¥æ˜¯å¤šä¸ªç›®å½•é¡¹æŒ‡å‘ç›¸åŒçš„inodeã€‚å¦‚æœä½ åˆ›å»ºäº†å¤§é‡çš„ç¡¬é“¾æ¥ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ &quot;No space left on device&quot; çš„é”™è¯¯ï¼Œå³ä½¿æ–‡ä»¶ç³»ç»Ÿçš„ç©ºé—´å’Œinodeéƒ½è¶³å¤Ÿã€‚ç¡¬é“¾æ¥ä¸ä¼šå¢åŠ inodeä½¿ç”¨é‡ï¼Œä½†ä¼šå¢åŠ é“¾æ¥è®¡æ•°ã€‚ç¡®ä¿ä½ äº†è§£ç¡¬é“¾æ¥çš„å·¥ä½œåŸç†ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æœ‰å¤§é‡çš„ç¡¬é“¾æ¥å ç”¨äº†ç£ç›˜ç©ºé—´ã€‚</span><br><span class="line">3. ç£ç›˜é…é¢é™åˆ¶ï¼šç£ç›˜é…é¢é™åˆ¶ç”¨æˆ·æˆ–ç»„çš„ç£ç›˜ä½¿ç”¨ã€‚å³ä½¿ df å’Œ df -i æ˜¾ç¤ºæœ‰è¶³å¤Ÿçš„ç©ºé—´å’Œinodeï¼Œä½†å¦‚æœç”¨æˆ·æˆ–ç»„çš„é…é¢å·²ç”¨å°½ï¼Œä»–ä»¬å°†æ— æ³•åˆ›å»ºæ›´å¤šæ–‡ä»¶ã€‚æ£€æŸ¥ç£ç›˜é…é¢æ˜¯å¦å¯¹ä½ çš„ç”¨æˆ·æˆ–ç»„è¿›è¡Œäº†é™åˆ¶ã€‚</span><br><span class="line">4. ç£ç›˜æ–‡ä»¶ç³»ç»ŸæŸåï¼šæ–‡ä»¶ç³»ç»ŸæŸåå¯èƒ½å¯¼è‡´å¥‡æ€ªçš„é—®é¢˜ï¼ŒåŒ…æ‹¬é”™è¯¯çš„ç©ºé—´æŠ¥å‘Šã€‚è¿è¡Œæ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥å·¥å…·å¦‚ fsck å¯èƒ½æœ‰åŠ©äºå‘ç°å’Œä¿®å¤é—®é¢˜ã€‚</span><br><span class="line">5. è½¯é“¾æ¥çš„é—®é¢˜ï¼šè½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰æ˜¯ç‰¹æ®Šç±»å‹çš„æ–‡ä»¶ï¼Œé€šå¸¸å¾ˆå°ã€‚ä½†å¦‚æœè½¯é“¾æ¥æŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚ç¡®ä¿è½¯é“¾æ¥çš„ç›®æ ‡æ–‡ä»¶å­˜åœ¨ã€‚</span><br><span class="line">6. å†™å…¥ç¼“å†²åŒºæ»¡ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå†™å…¥æ•°æ®åˆ°ç£ç›˜å¯èƒ½ç”±äºå†™å…¥ç¼“å†²åŒºæ»¡è€Œæš‚åœã€‚è¿™å¯èƒ½å¯¼è‡´ç©ºé—´ä¼¼ä¹å¿«æ»¡äº†ï¼Œå°½ç®¡å®é™…ä¸Šè¿˜æœ‰å¯ç”¨çš„ç©ºé—´ã€‚ç­‰å¾…ä¸€æ®µæ—¶é—´æˆ–åˆ·æ–°ç£ç›˜ç¼“å†²åŒºå¯èƒ½ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</span><br></pre></td></tr></table></figure><h3 id="7-3-ç¡¬è¿æ¥"><a href="#7-3-ç¡¬è¿æ¥" class="headerlink" title="7.3 ç¡¬è¿æ¥"></a>7.3 ç¡¬è¿æ¥</h3><p>ç¡¬è¿æ¥çš„æœ¬è´¨å°±æ˜¯ç»™ä¸€ä¸ªæ–‡ä»¶èµ·ä¸€ä¸ªæ–°çš„åç§°ï¼Œå®è´¨æ˜¯åŒä¸€ä¸ªæ–‡ä»¶</p><ol><li>ç¡¬é“¾æ¥åªèƒ½åœ¨åŒä¸€æ–‡ä»¶ç³»ç»Ÿä¸Šåˆ›å»º</li><li>ç¡¬é“¾æ¥ä¸èƒ½ä¸ºç›®å½•åˆ›å»º</li><li>ç¡¬é“¾æ¥ä¸åŸæ–‡ä»¶å…±äº«æ•°æ®å’Œinode</li><li>ç¡¬é“¾æ¥ä¸å ç”¨é¢å¤–ç£ç›˜ç©ºé—´</li><li>ç¡¬é“¾æ¥ä¸æ”¹å˜æ–‡ä»¶çš„æƒé™å’Œå±æ€§</li><li>ç¡¬é“¾æ¥ä¸èƒ½è·¨è¶Šé©±åŠ¨å™¨æˆ–åˆ†åŒº</li><li>ç¡¬é“¾æ¥ä¸é€‚ç”¨äºæ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œä¸€äº›ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚NFSï¼‰å’Œç§»åŠ¨è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚FATï¼‰å¯èƒ½ä¸æ”¯æŒç¡¬é“¾æ¥</li><li>åˆ é™¤æ–‡ä»¶æ—¶ï¼Œrmå‘½ä»¤é€’å‡è®¡æ•°çš„é“¾æ¥ï¼Œå½“é“¾æ¥æ•°ä¸º0ï¼Œè¯¥æ–‡ä»¶è¢«åˆ é™¤</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">ln åŸæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="7-4-è½¯è¿æ¥"><a href="#7-4-è½¯è¿æ¥" class="headerlink" title="7.4 è½¯è¿æ¥"></a>7.4 è½¯è¿æ¥</h3><p>ä¸€ä¸ªç¬¦å·é“¾æ¥æŒ‡å‘å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±åƒwindowsä¸­å¿«æ·æ–¹å¼ï¼Œè½¯é“¾æ¥æ–‡ä»¶å’ŒåŸæ–‡ä»¶æœ¬è´¨ä¸Šä¸æ˜¯åŒä¸€ä¸ªæ–‡ä»¶</p><ol><li>è½¯é“¾æ¥å¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿåˆ›å»º</li><li>è½¯é“¾æ¥å¯ä»¥å¼•ç”¨ç›®å½•</li><li>è½¯é“¾æ¥å ç”¨é¢å¤–ç£ç›˜ç©ºé—´ï¼Œé€šå¸¸æ˜¯å‡ ä¸ªå­—èŠ‚</li><li>åŸæ–‡ä»¶çš„åˆ é™¤ä¼šå¯¼è‡´è½¯é“¾æ¥å¤±æ•ˆ</li><li>è½¯è¿æ¥å¦‚ä½•ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ˜¯ç›¸å¯¹åŸæ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œéç›¸å¯¹å½“å‰ç›®å½•</li><li>è½¯é“¾æ¥å¯èƒ½å¼•èµ·æ— é™é€’å½’ï¼Œå³AæŒ‡å‘Bï¼ŒBæŒ‡å‘A</li><li>è½¯é“¾æ¥å¯èƒ½å¼•èµ·æƒé™é—®é¢˜ï¼šå¦‚æœè½¯é“¾æ¥å¼•ç”¨çš„æ–‡ä»¶æˆ–ç›®å½•æ‹¥æœ‰é™åˆ¶è®¿é—®çš„æƒé™ï¼Œè½¯é“¾æ¥æœ¬èº«å¯èƒ½ä¸èµ·ä½œç”¨ã€‚ç¡®ä¿è½¯é“¾æ¥å’ŒåŸæ–‡ä»¶æˆ–ç›®å½•çš„æƒé™è®¾ç½®å…è®¸ä½ è®¿é—®å®ƒä»¬</li><li>è½¯é“¾æ¥ä¸å ç”¨inodeï¼Œä»–æŒ‡å‘çš„æ˜¯å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œå…¶å¤§å°ä¸ºæŒ‡å‘è·¯å¾„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¸å¢åŠ æˆ–å‡å°‘ç›®æ ‡inodeçš„è®¡æ•°</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">ln -s åŸæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¿æ¥æ–‡ä»¶æŒ‡å‘çš„åŸæ–‡ä»¶</span></span><br><span class="line">readlink /data/dirlink</span><br></pre></td></tr></table></figure><h3 id="7-5-ç¡¬è¿æ¥å’Œè½¯è¿æ¥çš„åŒºåˆ«"><a href="#7-5-ç¡¬è¿æ¥å’Œè½¯è¿æ¥çš„åŒºåˆ«" class="headerlink" title="7.5 ç¡¬è¿æ¥å’Œè½¯è¿æ¥çš„åŒºåˆ«"></a>7.5 ç¡¬è¿æ¥å’Œè½¯è¿æ¥çš„åŒºåˆ«</h3><ol><li><strong>æœ¬è´¨</strong></li></ol><p>â€‹ç¡¬é“¾æ¥ï¼šæœ¬è´¨æ˜¯åŒä¸€ä¸ªæ–‡ä»¶</p><p>â€‹è½¯è¿æ¥ï¼šæœ¬è´¨ä¸ä¸ŠåŒä¸€ä¸ªæ–‡ä»¶</p><ol start="2"><li><strong>è·¨è®¾å¤‡</strong></li></ol><p>â€‹ç¡¬é“¾æ¥ï¼šä¸æ”¯æŒ</p><p>â€‹è½¯è¿æ¥ï¼šæ”¯æŒ</p><ol start="3"><li><p><strong>inode</strong></p><p>ç¡¬é“¾æ¥ï¼šç›¸åŒ</p><p>è½¯è¿æ¥ï¼šä¸é€š</p></li><li><p><strong>é“¾æ¥æ•°</strong></p></li></ol><p>â€‹ç¡¬é“¾æ¥ï¼šåˆ›å»ºæ–°çš„ç¡¬è¿æ¥ï¼Œé“¾æ¥æ•°ä¼šå¢åŠ ï¼Œåˆ é™¤ç¡¬é“¾æ¥ï¼Œé“¾æ¥æ•°å‡å°‘</p><p>â€‹è½¯è¿æ¥ï¼šåˆ›å»ºæˆ–åˆ é™¤ï¼Œé“¾æ¥æ•°ä¸ä¼šå˜åŒ–</p><ol start="5"><li><strong>æ–‡ä»¶å¤¹</strong></li></ol><p>â€‹ç¡¬é“¾æ¥ï¼šä¸æ”¯æŒ</p><p>â€‹è½¯è¿æ¥ï¼šæ”¯æŒ</p><ol start="6"><li><strong>ç›¸å¯¹è·¯å¾„</strong></li></ol><p>â€‹ç¡¬é“¾æ¥ï¼šåŸå§‹æ–‡ä»¶ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•</p><p>â€‹è½¯è¿æ¥ï¼šåŸå§‹æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºé“¾æ¥æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„</p><ol start="7"><li><p><strong>åˆ é™¤åŸæ–‡ä»¶</strong></p><p>ç¡¬é“¾æ¥ï¼šåªæ˜¯é“¾æ¥æ•°å‡ä¸€ï¼Œä½†é“¾æ¥æ–‡ä»¶çš„è®¿é—®ä¸å—å½±å“</p><p>è½¯è¿æ¥ï¼šé“¾æ¥æ–‡ä»¶å°†æ— æ³•è®¿é—®</p></li><li><p>æ–‡ä»¶ç±»å‹</p><p>ç¡¬é“¾æ¥ï¼šå’ŒåŸæ–‡ä»¶ç›¸åŒ</p><p>è½¯è¿æ¥ï¼šé“¾æ¥æ–‡ä»¶ï¼Œå’ŒåŸæ–‡ä»¶æ— å…³</p></li></ol><h1 id="8-æ ‡å‡†IOé‡å®šå‘å’Œç®¡é“"><a href="#8-æ ‡å‡†IOé‡å®šå‘å’Œç®¡é“" class="headerlink" title="8. æ ‡å‡†IOé‡å®šå‘å’Œç®¡é“"></a>8. æ ‡å‡†IOé‡å®šå‘å’Œç®¡é“</h1><h3 id="8-1-æ ‡å‡†è¾“å…¥å’Œè¾“å‡º"><a href="#8-1-æ ‡å‡†è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="8.1 æ ‡å‡†è¾“å…¥å’Œè¾“å‡º"></a>8.1 æ ‡å‡†è¾“å…¥å’Œè¾“å‡º</h3><p>Linuxç»™ç¨‹åºæä¾›ä¸‰ç§ I &#x2F;O è®¾å¤‡</p><ul><li>æ ‡å‡†è¾“å…¥ï¼ˆSTDINï¼‰-0é»˜è®¤æ¥å—æ¥è‡ªç»ˆç«¯çª—å£çš„è¾“å…¥</li><li>æ ‡å‡†è¾“å‡ºï¼ˆSTDOUTï¼‰    -1        é»˜è®¤è¾“å‡ºåˆ°ç»ˆç«¯çª—å£</li><li>æ ‡å‡†é”™è¯¯ï¼ˆSTDERRï¼‰     -2        é»˜è®¤è¾“å‡ºåˆ°ç»ˆç«¯çª—å£</li></ul><p>æ–‡ä»¶æè¿°ç¬¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky ~][0]# ll /dev/std*</span><br><span class="line">lrwxrwxrwx 1 root root 15 Oct 18 20:45 /dev/stderr -&gt; /proc/self/fd/2</span><br><span class="line">lrwxrwxrwx 1 root root 15 Oct 18 20:45 /dev/stdin -&gt; /proc/self/fd/0</span><br><span class="line">lrwxrwxrwx 1 root root 15 Oct 18 20:45 /dev/stdout -&gt; /proc/self/fd/1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ¯ä¸ªè¿›ç¨‹çš„çš„I/Oè®¾å¤‡</span></span><br><span class="line">ll /proc/ç¨‹åºçš„PID/fd/*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰ç»ˆç«¯çš„I/Oè®¾å¤‡</span></span><br><span class="line">[root@Rocky ~][0]# ll /proc/self/fd</span><br><span class="line">total 0</span><br><span class="line">lrwx------ 1 root root 64 Oct 26 17:49 0 -&gt; /dev/pts/0</span><br><span class="line">lrwx------ 1 root root 64 Oct 26 17:49 1 -&gt; /dev/pts/0</span><br><span class="line">lrwx------ 1 root root 64 Oct 26 17:49 2 -&gt; /dev/pts/0</span><br><span class="line">lr-x------ 1 root root 64 Oct 26 17:49 3 -&gt; /proc/55244/fd</span><br></pre></td></tr></table></figure><h3 id="8-2-æ ‡å‡†è¾“å‡ºé‡å®šå‘"><a href="#8-2-æ ‡å‡†è¾“å‡ºé‡å®šå‘" class="headerlink" title="8.2 æ ‡å‡†è¾“å‡ºé‡å®šå‘"></a>8.2 æ ‡å‡†è¾“å‡ºé‡å®šå‘</h3><p>stdoutå’Œstderrå¯ä»¥è¢«é‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œè€Œéé»˜è®¤çš„å½“å‰ç»ˆç«¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">å‘½ä»¤ æ“ä½œç¬¦å· æ–‡ä»¶å</span><br></pre></td></tr></table></figure><h4 id="8-2-1-è¾“å…¥è¾“å‡ºé‡å®šå‘"><a href="#8-2-1-è¾“å…¥è¾“å‡ºé‡å®šå‘" class="headerlink" title="8.2.1 è¾“å…¥è¾“å‡ºé‡å®šå‘"></a>8.2.1 <strong>è¾“å…¥è¾“å‡ºé‡å®šå‘</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">1&gt; </span><span class="language-bash">æˆ– &gt;æŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">| å¼ºåˆ¶è¦†ç›–</span></span><br><span class="line"><span class="meta prompt_">2&gt;</span><span class="language-bash"> æŠŠæ ‡å‡†é”™è¯¯ï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯è­¦å‘Šæˆ–æç¤ºä¿¡æ¯ï¼‰é‡å®šå‘åˆ°æ–‡ä»¶</span></span><br><span class="line">&amp;&gt; æŠŠæ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</span><br><span class="line"><span class="meta prompt_">2&gt;</span><span class="language-bash">&amp;1 æŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ä¸ºæ ‡å‡†è¾“å‡º</span></span><br><span class="line"><span class="meta prompt_">1&gt;</span><span class="language-bash">&amp;2 å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘ä¸ºæ ‡å‡†é”™è¯¯</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯åˆ†åˆ«é‡å®šå‘åˆ°ä¸¤ä¸ªæ–‡ä»¶</span></span><br><span class="line">ls /xxx/ /root/ 1&gt; /data/log_1 2&gt; /data/log_2</span><br></pre></td></tr></table></figure><h4 id="8-2-2-è¿½åŠ "><a href="#8-2-2-è¿½åŠ " class="headerlink" title="8.2.2 è¿½åŠ "></a>8.2.2 <strong>è¿½åŠ </strong></h4><p>&gt;&gt; å¯ä»¥åœ¨åŸæœ‰å†…å®¹åŸºç¡€ä¸Šï¼Œè¿½åŠ å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;è¿½åŠ æ ‡å‡†è¾“å‡ºé‡å®šå‘è‡³æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_">2&gt;</span><span class="language-bash">&gt;è¿½åŠ æ ‡å‡†é”™è¯¯é‡å®šå‘è‡³æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h4 id="8-3-3-åˆå¹¶æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºä¸ºåŒä¸€ä¸ªæ•°æ®æµè¿›è¡Œé‡å®šå‘"><a href="#8-3-3-åˆå¹¶æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºä¸ºåŒä¸€ä¸ªæ•°æ®æµè¿›è¡Œé‡å®šå‘" class="headerlink" title="8.3.3 åˆå¹¶æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºä¸ºåŒä¸€ä¸ªæ•°æ®æµè¿›è¡Œé‡å®šå‘"></a>8.3.3 <strong>åˆå¹¶æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºä¸ºåŒä¸€ä¸ªæ•°æ®æµè¿›è¡Œé‡å®šå‘</strong></h4><p>&amp;&gt;è¦†ç›–é‡å®šå‘</p><p>&amp;&gt;&gt;      è¿½åŠ é‡å®šå‘</p><p>COMMAND &gt; &#x2F;path&#x2F;to&#x2F;file.out 2&gt;&amp;1</p><p>COMMAND &gt;&gt; &#x2F;path&#x2F;to&#x2F;file.out 2&gt;&amp;1</p><h4 id="8-4-å¤šä¸ªå‘½ä»¤è¾“å‡ºç»“æœé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶"><a href="#8-4-å¤šä¸ªå‘½ä»¤è¾“å‡ºç»“æœé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶" class="headerlink" title="8.4.å¤šä¸ªå‘½ä»¤è¾“å‡ºç»“æœé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶"></a>8.4.<strong>å¤šä¸ªå‘½ä»¤è¾“å‡ºç»“æœé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(echo 123;date) &gt;&gt; file.txt </span><br><span class="line">&#123; echo 123;date;&#125; &gt;&gt; file.txt </span><br></pre></td></tr></table></figure><h3 id="8-3-æ ‡å‡†è¾“å…¥é‡å®šå‘"><a href="#8-3-æ ‡å‡†è¾“å…¥é‡å®šå‘" class="headerlink" title="8.3 æ ‡å‡†è¾“å…¥é‡å®šå‘"></a>8.3 æ ‡å‡†è¾“å…¥é‡å®šå‘</h3><h4 id="8-3-1å•è¡Œé‡å®šå‘"><a href="#8-3-1å•è¡Œé‡å®šå‘" class="headerlink" title="8.3.1å•è¡Œé‡å®šå‘"></a>8.3.1<strong>å•è¡Œé‡å®šå‘</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æ–‡ä»¶é‡å®šå‘ç»™<span class="built_in">cat</span>,ç­‰ä»·äºå‘½ä»¤<span class="built_in">cat</span> /etc/fstab</span> </span><br><span class="line">cat &lt; /etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•è¡Œé‡å®šå‘</span></span><br><span class="line">cat &gt; cat.log</span><br><span class="line">hello! </span><br><span class="line"></span><br><span class="line">cat cat.log</span><br><span class="line">hello! </span><br></pre></td></tr></table></figure><h4 id="8-3-2-å¤šè¡Œé‡å®šå‘"><a href="#8-3-2-å¤šè¡Œé‡å®šå‘" class="headerlink" title="8.3.2 å¤šè¡Œé‡å®šå‘"></a>8.3.2 <strong>å¤šè¡Œé‡å®šå‘</strong></h4><p>å¤šè¡Œé‡å®šå‘æç¤ºç¬¦å˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky ~][0]# echo $PS2</span><br><span class="line"><span class="meta prompt_">&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨â€&lt;&lt;ç»ˆæ­¢è¯â€å‘½ä»¤ä»é”®ç›˜æŠŠå¤šè¡Œé‡å¯¼å‘ç»™STDINï¼Œç›´åˆ°ç»ˆæ­¢è¯ä½ç½®ä¹‹å‰çš„æ‰€æœ‰æ–‡æœ¬éƒ½å‘é€ç»™STDINï¼Œæœ‰æ—¶è¢«ç§°ä¸ºå°±åœ°æ–‡æœ¬ (here documents)<br>å…¶ä¸­ç»ˆæ­¢è¯å¯ä»¥æ˜¯ä»»ä½•ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦å·ï¼Œæ¯”å¦‚: !ï¼Œ@ï¼Œ$ï¼ŒEOF (End of File)ç­‰ï¼Œå…¶ä¸­EOFæ¯”è¾ƒå¸¸ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤šè¡Œé‡å®šå‘</span></span><br><span class="line">cat &gt; file.txt &lt;&lt;EOF</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿½åŠ </span></span><br><span class="line">cat &gt;&gt; file.txt &lt;&lt;EOF</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…è®¸EOFä½¿ç”¨tabé”®ç¼©è¿›</span></span><br><span class="line">cat &gt;&gt; file.txt &lt;&lt;-EOF</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="8-3-3-teeå‘½ä»¤"><a href="#8-3-3-teeå‘½ä»¤" class="headerlink" title="8.3.3 teeå‘½ä»¤"></a>8.3.3 teeå‘½ä»¤</h4><p>åˆ©ç”¨teeå‘½ä»¤å¯ä»¥é‡å®šå‘åˆ°å¤šä¸ªç›®æ ‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-aè¿½åŠ </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å®šå‘åˆ°æ–‡ä»¶ä¸”ç»ˆç«¯è¾“å‡º</span></span><br><span class="line">echo &#x27;FKC&#x27; | tee /data/test.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¹æ ‡å‡†è¾“å‡ºå¤šæ¬¡å¤„ç†</span></span><br><span class="line">echo &#x27;FKC&#x27; | tee /data/test.log | tr &#x27;A-Z&#x27; &#x27;a-z&#x27; &gt; /data/test2.log</span><br></pre></td></tr></table></figure><h1 id="9-ç”¨æˆ·ã€ç»„ç®¡ç†"><a href="#9-ç”¨æˆ·ã€ç»„ç®¡ç†" class="headerlink" title="9. ç”¨æˆ·ã€ç»„ç®¡ç†"></a>9. ç”¨æˆ·ã€ç»„ç®¡ç†</h1><h3 id="9-1-Linuxå®‰å…¨æ¨¡å‹"><a href="#9-1-Linuxå®‰å…¨æ¨¡å‹" class="headerlink" title="9.1 Linuxå®‰å…¨æ¨¡å‹"></a>9.1 Linuxå®‰å…¨æ¨¡å‹</h3><h4 id="9-1-1-ç”¨æˆ·"><a href="#9-1-1-ç”¨æˆ·" class="headerlink" title="9.1.1 ç”¨æˆ·"></a>9.1.1 ç”¨æˆ·</h4><p>Linuxä¸­æ¯ä¸ªç”¨æˆ·æ˜¯é€šè¿‡User IDï¼ˆUIDï¼‰æ¥è¿›è¡Œå”¯ä¸€æ ‡è¯†</p><ul><li>ç®¡ç†å‘˜ï¼šrootï¼Œ0</li><li>æ™®é€šç”¨æˆ·ï¼š1-60000 è‡ªåŠ¨åˆ†é…</li></ul><p>â€‹ç³»ç»Ÿç”¨æˆ·ï¼š1-499ï¼ˆCentos 6ä¹‹å‰ï¼‰ï¼Œ1-999ï¼ˆCentos 7ä¹‹åï¼‰ï¼Œå¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…</p><p>â€‹ç™»å½•ç”¨æˆ·ï¼š500+ï¼ˆCentos 6ä¹‹å‰ï¼‰ï¼Œ1000+ï¼ˆCentos 7ä¹‹åï¼‰ï¼Œç»™ç”¨æˆ·ä½¿ç”¨</p><h4 id="9-1-2-ç”¨æˆ·ç»„"><a href="#9-1-2-ç”¨æˆ·ç»„" class="headerlink" title="9.1.2 ç”¨æˆ·ç»„"></a>9.1.2 ç”¨æˆ·ç»„</h4><p>Linuxä¸­å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æˆ·åŠ å…¥ç”¨æˆ·ç»„ä¸­ï¼Œç”¨æˆ·ç»„æ˜¯é€šè¿‡Group IDï¼ˆGIDï¼‰æ¥å”¯ä¸€æ ‡è¯†</p><ul><li>ç®¡ç†å‘˜ç»„ï¼šrootï¼Œ0</li><li>æ™®é€šç»„ï¼š</li></ul><p>â€‹ç³»ç»Ÿç»„ï¼š1-499ï¼ˆCentos 6ä¹‹å‰ï¼‰ï¼Œ1-999ï¼ˆCentos 7ä¹‹åï¼‰ï¼Œå¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…</p><p>â€‹æ™®é€šç»„ï¼š500+ï¼ˆCentos 6ä¹‹å‰ï¼‰ï¼Œ1000+ï¼ˆCentos 7ä¹‹åï¼‰ï¼Œç»™ç”¨æˆ·ä½¿ç”¨</p><h4 id="9-1-3-ç”¨æˆ·å’Œç»„çš„å…³ç³»"><a href="#9-1-3-ç”¨æˆ·å’Œç»„çš„å…³ç³»" class="headerlink" title="9.1.3 ç”¨æˆ·å’Œç»„çš„å…³ç³»"></a>9.1.3 ç”¨æˆ·å’Œç»„çš„å…³ç³»</h4><ul><li>**ç”¨æˆ·çš„ä¸»è¦ç»„ï¼šç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªä¸»ç»„ï¼Œé»˜è®¤åˆ›å»ºç”¨æˆ·æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºå’Œç”¨æˆ·ååŒåçš„ç»„ï¼Œä½œä¸ºç”¨æˆ·çš„ä¸»è¦ç»„ï¼Œç”±äºæ­¤ç»„ä¸­åªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œåˆç§°ä¸ºç§æœ‰ç»„</li><li>**ç”¨æˆ·çš„é™„åŠ ç»„ï¼šä¸€ä¸ªç”¨æˆ·å¯ä»¥å±äºé›¶ä¸ªæˆ–å¤šä¸ªè¾…åŠ©ç»„</li></ul><h4 id="9-1-4-å®‰å…¨ä¸Šä¸‹æ–‡"><a href="#9-1-4-å®‰å…¨ä¸Šä¸‹æ–‡" class="headerlink" title="9.1.4 å®‰å…¨ä¸Šä¸‹æ–‡"></a>9.1.4 å®‰å…¨ä¸Šä¸‹æ–‡</h4><p>Linuxå®‰å…¨ä¸Šä¸‹æ–‡Context: è¿è¡Œä¸­çš„ç¨‹åºï¼Œå³è¿›ç¨‹process)ï¼Œä»¥è¿›ç¨‹å‘èµ·è€…çš„èº«ä»½è¿è¡Œï¼Œè¿›ç¨‹æ‰€èƒ½å¤Ÿè®¿é—®èµ„æºçš„æƒé™å–å†³äºè¿›ç¨‹çš„è¿è¡Œè€…çš„èº«ä»½<br>æ¯”å¦‚ï¼šåˆ†åˆ«ä»¥rootå’Œwang çš„èº«ä»½è¿è¡Œ&#x2F;bin&#x2F;cat &#x2F;etc&#x2F;shadowï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„ï¼Œèµ„æºèƒ½å¦èƒ½è¢«è®¿é—®ï¼Œæ˜¯ç”±è¿è¡Œè€…çš„èº«ä»½å†³å®šï¼Œéç¨‹åºæœ¬èº«</p><h3 id="9-2-ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶"><a href="#9-2-ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶" class="headerlink" title="9.2 ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶"></a>9.2 ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶</h3><h4 id="9-2-1-etc-passwd"><a href="#9-2-1-etc-passwd" class="headerlink" title="9.2.1 &#x2F;etc&#x2F;passwd"></a>9.2.1 &#x2F;etc&#x2F;passwd</h4><p>ç”¨æˆ·åŠå…¶å±æ€§ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¸®åŠ©man 5 passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">name:password:UID:GID:æè¿°ä¿¡æ¯:å®¶ç›®å½•:shell</span><br></pre></td></tr></table></figure><h4 id="9-2-2-etc-shadow"><a href="#9-2-2-etc-shadow" class="headerlink" title="9.2.2 &#x2F;etc&#x2F;shadow"></a>9.2.2 &#x2F;etc&#x2F;shadow</h4><p>ç”¨æˆ·å¯†ç åŠç›¸å…³å±æ€§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">### 9.2.3 /etc/group</span></span></span><br><span class="line"></span><br><span class="line">ç»„åŠå…¶å±æ€§ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¸®åŠ©man 5 group</span></span><br><span class="line">root:x:0:</span><br><span class="line">name:group_passwd:GID:ç»„æˆå‘˜</span><br></pre></td></tr></table></figure><h4 id="9-2-4-etc-gshadow"><a href="#9-2-4-etc-gshadow" class="headerlink" title="9.2.4 &#x2F;etc&#x2F;gshadow"></a>9.2.4 &#x2F;etc&#x2F;gshadow</h4><p>ç»„å¯†ç åŠå…¶ç›¸å…³å±æ€§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root:::</span><br><span class="line">root::ç»„çš„ç®¡ç†å‘˜:ç»„æˆå‘˜</span><br></pre></td></tr></table></figure><h3 id="9-3-ç”¨æˆ·ç®¡ç†å‘½ä»¤"><a href="#9-3-ç”¨æˆ·ç®¡ç†å‘½ä»¤" class="headerlink" title="9.3 ç”¨æˆ·ç®¡ç†å‘½ä»¤"></a>9.3 ç”¨æˆ·ç®¡ç†å‘½ä»¤</h3><h4 id="9-3-1-æ–‡ä»¶æ£€æŸ¥"><a href="#9-3-1-æ–‡ä»¶æ£€æŸ¥" class="headerlink" title="9.3.1 æ–‡ä»¶æ£€æŸ¥"></a>9.3.1 æ–‡ä»¶æ£€æŸ¥</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vipwç¼–è¾‘ /etc/passwd æ–‡ä»¶</span><br><span class="line">vigrç”¨äºç¼–è¾‘ /etc/group æ–‡ä»¶</span><br><span class="line">pwckç”¨äºæ£€æŸ¥ /etc/passwd æ–‡ä»¶çš„è¯­æ³•å’Œå®Œæ•´æ€§</span><br><span class="line">grockç”¨äºæ£€æŸ¥ /etc/group æ–‡ä»¶çš„è¯­æ³•å’Œå®Œæ•´æ€§</span><br></pre></td></tr></table></figure><h4 id="9-3-2-åˆ›å»ºç”¨æˆ·"><a href="#9-3-2-åˆ›å»ºç”¨æˆ·" class="headerlink" title="9.3.2 åˆ›å»ºç”¨æˆ·"></a>9.3.2 åˆ›å»ºç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">useradd </span><br><span class="line">-uæŒ‡å®šUID</span><br><span class="line">-oé…åˆ-ué€‰é¡¹,ä¸æ£€æŸ¥UIDçš„å”¯ä¸€æ€§</span><br><span class="line">-gæŒ‡å®šç”¨æˆ·æ‰€å±åŸºæœ¬ç»„,å¯ä¸ºç»„å,ä¹Ÿå¯ä»¥æ˜¯GID</span><br><span class="line">-cç”¨æˆ·æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯</span><br><span class="line">-dæŒ‡å®šç”¨æˆ·å®¶ç›®å½•</span><br><span class="line">-sæŒ‡å®šä½¿ç”¨shell</span><br><span class="line">/sbin/nologin</span><br><span class="line">/usr/sbin/nologinï¼ˆUbuntuï¼‰</span><br><span class="line">/bin/false</span><br><span class="line">-Gä¸ºç”¨æˆ·æŒ‡æ˜é™„åŠ ç»„,ç»„é¡»äº‹å…ˆå­˜åœ¨</span><br><span class="line">-Nä¸åˆ›å»ºç§ç”¨ç»„ä½œä¸ºä¸»ç»„,ä½¿ç”¨usersç»„åšä¸»ç»„</span><br><span class="line">-råˆ›å»ºçš„è´¦æˆ·æ˜¯ç³»ç»Ÿè´¦æˆ·</span><br><span class="line">-måˆ›å»ºå®¶ç›®å½•,ç”¨äºç³»ç»Ÿç”¨æˆ·</span><br><span class="line">-Mä¸åˆ›å»ºå®¶ç›®å½•,ç”¨äºéç³»ç»Ÿç”¨æˆ·</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">useradd -r -s /sbin/nologin -u 354 -c &quot;Nginxè´¦æˆ·&quot; nginx </span><br></pre></td></tr></table></figure><h4 id="9-3-3-æ‰¹é‡åˆ›å»ºç”¨æˆ·"><a href="#9-3-3-æ‰¹é‡åˆ›å»ºç”¨æˆ·" class="headerlink" title="9.3.3 æ‰¹é‡åˆ›å»ºç”¨æˆ·"></a>9.3.3 æ‰¹é‡åˆ›å»ºç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newusers passwd æ ¼å¼æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="9-3-4-ä¿®æ”¹ç”¨æˆ·å±æ€§"><a href="#9-3-4-ä¿®æ”¹ç”¨æˆ·å±æ€§" class="headerlink" title="9.3.4 ä¿®æ”¹ç”¨æˆ·å±æ€§"></a>9.3.4 ä¿®æ”¹ç”¨æˆ·å±æ€§</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">usermod</span><br><span class="line">-uæ–°çš„UID</span><br><span class="line">-gæ–°çš„ä¸»ç»„</span><br><span class="line">-Gæ–°é™„åŠ çš„ç»„,åŸæ¥çš„ç»„ä¼šè¢«è¦†ç›–,è‹¥ä¿ç•™åŸæœ‰,åˆ™è¦åŒæ—¶ä½¿ç”¨-aé€‰é¡¹</span><br><span class="line">-sæ–°çš„shellç±»å‹</span><br><span class="line">-cæ–°çš„æ³¨é‡Šä¿¡æ¯</span><br><span class="line">-dæ–°çš„å®¶ç›®å½•ä¸ä¼šè‡ªåŠ¨åˆ›å»º;è‹¥è¦åˆ›å»ºæ–°çš„ç›®å½•å¹¶è¿ç§»åŸå®¶ç›®å½•,åŒæ—¶ä½¿ç”¨-mé€‰é¡¹</span><br><span class="line">-læ–°çš„è´¦æˆ·å</span><br><span class="line">-Låœ¨/etc/shadowå¯†ç æ å¢åŠ !,å³é”å®šè´¦æˆ·</span><br><span class="line">-Uå°†/etc/shadowå¯†ç æ !æ‹¿æ‰,å³è§£é”è´¦æˆ·</span><br><span class="line">-eYYYY-MM-DDæŒ‡åç”¨æˆ·è´¦æˆ·è¿‡æœŸæ—¥æœŸ</span><br><span class="line">-fè®¾ç½®è´¦æˆ·å®½é™æœŸ</span><br></pre></td></tr></table></figure><h4 id="9-3-5-ä¿®æ”¹è´¦æˆ·å¯†ç "><a href="#9-3-5-ä¿®æ”¹è´¦æˆ·å¯†ç " class="headerlink" title="9.3.5 ä¿®æ”¹è´¦æˆ·å¯†ç "></a>9.3.5 ä¿®æ”¹è´¦æˆ·å¯†ç </h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br><span class="line">-dåˆ é™¤æŒ‡å®šç”¨æˆ·å¯†ç </span><br><span class="line">-lé”å®šç”¨æˆ·</span><br><span class="line">-uè§£é”ç”¨æˆ·</span><br><span class="line">-eå¼ºåˆ¶ç”¨æˆ·ä¸‹æ¬¡ç™»å½•ä¿®æ”¹å¯†ç </span><br><span class="line">-få¼ºåˆ¶æ“ä½œ</span><br><span class="line">-næŒ‡å®šå¯†ç æœ€çŸ­ä½¿ç”¨æœŸé™</span><br><span class="line">-xæŒ‡å®šå¯†ç æœ€å¤§ä½¿ç”¨æœŸé™</span><br><span class="line">-wæå‰å¤šå°‘å¤©å¼€å§‹è­¦å‘Š</span><br><span class="line">-iå®½é™æœŸ</span><br><span class="line">-stdin ä»æ ‡å‡†è¾“å…¥æ¥å—ç”¨æˆ·å¯†ç </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éäº¤äº’å¼ä¿®æ”¹è´¦æˆ·å¯†ç ï¼ˆCentos å’Œ Ubuntuï¼‰</span></span><br><span class="line">echo username:passwd | chpasswd</span><br><span class="line"></span><br><span class="line">vim passwd.txt</span><br><span class="line">zy:123</span><br><span class="line">cat passwd.txt | chpasswd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éäº¤äº’å¼ä¿®æ”¹è´¦æˆ·å¯†ç ï¼ˆCentosï¼‰</span></span><br><span class="line">echo 123 | passwd --stdin root</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šç”¨ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼ˆCentos å’Œ Ubuntuï¼‰</span></span><br><span class="line">echo -e &#x27;123456\n123456&#x27; | passwd root</span><br></pre></td></tr></table></figure><h4 id="9-3-6-ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥"><a href="#9-3-6-ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥" class="headerlink" title="9.3.6 ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥"></a>9.3.6 ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chage</span><br></pre></td></tr></table></figure><h4 id="9-3-7-é»˜è®¤è´¦æˆ·åˆ›å»ºè§„åˆ™"><a href="#9-3-7-é»˜è®¤è´¦æˆ·åˆ›å»ºè§„åˆ™" class="headerlink" title="9.3.7 é»˜è®¤è´¦æˆ·åˆ›å»ºè§„åˆ™"></a>9.3.7 é»˜è®¤è´¦æˆ·åˆ›å»ºè§„åˆ™</h4><p>è´¦æˆ·åˆ›å»ºé»˜è®¤è§„åˆ™ç”±æ–‡ä»¶&#x2F;etc&#x2F;default&#x2F;useradd æŒ‡å®š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky9-node2 ~][1]# cat /etc/default/useradd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">useradd defaults file</span></span><br><span class="line">GROUP=100ç»„ID</span><br><span class="line">HOME=/homeå®¶ç›®å½•</span><br><span class="line">INACTIVE=-1å¯¹åº”ç”¨æˆ·å¯†ç è¿‡æœŸåçš„å®½é™æœŸ</span><br><span class="line">EXPIRE=ç”¨æˆ·è´¦å·æœ‰æ•ˆæœŸ</span><br><span class="line">SHELL=/bin/bashé»˜è®¤shellç±»å‹</span><br><span class="line">SKEL=/etc/skelæ–°å»ºè´¦å·ä¼šä»è¯¥ç›®å½•è·å–é»˜è®¤æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">CREATE_MAIL_SPOOL=yesé»˜è®¤æ˜¯å¦å¯ç”¨é‚®ç®±</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹ï¼šè¿˜åŸç”¨æˆ·å®¶ç›®å½•æ–‡ä»¶</span></span><br><span class="line">cp -r /etc/skel/. /home/username</span><br><span class="line">cp -r /etc/skel /home/username</span><br></pre></td></tr></table></figure><h4 id="9-3-8-é»˜è®¤è´¦æˆ·å£ä»¤ç­–ç•¥"><a href="#9-3-8-é»˜è®¤è´¦æˆ·å£ä»¤ç­–ç•¥" class="headerlink" title="9.3.8 é»˜è®¤è´¦æˆ·å£ä»¤ç­–ç•¥"></a>9.3.8 é»˜è®¤è´¦æˆ·å£ä»¤ç­–ç•¥</h4><p>è´¦æˆ·å£ä»¤ç­–ç•¥é»˜è®¤è§„åˆ™ç”±æ–‡ä»¶&#x2F;etc&#x2F;login.defs å®šä¹‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky9-node2 ~][148]# cat  /etc/login.defs | grep &#x27;^[^#]&#x27;</span><br><span class="line">MAIL_DIR/var/spool/mail</span><br><span class="line">UMASK022</span><br><span class="line">HOME_MODE0700</span><br><span class="line">PASS_MAX_DAYS99999</span><br><span class="line">PASS_MIN_DAYS0</span><br><span class="line">PASS_WARN_AGE7</span><br><span class="line">UID_MIN                  1000</span><br><span class="line">UID_MAX                 60000</span><br><span class="line">SYS_UID_MIN               201</span><br><span class="line">SYS_UID_MAX               999</span><br><span class="line">SUB_UID_MIN   100000</span><br><span class="line">SUB_UID_MAX600100000</span><br><span class="line">SUB_UID_COUNT    65536</span><br><span class="line">GID_MIN                  1000</span><br><span class="line">GID_MAX                 60000</span><br><span class="line">SYS_GID_MIN               201</span><br><span class="line">SYS_GID_MAX               999</span><br><span class="line">SUB_GID_MIN   100000</span><br><span class="line">SUB_GID_MAX600100000</span><br><span class="line">SUB_GID_COUNT    65536</span><br><span class="line">ENCRYPT_METHOD SHA512</span><br><span class="line">USERGROUPS_ENAB yes</span><br><span class="line">CREATE_HOMEyes</span><br><span class="line">HMAC_CRYPTO_ALGO SHA512</span><br></pre></td></tr></table></figure><h4 id="9-3-9-åˆ é™¤ç”¨æˆ·"><a href="#9-3-9-åˆ é™¤ç”¨æˆ·" class="headerlink" title="9.3.9 åˆ é™¤ç”¨æˆ·"></a>9.3.9 åˆ é™¤ç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userdel</span><br><span class="line">-få¼ºåˆ¶</span><br><span class="line">-råˆ é™¤å®¶ç›®å½•å’Œé‚®ç®±</span><br></pre></td></tr></table></figure><h4 id="9-3-10-æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯"><a href="#9-3-10-æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯" class="headerlink" title="9.3.10 æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯"></a>9.3.10 æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">id</span><br><span class="line">-uæ˜¾ç¤ºUID</span><br><span class="line">-gæ˜¾ç¤ºGID</span><br><span class="line">-Gæ˜¾ç¤ºç”¨æˆ·æ‰€å±ç»„çš„ID</span><br><span class="line">-næ˜¾ç¤ºåç§°,éœ€é…åˆugGä½¿ç”¨</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">[root@rocky9-node2 ~][1]# id -un</span><br><span class="line">root</span><br></pre></td></tr></table></figure><h4 id="9-3-11-åˆ‡æ¢ç”¨æˆ·"><a href="#9-3-11-åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="9.3.11 åˆ‡æ¢ç”¨æˆ·"></a>9.3.11 åˆ‡æ¢ç”¨æˆ·</h4><p>su Usernameï¼šéç™»å½•å¼åˆ‡æ¢ï¼Œå³ä¸ä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œä¸æ”¹å˜å½“å‰å·¥ä½œç›®å½•</p><p>su - Usernameï¼šç™»å½•å¼åˆ‡æ¢ï¼Œä¼šè¯»å–ç›®æ ‡ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œåˆ‡æ¢è‡³å®¶ç›®å½•ï¼Œå®Œå…¨åˆ‡æ¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">su</span><br><span class="line">-lç›¸å½“äºsu - Username</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥æŒ‡å®šèº«ä»½æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">su - username -c &#x27;COMMAND&#x27;</span><br></pre></td></tr></table></figure><h4 id="9-3-12-ç”¨æˆ·å…¶ä»–ç›¸å…³æŒ‡ä»¤"><a href="#9-3-12-ç”¨æˆ·å…¶ä»–ç›¸å…³æŒ‡ä»¤" class="headerlink" title="9.3.12 ç”¨æˆ·å…¶ä»–ç›¸å…³æŒ‡ä»¤"></a>9.3.12 ç”¨æˆ·å…¶ä»–ç›¸å…³æŒ‡ä»¤</h4><h3 id="9-4-ç»„ç®¡ç†å‘½ä»¤"><a href="#9-4-ç»„ç®¡ç†å‘½ä»¤" class="headerlink" title="9.4 ç»„ç®¡ç†å‘½ä»¤"></a>9.4 ç»„ç®¡ç†å‘½ä»¤</h3><h4 id="9-4-1-åˆ›å»ºç»„"><a href="#9-4-1-åˆ›å»ºç»„" class="headerlink" title="9.4.1 åˆ›å»ºç»„"></a>9.4.1 åˆ›å»ºç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">groupadd [é€‰é¡¹] ç»„å</span><br><span class="line">-gæŒ‡å®šç»„çš„GID</span><br><span class="line">-fåˆ›å»ºç³»ç»Ÿç»„,Centos 6ä¹‹å‰ï¼šID&lt;500,Cetnos 7ä»¥å:ID&lt;1000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">group add -g 48 -r nginx</span><br></pre></td></tr></table></figure><h4 id="9-4-2-ä¿®æ”¹ç»„"><a href="#9-4-2-ä¿®æ”¹ç»„" class="headerlink" title="9.4.2 ä¿®æ”¹ç»„"></a>9.4.2 ä¿®æ”¹ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">groupmod [é€‰é¡¹] ç»„å</span><br><span class="line">-næ–°åå­—</span><br><span class="line">-gæ–°çš„GID</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ç»„ånginxä¸ºtomcat</span></span><br><span class="line">groupmod -n tomcat nginx</span><br></pre></td></tr></table></figure><h4 id="9-4-3-åˆ é™¤ç»„"><a href="#9-4-3-åˆ é™¤ç»„" class="headerlink" title="9.4.3 åˆ é™¤ç»„"></a>9.4.3 åˆ é™¤ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groupdel [é€‰é¡¹] ç»„å</span><br><span class="line">-få¼ºåˆ¶åˆ é™¤,å³ä½¿ç”¨æˆ·çš„ä¸»ç»„ä¹Ÿå¼ºåˆ¶åˆ é™¤</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">groupdel tomcat</span><br></pre></td></tr></table></figure><h4 id="9-4-4-æŸ¥çœ‹ç»„ä¿¡æ¯"><a href="#9-4-4-æŸ¥çœ‹ç»„ä¿¡æ¯" class="headerlink" title="9.4.4 æŸ¥çœ‹ç»„ä¿¡æ¯"></a>9.4.4 æŸ¥çœ‹ç»„ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç”¨æˆ·å±äºé‚£ä¸ªç»„</span></span><br><span class="line">groups username</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç»„é‡Œæœ‰é‚£äº›ç”¨æˆ·</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="10-æ–‡ä»¶æƒé™ç®¡ç†"><a href="#10-æ–‡ä»¶æƒé™ç®¡ç†" class="headerlink" title="10. æ–‡ä»¶æƒé™ç®¡ç†"></a>10. æ–‡ä»¶æƒé™ç®¡ç†</h1><h3 id="10-1-ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…"><a href="#10-1-ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…" class="headerlink" title="10.1 ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…"></a>10.1 ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…</h3><p>chownå‘½ä»¤å¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å±ä¸»ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ–‡ä»¶å±ç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">chown [é€‰é¡¹] æ–°æ‰€æœ‰è€…:æ–°æ‰€å±ç»„ æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">-Ré€’å½’ä¿®æ”¹æ–‡ä»¶å¤¹ä¸‹æƒé™</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åªä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…</span></span><br><span class="line">chown nginx /etc/nginx.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åªä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„</span></span><br><span class="line">chown :nginx /etc/nginx.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…å’Œæ‰€å±ç»„</span></span><br><span class="line">chown nginx:nginx /etc/nginx.conf</span><br></pre></td></tr></table></figure><h3 id="10-2-ä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„"><a href="#10-2-ä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„" class="headerlink" title="10.2 ä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„"></a>10.2 ä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chgrp [é€‰é¡¹] æ–°ç»„ æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">-Ré€’å½’ä¿®æ”¹æ–‡ä»¶å¤¹ä¸‹æƒé™</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">chgrp nginx /etc/nginx.conf</span><br></pre></td></tr></table></figure><h3 id="10-3-æ–‡ä»¶çš„æƒé™è¯´æ˜"><a href="#10-3-æ–‡ä»¶çš„æƒé™è¯´æ˜" class="headerlink" title="10.3 æ–‡ä»¶çš„æƒé™è¯´æ˜"></a>10.3 æ–‡ä»¶çš„æƒé™è¯´æ˜</h3><p>æ–‡ä»¶çš„æƒé™ä¸»è¦é’ˆå¯¹ä¸‰ç±»å¯¹è±¡è¿›è¡Œå®šä¹‰</p><p>æ¯ä¸ªæ–‡ä»¶é’ˆå¯¹æ¯ç±»è®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§æƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">owneræ‰€å±ä¸»ï¼Œu</span><br><span class="line">groupæ‰€å±ç»„ï¼Œg</span><br><span class="line">otherå…¶ä»–äººï¼Œo</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªæ–‡ä»¶å¯¹æ¯ç±»è®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§å¸¸ç”¨æƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">rå¯è¯»</span><br><span class="line">wå¯å†™</span><br><span class="line">xæ‰§è¡Œ</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¹äºæ–‡ä»¶çš„æƒé™</span></span><br><span class="line">rå¯ä½¿ç”¨æ–‡ä»¶æŸ¥çœ‹å·¥å…·è·å–å…¶å†…å®¹</span><br><span class="line">wå¯ä¿®æ”¹å…¶å†…å®¹</span><br><span class="line">xå¯ä»¥æ‰§è¡Œæ­¤æ–‡ä»¶,ï¼ˆæ­¤æ–‡ä»¶å†…å®¹å¿…é¡»æ˜¯å¯æ‰§è¡Œçš„ï¼‰</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¹äºç›®å½•çš„æƒé™</span></span><br><span class="line">rå¯ä»¥ä½¿ç”¨lsæŸ¥çœ‹æ­¤ç›®å½•ä¸­æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">wå¯åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶,ä¹Ÿå¯ä»¥åˆ é™¤æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶,è€Œå’Œè¢«åˆ é™¤æ–‡ä»¶çš„æƒé™æ— å…³</span><br><span class="line">xå¯ä»¥ä½¿ç”¨ls -læŸ¥çœ‹æ­¤ç›®å½•ä¸­æ–‡ä»¶å…ƒæ•°æ®,å¿…é¡»é…åˆræƒé™,å¯ä»¥cdè¿›å…¥æ­¤ç›®å½•,å±äºç›®å½•å¯è®¿é—®çš„æœ€å°æƒé™</span><br><span class="line">Xåªç»™ç›®å½•xæƒé™,ä¸ç»™æ— æ‰§è¡Œæƒé™çš„æ–‡ä»¶xæƒé™</span><br></pre></td></tr></table></figure><h3 id="10-4-ä¿®æ”¹æ–‡ä»¶æƒé™"><a href="#10-4-ä¿®æ”¹æ–‡ä»¶æƒé™" class="headerlink" title="10.4 ä¿®æ”¹æ–‡ä»¶æƒé™"></a>10.4 ä¿®æ”¹æ–‡ä»¶æƒé™</h3><p>&#x3D;&#x3D;æ³¨ï¼šç”¨æˆ·çš„æœ€ç»ˆæƒé™æ˜¯ä»å·¦å¾€å³åŒ¹é…ï¼Œå³ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€å±ç»„ï¼Œå…¶ä»–äººï¼Œä¸€æ—¦åŒ¹é…æƒé™ç”Ÿæ•ˆï¼Œä¸å†å¾€åˆæŸ¥çœ‹å…¶æƒé™&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">chmod [é€‰é¡¹] æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">-Ré€’å½’ä¿®æ”¹æƒé™</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹æŸä¸€ç±»ç”¨æˆ·çš„æ‰€æœ‰æƒé™</span><br><span class="line">u= g= o= ug= a= u= g=</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹æŒ‡å®šä¸€ç±»ç”¨æˆ·æŸä¸ªæˆ–æŸä¸ªæƒé™</span><br><span class="line">u+ u- g+ g- o+ o- a+ a- + -</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">chmod u+rwx,g-r,o-rx /etc/my.cnf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">chmod g+rwx /etc/my.cnf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">chmod u=rw,g=r,o= /etc/my.cnf</span><br><span class="line">-rw-r-----. 1 root root 534 Jun 13 11:12 /etc/my.cnf</span><br></pre></td></tr></table></figure><p><strong>æ•°å­—è¡¨ç¤ºæ³•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">r4</span><br><span class="line">w2</span><br><span class="line">x1</span><br></pre></td></tr></table></figure><h3 id="10-5-é»˜è®¤æƒé™umask"><a href="#10-5-é»˜è®¤æƒé™umask" class="headerlink" title="10.5 é»˜è®¤æƒé™umask"></a>10.5 é»˜è®¤æƒé™umask</h3><p>umaskçš„å€¼å¯ä»¥ç”¨æ¥ä¿ç•™åœ¨åˆ›å»ºæ–‡ä»¶æƒé™</p><ul><li>æ–°å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™ï¼š666-umaskï¼Œå¦‚æœæ‰€å¾—ç»“æœæŸä½å­˜åœ¨æ‰§è¡Œï¼ˆå¥‡æ•°ï¼‰æƒé™ï¼Œåˆ™å°†å…¶æƒé™+1ï¼Œå¶æ•°ä¸å˜</li><li>æ–°å»ºç›®å½•çš„é»˜è®¤æƒé™ï¼š777-umask</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹<span class="built_in">umask</span>æƒé™ä¸º777</span></span><br><span class="line">umask 777</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ°¸ä¹…ä¿®æ”¹<span class="built_in">umask</span>æƒé™</span></span><br><span class="line">echo &#x27;umask 777&#x27; &gt;&gt; ~/.bashrc </span><br><span class="line">source ~/.bashrc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸€æ¬¡æ€§ä½¿ç”¨<span class="built_in">umask</span>æƒé™,ä¸å½±å“å½“å‰ç¯å¢ƒ</span></span><br><span class="line">( umansk 777;touch nginx.log )</span><br></pre></td></tr></table></figure><h3 id="10-6-æ–‡ä»¶çš„ç‰¹æ®Šæƒé™"><a href="#10-6-æ–‡ä»¶çš„ç‰¹æ®Šæƒé™" class="headerlink" title="10.6 æ–‡ä»¶çš„ç‰¹æ®Šæƒé™"></a>10.6 æ–‡ä»¶çš„ç‰¹æ®Šæƒé™</h3><h4 id="10-6-1-SUID"><a href="#10-6-1-SUID" class="headerlink" title="10.6.1 SUID"></a>10.6.1 SUID</h4><p>å½“ s æƒé™å¤„äºæ‰€æœ‰è€…ä½ç½®æ—¶ï¼Œä»£è¡¨ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨æ‰€æœ‰è€…æƒé™æ¥æ‰§è¡Œè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ SUIDæƒé™</span></span><br><span class="line">chmod u+s /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…é™¤SUIDæƒé™</span></span><br><span class="line">chmod u-s /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="10-6-2-SGID"><a href="#10-6-2-SGID" class="headerlink" title="10.6.2 SGID"></a>10.6.2 SGID</h4><p>å½“ s æƒé™å¤„äºæ‰€å±ç»„ä½ç½®æ—¶ï¼Œä»£è¡¨ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨æ‰€å±ç»„æƒé™æ¥æ‰§è¡Œè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p>å½“ s æƒé™å¤„äºæ–‡ä»¶å¤¹çš„æ‰€å±ç»„ä½ç½®æ—¶ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶æ‰€å±ç»„ä¼šç»§æ‰¿çˆ¶æ–‡ä»¶å¤¹æ‰€å±ç»„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ SGIDæƒé™</span></span><br><span class="line">chmod g+s /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…é™¤SGIDæƒé™</span></span><br><span class="line">chmod g-s /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="10-6-3-STICKY"><a href="#10-6-3-STICKY" class="headerlink" title="10.6.3 STICKY"></a>10.6.3 STICKY</h4><p>å½“å…¶ä»–äººæ‹¥æœ‰ t æƒé™æ—¶ï¼Œç¡®ä¿ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥åœ¨å…¶ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œä½†ä¸èƒ½åˆ é™¤å…¶ä»–ç”¨æˆ·çš„æ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ STICKYæƒé™</span></span><br><span class="line">chmod +t /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…é™¤STICKYæƒé™</span></span><br><span class="line">chmod -t /etc/passwd</span><br></pre></td></tr></table></figure><h3 id="10-7-æ–‡ä»¶çš„éšè—æƒé™"><a href="#10-7-æ–‡ä»¶çš„éšè—æƒé™" class="headerlink" title="10.7 æ–‡ä»¶çš„éšè—æƒé™"></a>10.7 æ–‡ä»¶çš„éšè—æƒé™</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">chattr</span><br><span class="line">iç¦æ­¢å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€åˆ é™¤ã€é‡å‘½åç­‰æ“ä½œã€‚</span><br><span class="line">aåªèƒ½å‘æ–‡ä»¶è¿½åŠ æ•°æ®ï¼Œä¸å…è®¸ä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶å†…å®¹ã€‚</span><br><span class="line">cç”¨äºå¯ç”¨æ–‡ä»¶ç³»ç»Ÿçš„å‹ç¼©åŠŸèƒ½ã€‚</span><br><span class="line">såˆ é™¤æ–‡ä»¶æ—¶è¦†ç›–å…¶å†…å®¹ï¼Œä»¥ç¡®ä¿æ— æ³•æ¢å¤ã€‚</span><br><span class="line">ué˜²æ­¢æ–‡ä»¶è¢«åˆ é™¤ã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ–‡ä»¶éšè—æƒé™</span></span><br><span class="line">lsattr /etc/my.cnf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é™åˆ¶æ–‡ä»¶ä¸å…è®¸åˆ é™¤</span></span><br><span class="line">chattr +i /etc/my.cnf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…é™¤æ–‡ä»¶éšè—æƒé™</span></span><br><span class="line">chattr -i /etc/my.cnf</span><br></pre></td></tr></table></figure><h3 id="10-8-è®¿é—®æ§åˆ¶åˆ—è¡¨ACL"><a href="#10-8-è®¿é—®æ§åˆ¶åˆ—è¡¨ACL" class="headerlink" title="10.8 è®¿é—®æ§åˆ¶åˆ—è¡¨ACL"></a>10.8 è®¿é—®æ§åˆ¶åˆ—è¡¨ACL</h3><p>ACLæƒé™åŠŸèƒ½ï¼šå®ç°çµæ´»çš„æƒé™ç®¡ç†ï¼Œé™¤äº†æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œæ‰€å±ç»„å’Œå…¶ä»–äººï¼Œå¯ä»¥å¯¹æ›´å¤šçš„ç”¨æˆ·è®¾ç½®æƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ /æ¸…é™¤ACLæƒé™</span></span><br><span class="line">setfacl -m u:zhao:rwx /file/file.txtä¿®æ”¹ACLç”¨æˆ·æƒé™</span><br><span class="line">setfacl -m g:zhao:rwx /file/file.txtä¿®æ”¹ACLç»„æƒé™</span><br><span class="line">setfacl -Rm u:zhao:rwx /1ä¿®é€’å½’ä¿®æ”¹ACLæƒé™</span><br><span class="line">setfacl -Rb u:zhao:rwx /1é€’å½’åˆ é™¤æ‰€æœ‰ç”¨æˆ·å’Œç»„ACLæƒé™</span><br><span class="line">setfacl -x u:zhao /file/file.txtåˆ é™¤å•ä¸ªç”¨æˆ·ACLæƒé™</span><br><span class="line">setfacl -x g:zhao /file/file.txt åˆ é™¤å•ä¸ªç»„çš„ACLæƒé™</span><br><span class="line">setfacl -Rx u:zhao /file/      é€’å½’åˆ é™¤å•ä¸ªç”¨æˆ·ACLæƒé™</span><br><span class="line">setfacl -Rx g:zhao /file/ é€’å½’åˆ é™¤å•ä¸ªç»„çš„ACLæƒé™</span><br><span class="line">setfacl -b  /file/file.txt æ¸…é™¤æ‰€æœ‰ç”¨æˆ·å’Œç»„çš„ACLæƒé™</span><br><span class="line">setfacl -R -b /file/é€’å½’æ¸…é™¤æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ç”¨æˆ·å’Œç»„çš„ACLæƒé™</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ACLæƒé™</span></span><br><span class="line">getfacl /file/file.txt </span><br><span class="line">getfacl -R /file/file.txt é€’å½’æŸ¥çœ‹</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½ACLæƒé™</span></span><br><span class="line">getfacl -R /file/file.txt  &gt; acl.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿˜åŸå¤‡ä»½çš„ACLæƒé™</span></span><br><span class="line">setfacl -R --set-file=acl.txt /file/file.txt</span><br></pre></td></tr></table></figure><p>maskï¼šç¡®å®šåœ¨ ACL ä¸­æŒ‡å®šçš„ç”¨æˆ·ã€ç”¨æˆ·ç»„æƒé™å’Œæ ‡å‡†æ–‡ä»¶æƒé™ä¹‹é—´çš„æœ€ç»ˆæƒé™ã€‚</p><p>maskï¼šä¸å½±å“å½“å‰æ–‡ä»¶æ‰€æœ‰è€…ï¼Œå’Œå…¶ä»–äººçš„æƒé™ï¼Œä½†ä¼šå½±å“é€šè¿‡ ACL æŒ‡å®šçš„ç”¨æˆ·æˆ–ç”¨æˆ·ç»„çš„æƒé™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m mask::rwx /file/file.txt</span><br><span class="line">setfacl -m mask::rx /file/file.txt</span><br></pre></td></tr></table></figure><h1 id="11-vimç¼–è¾‘å™¨"><a href="#11-vimç¼–è¾‘å™¨" class="headerlink" title="11. vimç¼–è¾‘å™¨"></a>11. vimç¼–è¾‘å™¨</h1><h3 id="11-1-æ’å…¥æ¨¡å¼"><a href="#11-1-æ’å…¥æ¨¡å¼" class="headerlink" title="11.1 æ’å…¥æ¨¡å¼"></a>11.1 æ’å…¥æ¨¡å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤æ¨¡å¼â€”â€”&gt;æ’å…¥æ¨¡å¼</span><br><span class="line"></span><br><span class="line">iåœ¨å…‰æ ‡æ‰€åœ¨å¤„è¾“å…¥</span><br><span class="line">låœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–è¾“å…¥</span><br><span class="line">aåœ¨å…‰æ ‡æ‰€åœ¨å¤„åé¢è¾“å…¥</span><br><span class="line">Aåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå°¾è¾“å…¥</span><br><span class="line">oåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹æ–¹æ‰“å¼€ä¸€ä¸ªæ–°è¡Œ</span><br><span class="line">Oåœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šæ–¹æ‰“å¼€ä¸€ä¸ªæ–°è¡Œ</span><br></pre></td></tr></table></figure><h3 id="11-2-æ‰©å±•å‘½ä»¤"><a href="#11-2-æ‰©å±•å‘½ä»¤" class="headerlink" title="11.2 æ‰©å±•å‘½ä»¤"></a>11.2 æ‰©å±•å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ‰©å±•å‘½ä»¤æ¨¡å¼åŸºæœ¬å‘½ä»¤</span><br><span class="line">wä¿å­˜</span><br><span class="line">wqä¿å­˜é€€å‡º</span><br><span class="line">xå†™å…¥å¹¶é€€å‡º</span><br><span class="line">XåŠ å¯†</span><br><span class="line">qé€€å‡º</span><br><span class="line">q!å¼ºåˆ¶é€€å‡º</span><br><span class="line">rfienameè¯»æ–‡ä»¶å†…å®¹åˆ°å½“å‰æ–‡ä»¶</span><br><span class="line">wfilenameå°†å½“å‰æ–‡ä»¶å†™å…¥å¦å¤–ä¸€ä¸ªæ–‡ä»¶</span><br><span class="line">!hostnameæ‰§è¡Œå‘½ä»¤</span><br><span class="line">r!hostnameå°†å‘½ä»¤è¾“å‡ºå†™åˆ°å½“å‰æ–‡ä»¶</span><br><span class="line">set numberæ˜¾ç¤ºè¡Œå·</span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">dæ¸…ç©ºæ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h3 id="11-3-å®šåˆ¶vimç‰¹æ€§"><a href="#11-3-å®šåˆ¶vimç‰¹æ€§" class="headerlink" title="11.3 å®šåˆ¶vimç‰¹æ€§"></a>11.3 å®šåˆ¶vimç‰¹æ€§</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">é…ç½®æ–‡ä»¶ï¼šæ°¸ä¹…æœ‰æ•ˆ</span><br><span class="line">å…¨å±€ï¼š/etc/vimrc</span><br><span class="line">ä¸ªäººï¼š~/.vimrc</span><br><span class="line">æ˜¾ç¤ºè¡Œå·ï¼šse nu</span><br><span class="line">å–æ¶ˆè¡Œå·ï¼šset nonu</span><br><span class="line"></span><br><span class="line">å¿½ç•¥å­—ç¬¦å¤§å°å†™ï¼šset ic</span><br><span class="line">ä¸å¿½ç•¥ï¼šset noic</span><br><span class="line"></span><br><span class="line">è‡ªåŠ¨ç¼©è¿›ï¼šset ai</span><br><span class="line">ç¦ç”¨ï¼šset noai</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä¿ç•™æ ¼å¼ï¼šset paste</span><br><span class="line">ç¦ç”¨ï¼šset nopaste</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºtabå’Œæ¢è¡Œç¬¦^|å’Œ$æ˜¾ç¤ºï¼šset list</span><br><span class="line">ç¦ç”¨ï¼šset nolist</span><br><span class="line"></span><br><span class="line">é«˜äº®æœç´¢ï¼šset hlsearch</span><br><span class="line">ç¦ç”¨ï¼šset nohlsearch</span><br><span class="line"></span><br><span class="line">è¯­æ³•é«˜äº®ï¼šsyntax on</span><br><span class="line">ç¦ç”¨ï¼šsyntax off</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬æ ¼å¼windowsï¼šset fileformat=dos</span><br><span class="line">å¯ç”¨unixæ ¼å¼ï¼šset fileformat=unix</span><br><span class="line">ç®€å†™ set ff=dos|unix</span><br><span class="line"></span><br><span class="line">è®¾ç½®æ–‡æœ¬å®½åº¦</span><br><span class="line">set textwidth=65</span><br><span class="line">set wrapmargin=15</span><br><span class="line"></span><br><span class="line">è®¾ç½®å…‰æ ‡æ ‡è¯†çº¿ï¼šset cul</span><br><span class="line">ç¦ç”¨ï¼šset nocursorline</span><br><span class="line"></span><br><span class="line">åŠ å¯†ï¼šset key=passwd</span><br><span class="line">ç¦ç”¨ï¼šset key=</span><br><span class="line"></span><br><span class="line">è®¾ç½®tabå»ºå­—ç¬¦æ•°é‡ï¼šset tabstop=4</span><br><span class="line"></span><br><span class="line">å¸®åŠ©ï¼šset all</span><br></pre></td></tr></table></figure><h3 id="11-4-å‘½ä»¤æ¨¡å¼"><a href="#11-4-å‘½ä»¤æ¨¡å¼" class="headerlink" title="11.4 å‘½ä»¤æ¨¡å¼"></a>11.4 å‘½ä»¤æ¨¡å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ZZä¿å­˜é€€å‡º</span><br><span class="line">ZQä¸ä¿å­˜é€€å‡º</span><br><span class="line">Hå…‰æ ‡å‡ºç°åœ¨å½“å‰é¡µé¢é¦–è¡Œå¼€å¤´</span><br><span class="line">Lå…‰æ ‡å‡ºç°åœ¨å½“å‰é¡µé¢å°¾è¡Œå¼€å¤´</span><br><span class="line">Må…‰æ ‡å‡ºç°åœ¨å½“å‰é¡µä¸­é—´è¡Œå¼€å¤´</span><br><span class="line">ztå°†å…‰æ ‡æ‰€åœ¨è¡Œå‰ç§»åˆ°å±å¹•é¡¶ç«¯</span><br><span class="line">zzå°†å…‰æ ‡æ‰€åœ¨è¡Œç§»åˆ°å±å¹•ä¸­é—´</span><br><span class="line">zbå°†å…‰æ ‡æ‰€åœ¨è¡Œç§»åŠ¨åˆ°å±å¹•åº•ç«¯</span><br><span class="line">0æ•°å­—0å°†å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰è¡Œé¦–</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">å°†å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰è¡Œå°¾</span></span><br><span class="line">Gç§»åŠ¨åˆ°æ–‡æœ¬æœ€åä¸€è¡Œæˆ–è€…</span><br><span class="line">:10å°†å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬10è¡Œ</span><br><span class="line">100Gç§»åŠ¨åˆ°æ–‡æœ¬ç¬¬100è¡Œ</span><br><span class="line">Ræ›¿æ¢æ¨¡å¼</span><br><span class="line">d0åˆ é™¤åˆ°è¡Œé¦–</span><br><span class="line"><span class="meta prompt_">d$</span><span class="language-bash">åˆ é™¤åˆ°è¡Œå°¾</span></span><br><span class="line">Dä»å…‰æ ‡åˆ é™¤åˆ°è¡Œå°¾</span><br><span class="line">3yyå¤åˆ¶å…‰æ ‡è¡Œåˆ°å’Œåä¸¤è¡Œ</span><br><span class="line">pç²˜è´´</span><br><span class="line">uè¿”å›ä¸Šä¸€æ¬¡æ“ä½œ</span><br><span class="line">Væ•´è¡Œé€‰ä¸­</span><br><span class="line">vå…‰æ ‡é€‰ä¸­</span><br></pre></td></tr></table></figure><h3 id="11-5-å®"><a href="#11-5-å®" class="headerlink" title="11.5 å®"></a>11.5 å®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">qaå½•åˆ¶å®ï¼Œaä¸ºå®çš„åç§°</span><br><span class="line">qåœæ­¢å½•åˆ¶å®</span><br><span class="line">@aæ‰§è¡Œå®a</span><br><span class="line">@é‡æ–°æ‰§è¡Œä¸Šæ¬¡æ‰§è¡Œçš„å®</span><br></pre></td></tr></table></figure><h3 id="11-6-ç¼–è¾‘äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#11-6-ç¼–è¾‘äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="11.6 ç¼–è¾‘äºŒè¿›åˆ¶æ–‡ä»¶"></a>11.6 ç¼–è¾‘äºŒè¿›åˆ¶æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">vim -b /bin/cat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰©å±•å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œåˆ©ç”¨xxdå‘½ä»¤è½¬æ¢ä¸ºå¯è¯»çš„åå…­è¿›åˆ¶</span></span><br><span class="line">:%!xxd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢è‡³æ’å…¥æ¨¡å¼ä¸‹ï¼Œç¼–è¾‘äºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢è‡³æ‰©å±•å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œåˆ©ç”¨xxdå‘½ä»¤è½¬æ¢å›äºŒè¿›åˆ¶</span></span><br><span class="line">:%!xxd -r</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿å­˜é€€å‡º</span></span><br></pre></td></tr></table></figure><h3 id="11-7-GUIç•Œé¢å·¥å…·-gedit"><a href="#11-7-GUIç•Œé¢å·¥å…·-gedit" class="headerlink" title="11.7 GUIç•Œé¢å·¥å…· gedit"></a>11.7 GUIç•Œé¢å·¥å…· gedit</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit /etc/hosts</span><br></pre></td></tr></table></figure><h1 id="12-æ–‡æœ¬å·¥å…·"><a href="#12-æ–‡æœ¬å·¥å…·" class="headerlink" title="12. æ–‡æœ¬å·¥å…·"></a>12. æ–‡æœ¬å·¥å…·</h1><h3 id="12-1-cat-æŸ¥çœ‹æ–‡ä»¶å†…å®¹"><a href="#12-1-cat-æŸ¥çœ‹æ–‡ä»¶å†…å®¹" class="headerlink" title="12.1 cat æŸ¥çœ‹æ–‡ä»¶å†…å®¹"></a>12.1 cat æŸ¥çœ‹æ–‡ä»¶å†…å®¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cat [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-Eæ˜¾ç¤ºè¡Œç»“æŸç¬¦</span><br><span class="line">-Aæ˜¾ç¤ºæ‰€æœ‰æ§åˆ¶ç¬¦</span><br><span class="line">-nå¯¹æ¯ä¸€è¡Œæ˜¾ç¤ºè¡Œå·</span><br><span class="line">-béç©ºè¡Œæ‰æ·»åŠ ç¼–å·</span><br><span class="line">-så‹ç¼©è¿ç»­çš„ç©ºè¡Œæˆä¸€è¡Œ</span><br><span class="line">nl</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹æ–‡ä»¶åæ˜¾</span></span><br><span class="line">[root@rocky9 ~][1]# tac /etc/a.log </span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="12-1-rev-å­—ç¬¦ç¿»è½¬"><a href="#12-1-rev-å­—ç¬¦ç¿»è½¬" class="headerlink" title="12.1 rev å­—ç¬¦ç¿»è½¬"></a>12.1 rev å­—ç¬¦ç¿»è½¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky9 ~][0]# echo &#x27;123&#x27; | rev</span><br><span class="line">321</span><br><span class="line">[root@rocky9-node2 ~][0]# rev /etc/a.log </span><br><span class="line">321</span><br><span class="line">cba</span><br></pre></td></tr></table></figure><h3 id="12-2-tr-å­—ç¬¦æ›¿æ¢"><a href="#12-2-tr-å­—ç¬¦æ›¿æ¢" class="headerlink" title="12.2 tr å­—ç¬¦æ›¿æ¢"></a>12.2 tr å­—ç¬¦æ›¿æ¢</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">-cå–ç¬¬ä¸€å­—ç¬¦é›†çš„è¡¥é›†</span><br><span class="line">-dåˆ é™¤ç¬¦åˆç¬¬ä¸€å­—ç¬¦é›†çš„å­—ç¬¦</span><br><span class="line">-sæŠŠè¿ç»­é‡å¤çš„å­—ç¬¦ä»¥å•ç‹¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤º,å³å»é‡</span><br><span class="line">-tå°†ç¬¬ä¸€å­—ç¬¦é›†å¯¹åº”å­—ç¬¦è½¬åŒ–ä¸ºç¬¬äºŒå­—ç¬¦é›†å¯¹åº”çš„å­—ç¬¦</span><br><span class="line"></span><br><span class="line">[:digit:]: ä»»æ„æ•°å­—ï¼Œç›¸å½“äº0-9</span><br><span class="line">[:1ower:]: ä»»æ„å°å†™å­—æ¯,è¡¨ç¤º a-z</span><br><span class="line">[:upper:]: ä»»æ„å¤§å†™å­—æ¯,è¡¨ç¤º A-Z</span><br><span class="line">[:alpha:]: ä»»æ„å¤§å°å†™å­—æ¯</span><br><span class="line">[:alnum:]: ä»»æ„æ•°å­—æˆ–å­—æ¯</span><br><span class="line">[:blank:]: æ°´å¹³ç©ºç™½å­—ç¬¦</span><br><span class="line">[:space:]: æ°´å¹³æˆ–å‚ç›´ç©ºç™½å­—ç¬¦</span><br><span class="line">[:punct:]: æ ‡ç‚¹ç¬¦å·</span><br><span class="line">[:print:]: å¯æ‰“å°å­—ç¬¦</span><br><span class="line">[:cntr1:]: æ§åˆ¶(éæ‰“å°) å­—ç¬¦</span><br><span class="line">[:graph:]: å›¾å½¢å­—ç¬¦</span><br><span class="line">[:xdigit:]:åå…­è¿›åˆ¶å­—ç¬¦</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å°å†™å­—æ¯æ›¿æ¢æˆå¤§å†™å­—æ¯</span></span><br><span class="line">echo abc | tr &#x27;[:lower:]&#x27; &#x27;[:upper:]&#x27;</span><br><span class="line">è¾“å‡º ABC</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–è¡¥é›†,å³å–å,åˆ é™¤é™¤äº†123çš„</span></span><br><span class="line">echo abc123 | tr -cd &#x27;123&#x27;</span><br><span class="line">è¾“å‡º 123</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç¬¬ä¸€å­—ç¬¦é›†åŒ¹é…åˆ°çš„å­—ç¬¦</span></span><br><span class="line">echo abc | tr -d &#x27;ac&#x27;</span><br><span class="line">è¾“å‡º b</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†ç›¸é‚»çš„è¿ç»­é‡å¤å­—ç¬¦å»é‡</span></span><br><span class="line">echo aaa | tr -s &#x27;a&#x27;</span><br><span class="line">è¾“å‡º a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–éšæœºå¯†ç </span></span><br><span class="line">tr -dc a-zA-Z0-9 &lt; /dev/urandom | echo $(head -c 50)</span><br></pre></td></tr></table></figure><h3 id="12-3-æŸ¥çœ‹éæ–‡æœ¬æ–‡ä»¶å†…å®¹"><a href="#12-3-æŸ¥çœ‹éæ–‡æœ¬æ–‡ä»¶å†…å®¹" class="headerlink" title="12.3 æŸ¥çœ‹éæ–‡æœ¬æ–‡ä»¶å†…å®¹"></a>12.3 æŸ¥çœ‹éæ–‡æœ¬æ–‡ä»¶å†…å®¹</h3><h4 id="12-3-1-hexdump"><a href="#12-3-1-hexdump" class="headerlink" title="12.3.1 hexdump"></a>12.3.1 hexdump</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexdump-C -n 512 /dev/sda</span><br></pre></td></tr></table></figure><h4 id="12-3-2-od"><a href="#12-3-2-od" class="headerlink" title="12.3.2 od"></a>12.3.2 od</h4><h4 id="12-3-3-xxd"><a href="#12-3-3-xxd" class="headerlink" title="12.3.3 xxd"></a>12.3.3 xxd</h4><h3 id="12-4-more-åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹"><a href="#12-4-more-åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹" class="headerlink" title="12.4 more åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹"></a>12.4 more åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more /var/log/secure</span><br></pre></td></tr></table></figure><h3 id="12-5-less-åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹"><a href="#12-5-less-åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹" class="headerlink" title="12.5 less åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹"></a>12.5 less åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">less /var/log/secure</span><br><span class="line"></span><br><span class="line">ç©ºæ ¼é”® æ»šåŠ¨ä¸€é¡µ</span><br><span class="line">å›è½¦é”® æ»šåŠ¨ä¸€è¡Œ</span><br><span class="line">b   å‘ä¸Šç¿»ä¸€é¡µ</span><br><span class="line">d   å‘åç¿»åŠé¡µ</span><br><span class="line">/  å‘ä¸‹æœç´¢&quot;å­—ç¬¦ä¸²&quot;çš„åŠŸèƒ½</span><br><span class="line">?         å‘ä¸Šæœç´¢&quot;å­—ç¬¦ä¸²&quot;çš„åŠŸèƒ½</span><br><span class="line">n         é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰</span><br><span class="line">N         åå‘é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰</span><br></pre></td></tr></table></figure><h3 id="12-6-headæ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨è¡Œ"><a href="#12-6-headæ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨è¡Œ" class="headerlink" title="12.6 headæ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨è¡Œ"></a>12.6 headæ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">head [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-c?  æŒ‡å®šè¾“å‡ºå‰?ä¸ªå­—èŠ‚</span><br><span class="line">-n?  æŒ‡å®šè¾“å‡ºå‰?è¡Œ</span><br></pre></td></tr></table></figure><h3 id="12-7-tail-æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨è¡Œ"><a href="#12-7-tail-æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨è¡Œ" class="headerlink" title="12.7 tail æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨è¡Œ"></a>12.7 tail æ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨è¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tail [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-fè¿½è¸ªæ–‡ä»¶æœ€æ–°å†…å®¹,è¿½è¸ªçš„æ˜¯æ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">-c?æŒ‡å®šè¾“å‡ºå°¾?ä¸ªå­—èŠ‚</span><br><span class="line">-næŒ‡å®šè¾“å‡ºçš„è¡Œæ•°</span><br><span class="line">-Fè¿½è¸ªæ–‡ä»¶æœ€æ–°å†…å®¹,è¿½è¸ªçš„æ˜¯æ–‡ä»¶å</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿½è¸ªæœ€åè¾“å‡ºçš„100è¡Œ</span></span><br><span class="line">tail -n 100 -f /var/log/secure</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æœ€å10è¡Œ</span></span><br><span class="line">tail /var/log/secure</span><br></pre></td></tr></table></figure><h3 id="12-8-cut-æŒ‰åˆ—æˆªå–æ–‡æœ¬"><a href="#12-8-cut-æŒ‰åˆ—æˆªå–æ–‡æœ¬" class="headerlink" title="12.8 cut æŒ‰åˆ—æˆªå–æ–‡æœ¬"></a>12.8 cut æŒ‰åˆ—æˆªå–æ–‡æœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">cut [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-dæŒ‡æ˜åˆ†éš”ç¬¦,é»˜è®¤tab</span><br><span class="line">-f ?å–ç¬¬?ä¸ªå­—æ®µ</span><br><span class="line">?,? ç¦»æ•£çš„å¤šä¸ªå­—æ®µ,ä¾‹å¦‚1,3,6</span><br><span class="line">?-?è¿ç»­çš„å¤šä¸ªå­—æ®µ,ä¾‹å¦‚1-6</span><br><span class="line">1-3,7 æ··åˆä½¿ç”¨</span><br><span class="line">-cæŒ‰å­—ç¬¦åˆ‡å‰²</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">[root@rocky9 ~][0]# cut -d: -f1-3 /etc/passwd</span><br><span class="line">root:x:0</span><br><span class="line">bin:x:1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">[root@rocky9 ~][0]# df -h | tr -s &#x27; &#x27; | cut -d &#x27; &#x27; -f5</span><br><span class="line"><span class="meta prompt_">Use%</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">0%</span></span><br><span class="line"><span class="meta prompt_">0%</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">1%</span></span><br><span class="line"><span class="meta prompt_">8%</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">7%</span></span><br><span class="line"><span class="meta prompt_">0%</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">0%</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">[root@rocky9 ~][127]# ifconfig eth0 | head -n 2 | tail -n 1 | tr -s &#x27; &#x27; | cut -d &#x27; &#x27; -f3</span><br><span class="line">172.31.206.2</span><br></pre></td></tr></table></figure><h3 id="12-9-paste-åˆå¹¶å¤šä¸ªæ–‡ä»¶åŒè¡Œ"><a href="#12-9-paste-åˆå¹¶å¤šä¸ªæ–‡ä»¶åŒè¡Œ" class="headerlink" title="12.9 paste åˆå¹¶å¤šä¸ªæ–‡ä»¶åŒè¡Œ"></a>12.9 paste åˆå¹¶å¤šä¸ªæ–‡ä»¶åŒè¡Œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">paste [é€‰é¡¹] æ–‡ä»¶1 æ–‡ä»¶2</span><br><span class="line"></span><br><span class="line">-dæŒ‡å®šåˆ†éš”ç¬¦</span><br><span class="line">-sç›¸å½“äºå°†ä¸€ä¸ªæ–‡ä»¶è¿½åŠ åˆ°å¦ä¸€ä¸ªæ–‡ä»¶åé¢</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky9 ~][0]# echo 123 &gt; 1.txt;echo 456 &gt; 2.txt;paste 1.txt 2.txt</span><br><span class="line">123456</span><br><span class="line"></span><br><span class="line">[root@rocky9 ~][0]# paste -s 1.txt 2.txt</span><br><span class="line">123</span><br><span class="line">456</span><br></pre></td></tr></table></figure><h3 id="12-10-wc-æ–‡æœ¬æ•°æ®ç»Ÿè®¡"><a href="#12-10-wc-æ–‡æœ¬æ•°æ®ç»Ÿè®¡" class="headerlink" title="12.10 wc æ–‡æœ¬æ•°æ®ç»Ÿè®¡"></a>12.10 wc æ–‡æœ¬æ•°æ®ç»Ÿè®¡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">wl [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-låªç»Ÿè®¡è¡Œæ•°</span><br><span class="line">-wåªç»Ÿè®¡å•è¯æ€»æ•°</span><br><span class="line">-cåªç»Ÿè®¡å­—èŠ‚æ€»æ•°</span><br><span class="line">-måªç»Ÿè®¡å­—ç¬¦æ€»æ•°</span><br><span class="line">-Læ˜¾ç¤ºæ–‡ä»¶ä¸­æœ€é•¿è¡Œçš„é•¿åº¦</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">[root@rocky9 ~][0]# wc /etc/passwd</span><br><span class="line">30    68 1609  /etc/passwd</span><br><span class="line">è¡Œæ•°  å•è¯æ•°  å­—èŠ‚æ•°</span><br></pre></td></tr></table></figure><h3 id="12-11-sort-æ’åº"><a href="#12-11-sort-æ’åº" class="headerlink" title="12.11 sort æ’åº"></a>12.11 sort æ’åº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sort [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-rnåå‘æ•°å­—æ’åºã€‚ï¼ˆä»å¤§åˆ°å°ï¼‰</span><br><span class="line">-næŒ‰ç…§æ•°å­—é¡ºåºæ’åºã€‚ï¼ˆä»å°åˆ°å¤§ï¼‰</span><br><span class="line">-uå»é‡ï¼Œä»…ä¿ç•™å”¯ä¸€è¡Œã€‚</span><br><span class="line">-tæŒ‡å®šå­—æ®µåˆ†éš”ç¬¦ã€‚</span><br><span class="line">-kæŒ‡å®šè¦æ’åºçš„å­—æ®µã€‚</span><br><span class="line">-Réšæœºæ’åº</span><br><span class="line">-få¿½ç•¥å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦å¤§å°å†™</span><br></pre></td></tr></table></figure><h3 id="12-12-uniq-å»é‡"><a href="#12-12-uniq-å»é‡" class="headerlink" title="12.12 uniq å»é‡"></a>12.12 uniq å»é‡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">uniq [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-cæ˜¾ç¤ºæ¯è¡Œå‡ºç°çš„æ¬¡æ•°ã€‚</span><br><span class="line">-dä»…æ˜¾ç¤ºé‡å¤è¡Œã€‚</span><br><span class="line">-uä»…æ˜¾ç¤ºä¸é‡å¤çš„è¡Œã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ–‡ä»¶å…±åŒçš„è¡Œï¼ˆæ–‡ä»¶è‡ªèº«ä¸èƒ½æœ‰é‡å¤çš„è¡Œï¼‰</span></span><br><span class="line">cat 1.txt 2.txt | sort | uniq -d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ–‡ä»¶ä¸åŒçš„è¡Œ</span></span><br><span class="line">cat 1.txt 2.txt | sort | uniq -u</span><br></pre></td></tr></table></figure><h3 id="12-13-diff-æ–‡ä»¶æ¯”è¾ƒ"><a href="#12-13-diff-æ–‡ä»¶æ¯”è¾ƒ" class="headerlink" title="12.13 diff æ–‡ä»¶æ¯”è¾ƒ"></a>12.13 diff æ–‡ä»¶æ¯”è¾ƒ</h3><p>diffå‘½ä»¤å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„åŒºåˆ«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">### 12.14 patch æ–‡ä»¶æ¯”è¾ƒ</span><br><span class="line"></span><br><span class="line">```shell</span><br></pre></td></tr></table></figure><h3 id="12-15-cmp-æ¯”è¾ƒä¸¤ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸åŒ"><a href="#12-15-cmp-æ¯”è¾ƒä¸¤ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸åŒ" class="headerlink" title="12.15 cmp æ¯”è¾ƒä¸¤ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸åŒ"></a>12.15 cmp æ¯”è¾ƒä¸¤ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸åŒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky9 ~][1]# cmp /bin/dir /bin/ls</span><br><span class="line">/bin/dir /bin/ls differ: byte 25, line 1</span><br></pre></td></tr></table></figure><h1 id="13-æ–‡æœ¬å¤„ç†å·¥å…·å’Œæ­£åˆ™è¡¨è¾¾å¼"><a href="#13-æ–‡æœ¬å¤„ç†å·¥å…·å’Œæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="13. æ–‡æœ¬å¤„ç†å·¥å…·å’Œæ­£åˆ™è¡¨è¾¾å¼"></a>13. æ–‡æœ¬å¤„ç†å·¥å…·å’Œæ­£åˆ™è¡¨è¾¾å¼</h1><h3 id="13-1-åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼"><a href="#13-1-åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="13.1 åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼"></a>13.1 åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼</h3><h4 id="13-1-1-å­—ç¬¦åŒ¹é…"><a href="#13-1-1-å­—ç¬¦åŒ¹é…" class="headerlink" title="13.1.1 å­—ç¬¦åŒ¹é…"></a>13.1.1 å­—ç¬¦åŒ¹é…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ±‰å­—</span><br><span class="line">[ ]åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š[0-9a-b@.]</span><br><span class="line">[^]åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š[^a]</span><br><span class="line">[:alnum:]è¡¨ç¤ºå­—æ¯å’Œæ•°å­—</span><br><span class="line">[:alpha:]ä»£è¡¨ä»»ä½•è‹±æ–‡å¤§å°å†™å­—ç¬¦ï¼Œç›¸å½“äº A-Zï¼Œ a-z</span><br><span class="line">[:lower:]å°å†™å­—æ¯ï¼Œç¤ºä¾‹ï¼š[[:lower:]]ï¼Œç›¸å½“äº[a-z]</span><br><span class="line">[:upper:]å¤§å†™å­—æ¯</span><br><span class="line">[:blank:]ç©ºç™½å­—ç¬¦ï¼ˆç©ºç™½å’Œåˆ¶è¡¨ç¬¦ï¼‰</span><br><span class="line">[:space:]æ°´å¹³å’Œå‚ç›´çš„ç©ºç™½å­—ç¬¦</span><br><span class="line">[:cntrl:]ä¸å¯æ‰“å°çš„æ§åˆ¶å­—ç¬¦ï¼ˆé€€æ ¼ã€åˆ é™¤ã€è­¦é“ƒ...ï¼‰</span><br><span class="line">[:digit:]åè¿›åˆ¶æ•°å­—</span><br><span class="line">[:xdigit:]åå…­è¿›åˆ¶æ•°å­—</span><br><span class="line">[:graph:]å¯æ‰“å°çš„éç©ºç™½å­—ç¬¦</span><br><span class="line">[:print:]å¯æ‰“å°çš„å­—ç¬¦</span><br><span class="line">[:punct:]æ ‡ç‚¹ç¬¦å·</span><br></pre></td></tr></table></figure><h4 id="13-1-2-åŒ¹é…æ¬¡æ•°"><a href="#13-1-2-åŒ¹é…æ¬¡æ•°" class="headerlink" title="13.1.2 åŒ¹é…æ¬¡æ•°"></a>13.1.2 åŒ¹é…æ¬¡æ•°</h4><p>ç”¨åœ¨è¦æŒ‡å®šæ¬¡æ•°çš„å­—ç¬¦åé¢ï¼Œç”¨äºæŒ‡å®šå‰é¢çš„å­—ç¬¦è¦å‡ºç°çš„æ¬¡æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*åŒ¹é…å‰é¢çš„å­—ç¬¦ä»»æ„æ¬¡ï¼ŒåŒ…æ‹¬0æ¬¡ï¼Œè´ªå©ªæ¨¡å¼</span><br><span class="line">.*åŒ¹é…ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦</span><br><span class="line">\?åŒ¹é…å…¶å‰é¢çš„å­—ç¬¦0æˆ–1æ¬¡ï¼Œå³å¯æœ‰å¯æ— </span><br><span class="line">\+åŒ¹é…å…¶å‰é¢çš„å­—ç¬¦è‡³å°‘1æ¬¡ï¼Œå³ â‰¥1æ¬¡</span><br><span class="line">\&#123;n\&#125;åŒ¹é…å‰é¢çš„å­—ç¬¦næ¬¡</span><br><span class="line">\&#123;m,n\&#125;åŒ¹é…å‰é¢å­—ç¬¦è‡³å°‘mæ¬¡ï¼Œæœ€å¤šnæ¬¡</span><br><span class="line">\&#123;,n\&#125;åŒ¹é…å‰é¢å­—ç¬¦æœ€å¤šnæ¬¡</span><br><span class="line">\&#123;n,\&#125;åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘næ¬¡</span><br></pre></td></tr></table></figure><h4 id="13-1-3-ä½ç½®é”šå®š"><a href="#13-1-3-ä½ç½®é”šå®š" class="headerlink" title="13.1.3 ä½ç½®é”šå®š"></a>13.1.3 ä½ç½®é”šå®š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">^è¡Œé¦–é”šå®šï¼Œç”¨äºæ¨¡å¼çš„æœ€å·¦ä¾§</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">è¡Œå°¾é”šå®šï¼Œç”¨äºæ¨¡å¼çš„æœ€å³ä¾§</span></span><br><span class="line">^PATTERN$ç”¨äºæ¨¡å¼åŒ¹é…æ•´è¡Œ</span><br><span class="line">^$ç©ºè¡Œ</span><br><span class="line">^[[:space:]]*$ç©ºç™½è¡Œ</span><br><span class="line">\&lt; æˆ–è€… \b   è¯é¦–é”šå®šï¼Œç”¨äºå•è¯æ¨¡å¼çš„å·¦ä¾§</span><br><span class="line">\&gt; æˆ–è€… \b   è¯å°¾é”šå®šï¼Œç”¨äºå•è¯æ¨¡å¼çš„å³ä¾§</span><br><span class="line">\&lt;PATTERN\&gt;åŒ¹é…æ•´ä¸ªå•è¯</span><br></pre></td></tr></table></figure><h4 id="13-1-4-åˆ†ç»„"><a href="#13-1-4-åˆ†ç»„" class="headerlink" title="13.1.4 åˆ†ç»„"></a>13.1.4 åˆ†ç»„</h4><p>ä½¿ç”¨(    )å°†å¤šä¸ªå­—ç¬¦æ†ç»‘åœ¨ä¸€èµ·å½“ä½œä¸€ä¸ªæ•´ä½“æ¥å¤„ç†</p><p>åˆ†ç»„æ‹¬å·ä¸­çš„æ¨¡å¼åŒ¹é…åˆ°çš„å†…å®¹ä¼šè¢«æ­£åˆ™è¡¨è¾¾å¼å¼•æ“è®°å½•äºå†…éƒ¨å˜é‡ä¸­ï¼Œè¿™äº›å˜é‡çš„å‘½åæ–¹å¼ä¸ºï¼š\1ï¼Œ\2ï¼Œ\3 â€¦.</p><p>\1 è¡¨ç¤ºä»å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå·¦æ‹¬å·ä»¥åŠä¸ä¹‹åŒ¹é…çš„å³æ‹¬å·ä¹‹é—´æ¨¡å¼æ‰€åŒ¹é…åˆ°çš„æ‰€æœ‰å­—ç¬¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">### 13.1.5 æˆ–è€…</span></span></span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">a\|baæˆ–è€…b</span><br><span class="line">c\|catcæˆ–è€…cat</span><br><span class="line">\(C\|c\)atCatæˆ–è€…cat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ’é™¤ç©ºè¡Œå’Œ#å·å¼€å¤´çš„è¡Œ</span></span><br><span class="line">grep -Ev &#x27;^#|^$&#x27; /etc/fstab</span><br><span class="line">grep &#x27;^[^#]&#x27; /etc/fstab</span><br></pre></td></tr></table></figure><h3 id="13-2-æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"><a href="#13-2-æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="13.2 æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼"></a>13.2 æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</h3><h4 id="13-2-1-å­—ç¬¦åŒ¹é…"><a href="#13-2-1-å­—ç¬¦åŒ¹é…" class="headerlink" title="13.2.1 å­—ç¬¦åŒ¹é…"></a>13.2.1 å­—ç¬¦åŒ¹é…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ±‰å­—</span><br><span class="line">[ ]åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š[0-9a-b@.]</span><br><span class="line">[^]åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š[^a]</span><br><span class="line">[:alnum:]è¡¨ç¤ºå­—æ¯å’Œæ•°å­—</span><br><span class="line">[:alpha:]ä»£è¡¨ä»»ä½•è‹±æ–‡å¤§å°å†™å­—ç¬¦ï¼Œç›¸å½“äº A-Zï¼Œ a-z</span><br><span class="line">[:lower:]å°å†™å­—æ¯ï¼Œç¤ºä¾‹ï¼š[[:lower:]]ï¼Œç›¸å½“äº[a-z]</span><br><span class="line">[:upper:]å¤§å†™å­—æ¯</span><br><span class="line">[:blank:]ç©ºç™½å­—ç¬¦ï¼ˆç©ºç™½å’Œåˆ¶è¡¨ç¬¦ï¼‰</span><br><span class="line">[:space:]æ°´å¹³å’Œå‚ç›´çš„ç©ºç™½å­—ç¬¦</span><br><span class="line">[:cntrl:]ä¸å¯æ‰“å°çš„æ§åˆ¶å­—ç¬¦ï¼ˆé€€æ ¼ã€åˆ é™¤ã€è­¦é“ƒ...ï¼‰</span><br><span class="line">[:digit:]åè¿›åˆ¶æ•°å­—</span><br><span class="line">[:xdigit:]åå…­è¿›åˆ¶æ•°å­—</span><br><span class="line">[:graph:]å¯æ‰“å°çš„éç©ºç™½å­—ç¬¦</span><br><span class="line">[:print:]å¯æ‰“å°çš„å­—ç¬¦</span><br><span class="line">[:punct:]æ ‡ç‚¹ç¬¦å·</span><br></pre></td></tr></table></figure><h4 id="13-2-2-åŒ¹é…æ¬¡æ•°"><a href="#13-2-2-åŒ¹é…æ¬¡æ•°" class="headerlink" title="13.2.2 åŒ¹é…æ¬¡æ•°"></a>13.2.2 åŒ¹é…æ¬¡æ•°</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*åŒ¹é…å‰é¢å­—ç¬¦ä»»æ„æ¬¡</span><br><span class="line">?0æˆ–1æ¬¡</span><br><span class="line">+1æ¬¡æˆ–å¤šæ¬¡</span><br><span class="line">&#123;n&#125;åŒ¹é…næ¬¡</span><br><span class="line">&#123;m,n&#125;è‡³å°‘mï¼Œè‡³å¤šnæ¬¡</span><br></pre></td></tr></table></figure><h4 id="13-2-3-ä½ç½®é”šå®š"><a href="#13-2-3-ä½ç½®é”šå®š" class="headerlink" title="13.2.3 ä½ç½®é”šå®š"></a>13.2.3 ä½ç½®é”šå®š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">^ è¡Œé¦–</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"> è¡Œå°¾</span></span><br><span class="line">\&lt;,\b è¯­é¦–</span><br><span class="line">\&gt;,\b è¯­å°¾</span><br></pre></td></tr></table></figure><h4 id="13-2-4-åˆ†ç»„"><a href="#13-2-4-åˆ†ç»„" class="headerlink" title="13.2.4 åˆ†ç»„"></a>13.2.4 åˆ†ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">( )åˆ†ç»„</span><br><span class="line">åå‘å¼•ç”¨ï¼š\1ï¼Œ\2ï¼Œ...</span><br></pre></td></tr></table></figure><h4 id="13-2-5-æˆ–è€…"><a href="#13-2-5-æˆ–è€…" class="headerlink" title="13.2.5 æˆ–è€…"></a>13.2.5 æˆ–è€…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> |   æˆ–è€…</span><br><span class="line">a|baæˆ–b</span><br><span class="line">C|catCæˆ–cat</span><br><span class="line">(C|c)catCatæˆ–cat</span><br></pre></td></tr></table></figure><h3 id="13-2-æ£€éªŒæ•°å­—çš„è¡¨è¾¾å¼"><a href="#13-2-æ£€éªŒæ•°å­—çš„è¡¨è¾¾å¼" class="headerlink" title="13.2 æ£€éªŒæ•°å­—çš„è¡¨è¾¾å¼"></a>13.2 æ£€éªŒæ•°å­—çš„è¡¨è¾¾å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1. æ•°å­—ï¼š^[0-9]*$</span><br><span class="line">2. nä½çš„æ•°å­—ï¼š^\d&#123;n&#125;$</span><br><span class="line">3. è‡³å°‘nä½çš„æ•°å­—ï¼š^\d&#123;n,&#125;$</span><br><span class="line">4. m-nä½çš„æ•°å­—ï¼š^\d&#123;m,n&#125;$</span><br><span class="line">5. é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š^(0|[1-9][0-9]*)$</span><br><span class="line">6. éé›¶å¼€å¤´çš„æœ€å¤šå¸¦ä¸¤ä½å°æ•°çš„æ•°å­—ï¼š^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">7. å¸¦1-2ä½å°æ•°çš„æ­£æ•°æˆ–è´Ÿæ•°ï¼š^(\-)?\d+(\.\d&#123;1,2&#125;)?$</span><br><span class="line">8. æ­£æ•°ã€è´Ÿæ•°ã€å’Œå°æ•°ï¼š^(\-|\+)?\d+(\.\d+)?$</span><br><span class="line">9. æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]&#123;2&#125;)?$</span><br><span class="line">10. æœ‰1~3ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]&#123;1,3&#125;)?$</span><br><span class="line">11. éé›¶çš„æ­£æ•´æ•°ï¼š^[1-9]\d*$ æˆ– ^([1-9][0-9]*)&#123;1,3&#125;$ æˆ– ^\+?[1-9][0-9]*$</span><br><span class="line">12. éé›¶çš„è´Ÿæ•´æ•°ï¼š^\-[1-9][]0-9&quot;*$ æˆ– ^-[1-9]\d*$</span><br><span class="line">13. éè´Ÿæ•´æ•°ï¼š^\d+$ æˆ– ^[1-9]\d*|0$</span><br><span class="line">14. éæ­£æ•´æ•°ï¼š^-[1-9]\d*|0$ æˆ– ^((-\d+)|(0+))$</span><br><span class="line">15. éè´Ÿæµ®ç‚¹æ•°ï¼š^\d+(\.\d+)?$ æˆ– ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</span><br><span class="line">16. éæ­£æµ®ç‚¹æ•°ï¼š^((-\d+(\.\d+)?)|(0+(\.0+)?))$ æˆ– ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</span><br><span class="line">17. æ­£æµ®ç‚¹æ•°ï¼š^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ æˆ– ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</span><br><span class="line">18. è´Ÿæµ®ç‚¹æ•°ï¼š^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ æˆ– ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</span><br><span class="line">19. æµ®ç‚¹æ•°ï¼š^(-?\d+)(\.\d+)?$ æˆ– ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</span><br></pre></td></tr></table></figure><h3 id="13-3-æ£€éªŒå­—ç¬¦çš„è¡¨è¾¾å¼"><a href="#13-3-æ£€éªŒå­—ç¬¦çš„è¡¨è¾¾å¼" class="headerlink" title="13.3 æ£€éªŒå­—ç¬¦çš„è¡¨è¾¾å¼"></a>13.3 æ£€éªŒå­—ç¬¦çš„è¡¨è¾¾å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. æ±‰å­—ï¼š^[\u4e00-\u9fa5]&#123;0,&#125;$</span><br><span class="line">2. è‹±æ–‡å’Œæ•°å­—ï¼š^[A-Za-z0-9]+$ æˆ– ^[A-Za-z0-9]&#123;4,40&#125;$</span><br><span class="line">3. é•¿åº¦ä¸º3-20çš„æ‰€æœ‰å­—ç¬¦ï¼š^.&#123;3,20&#125;$</span><br><span class="line">4. ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z]+$</span><br><span class="line">5. ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Z]+$</span><br><span class="line">6. ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[a-z]+$</span><br><span class="line">7. ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z0-9]+$</span><br><span class="line">8. ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^\w+$ æˆ– ^\w&#123;3,20&#125;$</span><br><span class="line">9. ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŒ…æ‹¬ä¸‹åˆ’çº¿ï¼š^[\u4E00-\u9FA5A-Za-z0-9_]+$</span><br><span class="line">10. ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ä½†ä¸åŒ…æ‹¬ä¸‹åˆ’çº¿ç­‰ç¬¦å·ï¼š^[\u4E00-\u9FA5A-Za-z0-9]+$ æˆ– ^[\u4E00-\u9FA5A-Za-z0-9]&#123;2,20&#125;$</span><br><span class="line">11. å¯ä»¥è¾“å…¥å«æœ‰^%&amp;&#x27;,;=?$\&quot;ç­‰å­—ç¬¦ï¼š[^%&amp;&#x27;,;=?$\x22]+ 12 ç¦æ­¢è¾“å…¥å«æœ‰~çš„å­—ç¬¦ï¼š[^~\x22]+</span><br></pre></td></tr></table></figure><h3 id="13-4-ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼"><a href="#13-4-ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼" class="headerlink" title="13.4 ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼"></a>13.4 ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">1. Emailåœ°å€ï¼š^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</span><br><span class="line">2. åŸŸåï¼š[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?</span><br><span class="line">3. InternetURLï¼š[a-zA-z]+://[^\s]* æˆ– ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</span><br><span class="line">4. æ‰‹æœºå·ç ï¼š^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</span><br><span class="line">5. ç”µè¯å·ç (&quot;XXX-XXXXXXX&quot;ã€&quot;XXXX-XXXXXXXX&quot;ã€&quot;XXX-XXXXXXX&quot;ã€&quot;XXX-XXXXXXXX&quot;ã€&quot;XXXXXXX&quot;å’Œ&quot;XXXXXXXX)ï¼š^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$</span><br><span class="line">6. å›½å†…ç”µè¯å·ç (0511-4405222ã€021-87888822)ï¼š\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;</span><br><span class="line">7. èº«ä»½è¯å·(15ä½ã€18ä½æ•°å­—)ï¼š^\d&#123;15&#125;|\d&#123;18&#125;$</span><br><span class="line">8. çŸ­èº«ä»½è¯å·ç (æ•°å­—ã€å­—æ¯xç»“å°¾)ï¼š^([0-9])&#123;7,18&#125;(x|X)?$ æˆ– ^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</span><br><span class="line">9. å¸å·æ˜¯å¦åˆæ³•(å­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿)ï¼š^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</span><br><span class="line">10. å¯†ç (ä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿)ï¼š^[a-zA-Z]\w&#123;5,17&#125;$</span><br><span class="line">11. å¼ºå¯†ç (å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨8-10ä¹‹é—´)ï¼š^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$</span><br><span class="line">12. æ—¥æœŸæ ¼å¼ï¼š^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</span><br><span class="line">13. ä¸€å¹´çš„12ä¸ªæœˆ(01ï½09å’Œ1ï½12)ï¼š^(0?[1-9]|1[0-2])$</span><br><span class="line">14. ä¸€ä¸ªæœˆçš„31å¤©(01ï½09å’Œ1ï½31)ï¼š^((0?[1-9])|((1|2)[0-9])|30|31)$</span><br><span class="line">15. é’±çš„è¾“å…¥æ ¼å¼ï¼š</span><br><span class="line">16. 1.æœ‰å››ç§é’±çš„è¡¨ç¤ºå½¢å¼æˆ‘ä»¬å¯ä»¥æ¥å—:&quot;10000.00&quot; å’Œ &quot;10,000.00&quot;, å’Œæ²¡æœ‰ &quot;åˆ†&quot; çš„ &quot;10000&quot; å’Œ &quot;10,000&quot;ï¼š^[1-9][0-9]*$</span><br><span class="line">17. 2.è¿™è¡¨ç¤ºä»»æ„ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—,ä½†æ˜¯,è¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªå­—ç¬¦&quot;0&quot;ä¸é€šè¿‡,æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸‹é¢çš„å½¢å¼ï¼š^(0|[1-9][0-9]*)$</span><br><span class="line">18. 3.ä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—.æˆ‘ä»¬è¿˜å¯ä»¥å…è®¸å¼€å¤´æœ‰ä¸€ä¸ªè´Ÿå·ï¼š^(0|-?[1-9][0-9]*)$</span><br><span class="line">19. 4.è¿™è¡¨ç¤ºä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªå¯èƒ½ä¸ºè´Ÿçš„å¼€å¤´ä¸ä¸º0çš„æ•°å­—.è®©ç”¨æˆ·ä»¥0å¼€å¤´å¥½äº†.æŠŠè´Ÿå·çš„ä¹Ÿå»æ‰,å› ä¸ºé’±æ€»ä¸èƒ½æ˜¯è´Ÿçš„å§.ä¸‹é¢æˆ‘ä»¬è¦åŠ çš„æ˜¯è¯´æ˜å¯èƒ½çš„å°æ•°éƒ¨åˆ†ï¼š^[0-9]+(.[0-9]+)?$</span><br><span class="line">20. 5.å¿…é¡»è¯´æ˜çš„æ˜¯,å°æ•°ç‚¹åé¢è‡³å°‘åº”è¯¥æœ‰1ä½æ•°,æ‰€ä»¥&quot;10.&quot;æ˜¯ä¸é€šè¿‡çš„,ä½†æ˜¯ &quot;10&quot; å’Œ &quot;10.2&quot; æ˜¯é€šè¿‡çš„ï¼š^[0-9]+(.[0-9]&#123;2&#125;)?$</span><br><span class="line">21. 6.è¿™æ ·æˆ‘ä»¬è§„å®šå°æ•°ç‚¹åé¢å¿…é¡»æœ‰ä¸¤ä½,å¦‚æœä½ è®¤ä¸ºå¤ªè‹›åˆ»äº†,å¯ä»¥è¿™æ ·ï¼š^[0-9]+(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">22. 7.è¿™æ ·å°±å…è®¸ç”¨æˆ·åªå†™ä¸€ä½å°æ•°.ä¸‹é¢æˆ‘ä»¬è¯¥è€ƒè™‘æ•°å­—ä¸­çš„é€—å·äº†,æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">23 8.1åˆ°3ä¸ªæ•°å­—,åé¢è·Ÿç€ä»»æ„ä¸ª é€—å·+3ä¸ªæ•°å­—,é€—å·æˆä¸ºå¯é€‰,è€Œä¸æ˜¯å¿…é¡»ï¼š^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">24. å¤‡æ³¨ï¼šè¿™å°±æ˜¯æœ€ç»ˆç»“æœäº†,åˆ«å¿˜äº†&quot;+&quot;å¯ä»¥ç”¨&quot;*&quot;æ›¿ä»£å¦‚æœä½ è§‰å¾—ç©ºå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ¥å—çš„è¯(å¥‡æ€ª,ä¸ºä»€ä¹ˆ?)æœ€å,åˆ«å¿˜äº†åœ¨ç”¨å‡½æ•°æ—¶å»æ‰å»æ‰é‚£ä¸ªåæ–œæ ,ä¸€èˆ¬çš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ</span><br><span class="line">25. xmlæ–‡ä»¶ï¼š^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</span><br><span class="line">26. ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š[\u4e00-\u9fa5]</span><br><span class="line">27. åŒå­—èŠ‚å­—ç¬¦ï¼š[^\x00-\xff] (åŒ…æ‹¬æ±‰å­—åœ¨å†…ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦(ä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1))</span><br><span class="line">28. ç©ºæ ¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\s*(å¯ä»¥ç”¨æ¥åˆ é™¤ç©ºæ ¼)</span><br><span class="line">29. HTMLæ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\1&gt;|&lt;.*? /&gt; (ç½‘ä¸Šæµä¼ çš„ç‰ˆæœ¬å¤ªç³Ÿç³•ï¼Œä¸Šé¢è¿™ä¸ªä¹Ÿä»…ä»…èƒ½éƒ¨åˆ†ï¼Œå¯¹äºå¤æ‚çš„åµŒå¥—æ ‡è®°ä¾æ—§æ— èƒ½ä¸ºåŠ›)</span><br><span class="line"></span><br><span class="line">30. é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š^\s*|\s*$æˆ–(^\s*)|(\s*$) (å¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦(åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰)ï¼Œéå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼)</span><br><span class="line"></span><br><span class="line">31. è…¾è®¯QQå·ï¼š[1-9][0-9]&#123;4,&#125; (è…¾è®¯QQå·ä»10000å¼€å§‹)</span><br><span class="line">32. ä¸­å›½é‚®æ”¿ç¼–ç ï¼š[1-9]\d&#123;5&#125;(?!\d) (ä¸­å›½é‚®æ”¿ç¼–ç ä¸º6ä½æ•°å­—)</span><br><span class="line">33. IPåœ°å€ï¼š\d+\.\d+\.\d+\.\d+ (æå–IPåœ°å€æ—¶æœ‰ç”¨)</span><br><span class="line">34. IPåœ°å€ï¼š((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))</span><br></pre></td></tr></table></figure><h3 id="13-2-grep"><a href="#13-2-grep" class="headerlink" title="13.2 grep"></a>13.2 grep</h3><p>å…¨å±€çš„æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æ‰“å°å‡ºè¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">grep [é€‰é¡¹] PATTERN [æ–‡ä»¶]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¸¸è§é€‰é¡¹</span></span><br><span class="line">--color=autoå¯¹åŒ¹é…åˆ°çš„æ–‡æœ¬è¿›è¡Œç€è‰²æ˜¾ç¤º</span><br><span class="line">-m?åŒ¹é…åˆ°?è¡Œååœæ­¢</span><br><span class="line">-vå¯¹ä¸åŒ¹é…çš„è¿›è¡Œæ˜¾ç¤º</span><br><span class="line">-iå¿½ç•¥å¤§å°å†™</span><br><span class="line">-næ˜¾ç¤ºåŒ¹é…è¡Œçš„è¡Œå·</span><br><span class="line">-cç»Ÿè®¡åŒ¹é…æ¬¡æ•°</span><br><span class="line">-oä»…æ˜¾ç¤ºåŒ¹é…çš„å­—ç¬¦</span><br><span class="line">-qé™é»˜æ¨¡å¼ï¼Œä¸è¾“å‡ºä»»ä½•ä¿¡æ¯</span><br><span class="line">-A?æ˜¾ç¤ºåŒ¹é…è¡Œå’ŒåŒ¹é…è¡Œå?è¡Œ</span><br><span class="line">-B?æ˜¾ç¤ºåŒ¹é…è¡Œå’ŒåŒ¹é…è¡Œå‰?è¡Œ</span><br><span class="line">-C?æ˜¾ç¤ºåŒ¹é…è¡Œå’ŒåŒ¹é…è¡Œå‰å?è¡Œ</span><br><span class="line">-eæˆ–ï¼ŒåŒ¹é…æ¨¡å¼1æˆ–è€…æ¨¡å¼2</span><br><span class="line">-wåŒ¹é…æ•´ä¸ªå•è¯,é™¤äº†å­—æ¯,ä¸‹åˆ’çº¿å‡å¯ä»¥ä½œä¸ºåˆ†éš”ç¬¦</span><br><span class="line">-Eä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">-Fä¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">-fä½¿ç”¨æ–‡ä»¶å†…å®¹åšä¸ºæ¨¡å¼,æ•ˆæœå’Œ-eç±»ä¼¼</span><br><span class="line">-ré€’å½’ç›®å½•ï¼Œä½†æ˜¯ä¸å¤„ç†è½¯é“¾æ¥</span><br><span class="line">-Ré€’å½’ç›®å½•ï¼Œä½†å¤„ç†è½¯è¿æ¥</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…?è¡Œååœæ­¢åŒ¹é…</span></span><br><span class="line">grep -m 1 root /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">grep -n  root /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»Ÿè®¡åŒ¹é…åˆ°çš„è¡Œæ•°</span></span><br><span class="line">grep -c  root /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åªæ˜¾ç¤ºåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²è‡ªèº«</span></span><br><span class="line">grep -o root /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é™é»˜æ¨¡å¼,æ‰¾åˆ°æˆ–è€…æ‰¾ä¸åˆ°éƒ½ä¸è¾“å‡º</span></span><br><span class="line">grep -q root /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…å¤šä¸ªæ¡ä»¶,æˆ–æ¨¡å¼</span></span><br><span class="line">grep -e root -e bash /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åªåŒ¹é…æ•´ä¸ªå•è¯,è€Œä¸æ˜¯å­—ç¬¦</span></span><br><span class="line">grep -w /sbin/nologin /etc/passwd\</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–IPåœ°å€</span></span><br><span class="line">ip addr show dev eth0 | grep -Eo &#x27;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&#x27; | head -n 1</span><br></pre></td></tr></table></figure><h3 id="13-3-sed"><a href="#13-3-sed" class="headerlink" title="13.3 sed"></a>13.3 sed</h3><p>Sedæ˜¯ä»æ–‡ä»¶æˆ–ç®¡é“ä¸­è¯»å–ä¸€è¡Œï¼Œå¤„ç†ä¸€è¡Œï¼Œè¾“å‡ºä¸€è¡Œï¼›å†è¯»å–ä¸€è¡Œï¼Œå†å¤„ç†ä¸€è¡Œï¼Œå†è¾“å‡ºä¸€è¡Œï¼Œç›´åˆ°æœ€åä¸€è¡Œã€‚æ¯å½“å¤„ç†ä¸€è¡Œæ—¶ï¼ŒæŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œç§°ä¸ºæ¨¡å¼ç©ºé—´ (Pattern Space)ï¼Œæ¥ç€ç”¨sedå‘½ä»¤å¤„ç†ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¤„ç†å®Œæˆåï¼ŒæŠŠç¼“å†²åŒºçš„å†…å®¹é€å¾€å±å¹•ã€‚æ¥ç€å¤„ç†ä¸‹ä¸€è¡Œï¼Œè¿™æ ·ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚ä¸€æ¬¡å¤„ç†ä¸€è¡Œçš„è®¾è®¡æ¨¡å¼ä½¿å¾—sedæ€§èƒ½å¾ˆé«˜ï¼Œsedåœ¨è¯»å–å¤§æ–‡ä»¶æ—¶ä¸ä¼šå‡ºç°å¡é¡¿çš„ç°è±¡ã€‚å¦‚æœä½¿ç”¨viå‘½ä»¤æ‰“å¼€å‡ åMä¸Šç™¾Mçš„æ–‡ä»¶ï¼Œæ˜æ˜¾ä¼šå‡ºç°æœ‰å¡é¡¿çš„ç°è±¡ï¼Œè¿™æ˜¯å› ä¸ºviå‘½ä»¤æ‰“å¼€æ–‡ä»¶æ˜¯ä¸€æ¬¡æ€§å°†æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œç„¶åå†æ‰“å¼€ã€‚Sedå°±é¿å…äº†è¿™ç§æƒ…å†µï¼Œä¸€è¡Œä¸€è¡Œçš„å¤„ç†ï¼Œæ‰“å¼€é€Ÿåº¦éå¸¸å¿«ï¼Œæ‰§è¡Œé€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚</p><h4 id="13-3-1-sed-æŒ‡ä»¤é€‰é¡¹"><a href="#13-3-1-sed-æŒ‡ä»¤é€‰é¡¹" class="headerlink" title="13.3.1 sed æŒ‡ä»¤é€‰é¡¹"></a>13.3.1 sed æŒ‡ä»¤é€‰é¡¹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sed [é€‰é¡¹] &#x27;åœ°å€...&#x27; æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-nä¸è¾“å‡ºæ¨¡å¼ç©ºé—´å†…å®¹åˆ°å±å¹•,å³å…³é—­è‡ªåŠ¨æ‰“å°</span><br><span class="line">-eå¤šç‚¹ç¼–è¾‘</span><br><span class="line">-f/PATH/SCRIPT_FILEä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–ç¼–è¾‘è„šæœ¬</span><br><span class="line">-E  ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">-r ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line">-i.bakä¿®æ”¹æ–‡ä»¶,å¹¶å¤‡ä»½ä¸€ä¸ªbakæ–‡ä»¶</span><br><span class="line">-pæ‰“å°å½“å‰æ¨¡å¼ç©ºé—´å†…å®¹ï¼Œè¿½åŠ åˆ°é»˜è®¤è¾“å‡ºä¹‹å</span><br><span class="line">-dåˆ é™¤æ¨¡å¼ç©ºé—´åŒ¹é…çš„è¡Œï¼Œå¹¶ç«‹å³å¼€å¯ä¸‹ä¸€è½®å¾ªç¯        </span><br><span class="line">-Ipå¿½ç•¥å¤§å°å†™è¾“å‡º</span><br><span class="line">aåœ¨æŒ‡å®šè¡Œåé¢è¿½åŠ æ–‡æœ¬ï¼Œæ”¯æŒä½¿ç”¨\nå®ç°å¤šè¡Œè¿½åŠ </span><br><span class="line">iåœ¨è¡Œå‰é¢æ’å…¥æ–‡æœ¬</span><br><span class="line">cæ›¿æ¢è¡Œä¸ºå•è¡Œæˆ–å¤šè¡Œæ–‡æœ¬</span><br><span class="line">w /path/fileä¿å­˜æ¨¡å¼åŒ¹é…çš„è¡Œè‡³æŒ‡å®šæ–‡ä»¶</span><br><span class="line">r /path/fileè¯»å–æŒ‡å®šæ–‡ä»¶ä¸­çš„æ–‡æœ¬è‡³æ¨¡å¼ç©ºé—´ä¸­åŒ¹é…åˆ°çš„è¡Œå</span><br><span class="line">=ä¸ºæ¨¡å¼ç©ºé—´ä¸­çš„è¡Œæ‰“å°è¡Œå·</span><br><span class="line">!æ¨¡å¼ç©ºé—´ä¸­åŒ¹é…å–åå¤„ç†</span><br><span class="line"></span><br><span class="line">s/pattern/string/ æŸ¥æ‰¾æ›¿æ¢ï¼Œæ”¯æŒä½¿ç”¨å…¶ä»–åˆ†éš”ç¬¦ï¼Œå¯ä»¥æ˜¯å…¶ä»–å½¢å¼ï¼šs###ï¼Œs@@@</span><br><span class="line">æ›¿æ¢ä¿®é¥°ç¬¦å·</span><br><span class="line">gå…¨å±€æ›¿æ¢</span><br><span class="line">pæ˜¾ç¤ºæ›¿æ¢æˆåŠŸçš„è¡Œ</span><br><span class="line">w /PATH/FILEå°†æ›¿æ¢æˆåŠŸçš„è¡Œä¿å­˜è‡³æ–‡ä»¶ä¸­</span><br><span class="line">iå¿½ç•¥å¤§å°å†™</span><br></pre></td></tr></table></figure><h4 id="13-3-2-sed-åœ°å€æ ¼å¼"><a href="#13-3-2-sed-åœ°å€æ ¼å¼" class="headerlink" title="13.3.2 sed åœ°å€æ ¼å¼"></a>13.3.2 sed åœ°å€æ ¼å¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">?æŒ‡å®šçš„è¡Œå·ï¼Œ$è¡¨ç¤ºæœ€åä¸€è¡Œ</span><br><span class="line">/pat/è¢«æ­¤å¤„æ‰€æ­£åˆ™æ¯”è¡¨è¾¾å¼èƒ½å¤ŸåŒ¹é…åˆ°çš„æ¯ä¸€è¡Œ</span><br><span class="line"></span><br><span class="line">?,?ä»?è¡Œåˆ°ç¬¬?è¡Œ</span><br><span class="line">?,+?ä»?è¡Œåˆ°+?è¡Œ</span><br><span class="line">/pat1/,/pat2/</span><br><span class="line">?,/pat/</span><br><span class="line"></span><br><span class="line">1~2 å¥‡æ•°è¡Œ</span><br><span class="line">2~2 å¶æ•°è¡Œ</span><br></pre></td></tr></table></figure><h4 id="13-3-3-sed-æ‰“å°è¡Œ"><a href="#13-3-3-sed-æ‰“å°è¡Œ" class="headerlink" title="13.3.3 sed æ‰“å°è¡Œ"></a>13.3.3 sed æ‰“å°è¡Œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°ç¬¬2è¡Œ</span></span><br><span class="line">sed -n &#x27;2p&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°ç¬¬2è¡Œå’Œç¬¬6è¡Œ</span></span><br><span class="line">sed -n -e &#x27;2p&#x27; -e &#x27;6p&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°ç¬¬2è¡Œåˆ°ç¬¬6è¡Œ</span></span><br><span class="line">sed -n &#x27;2,6p&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œ,å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">sed -n &#x27;/^P.*D$/Ip&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-3-4-sed-åˆ é™¤è¡Œ"><a href="#13-3-4-sed-åˆ é™¤è¡Œ" class="headerlink" title="13.3.4 sed åˆ é™¤è¡Œ"></a>13.3.4 sed åˆ é™¤è¡Œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç©ºæ–‡ä»¶</span></span><br><span class="line">sed -i &#x27;d&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç¬¬2è¡Œ</span></span><br><span class="line">sed -i &#x27;2d&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åŒ…å«rootçš„è¡Œ</span></span><br><span class="line">sed -i &#x27;/root/d&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ä¸åŒ…å«rootçš„è¡Œ</span></span><br><span class="line">sed -i &#x27;/root/!d&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤è¢«æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œ</span></span><br><span class="line">sed -Ei &#x27;/^root.*bash$/d&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤å¥‡æ•°è¡Œ</span></span><br><span class="line">sed -i &#x27;1~2d&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤å¶æ•°è¡Œ</span></span><br><span class="line">sed -i &#x27;2~2d&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç¬¬1è¡Œåˆ°å¾€åçš„3è¡Œ,å³åˆ é™¤å‰4è¡Œ</span></span><br><span class="line">sed -i &#x27;1,+3d&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-3-5-sed-æ·»åŠ è¡Œ"><a href="#13-3-5-sed-æ·»åŠ è¡Œ" class="headerlink" title="13.3.5 sed æ·»åŠ è¡Œ"></a>13.3.5 sed æ·»åŠ è¡Œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨ç¬¬äºŒè¡Œåé¢è¿½åŠ PASSWD</span></span><br><span class="line">sed -i &#x27;2aPASSWD&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨ç¬¬äºŒè¡Œå‰é¢è¿½åŠ PASSWD</span></span><br><span class="line">sed -i &#x27;2iPASSWD&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨ç¬¬äºŒè¡Œå‰é¢è¿½åŠ å¤šè¡Œ</span></span><br><span class="line">sed -i &#x27;2iPASSWD\nPASSWD&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨ç¬¬äºŒè¡Œå‰é¢è¿½åŠ å¤šè¡Œå¹¶å¡«å……ç©ºæ ¼,ç¬¬ä¸€è¡Œçš„ç©ºæ ¼éœ€è¦ç”¨\ä¸“è½¬ä¹‰</span></span><br><span class="line">sed -i &#x27;2i\   PASSWD\n   PASSWD&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨è¢«æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œåé¢è¿½åŠ passwd</span></span><br><span class="line">sed -i &#x27;/^PASSWD$/ipasswd&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-3-6-sed-æ›¿æ¢è¡Œ"><a href="#13-3-6-sed-æ›¿æ¢è¡Œ" class="headerlink" title="13.3.6 sed æ›¿æ¢è¡Œ"></a>13.3.6 sed æ›¿æ¢è¡Œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›¿æ¢ç¬¬2è¡Œ</span></span><br><span class="line">sed -i &#x27;2s|.*|PASSWD|&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›¿æ¢ç¬¬2è¡Œ</span></span><br><span class="line">sed -i &#x27;2cPASSWD&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›¿æ¢æŒ‡å®šçš„è¡Œ</span></span><br><span class="line">sed -i &#x27;s|PASSWD|passwd|&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›¿æ¢è¢«åŒ¹é…åˆ°çš„è¡Œ</span></span><br><span class="line">sed -i &#x27;s|^P.*D$|passwd|&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-3-7-sed-é¢å¤–æ¡ˆä¾‹"><a href="#13-3-7-sed-é¢å¤–æ¡ˆä¾‹" class="headerlink" title="13.3.7 sed é¢å¤–æ¡ˆä¾‹"></a>13.3.7 sed é¢å¤–æ¡ˆä¾‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–IP</span></span><br><span class="line">ifconfig ens33 | sed -nr &quot;2s|[^0-9]+([0-9.]+).*|\1|p&quot;</span><br><span class="line">ifconfig ens33 | sed -nr &quot;2s|^[^0-9]+([0-9.]+).*$|\1|p&quot;</span><br><span class="line">ifconfig ens33 | sed -nr -e &#x27;2s|^.*inet ||p&#x27; | sed -n &#x27;s| netmask.*||p&#x27;</span><br><span class="line">ifconfig ens33 | sed -nr -e &#x27;2s|^.*inet ||;s| netmask.*||p&#x27;</span><br><span class="line">ifconfig ens33 | sed -rn &#x27;2s|(.*inet )([0-9].*)( netmask.*)|\2|p&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–åŸºå</span></span><br><span class="line">echo &#x27;/etc/sysconfig/network-scripts&#x27; | sed -rn &#x27;s|(.*)/([^/]+)/?|\2|p&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–ç›®å½•å</span></span><br><span class="line">echo &#x27;/etc/sysconfig/network-scripts&#x27; | sed -rn &#x27;s|(.*)/([^/]+)/?|\1|p&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…çš„è¡Œå¼€å¤´å¢åŠ #å·</span></span><br><span class="line">sed -E  &#x27;/^UUID/s/(UUID.*$)/#\1/&#x27; /etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…çš„è¡Œç»“å°¾å¢åŠ #å·</span></span><br><span class="line">sed -E  &#x27;/^UUID/s/(UUID.*$)/\1#/&#x27; /etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…çš„è¡Œä¸­é—´åŠ #</span></span><br><span class="line">sed -E  &#x27;/default/s/(default)/#\1/&#x27; etc/fstab</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¡Œå°¾è¿½åŠ å‚æ•°</span></span><br><span class="line">sed -Ei.bak &#x27;/^GRUB_CMDLINE_LINUX/s/(GRUB.*)&quot;/\1 net.ifnames=0 biosdevname=0&quot;/&#x27; /etc/default/grub</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sedå¼•ç”¨å˜é‡,ä½¿ç”¨åŒå¼•å·</span></span><br><span class="line">NAME=root ; sed -i &quot;s|$NAME|123|g&quot; /etc/passwd </span><br></pre></td></tr></table></figure><h4 id="13-3-8-sed-é«˜çº§ç”¨æ³•"><a href="#13-3-8-sed-é«˜çº§ç”¨æ³•" class="headerlink" title="13.3.8 sed é«˜çº§ç”¨æ³•"></a>13.3.8 sed é«˜çº§ç”¨æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Pæ‰“å°æ¨¡å¼ç©ºé—´å¼€ç«¯è‡³\nå†…å®¹ï¼Œå¹¶è¿½åŠ åˆ°é»˜è®¤è¾“å‡ºä¹‹å‰</span><br><span class="line">hæŠŠæ¨¡å¼ç©ºé—´ä¸­çš„å†…å®¹è¦†ç›–è‡³ä¿æŒç©ºé—´ä¸­</span><br><span class="line">HæŠŠæ¨¡å¼ç©ºé—´ä¸­çš„å†…å®¹è¿½åŠ è‡³ä¿æŒç©ºé—´ä¸­</span><br><span class="line">gä»ä¿æŒç©ºé—´å–å‡ºæ•°æ®è¦†ç›–è‡³æ¨¡å¼ç©ºé—´</span><br><span class="line">Gä»ä¿æŒç©ºé—´å–å‡ºå†…å®¹è¿½åŠ è‡³æ¨¡å¼ç©ºé—´</span><br><span class="line">xæŠŠæ¨¡å¼ç©ºé—´ä¸­çš„å†…å®¹ä¸ä¿æŒç©ºé—´ä¸­çš„å†…å®¹è¿›è¡Œäº’æ¢</span><br><span class="line">nè¯»å–åŒ¹é…åˆ°çš„è¡Œçš„ä¸‹ä¸€è¡Œè¦†ç›–è‡³æ¨¡å¼ç©ºé—´</span><br><span class="line">Nè¯»å–åŒ¹é…åˆ°çš„è¡Œçš„ä¸‹ä¸€è¡Œè¿½åŠ è‡³æ¨¡å¼ç©ºé—´</span><br><span class="line">dåˆ é™¤æ¨¡å¼ç©ºé—´ä¸­è¡Œ</span><br><span class="line">Då¦‚æœæ¨¡å¼ç©ºé—´åŒ…å«æ¢è¡Œç¬¦ï¼Œåˆ™åˆ é™¤ç›´åˆ°ç¬¬ä¸€ä¸ªæ¢è¡Œç¬¦çš„æ¨¡å¼ç©ºé—´ä¸­çš„æ–‡æœ¬ï¼Œå¹¶ä¸ä¼šè¯»å–æ–°çš„è¾“å…¥è¡Œ</span><br><span class="line">    è€Œä½¿ç”¨åˆæˆçš„æ¨¡å¼ç©ºé—´é‡æ–°å¯åŠ¨å¾ªç¯ã€‚å¦‚æœæ¨¡å¼ç©ºé—´ä¸åŒ…å«æ¢è¡Œç¬¦ï¼Œåˆ™ä¼šåƒå‘å‡ºdå‘½ä»¤é‚£æ ·å¯åŠ¨æ­£å¸¸çš„æ–°å¾ªç¯</span><br></pre></td></tr></table></figure><h3 id="13-4-awk"><a href="#13-4-awk" class="headerlink" title="13.4 awk"></a>13.4 awk</h3><h4 id="13-4-1-awk-å·¥ä½œåŸç†"><a href="#13-4-1-awk-å·¥ä½œåŸç†" class="headerlink" title="13.4.1 awk å·¥ä½œåŸç†"></a>13.4.1 awk å·¥ä½œåŸç†</h4><ul><li>å¤„ç†BEGINåŠ¨ä½œ</li><li>é€è¡Œå¤„ç†</li><li>å¤„ç†ENDåŠ¨ä½œ</li></ul><h4 id="13-4-2-åŠ¨ä½œ-print"><a href="#13-4-2-åŠ¨ä½œ-print" class="headerlink" title="13.4.2 åŠ¨ä½œ print"></a>13.4.2 åŠ¨ä½œ print</h4><ul><li>é€—å·å°†ä½¿ç”¨ä¸€ä¸ªç©ºæ ¼è¡¨ç¤º</li><li>å¦‚æœæ²¡æœ‰æ‰“å°å†…å®¹ï¼Œç›¸å½“äº print $0</li><li>å›ºå®šå­—ç¬¦ä¸²éœ€è¦ä½¿ç”¨åŒå¼•å·å¼•èµ·æ¥ï¼Œè€Œå˜é‡å’Œæ•°å­—ä¸éœ€è¦</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥å—æ ‡å‡†è¾“å…¥1æ‰“å°â€œhello awkâ€</span></span><br><span class="line">[root@centos ~][0]$ awk &#x27;&#123;print &quot;hello awk&quot;&#125;&#x27;</span><br><span class="line">1</span><br><span class="line">hello awk</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°æŒ‡å®šæ¬¡æ•°</span></span><br><span class="line">[root@centos ~][0]$ seq 2 | awk &#x27;&#123;print &quot;hello awk&quot;&#125;&#x27;</span><br><span class="line">hello awk</span><br><span class="line">hello awk</span><br></pre></td></tr></table></figure><h4 id="13-4-3-awk-å˜é‡"><a href="#13-4-3-awk-å˜é‡" class="headerlink" title="13.4.3 awk å˜é‡"></a>13.4.3 awk å˜é‡</h4><h5 id="1-è¾“å…¥åˆ†å‰²ç¬¦-FS"><a href="#1-è¾“å…¥åˆ†å‰²ç¬¦-FS" class="headerlink" title="1. è¾“å…¥åˆ†å‰²ç¬¦ FS"></a>1. è¾“å…¥åˆ†å‰²ç¬¦ FS</h5><blockquote><p>å­—æ®µçš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -v FS=&quot;:&quot; &#x27;&#123;print $1&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="2-è¾“å‡ºåˆ†éš”ç¬¦-OFS"><a href="#2-è¾“å‡ºåˆ†éš”ç¬¦-OFS" class="headerlink" title="2. è¾“å‡ºåˆ†éš”ç¬¦ OFS"></a>2. è¾“å‡ºåˆ†éš”ç¬¦ OFS</h5><blockquote><p>è¾“å‡ºåå­—æ®µåˆ†éš”ç¬¦</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; -v OFS=&#x27;--&#x27; &#x27;&#123;print $1OFS$2&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="3-è¾“å…¥æ¢è¡Œç¬¦-RS"><a href="#3-è¾“å…¥æ¢è¡Œç¬¦-RS" class="headerlink" title="3. è¾“å…¥æ¢è¡Œç¬¦ RS"></a>3. è¾“å…¥æ¢è¡Œç¬¦ RS</h5><blockquote><p>æ¢è¡Œç¬¦ï¼Œé»˜è®¤æ˜¯\n</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æ¢è¡Œç¬¦</span></span><br><span class="line">awk -v RS=&#x27;:&#x27; &#x27;&#123;print $0&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="4-è¾“å‡ºæ¢è¡Œç¬¦-ORS"><a href="#4-è¾“å‡ºæ¢è¡Œç¬¦-ORS" class="headerlink" title="4. è¾“å‡ºæ¢è¡Œç¬¦ ORS"></a>4. è¾“å‡ºæ¢è¡Œç¬¦ ORS</h5><blockquote><p>è¾“å‡ºåå­—æ®µçš„æ¢è¡Œç¬¦</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹è¾“å‡ºæ¢è¡Œç¬¦</span></span><br><span class="line">awk -v ORS=&#x27;/&#x27; &#x27;&#123;print $0&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="5-å­—æ®µæ•°é‡-NF"><a href="#5-å­—æ®µæ•°é‡-NF" class="headerlink" title="5. å­—æ®µæ•°é‡ NF"></a>5. å­—æ®µæ•°é‡ NF</h5><blockquote><p>è®°å½•çš„æ˜¯åˆ†å‰²åï¼Œå½“å‰è¡Œæ€»å­—æ®µæ•°é‡</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ¯ä¸€è¡Œæœ‰å¤šå°‘ä¸ªå­—æ®µ</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print NF&#125;&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°æœ€åä¸€ä¸ªå­—æ®µ</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print $NF&#125;&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°å€’æ•°ç¬¬äºŒä¸ªå­—æ®µ</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print $(NF-1)&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="6-å•ä¸ªæ–‡ä»¶è¡Œå·-NR"><a href="#6-å•ä¸ªæ–‡ä»¶è¡Œå·-NR" class="headerlink" title="6. å•ä¸ªæ–‡ä»¶è¡Œå· NR"></a>6. å•ä¸ªæ–‡ä»¶è¡Œå· NR</h5><blockquote><p>è®°å½•çš„æ˜¯å½“å‰è¡Œçš„è¡Œå·</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»™æ–‡ä»¶æ·»åŠ è¡Œå·</span></span><br><span class="line">awk &#x27;&#123;print NR,$0&#125;&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°ç¬¬äºŒè¡Œ</span></span><br><span class="line">awk &#x27;NR==2&#123;print $0&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="7-å¤šä¸ªæ–‡ä»¶è¡Œå·-FNR"><a href="#7-å¤šä¸ªæ–‡ä»¶è¡Œå·-FNR" class="headerlink" title="7. å¤šä¸ªæ–‡ä»¶è¡Œå· FNR"></a>7. å¤šä¸ªæ–‡ä»¶è¡Œå· FNR</h5><blockquote><p>åˆ†åˆ«è®°å½•æ¯ä¸ªæ–‡ä»¶çš„è¡Œå·</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»™å¤šä¸ªæ–‡ä»¶åˆ†åˆ«æ·»åŠ è¡Œå·</span></span><br><span class="line">awk &#x27;&#123;print FNR,$0&#125;&#x27; /etc/passwd /etc/fstab</span><br></pre></td></tr></table></figure><h5 id="8-å¤„ç†çš„æ–‡ä»¶åç§°-FILENAME"><a href="#8-å¤„ç†çš„æ–‡ä»¶åç§°-FILENAME" class="headerlink" title="8. å¤„ç†çš„æ–‡ä»¶åç§° FILENAME"></a>8. å¤„ç†çš„æ–‡ä»¶åç§° FILENAME</h5><blockquote><p>è®°å½•çš„æ˜¯å½“å‰æ–‡ä»¶åç§°</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»™æ¯è¡Œå¼€å¤´æ·»åŠ å½“å‰å¤„ç†çš„æ–‡ä»¶åç§°</span></span><br><span class="line">awk &#x27;&#123;print FILENAME,$0&#125;&#x27; /etc/fstab</span><br></pre></td></tr></table></figure><h5 id="9-å‚æ•°çš„ä¸ªæ•°-ARGC"><a href="#9-å‚æ•°çš„ä¸ªæ•°-ARGC" class="headerlink" title="9. å‚æ•°çš„ä¸ªæ•° ARGC"></a>9. å‚æ•°çš„ä¸ªæ•° ARGC</h5><blockquote><p>è®°å½•çš„æ˜¯å‘½ä»¤è¡Œçš„å‚æ•°ä¸ªæ•°</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print ARGC&#125;&#x27; /etc/fstab </span><br></pre></td></tr></table></figure><h5 id="10-å‚æ•°çš„æ•°ç»„-ARGV"><a href="#10-å‚æ•°çš„æ•°ç»„-ARGV" class="headerlink" title="10. å‚æ•°çš„æ•°ç»„ ARGV [ ? ]"></a>10. å‚æ•°çš„æ•°ç»„ ARGV [ ? ]</h5><blockquote><p>æ•°ç»„ï¼Œä¿å­˜çš„æ˜¯å‘½ä»¤è¡Œæ‰€ç»™å®šçš„å„ä¸ªå‚æ•°ï¼Œæ¯ä¸€ä¸ªå‚æ•°æ˜¯ARGV[0] â€¦.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print ARGV[0],ARGV[1],ARGV[2]&#125;&#x27; /etc/fstab /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="11-è‡ªå®šä¹‰å˜é‡"><a href="#11-è‡ªå®šä¹‰å˜é‡" class="headerlink" title="11. è‡ªå®šä¹‰å˜é‡"></a>11. è‡ªå®šä¹‰å˜é‡</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°å˜é‡varçš„å€¼,æœ‰å‡ è¡Œæ‰“å‡ æ¬¡</span></span><br><span class="line"></span><br><span class="line">seq 1 | awk -v var=&#x27;zhangyu&#x27; &#x27;&#123;print var&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€å¤´æ‰“å°ä¸€évarçš„å€¼</span></span><br><span class="line">awk -v var=&#x27;zhangyu&#x27; &#x27;BEGIN&#123;print var&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†…éƒ¨å˜é‡èµ‹å€¼</span></span><br><span class="line">awk &#x27;BEGIN&#123;var=&quot;zhangyu&quot;;print var&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†…éƒ¨å¤šä¸ªå˜é‡</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;age=&quot;12&quot;;sex=&quot;man&quot;;print $1,age,sex&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-4-4-åŠ¨ä½œ-printf"><a href="#13-4-4-åŠ¨ä½œ-printf" class="headerlink" title="13.4.4 åŠ¨ä½œ printf"></a>13.4.4 åŠ¨ä½œ printf</h4><h5 id="1-æ ¼å¼ç¬¦"><a href="#1-æ ¼å¼ç¬¦" class="headerlink" title="1. æ ¼å¼ç¬¦"></a>1. æ ¼å¼ç¬¦</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">%</span><span class="language-bash">cæ˜¾ç¤ºå­—ç¬¦çš„ASCIIç </span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">d,%i æ˜¾ç¤ºåè¿›åˆ¶æ•´æ•°</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">e,%Eæ˜¾ç¤ºç§‘å­¦è®¡æ•°æ³•æ•°å€¼</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">f æ˜¾ç¤ºä¸ºå°æ•°</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">g,%Gä»¥ç§‘å­¦è®¡æ•°æ³•æˆ–æµ®ç‚¹å½¢å¼æ˜¾ç¤ºæ•°å€¼</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">sæ˜¾ç¤ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">uæ— ç¬¦å·æ•´æ•°</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">%æ˜¾ç¤º%è‡ªèº«</span></span><br></pre></td></tr></table></figure><h5 id="2-ä¿®é¥°ç¬¦"><a href="#2-ä¿®é¥°ç¬¦" class="headerlink" title="2. ä¿®é¥°ç¬¦"></a>2. ä¿®é¥°ç¬¦</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?[.?]ç¬¬ä¸€ä¸ª?æ§åˆ¶æ˜¾ç¤ºçš„å®½åº¦ï¼šç¬¬äºŒä¸ª?è¡¨ç¤ºå°æ•°ç‚¹åç²¾åº¦ï¼Œå¦‚ï¼š%3.1f</span><br><span class="line">-å·¦å¯¹é½(é»˜è®¤å³å¯¹é½) å¦‚ï¼š%-15s</span><br><span class="line">+æ˜¾ç¤ºæ•°å€¼çš„æ­£è´Ÿç¬¦å· å¦‚ï¼š%+d</span><br></pre></td></tr></table></figure><h4 id="13-4-5-æ“ä½œç¬¦"><a href="#13-4-5-æ“ä½œç¬¦" class="headerlink" title="13.4.5 æ“ä½œç¬¦"></a>13.4.5 æ“ä½œç¬¦</h4><h5 id="1-ç®—æ•°æ“ä½œç¬¦"><a href="#1-ç®—æ•°æ“ä½œç¬¦" class="headerlink" title="1. ç®—æ•°æ“ä½œç¬¦"></a>1. ç®—æ•°æ“ä½œç¬¦</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">x+yï¼Œx-yï¼Œx*yï¼Œx/yï¼Œx^Yï¼Œx%y</span><br><span class="line">-xè½¬æ¢ä¸ºè´Ÿæ•°</span><br><span class="line">+xå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èµ‹å€¼æ“ä½œç¬¦</span></span><br><span class="line">=ï¼Œ+=ï¼Œ*=ï¼Œ/=ï¼Œ%=ï¼Œ^=,++,--</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¯”è¾ƒæ“ä½œç¬¦</span></span><br><span class="line">==,!=,&gt;,&gt;=,&lt;,&lt;=</span><br><span class="line"></span><br><span class="line">awk &#x27;NR&gt;2&#123;print $0&#125;&#x27; /etc/passwd</span><br><span class="line">awk &#x27;NR==2&#123;print $0&#125;&#x27; /etc/passwd</span><br><span class="line">awk &#x27;NR!=2&#123;print $0&#125;&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…<span class="variable">$3</span>ä¸æ˜¯&gt;=500çš„è¡Œï¼Œæ‰“å°å‡º<span class="variable">$0</span></span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;!($3&gt;=500)&#123;print $0&#125;&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°å¥‡æ•°è¡Œ</span></span><br><span class="line">seq 10 | awk &#x27;NR%2==1&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°å¶æ•°è¡Œ</span></span><br><span class="line">seq 10 | awk &#x27;NR%2==0&#x27;</span><br></pre></td></tr></table></figure><h5 id="2-æ¨¡å¼åŒ¹é…ç¬¦"><a href="#2-æ¨¡å¼åŒ¹é…ç¬¦" class="headerlink" title="2. æ¨¡å¼åŒ¹é…ç¬¦"></a>2. æ¨¡å¼åŒ¹é…ç¬¦</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">~  å·¦è¾¹æ˜¯å¦å’Œå³è¾¹åŒ¹é…,åŒ…å«å…³ç³»</span><br><span class="line">!~ æ˜¯å¦ä¸åŒ¹é…</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…æ•´è¡Œä¸­ï¼Œå¼€å¤´æ˜¯rootçš„è¡Œ</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;$0 ~ /^root/&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…æ•´è¡Œä¸­ï¼Œå¼€å¤´æ˜¯rootçš„è¡Œï¼Œç„¶åè¾“å‡ºè¯¥è¡Œçš„<span class="variable">$1</span></span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;$0 ~ /^root/&#123;print $1&#125;&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸åŒ¹é…æ•´è¡Œä¸­ï¼Œå¼€å¤´æ˜¯rootçš„è¡Œ</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;$0 !~ /^root/&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¡Œå°¾åŒ¹é…bash$çš„æ‰“å°å‡º<span class="variable">$1</span>,<span class="variable">$NF</span></span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;$NF ~ /bash$/&#123;print $1,$NF&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="3-é€»è¾‘æ“ä½œç¬¦WO"><a href="#3-é€»è¾‘æ“ä½œç¬¦WO" class="headerlink" title="3. é€»è¾‘æ“ä½œç¬¦WO"></a>3. é€»è¾‘æ“ä½œç¬¦WO</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp;å¹¶ä¸”</span><br><span class="line">|| æˆ–è€…</span><br><span class="line">!å–å</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–ç£ç›˜ä½¿ç”¨ç‡</span></span><br><span class="line">df -h | awk -F &#x27;[ ]+|%&#x27; &#x27;$5 &gt; 15 &amp;&amp; /^[^Files]/&#123;print $0&#125;&#x27;</span><br></pre></td></tr></table></figure><h5 id="4-ä¸‰å…ƒè¡¨è¾¾å¼"><a href="#4-ä¸‰å…ƒè¡¨è¾¾å¼" class="headerlink" title="4. ä¸‰å…ƒè¡¨è¾¾å¼"></a>4. ä¸‰å…ƒè¡¨è¾¾å¼</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœæ»¡è¶³åˆ™ï¼Œå¦‚æœä¸æ»¡è¶³åˆ™</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;if ($3 &gt; 20) &#123;print &quot;âˆš&quot;,$0&#125; else &#123;print &quot;x&quot;,$0&#125;&#125;&#x27; /etc/passwd</span><br><span class="line">awk -F &#x27;:&#x27; &#x27;$3 &gt; 20 &#123;print &quot;âˆš&quot;,$0&#125; $3 &lt;= 1000 &#123;print &quot;x&quot;,$0&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-4-6-æ¨¡å¼PATTERN"><a href="#13-4-6-æ¨¡å¼PATTERN" class="headerlink" title="13.4.6 æ¨¡å¼PATTERN"></a>13.4.6 æ¨¡å¼PATTERN</h4><p>PATTERNï¼šæ ¹æ®æ¨¡å¼æ¡ä»¶ï¼Œè¿‡æ»¤åŒ¹é…çš„è¡Œï¼Œå†åšå¤„ç†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">awk &#x27;/^root/&#123;print $0&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…³ç³»è¡¨è¾¾å¼ï¼Œä¸ºçœŸæ‰ä¼šå¤„ç†</span></span><br><span class="line">awk &#x27;$0 ~ /^root/&#123;print $0&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ°å€è¡¨è¾¾å¼(ä½ç½®è¡¨è¾¾)</span></span><br><span class="line">awk &#x27;NR&gt;3 &amp;&amp; NR&lt;6&#123;print $0&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­£åˆ™è¡¨è¾¾å¼(ä½ç½®è¡¨è¾¾)</span></span><br><span class="line"> awk &#x27;/^root/,/^bin/&#123;print $0&#125;&#x27;</span><br><span class="line"> </span><br><span class="line">BEGIN(ä»…åœ¨å¤„ç†ä¹‹å‰æ‰§è¡Œä¸€æ¬¡)</span><br><span class="line">END(ä»…åœ¨å¤„ç†å®Œæˆä¹‹åæ‰§è¡Œä¸€æ¬¡)</span><br><span class="line">awk -F &#x27;:&#x27; &#x27;BEGIN &#123;print &quot;å¼€å§‹&quot;&#125; &#123;print $0&#125; END &#123;print &quot;ç»“æŸ&quot;&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-4-7-æµç¨‹æ§åˆ¶è¯­å¥"><a href="#13-4-7-æµç¨‹æ§åˆ¶è¯­å¥" class="headerlink" title="13.4.7 æµç¨‹æ§åˆ¶è¯­å¥"></a>13.4.7 æµç¨‹æ§åˆ¶è¯­å¥</h4><h5 id="1-æ¡ä»¶åˆ¤æ–­"><a href="#1-æ¡ä»¶åˆ¤æ–­" class="headerlink" title="1. æ¡ä»¶åˆ¤æ–­"></a>1. æ¡ä»¶åˆ¤æ–­</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ¤æ–­</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;if ($3 &gt; 1000) &#123;print &quot;âˆš&quot;,$0&#125; else &#123;print &quot;x&quot;,$0&#125;&#125;&#x27; /etc/passwd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤šæ¬¡åˆ¤æ–­</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;if ($3 &lt; 50) &#123;print &quot;å°äº50&quot;,$0&#125; else if ($3 &lt; 60) &#123;print &quot;å°äº60&quot;,$0&#125; else &#123;print &quot;ä¸å°äº50,ä¹Ÿä¸å°äº60&quot;,$0&#125;&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="2-å¾ªç¯"><a href="#2-å¾ªç¯" class="headerlink" title="2. å¾ªç¯"></a>2. å¾ªç¯</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¡ç®—1+2+3..+100</span></span><br><span class="line">awk &#x27;BEGIN&#123;sum=0;i=1;while(i&lt;=100)&#123;sum+=i;i++&#125;;print sum&#125;&#x27;</span><br><span class="line">for i in &#123;1..100&#125;; do let sum=sum+i; done; echo $sum</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°ç½‘æ®µIP</span></span><br><span class="line">awk &#x27;BEGIN &#123; i=1; while (i&lt;=255) &#123; print &quot;192.168.1.&quot; i; i++ &#125; &#125;&#x27;</span><br><span class="line">awk &#x27;BEGIN &#123; for (i=1; i&lt;=255; i++) print &quot;192.168.1.&quot; i &#125;&#x27;</span><br></pre></td></tr></table></figure><h5 id="3-continueå’Œbreak"><a href="#3-continueå’Œbreak" class="headerlink" title="3. continueå’Œbreak"></a>3. continueå’Œbreak</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¡ç®—å¥‡æ•°ä¹‹å’Œ</span></span><br><span class="line">awk &#x27;BEGIN&#123;sum=0;for(i=1;i&lt;=100;i++)&#123;if(i%2==0)continue;sum=sum+i&#125;;print sum&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»ˆæ­¢å¾ªç¯</span></span><br><span class="line">awk &#x27;BEGIN&#123;sum=0;for(i=1;i&lt;=100;i++)&#123;if(i&gt;99)break;sum=sum+i&#125;;print sum&#125;&#x27;</span><br></pre></td></tr></table></figure><h5 id="4-next"><a href="#4-next" class="headerlink" title="4. next"></a>4. next</h5><blockquote><p>å¯ä»¥æå‰ç»“æŸå¯¹æœ¬è¡Œçš„å¤„ç†ç›´æ¥è¿›å…¥ä¸‹ä¸€è¡Œ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;if($3%2!=0)next; print $1,$3&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="13-4-8-å…³è”æ•°ç»„"><a href="#13-4-8-å…³è”æ•°ç»„" class="headerlink" title="13.4.8 å…³è”æ•°ç»„"></a>13.4.8 å…³è”æ•°ç»„</h4><h5 id="1-å®šä¹‰æ•°ç»„"><a href="#1-å®šä¹‰æ•°ç»„" class="headerlink" title="1. å®šä¹‰æ•°ç»„"></a>1. å®šä¹‰æ•°ç»„</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®šä¹‰ä¸¤ä¸ªå…³è”æ•°ç»„çš„å€¼ï¼Œç„¶åè¾“å‡ºå…¶ä¸­ä¸€ä¸ªæ•°ç»„çš„å€¼</span></span><br><span class="line">awk &#x27;BEGIN&#123;weekdays[&quot;mom&quot;]=&quot;Monday&quot;;weekdays[&quot;tue&quot;]=&quot;Tuesday&quot;;print weekdays[&quot;mom&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure><h5 id="2-éå†æ•°ç»„"><a href="#2-éå†æ•°ç»„" class="headerlink" title="2. éå†æ•°ç»„"></a>2. éå†æ•°ç»„</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">for (å˜é‡ in æ•°ç»„å) &#123;print å˜é‡&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">varå­˜äº†æ•°ç»„ä¸‹æ ‡ï¼Œè¿™é‡Œæ˜¯è¾“å‡ºä¸‹æ ‡çš„å€¼</span></span><br><span class="line">awk &#x27;BEGIN&#123;weekdays[&quot;mon&quot;]=&quot;Monday&quot;;weekdays[&quot;tue&quot;]=&quot;Tuesday&quot;;for (var in weekdays) &#123;print weekdays[var]&#125;&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">varå­˜äº†æ•°ç»„ä¸‹æ ‡ï¼Œè¿™é‡Œæ˜¯è¾“å‡ºæœ‰å“ªäº›ä¸‹æ ‡</span></span><br><span class="line">awk &#x27;BEGIN&#123;weekdays[&quot;mon&quot;]=&quot;Monday&quot;;weekdays[&quot;tue&quot;]=&quot;Tuesday&quot;;for (var in weekdays)&#123;print var&#125;&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å°ä¸‹æ ‡å¯¹åº”çš„å€¼</span></span><br><span class="line">awk &#x27;BEGIN&#123;weekdays[&quot;mon&quot;]=&quot;Monday&quot;;weekdays[&quot;tue&quot;]=&quot;Tuesday&quot;;for (var in weekdays)&#123;print var&quot;:&quot;weekdays[var]&#125;&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®šä¹‰ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ¤æ–­ä¸‹æ ‡monæ˜¯å¦åœ¨æ•°ç»„weekdaysä¸­</span></span><br><span class="line">awk &#x27;BEGIN&#123;weekdays[&quot;mon&quot;]=&quot;Monday&quot;;weekdays[&quot;tue&quot;]=&quot;Tuesday&quot;;if (&quot;mon&quot; in weekdays) &#123;print &quot;å­˜åœ¨&quot;&#125;else&#123;print&quot;ä¸å­˜åœ¨&quot;&#125;&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®šä¹‰è¾“å‡º</span></span><br><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;user[$1]=$3&#125; END &#123;for(var in user) &#123;print &quot;username:&quot; var &quot;, uid:&quot; user[var]&#125;&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="3-èŒƒä¾‹ï¼š"><a href="#3-èŒƒä¾‹ï¼š" class="headerlink" title="3. èŒƒä¾‹ï¼š"></a>3. èŒƒä¾‹ï¼š</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»Ÿè®¡ä¸»æœºä¸åŒè¿æ¥çŠ¶æ€çš„æ¬¡æ•°</span></span><br><span class="line">ss | awk -F &#x27;[ ]+|:&#x27; &#x27;NR!=1 &#123;state[$2]++&#125; END &#123;for (i in state) &#123;print i, state[i]&#125;&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»Ÿè®¡ä¸»æœºè¿æ¥æ¬¡æ•°</span></span><br><span class="line">ss | awk -F &#x27;[ ]+|:&#x27; &#x27;NR!=1&#123;ip[$7] = ip[$7] + 1&#125; END &#123;for (i in ip) &#123;print i&quot;æœ‰&quot;ip[i]&quot;ä¸ªè¿æ¥æ•°&quot;&#125;&#125;&#x27;</span><br></pre></td></tr></table></figure><h4 id="13-4-8-å‡½æ•°"><a href="#13-4-8-å‡½æ•°" class="headerlink" title="13.4.8 å‡½æ•°"></a>13.4.8 å‡½æ•°</h4><h5 id="1-è°ƒç”¨shellæŒ‡ä»¤"><a href="#1-è°ƒç”¨shellæŒ‡ä»¤" class="headerlink" title="1. è°ƒç”¨shellæŒ‡ä»¤"></a>1. è°ƒç”¨shellæŒ‡ä»¤</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky9 ~][0]# awk &#x27;BEGIN&#123;system(&quot;hostname&quot;)&#125;&#x27;</span><br><span class="line">rocky9</span><br><span class="line">[root@rocky9 ~][0]# awk &#x27;BEGIN&#123;score=100; system(&quot;echo your score is &quot; score) &#125;&#x27;</span><br><span class="line">your score is 100</span><br></pre></td></tr></table></figure><h5 id="2-å¸¸è§å†…ç½®å‡½æ•°"><a href="#2-å¸¸è§å†…ç½®å‡½æ•°" class="headerlink" title="2. å¸¸è§å†…ç½®å‡½æ•°"></a>2. å¸¸è§å†…ç½®å‡½æ•°</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">rand():è¿”å›0å’Œ1ä¹‹é—´ä¸€ä¸ªå›ºå®šçš„æ•°</span></span><br><span class="line">awk &#x27;BEGIN&#123;print rand() &#125;&#x27;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">srand():é…åˆrand()å‡½æ•°ï¼Œç”Ÿæˆéšæœºæ•°çš„ç§å­</span></span><br><span class="line"> awk &#x27;BEGIN&#123;srand();print rand() &#125;&#x27;</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">int():è¿”å›æ•´æ•°</span></span><br><span class="line">awk &#x27;BEGIN&#123;print int(110000) &#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆéšæœºæ•´æ•°</span></span><br><span class="line">awk &#x27;BEGIN&#123;srand();print int(rand()*100000000000000000)&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">rand():è¿”å›0å’Œ1ä¹‹é—´ä¸€ä¸ªå›ºå®šçš„æ•°</span></span><br><span class="line">awk &#x27;BEGIN&#123;print rand() &#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">srand():é…åˆrand()å‡½æ•°ï¼Œç”Ÿæˆéšæœºæ•°çš„ç§å­</span></span><br><span class="line"> awk &#x27;BEGIN&#123;srand();print rand() &#125;&#x27;</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">int():è¿”å›æ•´æ•°</span></span><br><span class="line">awk &#x27;BEGIN&#123;print int(110000) &#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆéšæœºæ•´æ•°</span></span><br><span class="line">awk &#x27;BEGIN&#123;srand();print int(rand()*100000000000000000)&#125;&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sub(r,s,[t])å¯¹å­—ç¬¦ä¸²æœç´¢rè¡¨ç¤ºåŒ¹é…å†…å®¹ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªåŒ¹é…å†…å®¹æ›¿æ¢æˆs</span></span><br><span class="line">[root@rocky9 ~][0]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;sub(/:/,&quot;-&quot;,$1)&#x27;</span><br><span class="line">2008-08:08 08:08:08</span><br><span class="line">[root@rocky9 ~][0]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;sub(/:/,&quot;-&quot;,$2)&#x27;</span><br><span class="line">2008:08:08 08-08:08</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gsub(r,s,[t])å¯¹å­—ç¬¦ä¸²è¿›è¡Œrè¡¨ç¤ºåŒ¹é…å†…å®¹ï¼Œå¹¶å…¨éƒ¨æ›¿æ¢ä¸ºsæ‰€è¡¨ç¤ºçš„å†…å®¹<span class="variable">$1</span>,2,3è¡¨ç¤ºæ›¿æ¢çš„åˆ—</span></span><br><span class="line">[root@rocky9 ~][0]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;gsub(/:/,&quot;-&quot;,$1)&#x27;</span><br><span class="line">2008-08-08 08:08:08</span><br><span class="line">[root@rocky9 ~][0]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;gsub(/:/,&quot;-&quot;,$2)&#x27;</span><br><span class="line">2008:08:08 08-08-08</span><br><span class="line">[root@rocky9 ~][0]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;gsub(/:/,&quot;-&quot;,$0)&#x27;</span><br><span class="line">2008-08-08 08-08-08</span><br><span class="line">split(s,array,[r])ä»¥rä¸ºåˆ†éš”ç¬¦ï¼Œåˆ‡å‰²å­—ç¬¦ä¸²sï¼Œå¹¶å°†åˆ‡å‰²åçš„ç»“æœä¿å­˜è‡³arrayæ‰€è¡¨ç¤ºçš„æ•°ç»„ä¸­ï¼Œç¬¬ä¸€ä¸ªç´¢å¼•å€¼ä¸º1ï¼Œç¬¬äºŒä¸ªç´¢å¼•å€¼ä¸º2,...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-è‡ªå®šä¹‰å‡½æ•°"><a href="#3-è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="3. è‡ªå®šä¹‰å‡½æ•°"></a>3. è‡ªå®šä¹‰å‡½æ•°</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•</span></span><br><span class="line">function å‡½æ•°å ( å‚æ•°,å‚æ•°,.....) &#123;</span><br><span class="line">  å‡½æ•°ä½“</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">function man(x,y)</span><br><span class="line"><span class="meta prompt_"> x&gt;</span><span class="language-bash">y?var=x:var=y</span></span><br><span class="line"> return var</span><br><span class="line">&#125;</span><br><span class="line">BEGIN&#123;print man(a,b)&#125;</span><br><span class="line">awk &#x27;function man(x,y) &#123;return x &gt; y ? x : y;&#125;BEGIN&#123;print man(10,100);&#125;&#x27;</span><br></pre></td></tr></table></figure><h1 id="14-æ–‡ä»¶æŸ¥æ‰¾"><a href="#14-æ–‡ä»¶æŸ¥æ‰¾" class="headerlink" title="14. æ–‡ä»¶æŸ¥æ‰¾"></a>14. æ–‡ä»¶æŸ¥æ‰¾</h1><h3 id="14-1-locate-éå®æ—¶æŸ¥æ‰¾"><a href="#14-1-locate-éå®æ—¶æŸ¥æ‰¾" class="headerlink" title="14.1 locate éå®æ—¶æŸ¥æ‰¾"></a>14.1 locate éå®æ—¶æŸ¥æ‰¾</h3><p>ä¾æ‰˜äºæ–‡ä»¶ç´¢å¼•æ•°æ®åº“  &#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.db</p><p>å·¥ä½œç‰¹ç‚¹ï¼šé€Ÿåº¦å—ã€æ¨¡ç³ŠæŸ¥æ‰¾ã€éå®æ—¶æŸ¥æ‰¾ã€æœç´¢çš„æ˜¯æ–‡ä»¶å…¨è·¯å¾„ï¼Œä¸ä»…ä»…æ˜¯æ–‡ä»¶åã€å¯èƒ½åªæœç´¢ç”¨æˆ·å…·å¤‡è¯»å–å’Œæ‰§è¡Œæƒé™çš„ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆç´¢å¼•æ•°æ®åº“</span></span><br><span class="line">updatedb</span><br><span class="line"></span><br><span class="line">locate [é€‰é¡¹] PATTERN</span><br><span class="line"></span><br><span class="line">-iä¸åŒºåˆ†å¤§å°å†™æœç´¢</span><br><span class="line">-n ?åªåˆ—å‡ºå‰?ä¸ªåŒ¹é…åˆ°çš„é¡¹ç›®</span><br><span class="line">-rä½¿ç”¨åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æœç´¢è·¯å¾„åç§°æˆ–è·¯å¾„ä¸­åŒ…å«<span class="string">&quot;conf&quot;</span>çš„æ–‡ä»¶</span></span><br><span class="line">locate conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æœç´¢ä»¥<span class="string">&quot;conf&quot;</span>ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">locate -r &#x27;\.conf$&#x27;</span><br></pre></td></tr></table></figure><h3 id="14-2-find-å®æ—¶æŸ¥æ‰¾"><a href="#14-2-find-å®æ—¶æŸ¥æ‰¾" class="headerlink" title="14.2 find å®æ—¶æŸ¥æ‰¾"></a>14.2 find å®æ—¶æŸ¥æ‰¾</h3><p>findæ˜¯å®æ—¶æŸ¥æ‰¾å·¥å…·ï¼Œé€šè¿‡éå†æŒ‡å®šè·¯å¾„å®Œæˆæ–‡ä»¶æŸ¥æ‰¾</p><p>å·¥ä½œç‰¹ç‚¹ï¼šæŸ¥æ‰¾é€Ÿåº¦ç•¥æ…¢ï¼Œç²¾ç¡®æŸ¥æ‰¾ï¼Œå®æ—¶æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ¡ä»¶ä¸°å¯Œï¼Œå¯èƒ½åªæœç´¢ç”¨æˆ·å…·å¤‡è¯»å–å’Œæ‰§è¡Œæƒé™çš„ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find [é€‰é¡¹] [æŸ¥æ‰¾è·¯å¾„] [æŸ¥æ‰¾æ¡ä»¶] [å¤„ç†åŠ¨ä½œ]</span><br><span class="line"></span><br><span class="line">-depthå¯¹æ¯ä¸ªç›®å½•å…ˆå¤„ç†ç›®å½•å†…æ–‡ä»¶,å†å¤„ç†ç›®å½•æœ¬èº«</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¼šåˆ—å‡º/etcä¸‹æ‰€æœ‰çš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">find /etc</span><br></pre></td></tr></table></figure><h4 id="14-2-1-æŒ‡å®šæœç´¢ç›®å½•çš„æ·±åº¦"><a href="#14-2-1-æŒ‡å®šæœç´¢ç›®å½•çš„æ·±åº¦" class="headerlink" title="14.2.1 æŒ‡å®šæœç´¢ç›®å½•çš„æ·±åº¦"></a>14.2.1 æŒ‡å®šæœç´¢ç›®å½•çš„æ·±åº¦</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-maxdepth?æœ€å¤§æœç´¢ç›®å½•æ·±åº¦ï¼ŒæŒ‡å®šç›®å½•ä¸‹æ–‡ä»¶ä¸ºç¬¬1çº§</span><br><span class="line">-mindepth?æœ€å°æœç´¢ç›®å½•æ·±åº¦</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æœç´¢ç›®å½•æ·±åº¦ä¸º5å±‚ï¼Œæœ€å°æœç´¢2å±‚</span></span><br><span class="line">find /etc -maxdepth 5 -mindepth 2</span><br></pre></td></tr></table></figure><h4 id="14-2-2-æ ¹æ®æ–‡ä»¶åå’ŒinodeæŸ¥æ‰¾"><a href="#14-2-2-æ ¹æ®æ–‡ä»¶åå’ŒinodeæŸ¥æ‰¾" class="headerlink" title="14.2.2 æ ¹æ®æ–‡ä»¶åå’ŒinodeæŸ¥æ‰¾"></a>14.2.2 æ ¹æ®æ–‡ä»¶åå’ŒinodeæŸ¥æ‰¾</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-name &quot;æ–‡ä»¶åç§°&quot; æ–‡ä»¶åç§°æ”¯æŒé€šé…ç¬¦ï¼š*,?,[],[^]ï¼ˆä½¿ç”¨é€šé…ç¬¦å»ºè®®åŠ åŒå¼•å·ï¼‰</span><br><span class="line">-iname &quot;æ–‡ä»¶åç§°&quot; ä¸åŒºåˆ†å¤§å°å†™</span><br><span class="line">-inum ?æŒ‰inodeæŸ¥æ‰¾ï¼ˆæ–‡ä»¶ç¼–å·ï¼‰</span><br><span class="line">-samefile nameç›¸åŒinodeå·çš„æ–‡ä»¶,éœ€è¦ä¿è¯åœ¨åŒä¸€åˆ†åŒº</span><br><span class="line">-links ?é“¾æ¥æ•°ä¸º?çš„æ–‡ä»¶</span><br><span class="line">-regex &quot;PATTERN&quot;ä»¥æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•´ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œè€Œéæ–‡ä»¶åç§°</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾passwd</span></span><br><span class="line">find /etc -name &quot;*passwd*&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‰inodeæŸ¥æ‰¾</span></span><br><span class="line">find / -inum 34243 -ls</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒ¹é…confç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">find /etc -regex &quot;^.*\.conf&quot;</span><br></pre></td></tr></table></figure><h4 id="14-2-3-æ ¹æ®å±ä¸»ã€å±ç»„æŸ¥æ‰¾"><a href="#14-2-3-æ ¹æ®å±ä¸»ã€å±ç»„æŸ¥æ‰¾" class="headerlink" title="14.2.3 æ ¹æ®å±ä¸»ã€å±ç»„æŸ¥æ‰¾"></a>14.2.3 æ ¹æ®å±ä¸»ã€å±ç»„æŸ¥æ‰¾</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-user &quot;username&quot;æŸ¥æ‰¾å±ä¸»ä¸ºä¸ºæŒ‡å®šç”¨æˆ·UIDçš„æ–‡ä»¶</span><br><span class="line">-group &quot;groupname&quot;æŸ¥æ‰¾å±ç»„ä¸ºæŒ‡å®šGIDçš„æ–‡ä»¶</span><br><span class="line">-uid &quot;UID&quot;æŸ¥æ‰¾å±ä¸»ä¸ºæŒ‡å®šUIDå·çš„æ–‡ä»¶</span><br><span class="line">-gid &quot;GID&quot;æŸ¥æ‰¾ç»„æŒ‡å®šç»„IDçš„æ–‡ä»¶</span><br><span class="line">-nouser æŸ¥æ‰¾æ²¡æœ‰å±ä¸»çš„æ–‡ä»¶</span><br><span class="line">-nogroup æŸ¥æ‰¾æ²¡æœ‰å±ç»„çš„æ–‡ä»¶</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾è´¦æˆ·nginxæ–‡ä»¶</span></span><br><span class="line">find  / -user nginx </span><br></pre></td></tr></table></figure><h4 id="14-2-4-æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾"><a href="#14-2-4-æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾" class="headerlink" title="14.2.4 æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾"></a>14.2.4 æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-type æ–‡ä»¶ç±»å‹</span><br><span class="line"></span><br><span class="line">fæ™®é€šæ–‡ä»¶</span><br><span class="line">dç›®å½•æ–‡ä»¶</span><br><span class="line">lé“¾æ¥æ–‡ä»¶</span><br><span class="line">så¥—æ¥å­—æ–‡ä»¶</span><br><span class="line">bå—æ–‡ä»¶</span><br><span class="line">cå­—ç¬¦è®¾å¤‡æ–‡ä»¶</span><br><span class="line">pç®¡é“æ–‡ä»¶</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾ç³»ç»Ÿä¸Šçš„å—æ–‡ä»¶</span></span><br><span class="line">find / -type b</span><br></pre></td></tr></table></figure><h4 id="14-2-5-æœç´¢ç©ºæ–‡ä»¶æˆ–ç›®å½•ã€"><a href="#14-2-5-æœç´¢ç©ºæ–‡ä»¶æˆ–ç›®å½•ã€" class="headerlink" title="14.2.5 æœç´¢ç©ºæ–‡ä»¶æˆ–ç›®å½•ã€"></a>14.2.5 æœç´¢ç©ºæ–‡ä»¶æˆ–ç›®å½•ã€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-emptyæœç´¢å¤§å°ä¸º0çš„æ–‡ä»¶æˆ–ç©ºç›®å½•</span><br><span class="line"></span><br><span class="line">find /app -type d -empty</span><br></pre></td></tr></table></figure><h4 id="14-2-6-ä¸æˆ–é"><a href="#14-2-6-ä¸æˆ–é" class="headerlink" title="14.2.6 ä¸æˆ–é"></a>14.2.6 ä¸æˆ–é</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-aä¸</span><br><span class="line">-oæˆ–</span><br><span class="line">-not ! é</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°æ‹¬å·å¯ä»¥æå‡ä¼˜å…ˆçº§</span></span><br><span class="line">find /etc/ \( -type d -o -type l \)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾å¥—æ¥å­—æ–‡ä»¶æˆ–å—æ–‡ä»¶</span></span><br><span class="line">find / -type s -o -type b</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾</span></span><br></pre></td></tr></table></figure><h4 id="14-2-7-å¾·-Â·-æ‘©æ ¹å®šå¾‹"><a href="#14-2-7-å¾·-Â·-æ‘©æ ¹å®šå¾‹" class="headerlink" title="14.2.7 å¾· Â· æ‘©æ ¹å®šå¾‹"></a>14.2.7 å¾· Â· æ‘©æ ¹å®šå¾‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆéAï¼‰æˆ–ï¼ˆéBï¼‰=éï¼ˆAä¸”Bï¼‰</span><br><span class="line">ï¼ˆéAï¼‰ä¸”ï¼ˆéBï¼‰=éï¼ˆAæˆ–Bï¼‰</span><br><span class="line"></span><br><span class="line">!A -a !B = !(A -o B)</span><br><span class="line">!A -o !B = !(A -a B)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾ä¸å±äºç”¨æˆ· <span class="string">&quot;zhangyu&quot;</span> æˆ–ä¸å±äºç”¨æˆ· <span class="string">&quot;zhangsan&quot;</span> çš„æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">find ! -user zhangyu -o ! -user zhangsan</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾æ—¢ä¸å±äºç”¨æˆ· <span class="string">&quot;zhangyu&quot;</span> åˆä¸å±äºç”¨æˆ· <span class="string">&quot;zhangsan&quot;</span> çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚</span></span><br><span class="line">find ! \( -user zhangyu -a -user zhangsan \) </span><br></pre></td></tr></table></figure><h4 id="14-2-8-æ’é™¤æ–‡ä»¶"><a href="#14-2-8-æ’é™¤æ–‡ä»¶" class="headerlink" title="14.2.8 æ’é™¤æ–‡ä»¶"></a>14.2.8 æ’é™¤æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾etcä¸‹ï¼Œé™¤/etc/sane.ç›®å½•çš„å…¶ä»–æ‰€æœ‰.confåç¼€çš„æ–‡ä»¶</span></span><br><span class="line">find /etc/ -path &#x27;/etc/sane.d&#x27; -a -prune -o -name &quot;*.conf&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾etcä¸‹ï¼Œé™¤/etc/saneå’Œ/etc/fontsä¸¤ä¸ªç›®å½•çš„æ‰€æœ‰.confåç¼€çš„æ–‡ä»¶</span></span><br><span class="line">find /etc \( -path &quot;/etc/sane.d&quot; -o -path &quot;/etc/fonts&quot; \) -prune -o -name &quot;*.conf&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ’é™¤/procå’Œ/sysç›®å½•</span></span><br><span class="line">find / \( -path &quot;/proc/&quot; -o -path &quot;/proc/&quot; \) -a -prune -o -type f -a -mmin -1</span><br></pre></td></tr></table></figure><h4 id="14-2-9-æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾"><a href="#14-2-9-æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾" class="headerlink" title="14.2.9 æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾"></a>14.2.9 æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">find [é€‰é¡¹] [æŸ¥æ‰¾è·¯å¾„] [æŸ¥æ‰¾æ¡ä»¶] [å¤„ç†åŠ¨ä½œ]</span><br><span class="line"></span><br><span class="line">-size [+|-]?å¸¸ç”¨å•ä½ï¼škï¼ŒM,G,c(byte)ï¼Œæ³¨æ„å¤§å°å†™æ•æ„Ÿ</span><br><span class="line">6kè¡¨ç¤º5kï¼Œ6k</span><br><span class="line">-6kè¡¨ç¤º0-5k</span><br><span class="line">+6kè¡¨ç¤º6kä»¥ä¸Š,ä¸åŒ…æ‹¬6k</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">dd if=/dev/zero of=bing.log bs=100M count=10</span><br><span class="line">find / -size +900M</span><br></pre></td></tr></table></figure><h4 id="14-2-10-æ ¹æ®æ—¶é—´æˆ³æŸ¥è¯¢"><a href="#14-2-10-æ ¹æ®æ—¶é—´æˆ³æŸ¥è¯¢" class="headerlink" title="14.2.10 æ ¹æ®æ—¶é—´æˆ³æŸ¥è¯¢"></a>14.2.10 æ ¹æ®æ—¶é—´æˆ³æŸ¥è¯¢</h4><p>findå‘½ä»¤è®¤ä¸º24å°æ—¶ä¹‹å†…ä¸ºç¬¬0å¤©</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">å¤©</span><br><span class="line">-atime [+|-]10</span><br><span class="line">10è¡¨ç¤º10-11å¤©ä¹‹é—´</span><br><span class="line">+10è¡¨ç¤º11å¤©ä»¥å</span><br><span class="line">-10è¡¨ç¤º0-10å¤©ä¹‹é—´</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">find /root -atime -10</span><br><span class="line"></span><br><span class="line">åˆ†é’Ÿ</span><br><span class="line">-mmin  29</span><br><span class="line">-2929åˆ†é’Ÿä¹‹å†…å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span><br><span class="line">+2929åˆ†é’Ÿä¹‹å‰å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">find /etc/ -mmin -20</span><br></pre></td></tr></table></figure><h4 id="14-2-11-æ ¹æ®æƒé™æŸ¥æ‰¾"><a href="#14-2-11-æ ¹æ®æƒé™æŸ¥æ‰¾" class="headerlink" title="14.2.11 æ ¹æ®æƒé™æŸ¥æ‰¾"></a>14.2.11 æ ¹æ®æƒé™æŸ¥æ‰¾</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-perm [/|-]MODE</span><br><span class="line"> MODEç²¾ç¡®æƒé™åŒ¹é…</span><br><span class="line">/MODEä»»ä½•ä¸€ç±»ï¼ˆuï¼Œgï¼Œoï¼‰ä»»æ„ä¸€ç±»å¯¹è±¡æ»¡è¶³å¯¹åº”åŒ¹é…çš„æƒé™å³å¯ï¼Œæˆ–å…³ç³»</span><br><span class="line">-MODEæ¯ä¸€ç±»å¯¹è±¡éƒ½å¿…é¡»æ»¡è¶³æŒ‡å®šæƒé™ï¼Œæ‰åŒ¹é…ã€‚ä¸å…³ç³»</span><br><span class="line">0:è¡¨ç¤ºä¸å…³æ³¨</span><br><span class="line">    </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾rootä¸‹600æƒé™çš„æ–‡ä»¶</span></span><br><span class="line">find /root -perm 600</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾etcä¸‹gæœ‰xæƒé™æˆ–uæœ‰xæƒé™çš„æ–‡ä»¶</span></span><br><span class="line">find /etc -perm /g+x,u+x</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åŒ¹é…rootç›®å½•ä¸‹600æƒé™ä¸”æ˜¯æ–‡ä»¶å¤¹çš„æ–‡ä»¶</span></span><br><span class="line">find /root/ -perm 600 -a -type d</span><br></pre></td></tr></table></figure><h4 id="14-2-12-å¤„ç†æœç´¢åˆ°çš„æ–‡ä»¶"><a href="#14-2-12-å¤„ç†æœç´¢åˆ°çš„æ–‡ä»¶" class="headerlink" title="14.2.12 å¤„ç†æœç´¢åˆ°çš„æ–‡ä»¶"></a>14.2.12 å¤„ç†æœç´¢åˆ°çš„æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-printé»˜è®¤çš„å¤„ç†åŠ¨ä½œï¼Œæ˜¾ç¤ºè‡³å±å¹•</span><br><span class="line">-lsç±»ä¼¼äºå¯¹æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶æ‰§è¡Œls -læŒ‡ä»¤</span><br><span class="line">-deleteåˆ é™¤æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶</span><br><span class="line">-fls fileæ‰¾åˆ°çš„æ‰€æœ‰æ–‡ä»¶é•¿æ ¼å¼ä¿¡æ¯ä¿å­˜è‡³fileä¸­</span><br><span class="line">-ok cmd &#123;&#125; \;å¯¹æŸ¥æ‰¾åˆ°çš„æ¯ä¸ªæ–‡ä»¶æ‰§è¡Œç”±cmdæŒ‡å®šçš„å‘½ä»¤ï¼Œæ¯ä¸ªæ–‡ä»¶æ‰§è¡Œå‘½ä»¤å‰éƒ½ä¼šäº¤äº’å¼è¦æ±‚ç”¨æˆ·ç¡®è®¤</span><br><span class="line">-exec cmd &#123;&#125; \;å¯¹æŸ¥æ‰¾åˆ°çš„æ¯ä¸ªæ–‡ä»¶æ‰§è¡Œç”±cmdæŒ‡å®šçš„å‘½ä»¤</span><br><span class="line">&#123;&#125;ç”¨äºå¼•ç”¨æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶åç§°è‡ªèº«</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æœç´¢åˆ°çš„æ–‡ä»¶</span></span><br><span class="line">find /data -size +5M -delete</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç±»ä¼¼<span class="built_in">ls</span> -lié‡å®šå‘</span></span><br><span class="line">find /data -fls /root/find.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ï¼Œorigè¿™ä¸ªæ‰©å±•å</span></span><br><span class="line">find -name &quot;.conf&quot; -exec cp &#123;&#125; &#123;&#125;.orig \;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æç¤ºåˆ é™¤å­˜åœ¨æ—¶é—´è¶…è¿‡3å¤©ä»¥ä¸Šçš„joeçš„ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">find /tmp -ctime +3 -user joe -ok rm &#123;&#125; \;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨ä¸»ç›®å½•ä¸­å¯»æ‰¾å¯è¢«å…¶ä»–ç”¨æˆ·å†™å…¥çš„æ–‡ä»¶</span></span><br><span class="line">find ~ -perm -002 -exec chmod o-w &#123;&#125; \;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾/dataä¸‹çš„æƒé™ä¸º644ï¼Œåç¼€ä¸ºshçš„æ™®é€šæ–‡ä»¶ï¼Œå¢åŠ æ‰§è¡Œæƒé™</span></span><br><span class="line">find /data -type f -perm 664 -name &quot;*.sh&quot; -exec chmod 755 &#123;&#125; \;</span><br></pre></td></tr></table></figure><h4 id="14-2-13-xargs"><a href="#14-2-13-xargs" class="headerlink" title="14.2.13 xargs"></a>14.2.13 xargs</h4><p>xargså¯ä»¥å°†æ”¶åˆ°çš„æ ‡å‡†è¾“å‡ºï¼Œä¼ ç»™ä¸‹ä¸€ä¸ªå‘½ä»¤ï¼Œä½œä¸ºå…¶å‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-n ?è¡¨ç¤ºä¸€æ¬¡ä¼ ç»™åé¢æŒ‡ä»¤çš„å‚æ•°æ˜¯å¤šå°‘ä¸ª</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾æœ‰ç‰¹æ®Šæƒé™çš„æ–‡ä»¶ï¼Œå¹¶æ’åº,æ³¨æ„,æ­¤å¤„åŒ¹é…æ¡ä»¶é€»è¾‘ä¸ä¸€æ ·ï¼Œå‚è€ƒæ ¹æ®æƒé™æŸ¥æ‰¾ç« èŠ‚</span></span><br><span class="line">find /bin/ -perm /7000 | xargs ls -sl</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥å­—ç¬¦nulåˆ†éš”</span></span><br><span class="line">find -type f -name &quot;*.txt&quot; -print0 | xargs -o rm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¹¶å‘æ‰§è¡Œå¤šä¸ªè¿›ç¨‹</span></span><br><span class="line">seq 100 | xargs -i -p10 wget -p /data http:/10.0.0.8/.html</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¹¶è¡Œä¸‹è½½è§†é¢‘</span></span><br><span class="line">seq 389 | xargs -i -p3 you-get https://www.bilibili.com/video/avsaddaewq?p=&#123;&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰¹é‡åˆ›å»ºè´¦æˆ·</span></span><br><span class="line">echo user&#123;1..10&#125; | xargs -n1 useradd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ç©ºä½œä¸ºæ–‡ä»¶çš„åˆ†éš”ç¬¦</span></span><br><span class="line">find -print0 | xargs -0 ls -Sl</span><br></pre></td></tr></table></figure><h1 id="15-å‹ç¼©å’Œè§£å‹ç¼©"><a href="#15-å‹ç¼©å’Œè§£å‹ç¼©" class="headerlink" title="15. å‹ç¼©å’Œè§£å‹ç¼©"></a>15. å‹ç¼©å’Œè§£å‹ç¼©</h1><h3 id="15-1-compress"><a href="#15-1-compress" class="headerlink" title="15.1 compress"></a>15.1 compress</h3><p>å®‰è£…ï¼šyum -y install ncompress</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">compress [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-dè§£å‹ç¼©ï¼Œç›¸å½“äºuncompress</span><br><span class="line">-cç»“æœè¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºï¼Œä¸è¾“å‡ºåŸæ–‡ä»¶</span><br><span class="line">-væ˜¾ç¤ºè¯¦æƒ…</span><br><span class="line">zcatæŸ¥çœ‹å‹ç¼©æ–‡ä»¶å†…å®¹</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">compress bing.logè¾“å‡º--&gt;bing.log.Z</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ç¼©</span></span><br><span class="line">uncompress bing.log.Zè¾“å‡º--&gt;bing.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©æ—¶ä¿ç•™æºæ–‡ä»¶</span></span><br><span class="line">compress -c bing.log &gt; bing.log.Z</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹æ—¶ä¿ç•™å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">uncompress -c bing.log.Z &gt; bing.log</span><br></pre></td></tr></table></figure><h3 id="15-2-gzip"><a href="#15-2-gzip" class="headerlink" title="15.2 gzip"></a>15.2 gzip</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">compress [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-dè§£å‹ç¼©ï¼Œç›¸å½“äºgunzip</span><br><span class="line">-kä¿ç•™åŸæ–‡ä»¶ï¼ˆcentos8æ‰æ”¯æŒï¼‰</span><br><span class="line">-cå‹ç¼©ç»“æœè¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºï¼Œä¿ç•™åŸæ–‡ä»¶ä¸å˜</span><br><span class="line">-?æŒ‡å®šå‹ç¼©æ¯”ï¼Œ?å–å€¼ä¸º1-9ï¼Œå€¼è¶Šå¤§å‹ç¼©æ¯”è¶Šå¤§</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">gzip bing.log  è¾“å‡º--&gt;bing.log.gz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ç¼©</span></span><br><span class="line">gunzip bing.log.gzè¾“å‡º--&gt;bing.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©æ—¶ä¿ç•™æºæ–‡ä»¶</span></span><br><span class="line">gzip -c bing.log &gt; bing.log.gz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹æ—¶ä¿ç•™å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">gunzip -c bing.log.gz  &gt; bing.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–‡ä»¶é‡å®šå‘å‹ç¼©</span></span><br><span class="line">cat bing.log | gzip &gt; bing.log.gz</span><br></pre></td></tr></table></figure><h3 id="15-3-bzip2"><a href="#15-3-bzip2" class="headerlink" title="15.3 bzip2"></a>15.3 bzip2</h3><p>å®‰è£…ï¼šyum -y install bzip2</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">bzip2 [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-kä¿ç•™åŸæ–‡ä»¶</span><br><span class="line">-dè§£å‹ç¼©</span><br><span class="line">-cå‹ç¼©ç»“æœè¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºï¼Œä¿ç•™åŸæ–‡ä»¶ä¸æ”¹å˜</span><br><span class="line">-?æŒ‡å®šå‹ç¼©æ¯”ï¼Œ?å–å€¼ä¸º1-9ï¼Œå€¼è¶Šå¤§å‹ç¼©æ¯”è¶Šå¤§ï¼Œé»˜è®¤ä¸º9</span><br><span class="line">bzcatæŸ¥çœ‹å‹ç¼©æ–‡ä»¶å†…å®¹</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">bzip2 bing.log  è¾“å‡º--&gt;bing.log.bz2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ç¼©</span></span><br><span class="line">bunzip2 bing.log.bz2è¾“å‡º--&gt;bing.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©ä¿ç•™åŸæ–‡ä»¶</span></span><br><span class="line">bzip2 -k bing.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ä¿ç•™åŸæ–‡ä»¶</span></span><br><span class="line">bunzip2 -k bing.log.bz2 </span><br></pre></td></tr></table></figure><h3 id="15-4-xz"><a href="#15-4-xz" class="headerlink" title="15.4 xz"></a>15.4 xz</h3><p>å®‰è£…ï¼šyum -y install xz</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">xz [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-kkeepï¼Œä¿ç•™åŸæ–‡ä»¶</span><br><span class="line">-dè§£å‹ç¼©</span><br><span class="line">-cå‹ç¼©ç»“æœè¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºï¼Œä¿ç•™åŸæ–‡ä»¶ä¸æ”¹å˜</span><br><span class="line">-?æŒ‡å®šå‹ç¼©æ¯”ï¼Œ?å–å€¼ä¸º1-9ï¼Œé»˜è®¤ä¸º6</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">xz bing.logè¾“å‡º--&gt;bing.log.xz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ç¼©</span></span><br><span class="line">xz -d bing.log.xzè¾“å‡º--&gt;bing.log</span><br><span class="line">unxz bing.log.xz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©ä¿ç•™åŸæ–‡ä»¶</span></span><br><span class="line">xz -c bing.log &gt; bing.log.xz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹ä¿ç•™åŸæ–‡ä»¶</span></span><br><span class="line">xz -d -c bing.log.xz &gt; bing.log</span><br></pre></td></tr></table></figure><h3 id="15-5-zip-å‹ç¼©æ–‡ä»¶å¤¹"><a href="#15-5-zip-å‹ç¼©æ–‡ä»¶å¤¹" class="headerlink" title="15.5 zip å‹ç¼©æ–‡ä»¶å¤¹"></a>15.5 zip å‹ç¼©æ–‡ä»¶å¤¹</h3><p>å®‰è£…ï¼šyum -y install zip unzip</p><p>zipå¯ä»¥å®ç°æ‰“åŒ…ç›®å½•å’Œå¤šä¸ªæ–‡ä»¶æˆä¸€ä¸ªæ–‡ä»¶å¹¶å‹ç¼©ï¼Œä½†æ˜¯å¯èƒ½ä¼šä¸¢å¤±æ–‡ä»¶å±æ€§ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">zip å‹ç¼©åçš„æ–‡ä»¶ åŸæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-ré’ˆå¯¹æ–‡ä»¶å¤¹è¿›è¡Œæ‰“åŒ…</span><br><span class="line">-qé™é»˜æ¨¡å¼</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©å•ä¸ªæ–‡ä»¶ï¼ˆä¼šä¿ç•™åŸæ–‡ä»¶ï¼‰</span></span><br><span class="line">zip -q bing.log.zip bing.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹æ–‡ä»¶</span></span><br><span class="line">unzip -q bing.log.zip</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©å¤šä¸ªæ–‡ä»¶åˆ°ä¸€ä¸ªå‹ç¼©åŒ…</span></span><br><span class="line">zip -q /root/all.zip *</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©æ–‡ä»¶å¤¹</span></span><br><span class="line">zip -qr etc.zip /etc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹æ–‡ä»¶å¤¹</span></span><br><span class="line">unzip -q etc.zip</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">unzip -q etc.zip -d /etc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸æ‰“åŒ…ç›®å½•ï¼Œåªæ‰“åŒ…å½“å‰æ–‡ä»¶</span></span><br><span class="line">cd /etc</span><br><span class="line">zip -qr /root/etc.zip *</span><br><span class="line"></span><br><span class="line">cd /root</span><br><span class="line">unzip -q etc.zip</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="16-æ–‡ä»¶å½’æ¡£-tar"><a href="#16-æ–‡ä»¶å½’æ¡£-tar" class="headerlink" title="16 æ–‡ä»¶å½’æ¡£ tar"></a>16 æ–‡ä»¶å½’æ¡£ tar</h1><h3 id="16-1-tar-æ‰“åŒ…å‹ç¼©"><a href="#16-1-tar-æ‰“åŒ…å‹ç¼©" class="headerlink" title="16.1 tar æ‰“åŒ…å‹ç¼©"></a>16.1 tar æ‰“åŒ…å‹ç¼©</h3><p>tarå¯ä»¥å¯¹ç›®å½•å’Œå¤šä¸ªæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥å‹ç¼©ï¼Œä¿ç•™æ–‡ä»¶å±æ€§ä¸ä¸¢å¤±ï¼Œå¸¸ç”¨äºå¤‡ä»½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">tar é€‰é¡¹ ç›®æ ‡æ–‡ä»¶ æºæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">-Cè§£åŒ…åˆ°æŒ‡å®šæ–‡ä»¶å¤¹</span><br><span class="line">-cæ‰“åŒ…</span><br><span class="line">-té¢„è§ˆ</span><br><span class="line">-xè§£åŒ…</span><br><span class="line">-vfé€šç”¨é€‰é¡¹ ä»£è¡¨æ–‡ä»¶</span><br><span class="line">-jä½¿ç”¨bizp2å¯¹æ‰“åŒ…æ–‡ä»¶è¿›è¡Œå‹ç¼©</span><br><span class="line">-Jä½¿ç”¨xzå¯¹æ‰“åŒ…æ–‡ä»¶è¿›è¡Œå‹ç¼©</span><br><span class="line">-zä½¿ç”¨gzipå¯¹æ‰“åŒ…æ–‡ä»¶è¿›è¡Œå‹ç¼©</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“åŒ…æ–‡ä»¶å¤¹ï¼ˆä¼šä¿ç•™åŸæ–‡ä»¶ï¼‰</span></span><br><span class="line">tar -cvf /root/home.tar /home</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é¢„è§ˆæ‰“åŒ…æ–‡ä»¶å¤¹å†…å®¹</span></span><br><span class="line">tar -tvf home.tar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£åŒ…æ–‡ä»¶å¤¹ï¼ˆä¼šä¿ç•™åŸæ–‡ä»¶ï¼‰</span></span><br><span class="line">tar -xvf home.tar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£åŒ…æ–‡ä»¶å¤¹åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">tar -xvf home.tar -C /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“åŒ…æ–‡ä»¶ä¸åŒ…æ‹¬ç›®å½•è‡ªèº«</span></span><br><span class="line">cd /etc</span><br><span class="line">tar -zcvf /root/etc.tar.gz *</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“åŒ…ç›®å½•å¹¶ä½¿ç”¨bizp2è¿›è¡Œå‹ç¼©</span></span><br><span class="line">tar -jcvf home.tar.bz2 /home</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“åŒ…ç›®å½•å¹¶ä½¿ç”¨xzè¿›è¡Œå‹ç¼©</span></span><br><span class="line">tar -Jcvf home.tar.xz /home</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“åŒ…ç›®å½•å¹¶ä½¿ç”¨gzipè¿›è¡Œå‹ç¼©</span></span><br><span class="line">tar -zcvf home.tar.gz /home</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹å¹¶è§£åŒ…åˆ°æŒ‡å®šç›®å½•ï¼ˆxé€‰é¡¹å¯¹äºä¸åŒå‹ç¼©æ ¼å¼æ˜¯é€šç”¨çš„ï¼‰</span></span><br><span class="line">tar -xvf home.tar.xz -C /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“åŒ…å¤šä¸ªæ–‡ä»¶å¹¶ä½¿ç”¨gzipè¿›è¡Œå‹ç¼©</span></span><br><span class="line">tar -zcvf home.tar.gz /mysql/data/bing*</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨tarè¿›è¡Œæ–‡ä»¶å¤åˆ¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†/etcå¤åˆ¶åˆ°/rootä¸‹</span></span><br><span class="line">tar -c /etc | tar -x -C /root/</span><br></pre></td></tr></table></figure><p>æ’é™¤æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-excludeæ’é™¤æ–‡ä»¶</span></span><br><span class="line">tar -zcvf /root/a.tgz --exclude=/app/host1 -exclude=/app/host2 /app</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-Té€‰é¡¹æŒ‡å®šè¾“å…¥æ–‡ä»¶ï¼Œ-Xé€‰é¡¹æŒ‡å®šåŒ…å«è¦æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line">tar -zcvf mybackup.tgz -T /root/includefilelist -x /excludefilelist</span><br></pre></td></tr></table></figure><h3 id="16-2-split-æ–‡ä»¶åˆ‡å‰²"><a href="#16-2-split-æ–‡ä»¶åˆ‡å‰²" class="headerlink" title="16.2 split æ–‡ä»¶åˆ‡å‰²"></a>16.2 split æ–‡ä»¶åˆ‡å‰²</h3><p>splitå‘½ä»¤å¯ä»¥åˆ†å‰²ä¸€ä¸ªæ–‡ä»¶ä¸ºå¤šä¸ªæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‰40Kå¤§å°åˆ‡å‰²æ–‡ä»¶bin.log.gz,åˆ°ç›®å½•/root/bin.log.gzä¸‹</span></span><br><span class="line">split -b 40K bin.log.gz /root/bin.log.gz</span><br><span class="line"></span><br><span class="line">-rw-r--r-- 1 root root 203555 Nov  2 09:59 bin.log.gz</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:00 bin.log.gzaa</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:00 bin.log.gzab</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:00 bin.log.gzac</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:00 bin.log.gzad</span><br><span class="line">-rw-r--r-- 1 root root  39715 Nov  2 10:00 bin.log.gzae</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨æ•°å­—æ–¹å¼ä½œä¸ºåˆ‡å‰²æ–‡ä»¶å</span></span><br><span class="line">split -b 40K -d bin.log.gz /root/bin.log.gz</span><br><span class="line"></span><br><span class="line">-rw-r--r-- 1 root root 203555 Nov  2 09:59 bin.log.gz</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:02 bin.log.gz00</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:02 bin.log.gz01</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:02 bin.log.gz02</span><br><span class="line">-rw-r--r-- 1 root root  40960 Nov  2 10:02 bin.log.gz03</span><br><span class="line">-rw-r--r-- 1 root root  39715 Nov  2 10:02 bin.log.gz04</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå¹¶åˆ‡å‰²çš„æ–‡ä»¶</span></span><br><span class="line">cat /root/bin.log.gz* &gt; bin.log.gz</span><br></pre></td></tr></table></figure><h1 id="17-rpm-è½¯ä»¶åŒ…ç®¡ç†"><a href="#17-rpm-è½¯ä»¶åŒ…ç®¡ç†" class="headerlink" title="17. rpm è½¯ä»¶åŒ…ç®¡ç†"></a>17. rpm è½¯ä»¶åŒ…ç®¡ç†</h1><h3 id="17-1-gcc-ç¼–è¯‘è¿‡ç¨‹"><a href="#17-1-gcc-ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="17.1 gcc ç¼–è¯‘è¿‡ç¨‹"></a>17.1 gcc ç¼–è¯‘è¿‡ç¨‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ†æ­¥éª¤ç¼–è¯‘è¿è¡Œ</span></span><br><span class="line">gcc -E hello.c -o hello.iå¯¹hello.cæ–‡ä»¶è¿›è¡Œé¢„å¤„ç†ï¼Œç”Ÿæˆäº†hello.iæ–‡ä»¶</span><br><span class="line">gcc -S hello.i -o hello.så¯¹é¢„å¤„ç†æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆäº†æ±‡ç¼–æ–‡ä»¶</span><br><span class="line">gcc -c hello.s -o hello.oå¯¹æ±‡ç¼–æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆäº†ç›®æ ‡æ–‡ä»¶</span><br><span class="line">gcc hello.o -o helloå¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œç”Ÿæˆäº†å¯æ‰§è¡Œæ–‡ä»¶</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸€æ­¥å®ç°ç¼–è¯‘è¿‡ç¨‹</span></span><br><span class="line">gcc hello.c -o helloç›´æ¥ç¼–è¯‘é“¾æ¥æˆå¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="17-2-è½¯ä»¶æ¨¡å—çš„é™æ€å’ŒåŠ¨æ€é“¾æ¥"><a href="#17-2-è½¯ä»¶æ¨¡å—çš„é™æ€å’ŒåŠ¨æ€é“¾æ¥" class="headerlink" title="17.2 è½¯ä»¶æ¨¡å—çš„é™æ€å’ŒåŠ¨æ€é“¾æ¥"></a>17.2 è½¯ä»¶æ¨¡å—çš„é™æ€å’ŒåŠ¨æ€é“¾æ¥</h3><h4 id="17-2-1-åŠ¨æ€é“¾æ¥"><a href="#17-2-1-åŠ¨æ€é“¾æ¥" class="headerlink" title="17.2.1 åŠ¨æ€é“¾æ¥"></a>17.2.1 åŠ¨æ€é“¾æ¥</h4><p>åŠ¨æ€é“¾æ¥ä¸»è¦å°±æ˜¯æŠŠå„ä¸ªæ¨¡å—ä¹‹é—´äº’ç›¸å¼•ç”¨çš„éƒ¨åˆ†å¤„ç†å¥½ï¼Œä½¿å¾—å„ä¸ªæ¨¡å—ä¹‹é—´èƒ½å¤Ÿæ­£ç¡®çš„è¡”æ¥ï¼Œåˆ†ä¸ºé™æ€å’ŒåŠ¨æ€é“¾æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶ä¾èµ–é‚£äº›åº“</span></span><br><span class="line">[root@rocky9 ~][0]# ldd /bin/ls</span><br><span class="line"></span><br><span class="line">linux-vdso.so.1 (0x00007ffec07ae000)</span><br><span class="line">libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007f12e1a77000)</span><br><span class="line">libcap.so.2 =&gt; /lib64/libcap.so.2 (0x00007f12e1a6d000)</span><br><span class="line">libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f12e1800000)</span><br><span class="line">libpcre2-8.so.0 =&gt; /lib64/libpcre2-8.so.0 (0x00007f12e1764000)</span><br><span class="line">/lib64/ld-linux-x86-64.so.2 (0x00007f12e1ad0000)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŠ è½½é…ç½®æ–‡ä»¶ç§æŒ‡å®šçš„åº“æ–‡ä»¶</span></span><br><span class="line">ldconfig</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæœ¬æœºå·²ç»ç¼“å­˜çš„æ‰€æœ‰å¯ç”¨åº“æ–‡ä»¶ååŠè·¯å¾„æ˜ å°„å…³ç³»</span></span><br><span class="line">/sbin/ldconfig -p</span><br></pre></td></tr></table></figure><h4 id="17-2-2-é™æ€é“¾æ¥"><a href="#17-2-2-é™æ€é“¾æ¥" class="headerlink" title="17.2.2 é™æ€é“¾æ¥"></a>17.2.2 é™æ€é“¾æ¥</h4><p>é™æ€é“¾æ¥ä¼šæŠŠå¯¹åº”çš„ä¾èµ–åº“å¤åˆ¶ä¸€ä»½åˆ°åŒ…</p><h4 id="17-2-4-åº“æ–‡ä»¶è¢«ç ´åæ¢å¤"><a href="#17-2-4-åº“æ–‡ä»¶è¢«ç ´åæ¢å¤" class="headerlink" title="17.2.4 åº“æ–‡ä»¶è¢«ç ´åæ¢å¤"></a>17.2.4 åº“æ–‡ä»¶è¢«ç ´åæ¢å¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1.å¼€æœºè¯»è¿›åº¦æ¡æŒ‰ä¸€æ¬¡Esc</span><br><span class="line"></span><br><span class="line">2.é€‰æ‹©CD-ROM driveå¯åŠ¨</span><br><span class="line"></span><br><span class="line">3.é€‰æ‹©ç¬¬ä¸‰é¡¹Troubleshooting</span><br><span class="line"></span><br><span class="line">4.é€‰æ‹©ç¬¬äºŒé¡¹Rescue a CentOS systemæ•‘æ´æ¨¡å¼</span><br><span class="line"></span><br><span class="line">5.ç­‰å¾…è¿›å…¥é€‰é¡¹ç•Œé¢è¾“å…¥1ï¼ˆContinueï¼‰</span><br><span class="line"></span><br><span class="line">6.æ­¤æ—¶å¯ä»¥çœ‹åˆ°chroot /mnt/sysimage ï¼ˆæ ¹å·²ç»è¢«æŒ‚è½½åˆ°äº†/mnt/sysimageï¼‰</span><br><span class="line"></span><br><span class="line">7.please press &lt;return&gt; to get a shell. æŒ‰å›è½¦ï¼Œå¼€å¯shell</span><br><span class="line"></span><br><span class="line">8.æ­¤æ—¶ä½¿ç”¨å…‰ç›˜å¯åŠ¨ï¼Œä½¿ç”¨çš„æ˜¯å…‰ç›˜å†…çš„æ“ä½œç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line">9.å°†ç ´åçš„åº“æ–‡ä»¶æ¢å¤åˆ°åŸæ¥æ ¹ä¸‹ï¼ˆåº“æ–‡ä»¶è¢«ç§»åŠ¨ï¼‰</span><br><span class="line">mv /mut/sysumage/data/libc.so.6 /mnt/sysimage/lib64/</span><br><span class="line"></span><br><span class="line">9.å°†ç ´åçš„åº“æ–‡ä»¶æ¢å¤åˆ°åŸæ¥æ ¹ä¸‹ï¼ˆåº“æ–‡ä»¶è¢«åˆ é™¤ï¼‰</span><br><span class="line">mv /lib64/libc.so.6 /mnt/sysimage/lib64/</span><br><span class="line"></span><br><span class="line">10.Ctrl+Alt+Delete æˆ– reboot é‡å¯æ“ä½œç³»ç»Ÿ</span><br></pre></td></tr></table></figure><h3 id="17-3-è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"><a href="#17-3-è½¯ä»¶åŒ…ç®¡ç†å·¥å…·" class="headerlink" title="17.3 è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"></a>17.3 è½¯ä»¶åŒ…ç®¡ç†å·¥å…·</h3><h4 id="17-3-1-æŸ¥çœ‹-è§£å‹åŒ…æ–‡ä»¶å†…å®¹"><a href="#17-3-1-æŸ¥çœ‹-è§£å‹åŒ…æ–‡ä»¶å†…å®¹" class="headerlink" title="17.3.1 æŸ¥çœ‹&#x2F;è§£å‹åŒ…æ–‡ä»¶å†…å®¹"></a>17.3.1 æŸ¥çœ‹&#x2F;è§£å‹åŒ…æ–‡ä»¶å†…å®¹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ©ç”¨cpioå·¥å…·æŸ¥çœ‹åŒ…æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line">rpm2cpio åŒ…æ–‡ä»¶ | cpio -it</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡Šæ”¾åŒ…å†…çš„æ–‡ä»¶</span></span><br><span class="line">rpm2cpio åŒ…æ–‡ä»¶ | cpio -idv</span><br></pre></td></tr></table></figure><h4 id="17-3-2-åŒ…æœç´¢å¼•æ“"><a href="#17-3-2-åŒ…æœç´¢å¼•æ“" class="headerlink" title="17.3.2 åŒ…æœç´¢å¼•æ“"></a>17.3.2 åŒ…æœç´¢å¼•æ“</h4><p>&#x3D;&#x3D;æ³¨æ„ï¼šç¬¬ä¸‰æ–¹åŒ…å»ºè®®æ£€æŸ¥å…¶åˆæ³•æ€§ï¼Œæ¥æºåˆæ³•æ€§ï¼Œç¨‹åºåŒ…çš„å®Œæ•´æ€§&#x3D;&#x3D;</p><p><a href="http://pkgs.org/">http://pkgs.org</a></p><p><a href="http://rpmfind.net/">http://rpmfind.net</a></p><p><a href="http://rpm.pbone.net/">http://rpm.pbone.net</a></p><p><a href="http://sourceforge.net/">http://sourceforge.net</a></p><h4 id="17-3-3-rpm-å¸¸ç”¨æŒ‡ä»¤"><a href="#17-3-3-rpm-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="17.3.3 rpm å¸¸ç”¨æŒ‡ä»¤"></a>17.3.3 rpm å¸¸ç”¨æŒ‡ä»¤</h4><p>Centos ç³»ç»Ÿä¸Šä½¿ç”¨ rpm å‘½ä»¤ç®¡ç†ç¨‹åºåŒ…</p><h5 id="17-3-3-1-rpm-åŒ…å®‰è£…-å¸è½½"><a href="#17-3-3-1-rpm-åŒ…å®‰è£…-å¸è½½" class="headerlink" title="17.3.3.1 rpm åŒ…å®‰è£…&#x2F;å¸è½½"></a>17.3.3.1 rpm åŒ…å®‰è£…&#x2F;å¸è½½</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">rpm é€‰é¡¹ åŒ…æ–‡ä»¶</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…rpmåŒ…</span></span><br><span class="line">rpm -ivh gzip-1.5-10.el7.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½rpmåŒ…</span></span><br><span class="line">rpm -evh gzip-1.5-10.el7.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‡çº§rpmåŒ…(å¦‚æœæ²¡æœ‰æ—§ç‰ˆæœ¬ï¼Œå°±å®‰è£…)</span></span><br><span class="line">rpm -Uvh gzip-1.5-10.el7.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‡çº§rpmåŒ…(å¦‚æœæ²¡æœ‰æ—§ç‰ˆæœ¬ï¼Œå°±ä¸åšåŠ¨ä½œ)</span></span><br><span class="line">rpm -Fvh gzip-1.5-10.el7.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¿½ç•¥ä¾èµ–å…³ç³»æ£€æŸ¥å®‰è£…</span></span><br><span class="line">rpm -ivh --nodeps gzip-1.5-10.el7.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼ºåˆ¶å®‰è£…rpmåŒ…ï¼Œå¿½ç•¥ä»»ä½•æŠ¥é”™å’Œè­¦å‘Š</span></span><br><span class="line">rpm -ivh --force gzip-1.5-10.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><h5 id="17-3-3-2-rpm-åŒ…æŸ¥è¯¢"><a href="#17-3-3-2-rpm-åŒ…æŸ¥è¯¢" class="headerlink" title="17.3.3.2 rpm åŒ…æŸ¥è¯¢"></a>17.3.3.2 rpm åŒ…æŸ¥è¯¢</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢rpmåŒ…ä¼šå®‰è£…é‚£äº›æ–‡ä»¶</span></span><br><span class="line">rpm -qpl gzip-1.5-10.el7.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢rpmåŒ…çš„è¯´æ˜ä¿¡æ¯</span></span><br><span class="line">rpm -qpi gzip-1.5-10.el7.x86_64.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢å·²å®‰è£…çš„rpmåŒ…å®‰è£…æœ‰é‚£äº›æ–‡ä»¶</span></span><br><span class="line">rpm -ql kernel-3.10.0-1160.el7.x86_64</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢å·²å®‰è£…åŒ…çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">rpm -qi kernel-3.10.0-1160.el7.x86_64</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢ç£ç›˜æ–‡ä»¶æ¥è‡ªé‚£ä¸ªrpmåŒ…</span></span><br><span class="line">rpm -qf /usr/bin/ls</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢åŠŸèƒ½æ˜¯ç”±é‚£ä¸ªåŒ…æä¾›</span></span><br><span class="line">rpm -q --whatprovides bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢åŒ…è¢«é‚£äº›åŒ…ä¾èµ–</span></span><br><span class="line">rpm -q --whatrequires bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢å·²ç»å®‰è£…çš„æ‰€æœ‰rpmåŒ…</span></span><br><span class="line">rpm -qa</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢å·²å®‰è£…rpmåŒ…çš„æ–‡æ¡£</span></span><br><span class="line">rpm -qd coreutils-8.22-24.el7.x86_64</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢rpmåŒ…è‡ªå¸¦çš„è„šæœ¬</span></span><br><span class="line">rpm -q --scripts bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢åŒ…æä¾›çš„èƒ½åŠ›ï¼ˆä¾èµ–ï¼‰</span></span><br><span class="line">rpm -q --provides bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢æŒ‡å®šçš„èƒ½åŠ›ç”±é‚£ä¸ªåŒ…æ‰€æä¾›</span></span><br><span class="line">rpm -q --whatprovides bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢æŒ‡å®šçš„èƒ½åŠ›è¢«é‚£ä¸ªåŒ…ä¾èµ–</span></span><br><span class="line">rpm -q --whatrequires bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢æŒ‡å®šçš„ç¨‹åºåŒ…æ‰€ä¾èµ–çš„èƒ½åŠ›</span></span><br><span class="line">rpm -R </span><br></pre></td></tr></table></figure><h5 id="17-3-3-3-rpm-åŒ…å®Œæ•´æ€§æ ¡éªŒ"><a href="#17-3-3-3-rpm-åŒ…å®Œæ•´æ€§æ ¡éªŒ" class="headerlink" title="17.3.3.3 rpm åŒ…å®Œæ•´æ€§æ ¡éªŒ"></a>17.3.3.3 rpm åŒ…å®Œæ•´æ€§æ ¡éªŒ</h5><p>åœ¨å®‰è£…åŒ…æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¼šæ£€æŸ¥åŒ…çš„æ¥æºæ˜¯å¦åˆæ³•</p><p>åœ¨æ£€æŸ¥åŒ…çš„æ¥æºå’Œå®Œæ•´æ€§ä¹‹å‰ï¼Œå¿…é¡»å¯¼å…¥æ‰€éœ€è¦çš„å…¬é’¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ls -l  /etc/pki/rpm-gpg</span><br><span class="line"></span><br><span class="line">-rw-r--r--. 1 root root 1690 Nov 23  2020 RPM-GPG-KEY-CentOS-7</span><br><span class="line">-rw-r--r--. 1 root root 1004 Nov 23  2020 RPM-GPG-KEY-CentOS-Debug-7</span><br><span class="line">-rw-r--r--. 1 root root 1690 Nov 23  2020 RPM-GPG-KEY-CentOS-Testing-7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¼å…¥å…¬é’¥</span></span><br><span class="line">rpm --import RPM-GPG-KEY-CentOS-7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢å®‰è£…å¥½çš„å¯†é’¥</span></span><br><span class="line">rpm -qa &quot;gpg-pubkey*&quot;ã€</span><br><span class="line">è¾“å‡ºï¼šgpg-pubkey-f4a80eb5-53a7ff4b</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢å…¬é’¥ä¿¡æ¯</span></span><br><span class="line">rpm -qi gpg-pubkey-f4a80eb5-53a7ff4b</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥åŒ…çš„å®Œæ•´æ€§ç­¾å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -K kernel-3.10.0-1160.el7.x86_64</span><br></pre></td></tr></table></figure><h5 id="17-3-3-4-rpm-åŒ…æ•°æ®åº“"><a href="#17-3-3-4-rpm-åŒ…æ•°æ®åº“" class="headerlink" title="17.3.3.4 rpm åŒ…æ•°æ®åº“"></a>17.3.3.4 rpm åŒ…æ•°æ®åº“</h5><p>è½¯ä»¶åœ¨å®‰è£…æ—¶ï¼Œä¼šå°†åŒ…é‡Œçš„æ¯ä¸ªæ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œå¦‚:å¤§å°ï¼Œæƒé™ï¼Œæ‰€æœ‰è€…ï¼Œæ—¶é—´ç­‰è®°å½•è‡³rpmç›¸å…³æ•°æ®åº“ä¸­ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥åŒ…ä¸­çš„æ–‡ä»¶æ˜¯å¦å’Œå½“åˆå®‰è£…æ—¶æœ‰æ‰€å˜åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Sæ–‡ä»¶å¤§å°ä¸åŒ¹é…ã€‚</span><br><span class="line">Mæ–‡ä»¶çš„æƒé™ã€ç±»å‹ç­‰æ¨¡å¼ä¸åŒ¹é…ã€‚</span><br><span class="line">5æ ¡éªŒå’Œï¼ˆä»¥å‰æ˜¯ MD5 æ ¡éªŒå’Œï¼‰ä¸åŒ¹é…ã€‚</span><br><span class="line">Dè®¾å¤‡çš„ä¸»/æ¬¡ç¼–å·ä¸åŒ¹é…ã€‚</span><br><span class="line">Lç¬¦å·é“¾æ¥çš„ç›®æ ‡è·¯å¾„ä¸åŒ¹é…ã€‚</span><br><span class="line">Uæ–‡ä»¶çš„ç”¨æˆ·æ‰€æœ‰æƒä¸åŒ¹é…ã€‚</span><br><span class="line">Gæ–‡ä»¶çš„ç»„æ‰€æœ‰æƒä¸åŒ¹é…ã€‚</span><br><span class="line">Tæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ä¸åŒ¹é…ã€‚</span><br><span class="line">Pæ–‡ä»¶çš„èƒ½åŠ›ï¼ˆcapabilitiesï¼‰ä¸åŒ¹é…ã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥å·²å®‰è£…çš„rpmçš„å®Œæ•´æ€§ï¼Œæ— è¾“å‡ºï¼Œå°±æ˜¯å®Œæ•´</span></span><br><span class="line">rpm -V centos-release </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥æ‰€æœ‰å·²å®‰è£…çš„rpmçš„å®Œæ•´æ€§ï¼Œæ— è¾“å‡ºï¼Œå°±æ˜¯å®Œæ•´</span></span><br><span class="line">rpm -Va</span><br></pre></td></tr></table></figure><p>é‡å»ºrpmåŒ…æ•°æ®åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹rpmåŒ…æ•°æ®åº“æ–‡ä»¶</span></span><br><span class="line">ls  /var/lib/rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå§‹åŒ–ï¼Œå¦‚æœäº‹å…ˆä¸å­˜åœ¨æ•°æ®åº“ï¼Œåˆ™æ–°å»ºï¼Œå¦‚æœå­˜åœ¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ</span></span><br><span class="line">rpm --initdb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å»ºå·²å®‰è£…çš„åŒ…å¤´çš„æ•°æ®åº“ç´¢ç›®å½•</span></span><br><span class="line">rpm --rebuilddb </span><br></pre></td></tr></table></figure><h1 id="18-yum-å’Œ-dnf"><a href="#18-yum-å’Œ-dnf" class="headerlink" title="18. yum å’Œ dnf"></a>18. yum å’Œ dnf</h1><h3 id="18-1-yum-ç›¸å…³é…ç½®æ–‡ä»¶"><a href="#18-1-yum-ç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="18.1 yum ç›¸å…³é…ç½®æ–‡ä»¶"></a>18.1 yum ç›¸å…³é…ç½®æ–‡ä»¶</h3><p>ä»“åº“å…¬å…±é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/yum.conf</span><br><span class="line">[main]</span><br><span class="line">gpgcheck=1æ ¡éªŒå®‰è£…åŒ…çš„æ•°å­—ç­¾å</span><br><span class="line">installonly_limit=3åŒæ—¶å¯ä»¥å®‰è£…3ä¸ªåŒ…ï¼Œæœ€å°å€¼ä¸º2ï¼Œå¦‚è®¾ç½®ä¸º0æˆ–1ï¼Œä¸ºä¸é™åˆ¶</span><br><span class="line">clean_requirements_on_remove=Trueå¸è½½åŒ…æ—¶ä¹Ÿå¸è½½ç›¸å…³ä¾èµ–</span><br><span class="line">best=Trueå¤šä¸ªç›¸åŒçš„åŒ…é€‰æ‹©é«˜ç‰ˆæœ¬çš„åŒ…ï¼Œå³ä½¿ç¼ºå°‘åŒ…çš„ä¾èµ–</span><br><span class="line">skip_if_unavailable=Falseå½“å­˜å‚¨åº“ä¸å¯ç”¨æ—¶æ˜¯å¦è·³è¿‡å®ƒ</span><br></pre></td></tr></table></figure><p>ä»“åº“é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/etc/yum.repos.d/*.repo</span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-$releasever - Base</span><br><span class="line">mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infra</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">baseurl=http://mirror.centos.org/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure><h3 id="18-2-yum-é…ç½®æ–‡ä»¶å†…ç½®å˜é‡"><a href="#18-2-yum-é…ç½®æ–‡ä»¶å†…ç½®å˜é‡" class="headerlink" title="18.2 yum é…ç½®æ–‡ä»¶å†…ç½®å˜é‡"></a>18.2 yum é…ç½®æ–‡ä»¶å†…ç½®å˜é‡</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">releaseverå½“å‰OSçš„å‘å‹ç‰ˆçš„ä¸»ç‰ˆæœ¬å·ï¼Œå¦‚6ï¼Œ7ï¼Œ8</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"><span class="built_in">arch</span>cpuæ¶æ„ï¼Œå¦‚i686ï¼Œx86_64</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">basearchç³»ç»ŸåŸºç¡€å¹³å°ï¼ši386ï¼ŒX86_64</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">contentdirè¡¨ç¤ºç›®å½•ï¼Œæ¯”å¦‚centos-8ï¼Œcentos-7</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">YUM0-<span class="variable">$YUM9</span>è‡ªå®šä¹‰å˜é‡</span></span><br></pre></td></tr></table></figure><h3 id="18-3-yum-å¸¸ç”¨æŒ‡ä»¤"><a href="#18-3-yum-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="18.3 yum å¸¸ç”¨æŒ‡ä»¤"></a>18.3 yum å¸¸ç”¨æŒ‡ä»¤</h3><h4 id="18-3-1-æ˜¾ç¤ºä»“åº“åˆ—è¡¨"><a href="#18-3-1-æ˜¾ç¤ºä»“åº“åˆ—è¡¨" class="headerlink" title="18.3.1 æ˜¾ç¤ºä»“åº“åˆ—è¡¨"></a>18.3.1 æ˜¾ç¤ºä»“åº“åˆ—è¡¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é»˜è®¤æ˜¾ç¤ºå¯ç”¨çš„ä»“åº“</span></span><br><span class="line">yum repolist [ all | enabled | disabled ]</span><br></pre></td></tr></table></figure><h4 id="18-3-2-æ°¸ä¹…å¯ç”¨-ç¦ç”¨ä»“åº“"><a href="#18-3-2-æ°¸ä¹…å¯ç”¨-ç¦ç”¨ä»“åº“" class="headerlink" title="18.3.2 æ°¸ä¹…å¯ç”¨&#x2F;ç¦ç”¨ä»“åº“"></a>18.3.2 æ°¸ä¹…å¯ç”¨&#x2F;ç¦ç”¨ä»“åº“</h4><p>è¯¥åŠŸèƒ½æ¥è‡ªyum -y install yum-utils</p><p>å¯ä»¥ç”Ÿæˆyumä»“åº“çš„é…ç½®æ–‡ä»¶åŠå¯ç”¨æˆ–ç¦ç”¨ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆä»“åº“é…ç½®æ–‡ä»¶</span></span><br><span class="line">yum-config-manager -add-repo URLæˆ–file</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ç”¨ä»“åº“</span></span><br><span class="line">yum-config-manager --enable &quot;ä»“åº“åç§°&quot;   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¦ç”¨ä»“åº“</span></span><br><span class="line">yum-config-manager --disable &quot;ä»“åº“åç§°&quot;</span><br></pre></td></tr></table></figure><h4 id="18-3-3-æŒ‡å®šä»“åº“å®‰è£…è½¯ä»¶åŒ…"><a href="#18-3-3-æŒ‡å®šä»“åº“å®‰è£…è½¯ä»¶åŒ…" class="headerlink" title="18.3.3 æŒ‡å®šä»“åº“å®‰è£…è½¯ä»¶åŒ…"></a>18.3.3 æŒ‡å®šä»“åº“å®‰è£…è½¯ä»¶åŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--disablerepo=ä»“åº“åä¸´æ—¶ç¦ç”¨æŸä¸ªä»“åº“</span><br><span class="line">--enablerepo=ä»“åº“åä¸´æ—¶å¯ç”¨æŸä¸ªä»“åº“</span><br><span class="line"></span><br><span class="line">yum -y --disablerepo=* --enablerepo=æŒ‡å®šçš„ä»“åº“åç§°è½¯ä»¶åŒ…å</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum listæ˜¾ç¤ºæ‰€æœ‰ä»“åº“çš„ç¨‹åºåŒ…</span><br><span class="line">yum -y reinstall é‡è£…ç¨‹åºåŒ…</span><br><span class="line">yum updateæ›´æ–°ç¨‹åºåŒ…</span><br><span class="line">yum clean allæ¸…ç†å…ƒæ•°æ®ç¼“å­˜</span><br><span class="line">yum makecacheä¸‹è½½å…ƒæ•°æ®ç¼“å­˜ï¼ˆä¸æ˜¯å¿…é¡»ï¼‰</span><br><span class="line">yum provides æŸ¥çœ‹è¯¥ç‰¹æ€§å±äºé‚£ä¸ªå®‰è£…åŒ…</span><br><span class="line">--disablerepo=å®˜æ–¹ä»“åº“å å®‰è£…æ—¶,å°†ç¦ç”¨å®˜æ–¹ä»“åº“,ä½¿ç”¨å…¶ä»–ä»“åº“æ¥å®‰è£…</span><br><span class="line">--enablerepo=ä»“åº“åç§° æŒ‡å®šä»“åº“,æ¥å®‰è£…rpmåŒ…</span><br></pre></td></tr></table></figure><h4 id="18-3-4-æŸ¥è¯¢è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯"><a href="#18-3-4-æŸ¥è¯¢è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯" class="headerlink" title="18.3.4 æŸ¥è¯¢è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯"></a>18.3.4 æŸ¥è¯¢è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum info è½¯ä»¶åŒ…å</span><br></pre></td></tr></table></figure><h4 id="18-3-5-æŸ¥è¯¢ç‰¹æ€§ç”±é‚£ä¸ªç¨‹åºåŒ…æä¾›"><a href="#18-3-5-æŸ¥è¯¢ç‰¹æ€§ç”±é‚£ä¸ªç¨‹åºåŒ…æä¾›" class="headerlink" title="18.3.5 æŸ¥è¯¢ç‰¹æ€§ç”±é‚£ä¸ªç¨‹åºåŒ…æä¾›"></a>18.3.5 æŸ¥è¯¢ç‰¹æ€§ç”±é‚£ä¸ªç¨‹åºåŒ…æä¾›</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum provides æ–‡ä»¶æˆ–æŒ‡ä»¤</span><br></pre></td></tr></table></figure><h4 id="18-3-6-æŒ‡å®šå…³é”®å­—æŸ¥è¯¢ç¨‹åºåŒ…"><a href="#18-3-6-æŒ‡å®šå…³é”®å­—æŸ¥è¯¢ç¨‹åºåŒ…" class="headerlink" title="18.3.6 æŒ‡å®šå…³é”®å­—æŸ¥è¯¢ç¨‹åºåŒ…"></a>18.3.6 æŒ‡å®šå…³é”®å­—æŸ¥è¯¢ç¨‹åºåŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum search å…³é”®å­—</span><br></pre></td></tr></table></figure><h4 id="18-3-7-æŸ¥è¯¢åŒ…ä¾èµ–çš„èƒ½åŠ›"><a href="#18-3-7-æŸ¥è¯¢åŒ…ä¾èµ–çš„èƒ½åŠ›" class="headerlink" title="18.3.7 æŸ¥è¯¢åŒ…ä¾èµ–çš„èƒ½åŠ›"></a>18.3.7 æŸ¥è¯¢åŒ…ä¾èµ–çš„èƒ½åŠ›</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum deplist ç¨‹åºåŒ…å</span><br></pre></td></tr></table></figure><h4 id="18-3-8-å®‰è£…æˆ–å‡çº§æ—¶å¿½ç•¥æŸä¸ªåŒ…"><a href="#18-3-8-å®‰è£…æˆ–å‡çº§æ—¶å¿½ç•¥æŸä¸ªåŒ…" class="headerlink" title="18.3.8 å®‰è£…æˆ–å‡çº§æ—¶å¿½ç•¥æŸä¸ªåŒ…"></a>18.3.8 å®‰è£…æˆ–å‡çº§æ—¶å¿½ç•¥æŸä¸ªåŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -x ç¨‹åºåŒ…å</span><br></pre></td></tr></table></figure><h4 id="18-3-9-é‡æ–°å®‰è£…ç¨‹åºåŒ…"><a href="#18-3-9-é‡æ–°å®‰è£…ç¨‹åºåŒ…" class="headerlink" title="18.3.9 é‡æ–°å®‰è£…ç¨‹åºåŒ…"></a>18.3.9 é‡æ–°å®‰è£…ç¨‹åºåŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y reinstall ç¨‹åºåŒ…å</span><br></pre></td></tr></table></figure><h4 id="18-3-8-æ›´æ–°è½¯ä»¶åŒ…"><a href="#18-3-8-æ›´æ–°è½¯ä»¶åŒ…" class="headerlink" title="18.3.8 æ›´æ–°è½¯ä»¶åŒ…"></a>18.3.8 æ›´æ–°è½¯ä»¶åŒ…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥å¯ç”¨å‡çº§</span></span><br><span class="line">yum check-update </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°nginx</span></span><br><span class="line">yum update nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°æ•´ä¸ªæ“ä½œç³»ç»Ÿ</span></span><br><span class="line">yum update</span><br></pre></td></tr></table></figure><h4 id="18-3-9-yum-history"><a href="#18-3-9-yum-history" class="headerlink" title="18.3.9 yum history"></a>18.3.9 yum history</h4><p>yum æ‰§è¡Œå®‰è£…å¸è½½å‘½ä»¤ä¼šè®°å½•åˆ°ç›¸å…³æ—¥å¿—ä¸­</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /var/log/yum.log</span><br><span class="line">cat /var/log/dnf.log</span><br></pre></td></tr></table></figure><p>yum äº‹åŠ¡å†å²</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">yum history</span><br><span class="line"></span><br><span class="line">ID     | Login user               | Date and time    | Action(s)      | Altered</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">     3 | root &lt;root&gt;              | 2023-11-02 17:49 | Install        |   31   </span><br><span class="line">     2 | root &lt;root&gt;              | 2023-11-02 13:15 | I, U           |  154   </span><br><span class="line">     1 | System &lt;unset&gt;           | 2023-08-21 18:01 | Install        |  300 </span><br><span class="line">     </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹2å·äº‹ä»¶å®‰è£…çš„åŒ…</span></span><br><span class="line">yum history info 2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ’¤é”€2å·äº‹ä»¶å®‰è£…çš„åŒ…</span></span><br><span class="line">yum history undo 2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°æ‰§è¡Œ2å·äº‹ä»¶</span></span><br><span class="line">yum history redo 2</span><br></pre></td></tr></table></figure><h3 id="18-4-yum-å…ƒæ•°æ®ç¼“å­˜"><a href="#18-4-yum-å…ƒæ•°æ®ç¼“å­˜" class="headerlink" title="18.4 yum å…ƒæ•°æ®ç¼“å­˜"></a>18.4 yum å…ƒæ•°æ®ç¼“å­˜</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">yumç¼“å­˜å­˜æ”¾çš„è·¯å¾„</span></span><br><span class="line">ls /var/cache/yum/x86_64/7/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç†æ‰€æœ‰ä»“åº“å…ƒæ•°æ®ç¼“å­˜</span></span><br><span class="line">yum clean all</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°æ„å»ºç¼“å­˜</span></span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h3 id="18-4-é…ç½®-epel-æº"><a href="#18-4-é…ç½®-epel-æº" class="headerlink" title="18.4 é…ç½® epel æº"></a>18.4 é…ç½® epel æº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é˜¿é‡Œäº‘</span></span><br><span class="line">curl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">USTC</span></span><br><span class="line">yum install -y epel-release.noarch</span><br><span class="line">sed -i &#x27;s|^metalink=|#metalink=|g&#x27; /etc/yum.repos.d/epel.repo</span><br><span class="line">sed -i &#x27;s|^#baseurl=https\?://download.fedoraproject.org/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#x27; /etc/yum.repos.d/epel.repo</span><br><span class="line">sed -i &#x27;s|^#baseurl=https\?://download.example/pub/epel/|baseurl=https://mirrors.ustc.edu.cn/epel/|g&#x27; /etc/yum.repos.d/epel.repo</span><br></pre></td></tr></table></figure><h3 id="18-5-é…ç½®å…‰ç›˜æºä»“åº“"><a href="#18-5-é…ç½®å…‰ç›˜æºä»“åº“" class="headerlink" title="18.5 é…ç½®å…‰ç›˜æºä»“åº“"></a>18.5 é…ç½®å…‰ç›˜æºä»“åº“</h3><p>&#x3D;&#x3D;ä»“åº“è·¯å¾„åˆ°repodataçš„çˆ¶ç›®å½•æ­¢&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/CD.repo</span><br><span class="line">[CD-base]</span><br><span class="line">name=CentOS-$releasever - CD Base</span><br><span class="line">baseurl=file:///media/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure><h3 id="18-6-yum-å‡çº§å†…æ ¸"><a href="#18-6-yum-å‡çº§å†…æ ¸" class="headerlink" title="18.6 yum å‡çº§å†…æ ¸"></a>18.6 yum å‡çº§å†…æ ¸</h3><p>ç½‘ç«™ï¼š<a href="http://elrepo.org/tiki/HomePage">http://elrepo.org/tiki/HomePage</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum -y install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ä»“åº“ä¸­çš„å†…æ ¸ç‰ˆæœ¬</span></span><br><span class="line">yum --enablerepo elrepo-kernel list | grep kernel</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…æ–°å†…æ ¸</span></span><br><span class="line">yum --enablerepo elrepo-kernel install kernel-ml.x86_64 -y                        </span><br></pre></td></tr></table></figure><h3 id="18-7-rpm-ç¨‹åºåŒ…è¢«ç ´åæ¢å¤æ–¹æ³•"><a href="#18-7-rpm-ç¨‹åºåŒ…è¢«ç ´åæ¢å¤æ–¹æ³•" class="headerlink" title="18.7 rpm ç¨‹åºåŒ…è¢«ç ´åæ¢å¤æ–¹æ³•"></a>18.7 rpm ç¨‹åºåŒ…è¢«ç ´åæ¢å¤æ–¹æ³•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1.å¼€æœºè¯»è¿›åº¦æ¡æŒ‰ä¸€æ¬¡Esc</span><br><span class="line"></span><br><span class="line">2.é€‰æ‹©CD-ROM driveå¯åŠ¨</span><br><span class="line"></span><br><span class="line">3.é€‰æ‹©ç¬¬ä¸‰é¡¹Troubleshooting</span><br><span class="line"></span><br><span class="line">4.é€‰æ‹©ç¬¬äºŒé¡¹Rescue a CentOS systemæ•‘æ´æ¨¡å¼</span><br><span class="line"></span><br><span class="line">5.ç­‰å¾…è¿›å…¥é€‰é¡¹ç•Œé¢è¾“å…¥1ï¼ˆContinueï¼‰</span><br><span class="line"></span><br><span class="line">6.æ­¤æ—¶å¯ä»¥çœ‹åˆ°chroot /mnt/sysimage ï¼ˆæ ¹å·²ç»è¢«æŒ‚è½½åˆ°äº†/mnt/sysimageï¼‰</span><br><span class="line"></span><br><span class="line">7.please press &lt;return&gt; to get a shell. æŒ‰å›è½¦ï¼Œå¼€å¯shell</span><br><span class="line"></span><br><span class="line">8.æ­¤æ—¶ä½¿ç”¨å…‰ç›˜å¯åŠ¨ï¼Œä½¿ç”¨çš„æ˜¯å…‰ç›˜å†…çš„æ“ä½œç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line">9.ä½¿ç”¨å…‰ç›˜å†…çš„rpmç¨‹åºåŒ…å®‰è£…rpm</span><br><span class="line">mkdir /mnt/cdrom</span><br><span class="line">mount /dev/sr0 /mnt/cdrom</span><br><span class="line">rpm -ivh /mnt/cdrom/Packages/rpm-4.11.3-40.e17.x86_64.rpm --root=/mnt/sysimage</span><br><span class="line"></span><br><span class="line">10.Ctrl+Alt+Delete æˆ– reboot é‡å¯æ“ä½œç³»ç»Ÿ</span><br></pre></td></tr></table></figure><h3 id="18-8-åŒ…ç»„ç®¡ç†"><a href="#18-8-åŒ…ç»„ç®¡ç†" class="headerlink" title="18.8. åŒ…ç»„ç®¡ç†"></a>18.8. åŒ…ç»„ç®¡ç†</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹åŒ…ç»„</span></span><br><span class="line">yum grouplist</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…åŒ…ç»„</span></span><br><span class="line">yum -y grouplist åŒ…ç»„</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½åŒ…ç»„</span></span><br><span class="line">yum -y remove åŒ…ç»„</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹åŒ…ç»„ä¿¡æ¯</span></span><br><span class="line">yum grouplist &quot;åŒ…ç»„&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹åŒ…ç»„å†…æ‹¥æœ‰é‚£äº›ç¨‹åºåŒ…</span></span><br><span class="line">yum groupinfo &quot;åŒ…ç»„&quot;</span><br></pre></td></tr></table></figure><h3 id="18-9-å®ç°ç§æœ‰-yum-ä»“åº“"><a href="#18-9-å®ç°ç§æœ‰-yum-ä»“åº“" class="headerlink" title="18.9 å®ç°ç§æœ‰ yum ä»“åº“"></a>18.9 å®ç°ç§æœ‰ yum ä»“åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h1 id="19-ç¼–è¯‘å®‰è£…"><a href="#19-ç¼–è¯‘å®‰è£…" class="headerlink" title="19. ç¼–è¯‘å®‰è£…"></a>19. ç¼–è¯‘å®‰è£…</h1><h3 id="19-1-æºç ç¼–è¯‘ä»‹ç»"><a href="#19-1-æºç ç¼–è¯‘ä»‹ç»" class="headerlink" title="19.1 æºç ç¼–è¯‘ä»‹ç»"></a>19.1 æºç ç¼–è¯‘ä»‹ç»</h3><p>&#x3D;&#x3D;ç¨‹åºåŒ…ç¼–è¯‘å®‰è£…&#x3D;&#x3D;</p><p>æºä»£ç &gt;&gt;é¢„å¤„ç†&gt;&gt;ç¼–è¯‘&gt;&gt;æ±‡ç¼–&gt;&gt;é“¾æ¥&gt;&gt;æ‰§è¡Œ</p><p>&#x3D;&#x3D;ç¨‹åºåŒ…ç¼–è¯‘å·¥å…·&#x3D;&#x3D;</p><p>cã€c++çš„æºç ç¼–è¯‘ï¼šä½¿ç”¨makeé¡¹ç›®ç®¡ç†å™¨</p><p>configureè„šæœ¬&gt;&gt;Makefile.in&gt;&gt;Makefile</p><p>ç›¸å…³å¼€å‘å·¥å…·ï¼š</p><p>autoconfï¼šç”Ÿæˆconfigureè„šæœ¬</p><p>automakeï¼šç”ŸæˆMalefile.in</p><p>javaçš„æºç ç¼–è¯‘ï¼šä½¿ç”¨maven</p><p>&#x3D;&#x3D;Cè¯­è¨€æºä»£ç ç¼–è¯‘å®‰è£…è¿‡ç¨‹&#x3D;&#x3D;</p><p>åˆ©ç”¨ç¼–è¯‘å·¥å…·ï¼Œé€šå¸¸åªéœ€è¦è¿›è¡Œä¸‰ä¸ªå¤§çš„æ­¥éª¤</p><ul><li><p>.&#x2F;configure</p><ol><li>é€šè¿‡é€‰é¡¹ä¼ é€’å‚æ•°ï¼ŒæŒ‡å®šå®‰è£…è·¯å¾„ï¼Œå¯ç”¨ç‰¹æ€§ç­‰ã€‚æ‰§è¡Œæ—¶ä¼šå‚è€ƒç”¨æˆ·æŒ‡å®šä»¥åŠMakefile.inæ–‡ä»¶ç”ŸæˆMakefile</li><li>æ£€æŸ¥ä¾èµ–åˆ°çš„å¤–éƒ¨ç¯å¢ƒï¼Œå¦‚ä¾èµ–çš„è½¯ä»¶åŒ…</li></ol></li><li><p>make</p></li></ul><p>â€‹æ ¹æ® Makefile æ–‡ä»¶ï¼Œæ„å»ºåº”ç”¨ç¨‹åº</p><ul><li>make install</li></ul><p>â€‹å¤åˆ¶æ–‡ä»¶åˆ°ç›¸åº”è·¯å¾„</p><p>æ³¨æ„ï¼šå®‰è£…å‰å¯ä»¥é€šè¿‡æŸ¥çœ‹READMEï¼ŒINSTALLæŸ¥çœ‹è·å–å¸®åŠ©</p><h3 id="19-2-ç¼–è¯‘å®‰è£…å‡†å¤‡"><a href="#19-2-ç¼–è¯‘å®‰è£…å‡†å¤‡" class="headerlink" title="19.2 ç¼–è¯‘å®‰è£…å‡†å¤‡"></a>19.2 ç¼–è¯‘å®‰è£…å‡†å¤‡</h3><p>å‡†å¤‡ï¼šå®‰è£…ç›¸å…³çš„ä¾èµ–åŒ…</p><p>å¼€å‘å·¥å…·ï¼šmakeï¼Œgcc(c&#x2F;c++ç¼–è¯‘å™¨GNU C Conplief)</p><p>å¼€å‘ç¯å¢ƒï¼šå¼€å‘åº“ï¼ˆglibcï¼šæ ‡å‡†åº“ï¼‰ï¼Œå¤´æ–‡ä»¶ï¼Œå¯å®‰è£…å¼€å‘ç»„Development Tools</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿäº§å®è·µ,åŸºäºæœ€å°åŒ–å®‰è£…çš„ç³»ç»Ÿ</span></span><br><span class="line">yum -y install gcc make gcc-c++ glibc glibc-devel pcre pcre-devel openssl openssl-devel systemd-devel zlib-devel vim lrzsz tree tmux lsof tcpdump wget net-tools iotop bc bzip2 zip unzip nfs-utils man-pages</span><br></pre></td></tr></table></figure><h3 id="19-3-ç¼–è¯‘å®‰è£…-tree"><a href="#19-3-ç¼–è¯‘å®‰è£…-tree" class="headerlink" title="19.3 ç¼–è¯‘å®‰è£… tree"></a>19.3 ç¼–è¯‘å®‰è£… tree</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºç›®å½•</span></span><br><span class="line">mkdir -p /apps/tree</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è½½tree</span></span><br><span class="line">curl -o /apps/tree-2.1.0.tgz http://mama.indstate.edu/users/ice/tree/src/tree-2.1.0.tgz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹taråŒ…</span></span><br><span class="line">cd /apps ; tar -xvf tree-2.1.0.tgz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€å§‹ç¼–è¯‘,ç”±äºè¿™ä¸ªåŒ…å¤ªç®€å•äº†,æ‰€ä»¥ç›´æ¥æä¾›äº†Makefile</span></span><br><span class="line">sed -i &#x27;s|/usr/local|/apps/tree|&#x27; /apps/tree-2.1.0/Makefileä¿®æ”¹å®‰è£…è·¯å¾„</span><br><span class="line">sed -i &#x27;s|VERSION=2.1.0|VERSION=10.0|&#x27; /apps/tree-2.1.0/Makefileè‡ªå®šä¹‰ä¸€ä¸‹ç‰ˆæœ¬</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¯‘å®‰è£…</span></span><br><span class="line">make install</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">echo  &#x27;PATH=/apps/tree/bin/:$PATH&#x27; &gt; /etc/profile.d/tree.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡è¯»shellç¯å¢ƒ</span></span><br><span class="line">exec $SHELL -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹treeç‰ˆæœ¬</span></span><br><span class="line">tree --version</span><br></pre></td></tr></table></figure><h1 id="20-Ubuntu-è½¯ä»¶ç®¡ç†"><a href="#20-Ubuntu-è½¯ä»¶ç®¡ç†" class="headerlink" title="20. Ubuntu è½¯ä»¶ç®¡ç†"></a>20. Ubuntu è½¯ä»¶ç®¡ç†</h1><p>Debianè½¯ä»¶åŒ…é€šå¸¸ä¸ºé¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ ¼å¼çš„æ‰©å±•åâ€.debâ€ï¼Œç±»ä¼¼rpmæ–‡ä»¶ï¼Œå› æ­¤å®‰è£…å¿«é€Ÿï¼Œæ— éœ€ç¼–è¯‘è½¯ä»¶ã€‚åŒ…æ–‡ä»¶åŒ…æ‹¬ç‰¹å®šåŠŸèƒ½æˆ–è½¯ä»¶æ‰€å¿…éœ€çš„æ–‡ä»¶ã€å…ƒæ•°æ®å’ŒæŒ‡ä»¤</p><ul><li>dpkg: package manager for Debianï¼Œç±»ä¼¼äºrpmï¼Œdpkgæ˜¯åŸºäºDebiançš„ç³»ç»Ÿçš„åŒ…ç®¡ç†å™¨ã€‚å¯ä»¥å®‰è£…ï¼Œåˆ é™¤å’Œæ„å»ºè½¯ä»¶åŒ…ï¼Œä½†æ— æ³•è‡ªåŠ¨ä¸‹è½½å’Œå®‰è£…è½¯ä»¶åŒ…æˆ–å…¶ä¾èµ–é¡¹</li><li>apt: Advanced Packaging Toolï¼ŒåŠŸèƒ½å¼ºå¤§çš„è½¯ä»¶ç®¡ç†å·¥å…·ï¼Œç”šè‡³å¯å‡çº§æ•´ä¸ªUbuntuçš„ç³»ç»Ÿï¼ŒåŸºäºå®¢æˆ·&#x2F;æœåŠ¡å™¨æ¶æ„</li></ul><h3 id="20-1-APT-å·¥ä½œåŸç†"><a href="#20-1-APT-å·¥ä½œåŸç†" class="headerlink" title="20.1 APT å·¥ä½œåŸç†"></a>20.1 APT å·¥ä½œåŸç†</h3><p>åœ¨æœåŠ¡å™¨ä¸Šå…ˆå¤åˆ¶æ‰€æœ‰DEBåŒ…ï¼Œç„¶åç”¨APTçš„åˆ†æå·¥å…·genbasediræ ¹æ®æ¯ä¸ªDEB åŒ…çš„åŒ…å¤´(Header) ä¿¡æ¯å¯¹æ‰€æœ‰çš„DEBåŒ…è¿›è¡Œåˆ†æï¼Œå¹¶å°†è¯¥åˆ†æç»“æœè®°å½•åœ¨æ–‡ä»¶å¤¹baseå†…çš„ä¸€ä¸ªDEB ç´¢å¼•æ¸…å•æ–‡ä»¶ä¸­ï¼Œä¸€æ—¦APT æœåŠ¡å™¨å†…çš„DEBæœ‰æ‰€å˜åŠ¨ï¼Œè¦ä½¿ç”¨genbasediräº§ç”Ÿæ–°çš„DEBç´¢å¼•æ¸…å•ã€‚å®¢æˆ·ç«¯åœ¨è¿›è¡Œå®‰è£…æˆ–å‡çº§æ—¶å…ˆè¦æŸ¥è¯¢DEBç´¢å¼•æ¸…å•ï¼Œä»è€Œè·çŸ¥æ‰€æœ‰å…·æœ‰ä¾èµ–å…³ç³»çš„è½¯ä»¶åŒ…ï¼Œå¹¶ä¸€åŒä¸‹è½½åˆ°å®¢æˆ·ç«¯ä»¥ä¾¿å®‰è£…ã€‚å½“å®¢æˆ·ç«¯éœ€è¦å®‰è£…ã€å‡çº§æˆ–åˆ é™¤æŸä¸ªè½¯ä»¶åŒ…æ—¶å®¢æˆ·ç«¯è®¡ç®—æœºå–å¾—DEBç´¢å¼•æ¸…å•å‹ç¼©æ–‡ä»¶åï¼Œä¼šå°†å…¶è§£å‹ç½®æ”¾äº ar&#x2F;cache&#x2F;apt&#x2F;ï¼Œè€Œå®¢æˆ·ç«¯ä½¿ç”¨apt-get installæˆ–apt-get upgradeå‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šå°†è¿™ä¸ªæ–‡ä»¶å¤¹å†…çš„æ•°æ®å’Œå®¢æˆ·ç«¯è®¡ç®—æœºå†…çš„DEBæ•°æ®åº“æ¯”å¯¹ï¼ŒçŸ¥é“å“ªäº›DEBå·²å®‰è£…ã€æœªå®‰è£…æˆ–æ˜¯å¯ä»¥å‡çº§çš„</p><h3 id="20-2-dpkg-åŒ…ç®¡ç†å™¨"><a href="#20-2-dpkg-åŒ…ç®¡ç†å™¨" class="headerlink" title="20.2 dpkg åŒ…ç®¡ç†å™¨"></a>20.2 dpkg åŒ…ç®¡ç†å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®‰è£…åŒ…</span></span><br><span class="line">dpkg -i package.deb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤åŒ…ï¼ˆä¸å»ºè®®ï¼Œä¸è‡ªåŠ¨å¸è½½ä¾èµ–äºå®ƒçš„åŒ…ï¼‰</span></span><br><span class="line">dpkg -r package.deb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤åŒ…ï¼ˆåŒ…æ‹¬é…ç½®æ–‡ä»¶ï¼‰</span></span><br><span class="line">dpkg -P package.deb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ—å‡ºå½“å‰å·²ç»å®‰è£…çš„åŒ…ï¼Œç±»ä¼¼äºrpm -qa</span></span><br><span class="line">dpkg -l </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ˜¾ç¤ºè¯¥åŒ…çš„ç®€è¦è¯´æ˜ï¼Œç±»ä¼¼äºrpm -qi</span></span><br><span class="line">dpkg -l package</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ—å‡ºè¯¥åŒ…çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬è¯¦ç»†ä¿¡æ¯ï¼Œç±»ä¼¼äºrpm -qi</span></span><br><span class="line">dpkg -s package</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ—å‡ºè¯¥åŒ…ä¸­æ‰€åŒ…å«çš„æ–‡ä»¶ï¼Œç±»ä¼¼äºrpm -ql</span></span><br><span class="line">dpkg -L package</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æœç´¢åŒ…å«patternçš„åŒ…ï¼Œç±»ä¼¼äºrpm -qf</span></span><br><span class="line">dpkg -S &lt;pattren&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">é…ç½®åŒ…ï¼Œ-a ä½¿ç”¨ é…ç½®æ‰€æœ‰æ²¡æœ‰é…ç½®çš„è½¯ä»¶åŒ…</span></span><br><span class="line">dpkg --configure package</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ—å‡ºdebåŒ…çš„å†…å®¹ï¼Œç±»ä¼¼rpm -qpl</span></span><br><span class="line">dpkg -c package.deb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è§£å¼€debåŒ…çš„å†…å®¹</span></span><br><span class="line">dpkg --unpack package.deb</span><br></pre></td></tr></table></figure><h3 id="20-3-apt"><a href="#20-3-apt" class="headerlink" title="20.3 apt"></a>20.3 apt</h3><p>Debian ä½¿ç”¨apt å·¥å…·é›†æ¥ç®¡ç†åŒ…ç³»ç»Ÿï¼Œapt-get æ˜¯å…¶ä¸­ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¦å¤–ä¸€æ¬¾è¾ƒä¸ºæµè¡Œçš„å‘½ä»¤è¡Œä¸GUIå…¼é¡¾çš„å·¥å…·æ˜¯ aptitudeï¼Œä¹‹å‰æœ€å¸¸ç”¨çš„ Linux åŒ…ç®¡ç†å‘½ä»¤éƒ½è¢«åˆ†æ•£åœ¨äº† apt-getã€apt-cache å’Œ apt-config è¿™ä¸‰æ¡å‘½ä»¤ä¸­åœ¨2014å¹´aptå‘½ä»¤å‘å¸ƒç¬¬ä¸€ä¸ªç¨³å®šç‰ˆï¼ŒUbuntu 16.04å¼•å…¥æ–°ç‰¹æ€§ä¹‹ä¸€ä¾¿æ˜¯ apt å‘½ä»¤ï¼Œapt å‘½ä»¤è§£å†³äº†å‘½ä»¤è¿‡äºåˆ†æ•£çš„é—®é¢˜ï¼Œå®ƒåŒ…æ‹¬ apt-get å‘½ä»¤å‡ºç°ä»¥æ¥ä½¿ç”¨æœ€å¹¿æ³›çš„åŠŸèƒ½é€‰é¡¹ï¼Œä»¥åŠ apt-cache å’Œ apt-config å‘½ä»¤ä¸­å¾ˆå°‘ç”¨åˆ°çš„åŠŸèƒ½ã€‚åœ¨ä½¿ç”¨apt å‘½ä»¤æ—¶ï¼Œç”¨æˆ·ä¸å¿…å†ç”± apt-get è½¬åˆ° apt-cache æˆ– apt-configï¼Œæä¾›ç®¡ç†è½¯ä»¶åŒ…æ‰€éœ€çš„å¿…è¦é€‰é¡¹<br>apt ç›¸å½“äºapt-getã€apt-cacheå’Œapt-config ä¸­æœ€å¸¸ç”¨å‘½ä»¤é€‰é¡¹çš„é›†åˆapt å…·æœ‰æ›´ç²¾å‡ä½†è¶³å¤Ÿçš„å‘½ä»¤é€‰é¡¹ï¼Œè€Œä¸”å‚æ•°é€‰é¡¹çš„ç»„ç»‡æ–¹å¼æ›´ä¸ºæœ‰æ•ˆã€‚æ­¤å¤–ï¼Œå¯ç”¨çš„å‡ ä¸ªç‰¹æ€§ä¹Ÿéå¸¸æœ‰å¸®åŠ©ã€‚ä¾‹å¦‚:å¯ä»¥åœ¨ä½¿ç”¨ apt å‘½ä»¤å®‰è£…æˆ–åˆ é™¤ç¨‹åºæ—¶çœ‹åˆ°è¿›åº¦æ¡,apt è¿˜ä¼šåœ¨æ›´æ–°å­˜å‚¨åº“æ•°æ®åº“æ—¶æç¤ºç”¨æˆ·å¯å‡çº§çš„è½¯ä»¶åŒ…ä¸ªæ•°<br>apt ä¸ apt-get æœ‰ä¸€äº›ç±»ä¼¼çš„å‘½ä»¤é€‰é¡¹ï¼Œä½†å®ƒå¹¶ä¸èƒ½å®Œå…¨å‘ä¸‹å…¼å®¹ apt-get å‘½ä»¤,ä¹Ÿå³å¯ç”¨apt æ›¿æ¢éƒ¨åˆ† apt-getç³»åˆ—å‘½ä»¤ï¼Œä½†ä¸æ˜¯å…¨éƒ¨<br>aptå‘½ä»¤ç”¨æ³•<br>æŸ¥çœ‹å¸®åŠ©:apt help</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®‰è£…åŒ…</span></span><br><span class="line">apt install tree zip</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®‰è£…å›¾å½¢æ¡Œé¢</span></span><br><span class="line">apt install ubuntu-desktop</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤åŒ…</span></span><br><span class="line">aptremove treezip</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è¯´æ˜ï¼šapt removeä¸­æ·»åŠ --purgeé€‰é¡¹ä¼šåˆ é™¤åŒ…é…ç½®æ–‡ä»¶ï¼Œè°¨æ…ä½¿ç”¨</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ›´æ–°åŒ…ç´¢å¼•ï¼Œç›¸å½“äºyum clean all &amp;&amp; yum makecacheï¼ˆä¿®æ”¹ä»“åº“ä»¥åå¿…é¡»æ‰§è¡Œï¼‰</span></span><br><span class="line">apt update</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‡çº§åŒ…ï¼šè¦å‡çº§ç³»ç»Ÿï¼Œè¯·é¦–å…ˆæ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•ï¼Œå†å‡çº§</span></span><br><span class="line">apt upgrade apache2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">aptåˆ—å‡ºä»“åº“è½¯ä»¶åŒ…ï¼Œç­‰äºyum list</span></span><br><span class="line">apt list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æœç´¢è½¯ä»¶åŒ…</span></span><br><span class="line">apt search nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹æŸä¸ªå®‰è£…åŒ…çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">apt show apache2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åœ¨çº¿å®‰è£…è½¯ä»¶åŒ…</span></span><br><span class="line">apt install apache2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¸è½½å•ä¸ªè½¯ä»¶åŒ…ï¼Œä½†æ˜¯ä¿ç•™é…ç½®æ–‡ä»¶</span></span><br><span class="line">apt remove apache2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤å®‰è£…åŒ…å¹¶è§£å†³ä¾èµ–å…³ç³»</span></span><br><span class="line">apt autoremove apache2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¸è½½å•ä¸ªè½¯ä»¶åŒ…åˆ é™¤é…ç½®æ–‡ä»¶</span></span><br><span class="line">apt purge apache2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‡çº§æ‰€æœ‰å·²å®‰è£…ä¸”å¯å‡çº§åˆ°æ–°ç‰ˆæœ¬çš„è½¯ä»¶åŒ…</span></span><br><span class="line">apt upgrade</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‡çº§æ•´ä¸ªç³»ç»Ÿï¼Œå¿…è¦æ—¶å¯ä»¥ç§»é™¤æ—§çš„è½¯ä»¶åŒ…</span></span><br><span class="line">apt full-upgrade</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç¼–è¾‘<span class="built_in">source</span>æºæ–‡ä»¶</span></span><br><span class="line">apt edit-sources</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹ä»“åº“ä¸­é‚£äº›è½¯ä»¶åŒ…æœ‰é‚£äº›ç‰ˆæœ¬å¯ä»¥å®‰è£…</span></span><br><span class="line">apt-cache madison nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®‰è£…è½¯ä»¶åŒ…çš„æ—¶å€™æŒ‡å®šå®‰è£…å…·ä½“çš„ç‰ˆæœ¬</span></span><br><span class="line">apt install nginx=1.14.0-0ubuntu1.6</span><br></pre></td></tr></table></figure><h3 id="20-4-é…ç½®-apt-ä»“åº“"><a href="#20-4-é…ç½®-apt-ä»“åº“" class="headerlink" title="20.4 é…ç½® apt ä»“åº“"></a>20.4 é…ç½® apt ä»“åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®é˜¿é‡Œäº‘aptä»“åº“ ubuntu 20.04(focal)</span></span><br><span class="line">vim /etc/apt/sources.list</span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span></span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure><h1 id="21-ç£ç›˜ç®¡ç†"><a href="#21-ç£ç›˜ç®¡ç†" class="headerlink" title="21. ç£ç›˜ç®¡ç†"></a>21. ç£ç›˜ç®¡ç†</h1><h3 id="21-1-Linux-ç£ç›˜æ ‡è¯†"><a href="#21-1-Linux-ç£ç›˜æ ‡è¯†" class="headerlink" title="21.1 Linux ç£ç›˜æ ‡è¯†"></a>21.1 Linux ç£ç›˜æ ‡è¯†</h3><h4 id="21-1-2-è®¾å¤‡æ–‡ä»¶"><a href="#21-1-2-è®¾å¤‡æ–‡ä»¶" class="headerlink" title="21.1.2 è®¾å¤‡æ–‡ä»¶"></a>21.1.2 è®¾å¤‡æ–‡ä»¶</h4><p>è®¾å¤‡æ–‡ä»¶ï¼šå…³è”è‡³ä¸€ä¸ªè®¾å¤‡é©±åŠ¨ç¨‹åºï¼ˆæœ‰ç‚¹åƒç¡¬ä»¶çš„è½¯é“¾æ¥ï¼‰ï¼Œè¿›è€Œèƒ½å¤Ÿè·Ÿä¸ä¹‹å¯¹åº”çš„ç¡¬ä»¶è®¾å¤‡è¿›è¡Œé€šä¿¡</p><p>è®¾å¤‡å·ç ï¼šä¸»è®¾å¤‡å·ï¼ˆæ ‡è¯†è®¾å¤‡ç±»å‹ï¼‰ã€æ¬¡è®¾å¤‡å·ï¼ˆæ ‡è¯†åŒä¸€ç±»å‹ä¸‹ä¸åŒçš„è®¾å¤‡ï¼‰</p><p>è®¾å¤‡ç±»å‹ï¼šå—è®¾å¤‡ï¼ˆç£ç›˜ï¼‰ã€å­—ç¬¦è®¾å¤‡ï¼ˆé”®ç›˜ï¼‰</p><p>è®¾å¤‡æ–‡ä»¶å‘½åï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdX# scsiã€sataã€sasã€ideã€usb</span><br><span class="line">/dev/nume0n1p5# numeåè®®</span><br></pre></td></tr></table></figure><p>è™šéƒ¨ç£ç›˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/vd</span><br><span class="line">/dev/xvd</span><br></pre></td></tr></table></figure><p>ç£ç›˜æ ‡è¯†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda</span><br><span class="line">/dev/sdb</span><br><span class="line">/dev/sdc</span><br></pre></td></tr></table></figure><p>åˆ†åŒºæ ‡è¯†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda1</span><br><span class="line">/dev/sda2</span><br><span class="line">/dev/sda3</span><br></pre></td></tr></table></figure><h4 id="21-2-3-åˆ›å»ºè®¾å¤‡æ–‡ä»¶"><a href="#21-2-3-åˆ›å»ºè®¾å¤‡æ–‡ä»¶" class="headerlink" title="21.2.3 åˆ›å»ºè®¾å¤‡æ–‡ä»¶"></a>21.2.3 åˆ›å»ºè®¾å¤‡æ–‡ä»¶</h4><p>å¦‚æœä¸¤ä¸ªè®¾å¤‡è®¾å¤‡ç±»å‹å’Œè®¾å¤‡ç¼–å·ä¸€è‡´,å¯ä»¥è®¤ä¸ºæ˜¯åŒä¸€ä¸ªè®¾å¤‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">brw-rw----. 1 123 disk 8, 0 Nov  4 13:47 /dev/sda1</span><br><span class="line">8 ä¸»è®¾å¤‡å·,æ ‡è¯†è®¾å¤‡ç±»å‹</span><br><span class="line">0 æ¬¡è®¾å¤‡å·,æ ‡è¯†åŒä¸€ç±»å‹ä¸‹ä¸åŒçš„è®¾å¤‡</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºä¸€ä¸ªå’Œ/dev/sda1ä¸€æ ·çš„è®¾å¤‡</span></span><br><span class="line">mknod /data/sda1 b 8 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‚è½½</span></span><br><span class="line">mount /data/sda1 /data</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ä¸¤ä¸ªç›®å½•,å†…å®¹ä¸€è‡´</span></span><br><span class="line">[root@Centos7-1 ~][0]$ ll /boot/ /data/</span><br><span class="line">/boot/:</span><br><span class="line">total 112032</span><br><span class="line">-rw-r--r--. 1 123 root   153562 Apr  1  2020 config-3.10.0-1127.el7.x86_64</span><br><span class="line">drwxr-xr-x. 3 123 root       17 Aug 21 18:01 efi</span><br><span class="line">drwxr-xr-x. 2 123 root       27 Aug 21 18:02 grub</span><br><span class="line">drwx------. 5 123 root       97 Aug 21 19:10 grub2</span><br><span class="line">-rw-------. 1 123 root 61878439 Aug 21 18:08 initramfs-0-rescue-57e6abd4afac4b96931cf5ca2015883e.img</span><br><span class="line">-rw-------. 1 123 root 21551304 Aug 21 18:11 initramfs-3.10.0-1127.el7.x86_64.img</span><br><span class="line">-rw-------. 1 123 root 13657368 Aug 21 19:06 initramfs-3.10.0-1127.el7.x86_64kdump.img</span><br><span class="line">-rw-r--r--. 1 123 root   320512 Apr  1  2020 symvers-3.10.0-1127.el7.x86_64.gz</span><br><span class="line">-rw-------. 1 123 root  3611662 Apr  1  2020 System.map-3.10.0-1127.el7.x86_64</span><br><span class="line">-rwxr-xr-x. 1 123 root  6762688 Aug 21 18:08 vmlinuz-0-rescue-57e6abd4afac4b96931cf5ca2015883e</span><br><span class="line">-rwxr-xr-x. 1 123 root  6762688 Apr  1  2020 vmlinuz-3.10.0-1127.el7.x86_64</span><br><span class="line"></span><br><span class="line">/data/:</span><br><span class="line">total 112032</span><br><span class="line">-rw-r--r--. 1 123 root   153562 Apr  1  2020 config-3.10.0-1127.el7.x86_64</span><br><span class="line">drwxr-xr-x. 3 123 root       17 Aug 21 18:01 efi</span><br><span class="line">drwxr-xr-x. 2 123 root       27 Aug 21 18:02 grub</span><br><span class="line">drwx------. 5 123 root       97 Aug 21 19:10 grub2</span><br><span class="line">-rw-------. 1 123 root 61878439 Aug 21 18:08 initramfs-0-rescue-57e6abd4afac4b96931cf5ca2015883e.img</span><br><span class="line">-rw-------. 1 123 root 21551304 Aug 21 18:11 initramfs-3.10.0-1127.el7.x86_64.img</span><br><span class="line">-rw-------. 1 123 root 13657368 Aug 21 19:06 initramfs-3.10.0-1127.el7.x86_64kdump.img</span><br><span class="line">-rw-r--r--. 1 123 root   320512 Apr  1  2020 symvers-3.10.0-1127.el7.x86_64.gz</span><br><span class="line">-rw-------. 1 123 root  3611662 Apr  1  2020 System.map-3.10.0-1127.el7.x86_64</span><br><span class="line">-rwxr-xr-x. 1 123 root  6762688 Aug 21 18:08 vmlinuz-0-rescue-57e6abd4afac4b96931cf5ca2015883e</span><br><span class="line">-rwxr-xr-x. 1 123 root  6762688 Apr  1  2020 vmlinuz-3.10.0-1127.el7.x86_64</span><br></pre></td></tr></table></figure><h3 id="21-2-ç¡¬ç›˜ç±»å‹"><a href="#21-2-ç¡¬ç›˜ç±»å‹" class="headerlink" title="21.2 ç¡¬ç›˜ç±»å‹"></a>21.2 ç¡¬ç›˜ç±»å‹</h3><h4 id="21-2-3-æŸ¥çœ‹ç¡¬ç›˜ç±»å‹"><a href="#21-2-3-æŸ¥çœ‹ç¡¬ç›˜ç±»å‹" class="headerlink" title="21.2.3 æŸ¥çœ‹ç¡¬ç›˜ç±»å‹"></a>21.2.3 æŸ¥çœ‹ç¡¬ç›˜ç±»å‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1è¡¨ç¤ºæœºæ¢°ç¡¬ç›˜,0è¡¨ç¤ºå›ºæ€æˆ–å…¶ä»–</span></span><br><span class="line">lsblk -d -o name,rota</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Linuxçš„å—è®¾å¤‡</span></span><br><span class="line">ls /sys/block</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1è¡¨ç¤ºæœºæ¢°ç¡¬ç›˜,0è¡¨ç¤ºå›ºæ€æˆ–å…¶ä»–</span></span><br><span class="line">cat /sys/block/sda/queue/rotational</span><br></pre></td></tr></table></figure><h4 id="21-2-4-ç¡¬ç›˜æ¥å£ç±»å‹ä»‹ç»"><a href="#21-2-4-ç¡¬ç›˜æ¥å£ç±»å‹ä»‹ç»" class="headerlink" title="21.2.4 ç¡¬ç›˜æ¥å£ç±»å‹ä»‹ç»"></a>21.2.4 ç¡¬ç›˜æ¥å£ç±»å‹ä»‹ç»</h4><ul><li>IDEï¼š133MB&#x2F;s</li><li>SCSIï¼š640MB&#x2F;s</li><li>SATAï¼š6Gbpsï¼ŒSATAæ•°æ®æ¥å£ä¸ç”µæºæ¥å£åˆ†å¼€ï¼Œå³ä¸¤æ¡çº¿</li><li>SASï¼š6Gbpsï¼ŒSASæ˜¯ä¸€æ•´æ¡çº¿ï¼Œæ•°æ®æ¥å£å’Œç”µæºæ¥å£ä¸€ä½“åŒ–ï¼ŒSASä¸­æ˜¯åŒ…å«ç”µæºçº¿çš„ï¼ŒäºŒSATAä¸­ä¸åŒ…å«ç”µæºçº¿ï¼ŒSATAæ ‡å‡†å…¶å®æ˜¯SASæ ‡å‡†çš„ä¸€ä¸ªå­é›†ï¼ŒäºŒè€…å¯å»ºé€šï¼ŒSATAç¡¬ç›˜å¯ä»¥æ’åœ¨SASä¸»æ¿ä¸Šï¼Œåä¹‹ä¸è¡Œ</li><li>USBï¼š480MB&#x2F;s</li><li>M.2ï¼š</li></ul><p>æ³¨æ„ï¼šNvmeåè®®ç¡¬ç›˜é€Ÿåº¦æ˜¯æœ€å¿«çš„</p><h3 id="21-3-æœºæ¢°ç¡¬ç›˜å’Œå›ºæ€ç¡¬ç›˜"><a href="#21-3-æœºæ¢°ç¡¬ç›˜å’Œå›ºæ€ç¡¬ç›˜" class="headerlink" title="21.3 æœºæ¢°ç¡¬ç›˜å’Œå›ºæ€ç¡¬ç›˜"></a>21.3 æœºæ¢°ç¡¬ç›˜å’Œå›ºæ€ç¡¬ç›˜</h3><p>æœºæ¢°ç¡¬ç›˜ç»“æ„</p><p><img src="C:\Users\å¼ å®‡\AppData\Roaming\Typora\typora-user-images\image-20231104152148740.png" alt="image-20231104152148740"></p><p>å›ºæ€ç¡¬ç›˜ç»“æ„ï¼ˆSSDï¼‰</p><p><img src="C:\Users\å¼ å®‡\AppData\Roaming\Typora\typora-user-images\image-20231104152313536.png" alt="image-20231104152313536"></p><h3 id="21-4-ç¡¬ç›˜åˆ†åŒºä»‹ç»"><a href="#21-4-ç¡¬ç›˜åˆ†åŒºä»‹ç»" class="headerlink" title="21.4 ç¡¬ç›˜åˆ†åŒºä»‹ç»"></a>21.4 ç¡¬ç›˜åˆ†åŒºä»‹ç»</h3><h4 id="21-4-1-ä¸é‡å¯æ‰«ææ–°ç¡¬ç›˜"><a href="#21-4-1-ä¸é‡å¯æ‰«ææ–°ç¡¬ç›˜" class="headerlink" title="21.4.1 ä¸é‡å¯æ‰«ææ–°ç¡¬ç›˜"></a>21.4.1 ä¸é‡å¯æ‰«ææ–°ç¡¬ç›˜</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹æ³•ä¸€</span></span><br><span class="line">echo - - - &gt; /sys/class/scsi_host/host0/scan</span><br><span class="line">echo - - - &gt; /sys/class/scsi_host/host1/scan</span><br><span class="line">echo - - - &gt; /sys/class/scsi_host/host2/scan</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–¹æ³•äºŒ</span></span><br><span class="line">for host in $(/bin/ls /sys/class/scsi_host/);do</span><br><span class="line">echo &quot;- - -&quot; &gt; /sys/class/scsi_host/$&#123;host&#125;/scan;</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h4 id="21-4-2-MBR-åˆ†åŒº"><a href="#21-4-2-MBR-åˆ†åŒº" class="headerlink" title="21.4.2 MBR åˆ†åŒº"></a>21.4.2 MBR åˆ†åŒº</h4><p>ç¡¬ç›˜å³ä½¿åœ¨ä¸åˆ†åŒºçš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œé‚£ä¹ˆç¡¬ç›˜ä¸ºä»€ä¹ˆåˆ†åŒºï¼š</p><ul><li>ä¼˜åŒ–I&#x2F;Oæ€§èƒ½</li><li>å®ç°ç£ç›˜ç©ºé—´é…é¢</li><li>æé«˜ä¿®å¤é€Ÿåº¦</li><li>éš”ç¦»ç³»ç»Ÿå’Œç¨‹åº</li><li>å®‰è£…å¤šä¸ªOS</li><li>é‡‡ç”¨ä¸åŒæ–‡ä»¶ç³»ç»Ÿ</li></ul><p>MBRï¼šä½¿ç”¨32ä½è¡¨ç¤ºæ‰‡åŒºæ•°ï¼Œåˆ†åŒºä¸è¶…è¿‡2T</p><p>0ç£é“0æ‰‡åŒºï¼ˆç¬¬ä¸€ä¸ªæ‰‡åŒºï¼‰ï¼šå…±512å­—èŠ‚ï¼Œå…¶ä¸­å‰446å­—èŠ‚ç”¨æ¥è®°å½•å¯åŠ¨è®¡ç®—æœºçš„ä¸»å¼•å¯¼ç¨‹åºï¼Œ64å­—èŠ‚ç”¨æ¥è®°å½•åˆ†åŒºè¡¨ï¼Œå…¶ä¸­æ¯16ä¸ªå­—èŠ‚è®°å½•ä¸€ä¸ªåˆ†åŒºï¼Œè¿˜æœ‰2ä¸ªå­—èŠ‚è¡¨ç¤º55aaè¡¨ç¤ºç¬¬ä¸€ä¸ªæ‰‡åŒºç»“æŸï¼ˆç»“æŸæ ‡å¿—ï¼‰ï¼Œæ‰€ä»¥MBRåˆ†åŒºä¸­ä¸€å—ç¡¬ç›˜æœ€å¤šæœ‰4ä¸ªä¸»åˆ†åŒºï¼Œä¹Ÿå¯ä»¥3ä¸ªä¸»åˆ†åŒº+1æ‰©å±•åˆ†åŒºã€‚æ‰©å±•åˆ†åŒºå¯ä»¥åˆ›å»ºNä¸ªé€»è¾‘åˆ†åŒºã€‚</p><p>MBRåˆ†åŒºï¼šä¸»åˆ†åŒºå’Œæ‰©å±•åˆ†åŒºå¯¹åº”æ ‡è¯†1-4ï¼Œé€»è¾‘åˆ†åŒºä»5å¼€å§‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç¬¬ä¸€ä¸ªæ‰‡åŒº</span></span><br><span class="line">[root@Centos7-1 ~][0]$ hexdump -C -n 512 /dev/sda</span><br><span class="line">00000000  eb 63 90 10 8e d0 bc 00  b0 b8 00 00 8e d8 8e c0  |.c..............|</span><br><span class="line">00000010  fb be 00 7c bf 00 06 b9  00 02 f3 a4 ea 21 06 00  |...|.........!..|</span><br><span class="line">00000020  00 be be 07 38 04 75 0b  83 c6 10 81 fe fe 07 75  |....8.u........u|</span><br><span class="line">00000030  f3 eb 16 b4 02 b0 01 bb  00 7c b2 80 8a 74 01 8b  |.........|...t..|</span><br><span class="line">00000040  4c 02 cd 13 ea 00 7c 00  00 eb fe 00 00 00 00 00  |L.....|.........|</span><br><span class="line">00000050  00 00 00 00 00 00 00 00  00 00 00 80 01 00 00 00  |................|</span><br><span class="line">00000060  00 00 00 00 ff fa 90 90  f6 c2 80 74 05 f6 c2 70  |...........t...p|</span><br><span class="line">00000070  74 02 b2 80 ea 79 7c 00  00 31 c0 8e d8 8e d0 bc  |t....y|..1......|</span><br><span class="line">00000080  00 20 fb a0 64 7c 3c ff  74 02 88 c2 52 be 05 7c  |. ..d|&lt;.t...R..||</span><br><span class="line">00000090  b4 41 bb aa 55 cd 13 5a  52 72 3d 81 fb 55 aa 75  |.A..U..ZRr=..U.u|</span><br><span class="line">000000a0  37 83 e1 01 74 32 31 c0  89 44 04 40 88 44 ff 89  |7...t21..D.@.D..|</span><br><span class="line">000000b0  44 02 c7 04 10 00 66 8b  1e 5c 7c 66 89 5c 08 66  |D.....f..\|f.\.f|</span><br><span class="line">000000c0  8b 1e 60 7c 66 89 5c 0c  c7 44 06 00 70 b4 42 cd  |..`|f.\..D..p.B.|</span><br><span class="line">000000d0  13 72 05 bb 00 70 eb 76  b4 08 cd 13 73 0d 5a 84  |.r...p.v....s.Z.|</span><br><span class="line">000000e0  d2 0f 83 de 00 be 85 7d  e9 82 00 66 0f b6 c6 88  |.......&#125;...f....|</span><br><span class="line">000000f0  64 ff 40 66 89 44 04 0f  b6 d1 c1 e2 02 88 e8 88  |d.@f.D..........|</span><br><span class="line">00000100  f4 40 89 44 08 0f b6 c2  c0 e8 02 66 89 04 66 a1  |.@.D.......f..f.|</span><br><span class="line">00000110  60 7c 66 09 c0 75 4e 66  a1 5c 7c 66 31 d2 66 f7  |`|f..uNf.\|f1.f.|</span><br><span class="line">00000120  34 88 d1 31 d2 66 f7 74  04 3b 44 08 7d 37 fe c1  |4..1.f.t.;D.&#125;7..|</span><br><span class="line">00000130  88 c5 30 c0 c1 e8 02 08  c1 88 d0 5a 88 c6 bb 00  |..0........Z....|</span><br><span class="line">00000140  70 8e c3 31 db b8 01 02  cd 13 72 1e 8c c3 60 1e  |p..1......r...`.|</span><br><span class="line">00000150  b9 00 01 8e db 31 f6 bf  00 80 8e c6 fc f3 a5 1f  |.....1..........|</span><br><span class="line">00000160  61 ff 26 5a 7c be 80 7d  eb 03 be 8f 7d e8 34 00  |a.&amp;Z|..&#125;....&#125;.4.|</span><br><span class="line">00000170  be 94 7d e8 2e 00 cd 18  eb fe 47 52 55 42 20 00  |..&#125;.......GRUB .|</span><br><span class="line">00000180  47 65 6f 6d 00 48 61 72  64 20 44 69 73 6b 00 52  |Geom.Hard Disk.R|</span><br><span class="line">00000190  65 61 64 00 20 45 72 72  6f 72 0d 0a 00 bb 01 00  |ead. Error......|</span><br><span class="line">000001a0  b4 0e cd 10 ac 3c 00 75  f4 c3 00 00 00 00 00 00  |.....&lt;.u........|</span><br><span class="line">000001b0  00 00 00 00 00 00 00 00  61 6c 01 00 00 00 80 20  |........al..... |</span><br><span class="line">000001c0  21 00 83 aa 28 82 00 08  00 00 00 00 20 00 00 aa  |!...(....... ...|</span><br><span class="line">000001d0  29 82 8e fe ff ff 00 08  20 00 00 f8 5f 02 00 00  |)....... ..._...|</span><br><span class="line">000001e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br><span class="line">000001f0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 55 aa  |..............U.|</span><br><span class="line">00000200</span><br></pre></td></tr></table></figure><h5 id="21-4-2-1-å¤‡ä»½-è¿˜åŸåˆ†åŒºè¡¨"><a href="#21-4-2-1-å¤‡ä»½-è¿˜åŸåˆ†åŒºè¡¨" class="headerlink" title="21.4.2.1 å¤‡ä»½&#x2F;è¿˜åŸåˆ†åŒºè¡¨"></a>21.4.2.1 å¤‡ä»½&#x2F;è¿˜åŸåˆ†åŒºè¡¨</h5><p>&#x3D;&#x3D;æ³¨æ„ï¼šå¤‡ä»½çš„åˆ†åŒºè¡¨éœ€è¦æ”¾åœ¨è¿œç¨‹ä¸»æœºï¼Œå¦åˆ™å¤‡ä»½æ²¡æœ‰ä»»ä½•æ„ä¹‰&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤‡ä»½åˆ†åŒºè¡¨</span></span><br><span class="line">dd if=/dev/sda of=MBR.bak bs=1 count=64 skip=446</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç ´ååˆ†åŒºè¡¨</span></span><br><span class="line">dd if=/dev/zero of=/dev/sda bs=1 count=64 seek=446</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯æœåŠ¡å™¨</span></span><br><span class="line">reboot</span><br><span class="line"></span><br><span class="line">1.å¼€æœºè¯»è¿›åº¦æ¡æŒ‰ä¸€æ¬¡Esc</span><br><span class="line"></span><br><span class="line">2.é€‰æ‹©CD-ROM driveå¯åŠ¨</span><br><span class="line"></span><br><span class="line">3.é€‰æ‹©ç¬¬ä¸‰é¡¹Troubleshooting</span><br><span class="line"></span><br><span class="line">4.é€‰æ‹©ç¬¬äºŒé¡¹Rescue a CentOS systemæ•‘æ´æ¨¡å¼</span><br><span class="line"></span><br><span class="line">5.ç­‰å¾…è¿›å…¥é€‰é¡¹ç•Œé¢è¾“å…¥3ï¼ˆskip to shellï¼‰</span><br><span class="line"></span><br><span class="line">6.æ­¤æ—¶å¯ä»¥çœ‹åˆ°chroot /mnt/sysimage ï¼ˆæ ¹å·²ç»è¢«æŒ‚è½½åˆ°äº†/mnt/sysimageï¼‰</span><br><span class="line"></span><br><span class="line">7.æ­¤æ—¶ä½¿ç”¨å…‰ç›˜å¯åŠ¨ï¼Œä½¿ç”¨çš„æ˜¯å…‰ç›˜å†…çš„æ“ä½œç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line">7.é…ç½®ä¸´æ—¶IPï¼ˆå› ä¸ºå¤‡ä»½å¦‚æœæ”¾åœ¨æœ¬æœºæ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„ï¼‰</span><br><span class="line">ip addr add 192.168.1.7/24 dev ens33</span><br><span class="line"></span><br><span class="line">9.åœ¨æ•…éšœæœåŠ¡å™¨ä¸Šä½¿ç”¨scpå°†192.168.1.17çš„/root/MBR.bakæ‹·è´åˆ°æœ¬æœº</span><br><span class="line">scp 192.168.1.17:/root/MBR.bak .</span><br><span class="line"></span><br><span class="line">10.è¿˜åŸåˆ†åŒºè¡¨</span><br><span class="line">dd if=MBR.bak of=/dev/sda bs=1 seek=446</span><br><span class="line"></span><br><span class="line">11.Ctrl+Alt+Delete æˆ– reboot é‡å¯æ“ä½œç³»ç»Ÿ</span><br></pre></td></tr></table></figure><h4 id="21-4-3-GPT-åˆ†åŒº"><a href="#21-4-3-GPT-åˆ†åŒº" class="headerlink" title="21.4.3 GPT åˆ†åŒº"></a>21.4.3 GPT åˆ†åŒº</h4><p>GPTåˆ†åŒºï¼šGUIDæœ€å¤§æ”¯æŒ128ä¸ªä¸»åˆ†åŒºï¼Œä½¿ç”¨64ä½ï¼Œæ”¯æŒ8Zï¼ˆ512byteï¼‰ï¼Œ64Zï¼ˆ4096byteï¼‰ç©ºé—´</p><p>UEFIï¼šç»Ÿä¸€å¯æ‰©å±•å›ºä»¶æ¥å£ï¼Œç¡¬ä»¶æ”¯æŒGPTï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿå¯ä»¥å¯åŠ¨</p><p>GPTåˆ†åŒºç»“æ„åˆ†ä¸º4ä¸ªåŒºåŸŸï¼›</p><ul><li>GPTå¤´</li><li>åˆ†åŒºè¡¨</li><li>GPTåˆ†åŒº</li><li>å¤‡ä»½åŒºåŸŸ</li></ul><h3 id="21-5-åˆ†åŒºç®¡ç†"><a href="#21-5-åˆ†åŒºç®¡ç†" class="headerlink" title="21.5 åˆ†åŒºç®¡ç†"></a>21.5 åˆ†åŒºç®¡ç†</h3><h4 id="21-5-1-æŸ¥çœ‹å—è®¾å¤‡"><a href="#21-5-1-æŸ¥çœ‹å—è®¾å¤‡" class="headerlink" title="21.5.1 æŸ¥çœ‹å—è®¾å¤‡"></a>21.5.1 æŸ¥çœ‹å—è®¾å¤‡</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br></pre></td></tr></table></figure><h4 id="21-5-2-parted"><a href="#21-5-2-parted" class="headerlink" title="21.5.2 parted"></a>21.5.2 parted</h4><p>&#x3D;&#x3D;partedçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆï¼Œå°å¿ƒä½¿ç”¨&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">parted [é€‰é¡¹] è®¾å¤‡ [å‘½ä»¤]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºåˆ†åŒºè¡¨msdosï¼ˆMBRï¼‰|gpt</span></span><br><span class="line">parted /dev/sdb mklabel gpt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º1ä¸ªåˆ†åŒº,åˆ†é…200Mç©ºé—´</span></span><br><span class="line">parted /dev/sdb mkpart primary 1 200</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º2ä¸ªåˆ†åŒº,åˆ†é…200Mç©ºé—´</span></span><br><span class="line">parted /dev/sdb mkpart primary 201 500</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹åˆ›å»ºçš„åˆ†åŒº</span></span><br><span class="line">parted /deb/sdb print</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åˆ†åŒºç¬¬ä¸€ä¸ªåˆ†åŒº</span></span><br><span class="line">parted /deb/sdb rm 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç©ºåˆ†åŒºè¡¨</span></span><br><span class="line">dd if=/dev/zero of=/dev/sdb bs=1 count=66 seek=446</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç©ºåˆ†åŒº</span></span><br><span class="line">dd if=/dev/zero of=/dev/sdb bs=1 count=64 seek=446</span><br></pre></td></tr></table></figure><h4 id="21-5-3-fdisk-ï¼ˆMBRåˆ†åŒºç®¡ç†ï¼‰"><a href="#21-5-3-fdisk-ï¼ˆMBRåˆ†åŒºç®¡ç†ï¼‰" class="headerlink" title="21.5.3 fdisk ï¼ˆMBRåˆ†åŒºç®¡ç†ï¼‰"></a>21.5.3 fdisk ï¼ˆMBRåˆ†åŒºç®¡ç†ï¼‰</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fdisk ç¡¬ç›˜</span><br><span class="line"></span><br><span class="line">mæŸ¥çœ‹å¸®åŠ©</span><br><span class="line">pæ˜¾ç¤ºå½“å‰åˆ†åŒºæƒ…å†µ</span><br><span class="line">nåˆ›å»ºåˆ†åŒº</span><br><span class="line">dåˆ é™¤åˆ†åŒº</span><br><span class="line">gåˆ›å»ºGPTåˆ†åŒº</span><br><span class="line">oåˆ›å»ºMBRåˆ†åŒº</span><br><span class="line">tä¿®æ”¹åˆ†åŒºç±»å‹,listæˆ–Låˆ—å‡ºæ‰€æœ‰åˆ†åŒºç±»å‹</span><br><span class="line">wä¿å­˜é€€å‡º</span><br><span class="line">qä¸ä¿å­˜é€€å‡º</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éäº¤äº’å¼åˆ›å»ºåˆ†åŒºï¼ˆå®é™…æ˜¯å°†äº¤äº’å¼åˆ†åŒºåŠ¨ä½œåˆ†è§£ï¼‰</span></span><br><span class="line">echo -e &#x27;n\np\n\n\n+2G\nw\n&#x27; | fdisk /dev/sdb</span><br></pre></td></tr></table></figure><h4 id="21-5-4-gdiskï¼ˆGPTåˆ†åŒºç®¡ç†ï¼‰"><a href="#21-5-4-gdiskï¼ˆGPTåˆ†åŒºç®¡ç†ï¼‰" class="headerlink" title="21.5.4 gdiskï¼ˆGPTåˆ†åŒºç®¡ç†ï¼‰"></a>21.5.4 gdiskï¼ˆGPTåˆ†åŒºç®¡ç†ï¼‰</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gdisk ç¡¬ç›˜</span><br></pre></td></tr></table></figure><h4 id="21-5-5-é‡è¯»åˆ†åŒºè¡¨"><a href="#21-5-5-é‡è¯»åˆ†åŒºè¡¨" class="headerlink" title="21.5.5 é‡è¯»åˆ†åŒºè¡¨"></a>21.5.5 é‡è¯»åˆ†åŒºè¡¨</h4><p>é‡æ–°è¯»å–åˆ†åŒºè¡¨ï¼ˆé€‚åˆäºé™¤äº†centos6ä»¥å¤–çš„å…¶ä»–ç‰ˆæœ¬)ï¼Œå‘å†…æ ¸æ³¨å†Œæ–°çš„åˆ†åŒºè¡¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">partprobe</span><br><span class="line"></span><br><span class="line">partx -a /dev/sdb Centos 6æŠŠç£ç›˜çš„åˆ†åŒºè¡¨è®©å†…å­˜è¯»å–ï¼ˆé€‚åˆå¢åŠ åˆ†åŒºæ“ä½œï¼‰</span><br><span class="line">partx -d --nr 1-4 /dev/sdbCentos 6æŠŠç£ç›˜çš„åˆ†åŒºè¡¨è®©å†…å­˜è¯»å–ï¼ˆé€‚åˆåˆ é™¤åˆ†åŒºæ“ä½œï¼‰</span><br></pre></td></tr></table></figure><h1 id="22-æ–‡ä»¶ç³»ç»Ÿ"><a href="#22-æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="22. æ–‡ä»¶ç³»ç»Ÿ"></a>22. æ–‡ä»¶ç³»ç»Ÿ</h1><p>æ–‡ä»¶ç³»ç»Ÿæ˜¯æ“ä½œç³»ç»Ÿç”¨äºæ˜ç¡®å­˜å‚¨è®¾å¤‡æˆ–åˆ†åŒºä¸Šçš„æ–‡ä»¶çš„æ–¹æ³•å’Œæ•°æ®ç»“æ„ï¼Œå³åœ¨å­˜å‚¨è®¾å¤‡ä¸Šç»„ç»‡æ–‡ä»¶çš„æ–¹æ³•ã€‚æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†å’Œå­˜å‚¨æ–‡ä»¶ä¿¡æ¯çš„è½¯ä»¶ç»“æ„ç§°ä¸ºæ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œç®€ç§°æ–‡ä»¶ç³»ç»Ÿä»ç³»ç»Ÿè§’åº¦æ¥çœ‹ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯å¯¹æ–‡ä»¶å­˜å‚¨è®¾å¤‡çš„ç©ºé—´è¿›è¡Œç»„ç»‡å’Œåˆ†é…ï¼Œè´Ÿè´£æ–‡ä»¶å­˜å‚¨å¹¶å¯¹å­˜å…¥çš„æ–‡ä»¶è¿›è¡Œä¿æŠ¤å’Œæ£€ç´¢çš„ç³»ç»Ÿã€‚å…·ä½“åœ°è¯´ï¼Œå®ƒè´Ÿè´£ä¸ºç”¨æˆ·å»ºç«‹æ–‡ä»¶ï¼Œå­˜å…¥ã€è¯»å‡ºã€ä¿®æ”¹ã€è½¬å‚¨æ–‡ä»¶ï¼Œæ§åˆ¶æ–‡ä»¶çš„å­˜å–ï¼Œå®‰å…¨æ§åˆ¶ï¼Œæ—¥å¿—ï¼Œå‹ç¼©ï¼ŒåŠ å¯†ç­‰</p><h3 id="22-1-æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ"><a href="#22-1-æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="22.1 æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ"></a>22.1 æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -ld /lib/modules/$(uname -r)/kernel/fs</span><br></pre></td></tr></table></figure><h3 id="22-2-Linux-å¸¸ç”¨æ–‡ä»¶ç³»ç»Ÿ"><a href="#22-2-Linux-å¸¸ç”¨æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="22.2 Linux å¸¸ç”¨æ–‡ä»¶ç³»ç»Ÿ"></a>22.2 Linux å¸¸ç”¨æ–‡ä»¶ç³»ç»Ÿ</h3><ul><li><p>ext2ï¼šé€‚ç”¨äºåˆ†åŒºä¸æ˜¯å¾ˆå¤§ï¼Œæ–‡ä»¶æ›´æ–°ä¹Ÿä¸é¢‘ç¹çš„æƒ…å†µï¼Œä¾‹å¦‚&#x2F;boot</p></li><li><p>ext3ï¼šext2çš„æ”¹è¿›ç‰ˆï¼Œæ”¯æŒæ—¥å¿—åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¸®åŠ©ç³»ç»Ÿä»éæ­£å¸¸å…³æœºå¯¼è‡´çš„å¼‚å¸¸ä¸­æ¢å¤</p></li><li><p>ext4ï¼šæ˜¯extæ–‡ä»¶ç³»ç»Ÿçš„æœ€æ–°ç‰ˆæœ¬ï¼Œæä¾›äº†å¾ˆå¤šæ–°çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬ç§’çº§çš„æ—¶é—´æˆ³ï¼Œåˆ›å»ºå’Œä½¿ç”¨å·¨å‹æ–‡ä»¶ï¼ˆ16TBï¼‰ï¼Œæœ€å¤§1EBçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥åŠé€Ÿåº¦çš„æå‡</p></li><li><p>xfsï¼šæœ€å¤§æ”¯æŒ8EBçš„æ–‡ä»¶ç³»ç»Ÿ</p></li><li><p>swapï¼šäº¤æ¢åˆ†åŒºï¼Œæ¨¡æ‹Ÿå†…å­˜</p></li></ul><h3 id="22-3-åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ"><a href="#22-3-åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="22.3 åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ"></a>22.3 åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 [é€‰é¡¹] åˆ†åŒº</span><br><span class="line"></span><br><span class="line">-t &#123;ext2|ext3|ext4|xfs&#125;æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹</span><br><span class="line">-b &#123;1024|2048|4096&#125;æŒ‡å®šå—blockå¤§å°,ä¸€ä¸ªæ–‡ä»¶åˆ†é…çš„æœ€å°ç©ºé—´</span><br><span class="line">-L &quot;LABEL&quot;è®¾ç½®å·æ ‡,æ¯”å¦‚å¯ä»¥å†™ä¸ŠæŒ‚è½½ç‚¹</span><br><span class="line">-få¼ºåˆ¶åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">-jç›¸å½“äºmkfs -t ext3</span><br><span class="line">-i?    ä¸ºæ•°æ®ç©ºé—´ä¸­æ¯å¤šå°‘ä¸ªå­—èŠ‚åˆ›å»ºä¸€ä¸ªinodeï¼›ä¸åº”è¯¥å°äºblockå¤§å°</span><br><span class="line">-N?æŒ‡å®šåˆ†åŒºä¸­åˆ›å»ºå¤šå°‘ä¸ªinode</span><br><span class="line">-lä¸€ä¸ªinodeè®°å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å° 128--4096</span><br><span class="line">-m  0.05 é»˜è®¤5%ï¼Œä¸ºç®¡ç†äººå‘˜é¢„ç•™ç©ºé—´å æ€»ç©ºé—´çš„ç™¾åˆ†æ¯”ï¼ˆå¯ä»¥å†™å°æ•°ï¼‰</span><br><span class="line">-Oå¯ç”¨æˆ–å…³é—­æŒ‡å®šç‰¹æ€§,å»ç™¾åº¦</span><br></pre></td></tr></table></figure><h3 id="22-4-æŸ¥çœ‹åˆ†åŒºä¿¡æ¯"><a href="#22-4-æŸ¥çœ‹åˆ†åŒºä¿¡æ¯" class="headerlink" title="22.4 æŸ¥çœ‹åˆ†åŒºä¿¡æ¯"></a>22.4 æŸ¥çœ‹åˆ†åŒºä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">blkid [é€‰é¡¹]</span><br><span class="line"></span><br><span class="line">-UæŒ‡å®šUUIDæ¥æŸ¥æ‰¾å¯¹åº”è®¾å¤‡</span><br><span class="line">-LæŒ‡å®š&quot;å·æ ‡&quot;æ¥æŸ¥æ‰¾å¯¹åº”è®¾å¤‡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æŸ¥æ‰¾åˆ†åŒº</span><br><span class="line">findfs [é€‰é¡¹]</span><br><span class="line"></span><br><span class="line">UUID=ä½¿ç”¨UUIDæœç´¢</span><br><span class="line">LABEL=ä½¿ç”¨&quot;å·æ ‡&quot;æœç´¢</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">findfs UUID=4f3dce7e-d57d-41c5-b916-2982dfd98405</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ¤æ–­ç›®å½•æ˜¯å¦æ˜¯æŒ‚è½½ç‚¹</span></span><br><span class="line">findmnt /boot</span><br></pre></td></tr></table></figure><h3 id="22-5-é‡æ–°è®¾å®šæ–‡ä»¶ç³»ç»Ÿå‚æ•°"><a href="#22-5-é‡æ–°è®¾å®šæ–‡ä»¶ç³»ç»Ÿå‚æ•°" class="headerlink" title="22.5 é‡æ–°è®¾å®šæ–‡ä»¶ç³»ç»Ÿå‚æ•°"></a>22.5 é‡æ–°è®¾å®šæ–‡ä»¶ç³»ç»Ÿå‚æ•°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tune2fs [é€‰é¡¹] åˆ†åŒº</span><br><span class="line"></span><br><span class="line">-læŸ¥çœ‹æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿè¶…çº§å—ä¿¡æ¯,xfsæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ xfs.info /ç›®å½•</span><br><span class="line">-L&quot;LABEL&quot; ä¿®æ”¹å·æ ‡</span><br><span class="line">-m? ä¿®æ”¹é¢„ç•™ç»™ç®¡ç†å‘˜çš„ç©ºé—´ç™¾åˆ†æ¯”</span><br><span class="line">-jå°†ext2å‡çº§ä¸ºext3</span><br><span class="line">-U UUID ä¿®æ”¹UUIDå· </span><br><span class="line">-Oæ–‡ä»¶ç³»ç»Ÿå±æ€§å¯ç”¨æˆ–è€…ç¦ç”¨</span><br><span class="line">-oè°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„é»˜è®¤æŒ‚è½½é€‰é¡¹</span><br><span class="line">-hæŸ¥çœ‹è¶…çº§å—ä¿¡æ¯,ä¸æ˜¾ç¤ºåˆ†ç»„</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æ–‡ä»¶ç³»ç»ŸUUID</span></span><br><span class="line">umount /dev/sdb1</span><br><span class="line">tune2fs -U $(uuidgen) /dev/sdb1</span><br></pre></td></tr></table></figure><h3 id="22-7-æ–‡ä»¶ç³»ç»ŸæŒ‚è½½"><a href="#22-7-æ–‡ä»¶ç³»ç»ŸæŒ‚è½½" class="headerlink" title="22.7 æ–‡ä»¶ç³»ç»ŸæŒ‚è½½"></a>22.7 æ–‡ä»¶ç³»ç»ŸæŒ‚è½½</h3><p>æŒ‚è½½è§„åˆ™ï¼š<br>ä¸€ä¸ªæŒ‚è½½ç‚¹åŒæ—¶åªèƒ½æŒ‚è½½ä¸€ä¸ªè®¾å¤‡<br>ä¸€ä¸ªæŒ‚è½½ç‚¹åŒæ—¶æŒ‚è½½äº†å¤šä¸ªè®¾å¤‡ï¼Œåªèƒ½çœ‹åˆ°æœ€åä¸€ä¸ªè®¾å¤‡çš„æ•°æ®ï¼Œå…¶ä»–è®¾å¤‡ä¸Šçš„æ•°æ®å°†è¢«éšè—<br>ä¸€ä¸ªè®¾å¤‡å¯ä»¥åŒæ—¶æŒ‚è½½åˆ°å¤šä¸ªæŒ‚è½½ç‚¹<br>é€šå¸¸æŒ‚è½½ç‚¹ä¸€èˆ¬æ˜¯å·²å­˜åœ¨ä¸”ä¸ºç©ºçš„ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">mount [é€‰é¡¹] å—è®¾å¤‡ æŒ‚è½½ç‚¹</span><br><span class="line"></span><br><span class="line">-text4 æŒ‡å®šè¦æŒ‚è½½çš„è®¾å¤‡ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹</span><br><span class="line">-råªè¯»æŒ‚è½½</span><br><span class="line">-wè¯»å†™æŒ‚è½½</span><br><span class="line">-nä¸æ›´æ–°/etc/mtabï¼Œmountå‘½ä»¤ä¸å¯è§</span><br><span class="line">-aè‡ªåŠ¨æŒ‚è½½æ‰€æœ‰æ”¯æŒè‡ªåŠ¨æŒ‚è½½çš„è®¾å¤‡ï¼ˆå®šä¹‰åœ¨/etc/fstabæ–‡ä»¶ä¸­ï¼Œä¸”æŒ‚è½½é€‰é¡¹ä¸­æœ‰autoåŠŸèƒ½ï¼‰</span><br><span class="line">-L&quot;LABEL&quot;ä»¥å·æ ‡æŒ‡å®šæŒ‚è½½è®¾å¤‡</span><br><span class="line">-U&quot;UUID&quot; ä»¥UUIDæŒ‡å®šè¦æŒ‚è½½çš„è®¾å¤‡</span><br><span class="line">-B --bind ç»‘å®šç›®å½•åˆ°å¦å¤–ä¸€ä¸ªç›®å½•</span><br><span class="line"></span><br><span class="line">-o optionsï¼šï¼ˆæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„é€‰é¡¹ï¼Œå¤šä¸ªé€‰é¡¹ä½¿ç”¨é€—å·åˆ†éš”ï¼‰</span><br><span class="line">   async å¼‚æ­¥æ¨¡å¼ï¼Œå†…å­˜æ›´æ”¹æ—¶ï¼Œå†™å…¥bufferï¼Œè¿‡ä¸€æ®µæ—¶é—´å†å†™åˆ°ç£ç›˜ä¸­</span><br><span class="line">   syncåŒæ­¥æ¨¡å¼ï¼Œå†…å­˜æ›´æ”¹æ—¶ï¼ŒåŒæ­¥å†™ç£ç›˜</span><br><span class="line">   atime/noatime ç¦æ­¢ç›®å½•å’Œç›®å½•ä¸‹æ–‡ä»¶æ›´æ–°æ—¶é—´,æ®è¯´å¯ä»¥ä¼˜åŒ–ç½‘ç«™5%æ€§èƒ½</span><br><span class="line">   diratime/nodirtime ç›®å½•çš„è®¿é—®æ—¶é—´æˆ³</span><br><span class="line">   auto/noautoæ˜¯å¦æ”¯æŒå¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œæ˜¯å¦æ”¯æŒ-a</span><br><span class="line">   exec/noexecæ˜¯å¦æ”¯æŒåœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šè¿è¡Œåº”ç”¨ç¨‹åº</span><br><span class="line">   dev/nodevæ˜¯å¦æ”¯æŒåœ¨æ­¤æ–‡ä»¶ç³»ç»Ÿä¸Šä½¿ç”¨è®¾å¤‡æ–‡ä»¶</span><br><span class="line">   suid/nosuidæ˜¯å¦æ”¯æŒsuidå’Œsgidæƒé™</span><br><span class="line">   remount é‡æ–°æŒ‚è½½</span><br><span class="line">   ro åªè¯» rwè¯»å†™</span><br><span class="line">   user/nouser æ˜¯å¦å…è®¸æ™®é€šç”¨æˆ·æŒ‚è½½æ­¤è®¾å¤‡ï¼Œ/etc/fstabä½¿ç”¨</span><br><span class="line">   acl/noacl å¯ç”¨æ­¤æ–‡ä»¶ç³»ç»Ÿä¸Šçš„aclåŠŸèƒ½</span><br><span class="line">   loopåˆ†é…ä¸€ä¸ªloopè®¾å¤‡,æŸ¥çœ‹ç›®å½•å’Œloopè®¾å¤‡å…³è”æ€§ losetup -a</span><br><span class="line">   _netdev å½“ç½‘ç»œå¯ç”¨æ—¶ï¼Œæ‰å¯¹ç½‘ç»œèµ„æºè¿›è¡ŒæŒ‚è½½ï¼ŒNFSæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">   defaultsç›¸å½“äºrwï¼Œsuidï¼Œdevï¼Œexecï¼Œautoï¼Œnouserï¼Œasync</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŒ‚è½½</span></span><br><span class="line">mount /dev/sdb1 /pic</span><br><span class="line">mounnt UUID=&quot;9866f965-43cf-472b-b886-24b11f89afe6&quot; /pic</span><br><span class="line">mount -U 9866f965-43cf-472b-b886-24b11f89afe6 /pic</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æ–‡ä»¶å¤¹æŒ‚è½½åˆ°æ–‡ä»¶å¤¹</span></span><br><span class="line">mount -B /etc /mnt/etc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å–æ¶ˆæŒ‚è½½</span></span><br><span class="line">umount /pic</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°æŒ‚è½½</span></span><br><span class="line">mount -o remount,rw /pic</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹è®¾å¤‡æ­£åœ¨è¢«é‚£äº›è¿›ç¨‹æˆ–ç”¨æˆ·ä½¿ç”¨</span></span><br><span class="line">fuser -v /mysql</span><br><span class="line">lsof /mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ€æ‰æ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹</span></span><br><span class="line">kill -9 24153</span><br><span class="line">fuser -km /mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹æŸä¸ªè®¾å¤‡æ‰€æœ‰çš„æŒ‚è½½ç‚¹</span></span><br><span class="line">mount /dev/sdb1</span><br><span class="line">mount</span><br></pre></td></tr></table></figure><h3 id="22-8-å¯¹æ–‡ä»¶åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ"><a href="#22-8-å¯¹æ–‡ä»¶åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="22.8 å¯¹æ–‡ä»¶åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ"></a>22.8 å¯¹æ–‡ä»¶åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆä¸€ä¸ªç©ºæ–‡ä»¶</span></span><br><span class="line">dd if=/dev/zero of=data.img bs=1M count=100</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">mkfs.ext4 data.img</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‚è½½</span></span><br><span class="line">mount data.img /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†éœ€è¦çš„æ•°æ®æ‹·è´</span></span><br><span class="line">cp -ra /etc /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æ–‡ä»¶å‘é€åˆ°å…¶ä»–æœåŠ¡å™¨</span></span><br><span class="line">scp data.img root@192.168.1.17:/root/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨192.168.1.17ä¸ŠæŒ‚è½½data.img,å®ç°ç±»ä¼¼Uç›˜æ•ˆæœ</span></span><br><span class="line">mount data.img /tmp</span><br></pre></td></tr></table></figure><h3 id="22-10-etc-fstab-æ–‡ä»¶æ ¼å¼"><a href="#22-10-etc-fstab-æ–‡ä»¶æ ¼å¼" class="headerlink" title="22.10 &#x2F;etc&#x2F;fstab æ–‡ä»¶æ ¼å¼"></a>22.10 &#x2F;etc&#x2F;fstab æ–‡ä»¶æ ¼å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">UUIDæˆ–è€…å—è®¾å¤‡çš„ä½ç½®æŒ‚è½½æ–‡ä»¶å¤¹æ–‡ä»¶ç³»ç»Ÿæ ¼å¼æŒ‚è½½é€‰é¡¹   0 0</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€ä¸ª0è¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿæ˜¯å¦åº”è¯¥åŒ…å«åœ¨å¤‡ä»½ä¸­ã€‚0 è¡¨ç¤ºä¸åŒ…å«ï¼Œ1 è¡¨ç¤ºåŒ…å«ã€‚</span><br><span class="line">ç¬¬äºŒä¸ª0ç”¨äºæŒ‡å®šæ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥çš„é¡ºåºã€‚0 è¡¨ç¤ºä¸æ£€æŸ¥ï¼Œ1 è¡¨ç¤ºå…ˆæ£€æŸ¥ï¼Œå…¶ä»–æ•°å­—åˆ™è¡¨ç¤ºæ£€æŸ¥é¡ºåºçš„ä¼˜å…ˆçº§ã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">UUID=d98f13eb-905f-41ac-93d3-f6b0c5a994f2 /data  ext4defaults00</span><br><span class="line">UUID=d98f13eb-905f-41ac-93d3-f6b0c5a994f2 /data  ext4noatime,rw00</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–‡ä»¶æŒ‚è½½åˆ°æ–‡ä»¶å¤¹ä¸å…è®¸å†™UUID</span></span><br><span class="line">/image/mnt/image ext4defaults00</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–‡ä»¶å¤¹æŒ‚è½½åˆ°æ–‡ä»¶å¤¹</span></span><br><span class="line">/etc /mnt/etc nonebind00</span><br></pre></td></tr></table></figure><h3 id="22-11-etc-fstab-æ–‡ä»¶é”™è¯¯ä¿®å¤"><a href="#22-11-etc-fstab-æ–‡ä»¶é”™è¯¯ä¿®å¤" class="headerlink" title="22.11  &#x2F;etc&#x2F;fstab æ–‡ä»¶é”™è¯¯ä¿®å¤"></a>22.11  &#x2F;etc&#x2F;fstab æ–‡ä»¶é”™è¯¯ä¿®å¤</h3><p>æ•…éšœç°è±¡è¡¨ç°ä¸ºï¼Œå¼€æœºä¸€ç›´è¯»è¿›åº¦æ¡ï¼ŒæŒç»­ç­‰å¾…ä¼šè¿›å…¥ç´§æ€¥æ¨¡å¼</p><p>&#x3D;&#x3D;æ³¨æ„ï¼šå¦‚æœä¸èƒ½å†™å…¥æ–‡ä»¶éœ€è¦é‡æ–°æŒ‚è½½æ ¹ç›®å½•Â mountÂ -oÂ remount,rwÂ &#x2F;&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.è¾“å…¥rootå£ä»¤</span><br><span class="line"></span><br><span class="line">2.journalctl -xb æŸ¥çœ‹ç³»ç»Ÿæœ¬æ¬¡å¯åŠ¨ç›¸å…³æ—¥å¿—</span><br><span class="line"></span><br><span class="line">3.ç¡®å®šæ•…éšœåŸå› ä¿®å¤</span><br><span class="line"></span><br><span class="line">4.é‡å¯</span><br></pre></td></tr></table></figure><h3 id="22-12-æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤"><a href="#22-12-æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤" class="headerlink" title="22.12 æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤"></a>22.12 æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤</h3><p>æ–‡ä»¶ç³»ç»Ÿæ•…éšœå¸¸å‘ç”Ÿäºæ­»æœºæˆ–éæ­£å¸¸å…³æœºä¹‹åï¼ŒæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿè¡¨ç¤ºä¸ºâ€no cleanâ€</p><p>&#x3D;&#x3D;æ³¨æ„ï¼šä¸€å®šä¸è¦åœ¨æŒ‚è½½çŠ¶æ€ä¸‹æ‰§è¡Œä¿®å¤å‘½ä»¤ï¼Œä¸”ä¿®å¤å‘½ä»¤è¦ä¸åŸæ¥çš„æ–‡ä»¶ç³»ç»Ÿç›¸åŒ&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fsck.ext4 [é€‰é¡¹] å—è®¾å¤‡</span><br><span class="line"></span><br><span class="line">-aè‡ªåŠ¨ä¿®å¤</span><br><span class="line">-r äº¤äº’å¼ä¿®å¤é”™è¯¯</span><br></pre></td></tr></table></figure><p>extç³»åˆ—æ–‡ä»¶ä¸“ç”¨çš„æ£€æµ‹ä¿®å¤å·¥å…·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">e2fsck [é€‰é¡¹] å—è®¾å¤‡</span><br><span class="line"></span><br><span class="line">-yè‡ªåŠ¨å›ç­”ä¸ºyes</span><br><span class="line">-få¼ºåˆ¶ä¿®å¤</span><br><span class="line">-pè‡ªåŠ¨è¿›è¡Œå®‰å…¨çš„ä¿®å¤</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">èŒƒä¾‹</span></span><br><span class="line">e2fsck /dev/sda2</span><br></pre></td></tr></table></figure><p>xfsæ–‡ä»¶ç³»ç»Ÿä¸“ç”¨æ£€æµ‹ä¿®å¤å·¥å…·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xfs_repair [é€‰é¡¹] å—è®¾å¤‡</span><br><span class="line"></span><br><span class="line">init 1 è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</span><br><span class="line">-f ä¿®å¤æ–‡ä»¶,è€Œéè®¾å¤‡</span><br><span class="line">-nåªæ£€æŸ¥</span><br><span class="line">-då…è®¸ä¿®å¤åªè¯»çš„æŒ‚è½½è®¾å¤‡ï¼Œåœ¨å•ç”¨æˆ·ä¸‹ä¿®å¤/æ—¶ä½¿ç”¨ï¼Œç„¶åç«‹å³reboot</span><br></pre></td></tr></table></figure><h1 id="23-äº¤æ¢åˆ†åŒº-swap"><a href="#23-äº¤æ¢åˆ†åŒº-swap" class="headerlink" title="23 äº¤æ¢åˆ†åŒº swap"></a>23 äº¤æ¢åˆ†åŒº swap</h1><h3 id="23-1-swap-åˆ†åŒºå¤§å°é€‰æ‹©"><a href="#23-1-swap-åˆ†åŒºå¤§å°é€‰æ‹©" class="headerlink" title="23.1 swap åˆ†åŒºå¤§å°é€‰æ‹©"></a>23.1 swap åˆ†åŒºå¤§å°é€‰æ‹©</h3><table><thead><tr><th align="left">ç³»ç»Ÿä¸­çš„RAMå¤§å°</th><th>æ¨èçš„swapå¤§å°</th><th>å…è®¸ä¼‘çœ çš„å»ºè®®swapç©ºé—´çš„å¤§å°</th></tr></thead><tbody><tr><td align="left">ä½äº2GB</td><td>RAMçš„2å€</td><td>RAMå®¹é‡çš„ä¸‰å€</td></tr><tr><td align="left">2GB-8GB</td><td>ç­‰äºRAMçš„å¤§å°</td><td>ç­‰äºRAMå¤§å°</td></tr><tr><td align="left">8GB-64GB</td><td>4GBåˆ°RAMå®¹é‡çš„0.5å€</td><td>RAMå®¹é‡çš„å€æ•°</td></tr><tr><td align="left">è¶…è¿‡64G</td><td>ç‹¬ç«‹è´Ÿè½½(è‡³å°‘4GB)</td><td>ä¸å»ºè®®ä½¿ç”¨ä¼‘çœ åŠŸèƒ½</td></tr></tbody></table><h3 id="23-2-swap-çš„ä½¿ç”¨ç­–ç•¥"><a href="#23-2-swap-çš„ä½¿ç”¨ç­–ç•¥" class="headerlink" title="23.2 swap çš„ä½¿ç”¨ç­–ç•¥"></a>23.2 swap çš„ä½¿ç”¨ç­–ç•¥</h3><p>è¯´æ˜ï¼šå½“å†…å­˜åœ¨ä½¿ç”¨100%-30%&#x3D;70%çš„æ—¶å€™ï¼Œå°±å¼€å§‹æœ‰äº¤æ¢åˆ†åŒºçš„ä½¿ç”¨ï¼Œç®€å•çš„è¯´è¿™ä¸ªå‚æ•°å®šä¹‰äº†ç³»ç»Ÿå¯¹swapçš„ä½¿ç”¨å€¾å‘ï¼Œé»˜è®¤å€¼ä¸º30ï¼Œå€¼è¶Šå¤§è¶Šå€¾å‘ä½¿ç”¨swapåˆ†åŒºï¼Œå¯ä»¥è®¾ç½®ä¸º0ï¼Œè¿™æ ·åšå¹¶ä¸ä¼šç¦æ­¢å¯¹swapåˆ†åŒºçš„ä½¿ç”¨ï¼Œåªæ˜¯æœ€å¤§é™åº¦çš„é™ä½äº†ä½¿ç”¨swapåˆ†åŒºçš„å¯èƒ½æ€§</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos7 ~]$ cat /proc/sys/vm/swappiness </span><br><span class="line">30</span><br><span class="line"></span><br><span class="line">echo vm.swappiness = 10 &gt;&gt; /etc/sysctl.conf  &amp;&amp; sysctl -p</span><br></pre></td></tr></table></figure><h3 id="23-3-åˆ›å»ºswapåˆ†åŒº"><a href="#23-3-åˆ›å»ºswapåˆ†åŒº" class="headerlink" title="23.3 åˆ›å»ºswapåˆ†åŒº"></a>23.3 åˆ›å»ºswapåˆ†åŒº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºswapåˆ†åŒº</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">mkswap /dev/sdb1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‚è½½swapåˆ†åŒº</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line">UUID=e45b02cd-bfc6-41d4-9414-b8309e0372a3 swap  swap    defaults        0 0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢æ­£åœ¨ä½¿ç”¨çš„äº¤æ¢åˆ†åŒº</span></span><br><span class="line">swapono -s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¯ç”¨swapåˆ†åŒº</span></span><br><span class="line">swapon /dev/sdb1</span><br><span class="line">swapon -a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç¦ç”¨swapåˆ†åŒº</span></span><br><span class="line">swapoff /dev/sdb1</span><br></pre></td></tr></table></figure><h1 id="24-ç§»åŠ¨ä»‹è´¨"><a href="#24-ç§»åŠ¨ä»‹è´¨" class="headerlink" title="24. ç§»åŠ¨ä»‹è´¨"></a>24. ç§»åŠ¨ä»‹è´¨</h1><p>æŒ‚è½½æ„å‘³ç€ä½¿å¤–æ¥çš„æ–‡ä»¶ç³»ç»Ÿçœ‹èµ·æ¥å¦‚åŒæ˜¯ä¸»ç›®å½•æ ‘çš„ä¸€éƒ¨åˆ†ï¼Œæœ‰æ‰€ç§»åŠ¨ä»‹è´¨ä¹Ÿéœ€è¦æŒ‚è½½ï¼ŒæŒ‚è½½ç‚¹é€šå¸¸åœ¨&#x2F;media æˆ– &#x2F;mnt ä¸‹</p><p>è®¿é—®å‰ï¼Œä»‹è´¨å¿…é¡»è¢«æŒ‚è½½</p><p>æ‘˜é™¤æ—¶ï¼Œä»‹è´¨å¿…é¡»è¢«å¸è½½</p><p>æŒ‰ç…§é»˜è®¤è®¾å¤‡ï¼Œéæ ¹ç”¨æˆ·åªèƒ½æŒ‚è½½æŸäº›è®¾å¤‡ï¼ˆå…‰ç›˜ï¼ŒDVDï¼Œè½¯ç›˜ï¼ŒUSBç­‰ç­‰ï¼‰</p><h3 id="24-1-å…‰ç›˜"><a href="#24-1-å…‰ç›˜" class="headerlink" title="24.1 å…‰ç›˜"></a>24.1 å…‰ç›˜</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰‹å·¥æŒ‚è½½</span></span><br><span class="line">mount /dev/cdrom /mnt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ISOæ–‡ä»¶æŒ‚è½½</span></span><br><span class="line">mount /data/CentOS-7-x86_64-Everything-2009.iso /mnt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line">æ‰§è¡Œï¼šyum -y install autofs &amp;&amp; systemctl enable --now autofs  ï¼ˆCentos 7 8 ä½¿ç”¨ï¼‰</span><br><span class="line">æ‰§è¡Œï¼šchkconfig autofs on &amp;&amp; service autofs startï¼ˆCentos 6 ä½¿ç”¨ï¼‰</span><br><span class="line">æ‰§è¡Œï¼šcd /misc/cd</span><br></pre></td></tr></table></figure><p>æ“ä½œå…‰ç›˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼¹å‡ºå…‰ç›˜</span></span><br><span class="line">eject</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼¹å…¥å…‰ç›˜</span></span><br><span class="line">eject -t</span><br></pre></td></tr></table></figure><h3 id="24-2-USB"><a href="#24-2-USB" class="headerlink" title="24.2 USB"></a>24.2 USB</h3><p>å·¥å…·æ¥è‡ªï¼šyum -y install usbutils</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹USBè®¾å¤‡æ˜¯å¦è¢«è¯†åˆ«,æ¥è‡ªè½¯ä»¶åŒ…usbutils</span></span><br><span class="line">lsusb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æ£€æµ‹åˆ°äº†æ–°è®¾å¤‡æ’å…¥</span></span><br><span class="line">tail -f /var/log/messages</span><br></pre></td></tr></table></figure><p>æ ¼å¼åŒ–USBä½¿å…¶åœ¨Linuxä¸Šå¯ä»¥ä½¿ç”¨ï¼Œå·¥å…·æ¥è‡ªï¼šyum -y install dosfstools</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ ¼å¼åŒ–usbï¼ˆå…¼å®¹windowså’Œcentosï¼‰æ ¼å¼åŒ–ä¸ºFAT32</span></span><br><span class="line">mkfs.vfat /dev/sdd1</span><br></pre></td></tr></table></figure><h3 id="24-3-dd-æŒ‡ä»¤"><a href="#24-3-dd-æŒ‡ä»¤" class="headerlink" title="24.3 dd æŒ‡ä»¤"></a>24.3 dd æŒ‡ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">dd if=/PATH of=/PATH bs=? count=?</span><br><span class="line"></span><br><span class="line">if=fileä»æ–‡ä»¶è¯»å–</span><br><span class="line">of=fileå†™åˆ°æ–‡ä»¶ä¸­</span><br><span class="line"></span><br><span class="line">ibs=sizeä¸€æ¬¡è¯»sizeä¸ªbyte</span><br><span class="line">0bs=siziä¸€æ¬¡å†™sizeä¸ªbyte</span><br><span class="line">bs=sizeæŒ‡å®šå—å¤§å°ï¼Œæ—¢æ˜¯ibsï¼Œä¹Ÿæ˜¯obs</span><br><span class="line"></span><br><span class="line">cbs=sizeä¸€æ¬¡è½¬åŒ–sizeä¸ªbyte</span><br><span class="line">skip=blocksä»å¼€å¤´å¿½ç•¥blocksä¸ªibså¤§å°çš„å—,æº</span><br><span class="line">seek=blocksä»å¼€å¤´å¿½ç•¥blocksä¸ªobså¤§å°çš„å—,ç›®æ ‡</span><br><span class="line"></span><br><span class="line">count=nå¤åˆ¶nä¸ªbs</span><br><span class="line">conv=conversionç”¨æŒ‡å®šå‚æ•°è½¬æ¢æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">conversionè½¬æ¢å‚æ•°</span><br><span class="line">asciiè½¬æ¢EBCDICä¸ºASCII</span><br><span class="line">ebadicè½¬æ¢ASCIIä¸ºEBCDIC</span><br><span class="line">lcase æŠŠå¤§å†™å­—ç¬¦è½¬æ¢ä¸ºå°å†™å­—ç¬¦</span><br><span class="line">ucaseæŠŠå°å†™å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦</span><br><span class="line">nocreatä¸åˆ›å»ºè¾“å‡ºæ–‡ä»¶</span><br><span class="line">noerrorå‡ºé”™æ—¶ä¸åœæ­¢</span><br><span class="line">notruncä¸æˆªæ–­è¾“å‡ºæ–‡ä»¶</span><br><span class="line">syncæŠŠæ¯ä¸ªè¾“å…¥å—å¡«å……åˆ°ibsä¸ªå­—èŠ‚ï¼Œä¸è¶³éƒ¨åˆ†ç”¨ç©ºï¼ˆnulï¼‰å­—ç¬¦è¡¥é½</span><br><span class="line">fdatasyncåªæœ‰è¾“å‡ºæ•°æ®å†™å…¥ç£ç›˜ï¼Œæ‰ç®—åšå†™å…¥å®Œæˆ</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">çœŸå®å†™ç£ç›˜çš„é€Ÿåº¦ï¼š</span></span><br><span class="line">dd if=/dev/zero of=f1.txt bs=1M count=1024 conv=fdatasync</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…‹éš†åˆ†åŒº</span></span><br><span class="line">dd if=/dev/sda1 of=sdy</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…‹éš†å…¨ç›˜æ•°æ®,å¹¶ä½¿ç”¨gzipå‹ç¼©</span></span><br><span class="line">dd if=/dev/sda | gzip &gt; /PATH</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å…‹éš†æŒ‡å®šç›˜</span></span><br><span class="line">dd if=/PATH of=/dev/sda</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å‹ç¼©çš„å…‹éš†æ–‡ä»¶æ¢å¤åˆ°æŒ‡å®šç›˜</span></span><br><span class="line">gzip -dc /PATH | dd of=/dev/sda</span><br></pre></td></tr></table></figure><h1 id="25-RAID-çº§åˆ«å·¥ä½œåŸç†"><a href="#25-RAID-çº§åˆ«å·¥ä½œåŸç†" class="headerlink" title="25. RAID çº§åˆ«å·¥ä½œåŸç†"></a>25. RAID çº§åˆ«å·¥ä½œåŸç†</h1><h3 id="25-1-RAID-çš„ä½œç”¨"><a href="#25-1-RAID-çš„ä½œç”¨" class="headerlink" title="25.1 RAID çš„ä½œç”¨"></a>25.1 RAID çš„ä½œç”¨</h3><p>&#x3D;&#x3D;RAID çš„ä½œç”¨&#x3D;&#x3D;</p><p>æé«˜IOèƒ½åŠ›ï¼Œç£ç›˜å¹¶è¡Œè¯»å†™</p><p>æé«˜è€ç”¨æ€§ï¼Œç£ç›˜å†—ä½™ç®—æ³•æ¥å®ç°</p><h3 id="25-2-RAID-å®ç°æ–¹å¼"><a href="#25-2-RAID-å®ç°æ–¹å¼" class="headerlink" title="25.2 RAID å®ç°æ–¹å¼"></a>25.2 RAID å®ç°æ–¹å¼</h3><p>&#x3D;&#x3D;RAID å®ç°æ–¹å¼&#x3D;&#x3D;</p><p>å¤–æ¥å¼ç£ç›˜é˜µåˆ—ï¼šé€šè¿‡æ‰©å±•å¡æä¾›é€‚é…èƒ½åŠ›</p><p>å†…æ¥å¼RAIDï¼šä¸»æ¿é›†æˆRAIDæ§åˆ¶å™¨ï¼Œå®‰è£…OSå‰åœ¨BISOé‡Œé…ç½®ã€</p><p>è½¯ä»¶RAIDï¼šé€šè¿‡OSå®ç°</p><h3 id="25-3-RAID-çº§åˆ«"><a href="#25-3-RAID-çº§åˆ«" class="headerlink" title="25.3 RAID çº§åˆ«"></a>25.3 RAID çº§åˆ«</h3><p>&#x3D;&#x3D;RAID-0&#x3D;&#x3D;</p><p>å¤šå—ç›¸åŒå®¹é‡ç¡¬ç›˜åˆå¹¶åœ¨ä¸€èµ·ï¼Œæˆä¸ºä¸€å—å¤§ç¡¬ç›˜ï¼Œå­˜å‚¨æ—¶æ•°æ®é›¨éœ²å‡æ²¾ï¼Œä¾æ¬¡ä½¿ç”¨æ¯å—å°ç¡¬ç›˜ï¼Œæé«˜è¯»å†™é€Ÿåº¦ï¼Œæœ€å°ç£ç›˜æ•°2ï¼Œ2+</p><p>å®¹æ˜“ä¸¢å¤±æ•°æ®ï¼Œæ²¡æœ‰å®¹é”™æ€§</p><p>&#x3D;&#x3D;RAID-1&#x3D;&#x3D;</p><p>é•œåƒï¼Œä¸¤å—ç¡¬ç›˜æ•°æ®ä¼šåŒæ­¥ï¼ˆå†™åŒæ­¥ï¼Œåˆ åŒæ­¥ï¼‰ï¼Œä¸»è¦æ˜¯é˜²æ­¢æœ‰ç¡¬ç›˜æŸåï¼ˆæé«˜å®¹é”™æ€§ï¼‰ï¼Œæœ€å°‘ç£ç›˜æ•°2ï¼Œ2N</p><p>è¯»æ€§èƒ½æå‡ï¼Œå†™æ€§èƒ½ä¸‹é™ï¼Œåªèƒ½ä½¿ç”¨50%ç©ºé—´</p><p>&#x3D;&#x3D;RAID-4ï¼ˆå·²ç»æ·˜æ±°ï¼‰&#x3D;&#x3D;</p><p>å¤šå—ç¡¬ç›˜æ”¾æ•°æ®ï¼Œä¸€å—ç¡¬ç›˜å¼‚æˆ–æ ¡éªŒæ•°æ®ï¼Œåçš„ç¡¬ç›˜å¯ä»¥é€šè¿‡æ ¡éªŒä½æ¢å¤ï¼Œï¼ˆx+y&#x3D;æ ¡éªŒä½ï¼Œæ ¡éªŒä½-y&#x3D;xï¼‰æœ€å°‘3å—ç¡¬ç›˜æ‰èƒ½åšRAID4</p><p>&#x3D;&#x3D;RAID-5&#x3D;&#x3D;</p><p>å¤šå—ç¡¬ç›˜æ”¾æ•°æ®ï¼Œéšæœºç¡¬ç›˜æ”¾å¼‚æˆ–æ ¡éªŒä½ï¼Œæœ€å¤šå¯ä»¥å1å—ç¡¬ç›˜ï¼Œæœ€å°‘3å—ç¡¬ç›˜æ‰èƒ½åšRAID5</p><p>è¯»ï¼Œå†™æ€§èƒ½æå‡ï¼Œåˆ©ç”¨ç‡ä¸ºN-1&#x2F;N</p><p>&#x3D;&#x3D;RAID-6&#x3D;&#x3D;</p><p>å¤šå—ç¡¬ç›˜æ”¾æ•°æ®ï¼Œéšæœºä¸¤å—ç¡¬ç›˜æ”¾æ ¡éªŒä½ï¼Œæœ€å¤šå¯ä»¥å2å—ç¡¬ç›˜ï¼Œæœ€å°‘4å—ç¡¬ç›˜æ‰èƒ½åšRAID6</p><p>&#x3D;&#x3D;RAID-10ï¼ˆæœ€ä¼˜ï¼‰&#x3D;&#x3D;</p><p>å¤šå—ç¡¬ç›˜ç›¸äº’ç»„æˆRAID1ï¼ˆé•œåƒï¼‰ï¼Œæœ€åå¤šç»„RAID1ï¼ˆé•œåƒï¼‰ç»„æˆRAID0ï¼ˆåˆå¹¶ï¼‰ï¼Œæ¯ç»„é•œåƒåªèƒ½åä¸€å—ç¡¬ç›˜</p><p>åˆ©ç”¨ç‡ä¸º50%</p><p>&#x3D;&#x3D;RAID-01&#x3D;&#x3D;</p><p>å¤šå—ç¡¬ç›˜ç›¸äº’ç»„æˆRAID0ï¼Œæœ€åå¤šç»„RAID0ç»„æˆRAID1 </p><p>&#x3D;&#x3D;RAID-50&#x3D;&#x3D;</p><p>&#x3D;&#x3D;JBOD&#x3D;&#x3D;</p><p>å°†å¤šå—ä¸€ä¸ªç›˜åˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„è¿ç»­ç©ºé—´</p><h1 id="26-é€»è¾‘å·"><a href="#26-é€»è¾‘å·" class="headerlink" title="26. é€»è¾‘å·"></a>26. é€»è¾‘å·</h1><h3 id="26-1-åˆ›å»ºé€»è¾‘å·"><a href="#26-1-åˆ›å»ºé€»è¾‘å·" class="headerlink" title="26.1 åˆ›å»ºé€»è¾‘å·"></a>26.1 åˆ›å»ºé€»è¾‘å·</h3><p>ç›¸å…³å·¥å…·æ¥è‡ªï¼šyum -y install lvm2</p><p>ä¸€ã€åˆ›å»ºç‰©ç†å·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºç‰©ç†å·,å‘½ä»¤æ ¼å¼pvcreate ç¡¬ç›˜åç§°ï¼ˆæˆ–è€…åˆ†åŒºåç§°ï¼‰</span></span><br><span class="line">pvcreate /dev/sdb1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç‰©ç†å·ä¿¡æ¯</span></span><br><span class="line">pvdisplay</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç‰©ç†å·,å‘½ä»¤æ ¼å¼pvmove ç¡¬ç›˜åç§°ï¼ˆæˆ–è€…åˆ†åŒºåç§°ï¼‰</span></span><br><span class="line">pvremove /dev/sdb1</span><br></pre></td></tr></table></figure><p>äºŒã€åˆ›å»ºå·ç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºå·ç»„,å‘½ä»¤æ ¼å¼vgcreate å·ç»„åç§° pvåç§°</span></span><br><span class="line">vgcreate vg_mysql /dev/sdb1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å·ç»„ä¿¡æ¯</span></span><br><span class="line">vgdisplay</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤å·ç»„,å‘½ä»¤æ ¼å¼vgremove å·ç»„åç§°</span></span><br><span class="line">vgremove vg_mysql</span><br></pre></td></tr></table></figure><p>ä¸‰ã€åˆ›å»ºé€»è¾‘å·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-l 60%vgä½¿ç”¨å·ç»„çš„60%</span><br><span class="line">-l 100%FREEä½¿ç”¨å·ç»„å‰©ä½™ç©ºé—´çš„100%</span><br><span class="line">-L +500MæŒ‡å®šå¤§å°</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºé€»è¾‘å·,å‘½ä»¤æ ¼å¼lvcreate -n å·ç»„å -L åˆ†é…å¤§å° å·ç»„åç§°</span> </span><br><span class="line">lvcreate -n lv_date -L 1G vg_mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é€»è¾‘å·ä¿¡æ¯</span></span><br><span class="line">lvdisplay</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤é€»è¾‘å·,å‘½ä»¤æ ¼å¼lvremove é€»è¾‘å·è·¯å¾„</span></span><br><span class="line">lvremove /dev/vg_mysql/lv_date</span><br></pre></td></tr></table></figure><p>å››ã€åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">mkfs.ext4 /dev/vg_mysql/lv_date</span><br></pre></td></tr></table></figure><p>äº”ã€æŒ‚è½½é€»è¾‘å·&#x3D;&#x3D;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºæŒ‚è½½ç›®å½•</span><br><span class="line">mkdir -p /mysql/data</span><br><span class="line"></span><br><span class="line"># æŒ‚è½½é€»è¾‘å·</span><br><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line">UUID=ef5dc733-e379-441a-b180-a6b28e94e637 /mysql/data ext4defaults0 0</span><br></pre></td></tr></table></figure><h3 id="26-2-æ‰©å±•é€»è¾‘å·ç©ºé—´"><a href="#26-2-æ‰©å±•é€»è¾‘å·ç©ºé—´" class="headerlink" title="26.2 æ‰©å±•é€»è¾‘å·ç©ºé—´"></a>26.2 æ‰©å±•é€»è¾‘å·ç©ºé—´</h3><h4 id="26-2-1-æ‰©å®¹å·ç»„"><a href="#26-2-1-æ‰©å®¹å·ç»„" class="headerlink" title="26.2.1 æ‰©å®¹å·ç»„"></a>26.2.1 æ‰©å®¹å·ç»„</h4><p>å·ç»„æ²¡æœ‰ç©ºé—´æ—¶ï¼Œä½¿ç”¨ç‰©ç†å·æ‰©å®¹å·ç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºç‰©ç†å·,å‘½ä»¤æ ¼å¼pvcreate ç¡¬ç›˜åç§°ï¼ˆæˆ–è€…åˆ†åŒºåç§°ï¼‰</span></span><br><span class="line">pvcreate /dev/sdc1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰©å®¹å·ç»„,å‘½ä»¤æ ¼å¼vgextend  &lt;è¦æ‰©å®¹çš„å·ç»„åç§°&gt; &lt;è¦æ·»åŠ åˆ°å·ç»„çš„pvè·¯å¾„&gt;</span></span><br><span class="line">vgextend vg_mysql /dev/sdc1</span><br></pre></td></tr></table></figure><h4 id="26-2-2-æ‰©å®¹é€»è¾‘å·"><a href="#26-2-2-æ‰©å®¹é€»è¾‘å·" class="headerlink" title="26.2.2 æ‰©å®¹é€»è¾‘å·"></a>26.2.2 æ‰©å®¹é€»è¾‘å·</h4><p>å·ç»„è¿˜æœ‰å‰©ä½™ç©ºé—´æ—¶ï¼Œä½¿ç”¨å·ç»„æ‰©å®¹é€»è¾‘å·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-l 60%vgä½¿ç”¨å·ç»„çš„60%</span><br><span class="line">-l 100%FREEä½¿ç”¨å·ç»„å‰©ä½™ç©ºé—´çš„100%</span><br><span class="line">-L +500MæŒ‡å®šå¤§å°</span><br><span class="line">-ræ‰©å±•é€»è¾‘å·æ—¶,åŒæ­¥é€»è¾‘å·æ–‡ä»¶ç³»ç»Ÿï¼ˆæ¨èä½¿ç”¨ï¼‰</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰©å®¹é€»è¾‘å·,å‘½ä»¤æ ¼å¼lvextend -Låˆ†é…å¤§å° -n é€»è¾‘å·å</span></span><br><span class="line">lvextend -L +1G  -n /dev/vg_mysql/lv_date</span><br><span class="line"></span><br><span class="line">-- æ­¤æ—¶æ–°æ‰©å®¹çš„ç©ºé—´ç”±äºæ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿ,è™½ç„¶é€»è¾‘å·ç©ºé—´å·²ç»å¢åŠ ,ä½†æ˜¯ä¾ç„¶æ— æ³•ä½¿ç”¨</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ­¥é€»è¾‘å·æ–‡ä»¶ç³»ç»Ÿ,ext4</span></span><br><span class="line">resize2fs /dev/vg_mysql/lv_date</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ­¥é€»è¾‘å·æ–‡ä»¶ç³»ç»Ÿ,xfs ï¼ˆæŒ‡å®šæŒ‚è½½ç›®å½•ï¼‰</span></span><br><span class="line">xfs_growfs /mysql/data</span><br></pre></td></tr></table></figure><h4 id="26-2-3-åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ"><a href="#26-2-3-åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="26.2.3 åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ"></a>26.2.3 åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ</h4><p>æ­¤æ—¶æ–°æ‰©å®¹çš„ç©ºé—´ç”±äºæ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿ,è™½ç„¶é€»è¾‘å·ç©ºé—´å·²ç»å¢åŠ ,ä½†æ˜¯ä¾ç„¶æ— æ³•ä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ­¥é€»è¾‘å·æ–‡ä»¶ç³»ç»Ÿ,ext4</span></span><br><span class="line">resize2fs /dev/vg_mysql/lv_date</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ­¥é€»è¾‘å·æ–‡ä»¶ç³»ç»Ÿ,xfs ï¼ˆæŒ‚è½½ç›®å½•çš„ç›®å½•ï¼‰</span></span><br><span class="line">xfs_growfs /mysql/data</span><br><span class="line">xfs_growfs /# ç»™/åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ</span><br></pre></td></tr></table></figure><h3 id="26-3-ç¼©å‡é€»è¾‘å·ç©ºé—´"><a href="#26-3-ç¼©å‡é€»è¾‘å·ç©ºé—´" class="headerlink" title="26.3 ç¼©å‡é€»è¾‘å·ç©ºé—´"></a>26.3 ç¼©å‡é€»è¾‘å·ç©ºé—´</h3><p>&#x3D;&#x3D;ç¼©å‡é€»è¾‘å·æœ‰é£é™©ï¼ˆç¼©å‡ç©ºé—´ä¸è¦å°äºå·²ä½¿ç”¨ç©ºé—´ï¼‰ï¼Œå»ºè®®å¤‡ä»½é‡è¦æ•°æ®ï¼Œxfs æ–‡ä»¶ç³»ç»Ÿä¸æ”¯æŒç¼©å‡é€»è¾‘å·&#x3D;&#x3D;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1. å–æ¶ˆæŒ‚è½½çš„é€»è¾‘å·ï¼ˆå¿…é¡»æ‰§è¡Œï¼‰</span><br><span class="line">umount /mysql/data</span><br><span class="line"></span><br><span class="line">2. æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿå®Œæ•´æ€§ï¼ˆå¿…é¡»æ‰§è¡Œï¼‰</span><br><span class="line">fsck -f /dev/vg_mysql/lv_dateæˆ–e2fsck -f /dev/vg_mysql/lv_date</span><br><span class="line"></span><br><span class="line">3. ç¼©å‡æ–‡ä»¶ç³»ç»Ÿç©ºé—´ï¼ˆå¿…é¡»æ‰§è¡Œï¼‰,å°†æ–‡ä»¶ç³»ç»Ÿå¤§å°è°ƒæ•´ä¸º1G</span><br><span class="line">resize2fs /dev/vg_mysql/lv_date 1G</span><br><span class="line"></span><br><span class="line">4. ç¼©å‡é€»è¾‘å·,å°†é€»è¾‘å·å¤§å°è°ƒæ•´ä¸º1G,å¿…é¡»å’Œæ–‡ä»¶ç³»ç»Ÿå¤§å°ä¸€è‡´</span><br><span class="line">lvreduce -L 1G /dev/vg_mysql/lv_date</span><br><span class="line"></span><br><span class="line">5. æ¢å¤æŒ‚è½½,éªŒè¯ç»“æœ</span><br><span class="line">df -h | grep /dev/vg_mysql/lv_date</span><br><span class="line">lvdisplay | grep -A 15  /dev/vg_mysql/lv_date | grep &#x27;LV Size&#x27;</span><br></pre></td></tr></table></figure><h3 id="26-4-é€»è¾‘å·å¿«ç…§"><a href="#26-4-é€»è¾‘å·å¿«ç…§" class="headerlink" title="26.4 é€»è¾‘å·å¿«ç…§"></a>26.4 é€»è¾‘å·å¿«ç…§</h3><h4 id="26-4-1-é€»è¾‘å·å¿«ç…§åŸç†"><a href="#26-4-1-é€»è¾‘å·å¿«ç…§åŸç†" class="headerlink" title="26.4.1 é€»è¾‘å·å¿«ç…§åŸç†"></a>26.4.1 é€»è¾‘å·å¿«ç…§åŸç†</h4><p>å¿«ç…§æ˜¯ç‰¹æ®Šçš„é€»è¾‘å·ï¼Œå®ƒæ˜¯åœ¨ç”Ÿæˆå¿«ç…§æ—¶å­˜åœ¨çš„é€»è¾‘å·çš„å‡†ç¡®æ‹·è´ï¼Œå¯¹äºéœ€è¦å¤‡ä»½æˆ–è€…å¤åˆ¶çš„ç°æœ‰æ•°æ®ä¸´æ—¶æ‹·è´ä»¥åŠå…¶ä»–æ“ä½œæ¥è¯´ï¼Œå¿«ç…§æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ï¼Œå¿«ç…§åªæœ‰åœ¨å®ƒä»¬å’ŒåŸæ¥çš„é€»è¾‘å·ä¸åŒæ—¶æ‰ä¼šæ¶ˆè€—ç©ºé—´ï¼Œå»ºç«‹å¿«ç…§çš„å·å¤§å°ï¼Œå°äºç­‰äºåŸå§‹é€»è¾‘å·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨lvextendæ‰©å±•å¿«ç…§</p><p>é€»è¾‘å·å¿«ç…§</p><p>é€»è¾‘å·å¿«ç…§å°±æ˜¯å°†å½“æ—¶çš„ç³»ç»Ÿä¿¡æ¯è®°å½•ä¸‹æ¥ï¼Œå°±å¥½åƒç…§ç›¸ä¸€æ ·ï¼Œå°†æ¥æœ‰ä»»ä½•æ•°æ®æ”¹åŠ¨äº†ï¼Œåˆ™æ”¹åŠ¨å‰çš„åŸå§‹æ•°æ®ä¼šè¢«ç§»åŠ¨åˆ°å¿«ç…§åŒºã€‚æ²¡æœ‰æ”¹åŠ¨çš„åŒºåŸŸåˆ™ç”±å¿«ç…§åŒºå’Œæ–‡ä»¶ç³»ç»Ÿå…±äº«</p><p>å·¥ä½œåŸç†</p><ol><li>åœ¨ç”Ÿæˆå¿«ç…§æ—¶ä¼šåˆ†é…ç»™å®ƒä¸€å®šçš„ç©ºé—´ï¼Œä½†åªæœ‰åœ¨åŸæ¥çš„é€»è¾‘å·æˆ–è€…å¿«ç…§æ”¹å˜æ—¶æ‰ä¼šä½¿ç”¨è¿™äº›ç©ºé—´ã€‚</li><li>å½“åŸæ¥çš„é€»è¾‘å·ä¸­æœ‰æ‰€æ”¹å˜æ—¶ï¼Œä¼šå°†æ—§çš„æ•°æ®å¤åˆ¶åˆ°å¿«ç…§ä¸­</li><li>å¿«ç…§ä¸­åªå«æœ‰åŸæ¥çš„é€»è¾‘å·ä¸­æœªæ›´æ”¹çš„æ•°æ®æˆ–è€…ç”Ÿæˆå¿«ç…§åçš„å¿«ç…§ä¸­æ›´æ”¹çš„æ•°æ®</li></ol><p>ç”±äºå¿«ç…§åŒºä¸åŸæœ¬çš„LVå…¬ç”¨å¾ˆå¤šPEåŒºå—ï¼Œå› æ­¤å¿«ç…§ä¸è¢«å¿«ç…§çš„LVå¿…é¡»åœ¨åŒä¸€å…±VGä¸­ï¼Œç³»ç»Ÿæ¢å¤çš„æ—¶å€™çš„æ–‡ä»¶æ•°é‡ä¸èƒ½é«˜äºå¿«ç…§åŒºçš„å®é™…å®¹é‡ã€‚</p><p>å¿«ç…§ç‰¹ç‚¹</p><ol><li>å¤‡ä»½é€Ÿåº¦å¿«ï¼Œåªæ˜¯åˆ›å»ºäº†LV</li><li>åº”ç”¨åœºæ™¯æ˜¯æµ‹è¯•ï¼Œä¸èƒ½å®Œå…¨ä»£æ›¿å¤‡ä»½</li><li>å¿«ç…§ä¹‹åï¼Œé€»è¾‘å·çš„ä¿®æ”¹é€Ÿåº¦ä¼šæ”¶åˆ°ä¸€å®šå°è±¡</li></ol><h4 id="26-4-2-åˆ›å»ºé€»è¾‘å·å¿«ç…§"><a href="#26-4-2-åˆ›å»ºé€»è¾‘å·å¿«ç…§" class="headerlink" title="26.4.2 åˆ›å»ºé€»è¾‘å·å¿«ç…§"></a>26.4.2 åˆ›å»ºé€»è¾‘å·å¿«ç…§</h4><p>åˆ›å»ºé€»è¾‘å·å¿«ç…§ï¼Œå¿«ç…§å¿…é¡»å’Œ lv åœ¨åŒä¸€ä¸ª vg ä¸­</p><p>å¯ä»¥åˆ›å»ºå¤šä¸ªå¿«ç…§ï¼Œæ¯ä¸ªå¿«ç…§è®°å½•çš„éƒ½æ˜¯å¿«ç…§åˆ›å»ºæ—¶ï¼Œé€»è¾‘å·çš„çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å·ç»„å‰©ä½™ç©ºé—´</span></span><br><span class="line">vgdisplay | grep -A 16 vg_mysql | grep &#x27;PE Size&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºé€»è¾‘å·å¿«ç…§,å¿«ç…§çš„å¤§å°å¿…é¡»å°äºlvçš„å¤§å°</span></span><br><span class="line">lvcreate -n å¿«ç…§åç§° -s -L å¿«ç…§ç©ºé—´å¤§å° å¯¹é‚£ä¸ªlvæ¥åˆ›å»º</span><br><span class="line">lvcreate -n lv_date_kz -s -L 500M /dev/vg_mysql/lv_date</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‚è½½é€»è¾‘å·å¿«ç…§ext4</span></span><br><span class="line">mount -o ro /dev/vg_mysql/lv_date_kz /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‚è½½é€»è¾‘å·å¿«ç…§,xfs</span></span><br><span class="line">mount -o nouuid,ro /dev/vg_mysql/lv_date_kz /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤é€»è¾‘å·å¿«ç…§</span></span><br><span class="line">lvremove /dev/vg_mysql/lv_date_kz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¿«ç…§å’Œé€»è¾‘å·çš„å¤§å°ä¸€è‡´</span></span><br><span class="line">/dev/mapper/vg_mysql-lv_date     976M  2.6M  912M   1% /mysql/data</span><br><span class="line">/dev/mapper/vg_mysql-lv_date_kz  976M  2.6M  912M   1% /tmp</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="26-4-3-é€»è¾‘å·å¿«ç…§è¿˜åŸ"><a href="#26-4-3-é€»è¾‘å·å¿«ç…§è¿˜åŸ" class="headerlink" title="26.4.3 é€»è¾‘å·å¿«ç…§è¿˜åŸ"></a>26.4.3 é€»è¾‘å·å¿«ç…§è¿˜åŸ</h4><p>é€»è¾‘å·ä¸­è®°å½•çš„æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œè€Œå¿«ç…§ä¸­è®°å½•çš„éƒ½æ˜¯å¿«ç…§åˆ›å»ºæ—¶ï¼Œé€»è¾‘å·çš„çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ¶ˆé€»è¾‘å·å’Œé€»è¾‘å·æŒ‚è½½çš„å…¨éƒ¨æŒ‚è½½ï¼ˆç¦»çº¿çŠ¶æ€æ‰å¯ä»¥è¿˜åŸå¿«ç…§ï¼‰</span></span><br><span class="line">umount /mysql/data</span><br><span class="line">umount /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€»è¾‘å·è¿˜åŸå¿«ç…§,å‘½ä»¤æ ¼å¼lvconvert --merge å¿«ç…§é€»è¾‘å·åç§°</span></span><br><span class="line">lvconvert --merge /dev/vg_mysql/lv_date_kz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶è¿˜åŸçš„å¿«ç…§å·²ç»è¢«åˆ é™¤ï¼ˆè¯¥æŒ‡ä»¤è¿”å›æ‰¾ä¸åˆ°é€»è¾‘å·ï¼‰</span></span><br><span class="line">lvdisplay /dev/vg_mysql/lv_date_kz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°æŒ‚è½½è¿˜åŸçš„é€»è¾‘å·</span></span><br><span class="line">mount /dev/mapper/vg_mysql-lv_date /mysql/data</span><br></pre></td></tr></table></figure><h3 id="26-5-æ‹†å¸æ›´æ¢é€»è¾‘å·ç¡¬ç›˜"><a href="#26-5-æ‹†å¸æ›´æ¢é€»è¾‘å·ç¡¬ç›˜" class="headerlink" title="26.5 æ‹†å¸æ›´æ¢é€»è¾‘å·ç¡¬ç›˜"></a>26.5 æ‹†å¸æ›´æ¢é€»è¾‘å·ç¡¬ç›˜</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‚è€ƒLinuxå…¥é—¨åˆ°ç²¾é€šP69æœ€å20åˆ†é’Ÿ</span><br></pre></td></tr></table></figure><h1 id="27-ç½‘ç»œåè®®"><a href="#27-ç½‘ç»œåè®®" class="headerlink" title="27. ç½‘ç»œåè®®"></a>27. ç½‘ç»œåè®®</h1><h3 id="27-1-ç½‘ç»œåŸºç¡€"><a href="#27-1-ç½‘ç»œåŸºç¡€" class="headerlink" title="27.1 ç½‘ç»œåŸºç¡€"></a>27.1 ç½‘ç»œåŸºç¡€</h3><h4 id="27-1-1-ç½‘ç»œçš„èŒƒå›´åˆ†ç±»"><a href="#27-1-1-ç½‘ç»œçš„èŒƒå›´åˆ†ç±»" class="headerlink" title="27.1.1 ç½‘ç»œçš„èŒƒå›´åˆ†ç±»"></a>27.1.1 ç½‘ç»œçš„èŒƒå›´åˆ†ç±»</h4><ul><li>å¹¿åŸŸç½‘</li><li>åŸåŸŸç½‘</li><li>å±€åŸŸç½‘</li></ul><h4 id="27-1-2-ç½‘ç»œçš„ç‰¹å¾"><a href="#27-1-2-ç½‘ç»œçš„ç‰¹å¾" class="headerlink" title="27.1.2 ç½‘ç»œçš„ç‰¹å¾"></a>27.1.2 ç½‘ç»œçš„ç‰¹å¾</h4><p>é€Ÿåº¦ï¼ˆå¸¦å®½ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1B=8b,100Mbps=102400Kbps</span><br><span class="line">102400Kbps/8=12800KBps</span><br><span class="line">100M å®½å¸¦æœ€å¤§ä¸‹è½½é€Ÿåº¦ä¸º12.8M/s</span><br></pre></td></tr></table></figure><h3 id="27-2-ç½‘ç»œæ ‡å‡†OSIä¸ƒå±‚ç»“æ„"><a href="#27-2-ç½‘ç»œæ ‡å‡†OSIä¸ƒå±‚ç»“æ„" class="headerlink" title="27.2 ç½‘ç»œæ ‡å‡†OSIä¸ƒå±‚ç»“æ„"></a>27.2 ç½‘ç»œæ ‡å‡†OSIä¸ƒå±‚ç»“æ„</h3><p>7.åº”ç”¨å±‚ Applicationé’ˆå¯¹ç‰¹å®šåº”ç”¨çš„åè®®ï¼Œé‚®ä»¶åè®®ã€æ–‡ä»¶ä¼ è¾“åè®®ã€è¿œç¨‹åè®®</p><p>6.è¡¨ç¤ºå±‚ Presentation      è®¾å¤‡å›ºæœ‰æ•°æ®æ ¼å¼å’Œç½‘ç»œæ ‡å‡†æ•°æ®æ ¼å¼è½¬æ¢ï¼ˆä¸åŒçš„æ ‡å‡†ä»£è¡¨ä¸åŒçš„ä¿¡æ¯ï¼‰</p><p>5.ä¼šè¯å±‚ Session      é€šä¿¡ç®¡ç†ï¼Œè´Ÿè´£å»ºç«‹å’Œæ–­å¼€é€šä¿¡è¿æ¥ï¼Œç®¡ç†ä¼ è¾“å±‚ä¸€ä¸‹çš„åˆ†å±‚</p><p>4.ä¼ è¾“å±‚ Transport   ç¡®ä¿æ•°æ®æˆåŠŸåˆ°è¾¾ï¼Œæ•°æ®æ ¡éªŒ</p><p>3.ç½‘ç»œå±‚ Network    åœ°å€ç®¡ç†å’Œè·¯ç”±é€‰æ‹©ï¼ˆç»è¿‡é‚£ä¸ªè·¯ç”±ä¼ é€’åˆ°ç›®æ ‡åœ°å€ï¼Ÿï¼‰</p><p>2.æ•°æ®é“¾è·¯å±‚ Date link     äº’è”è®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“å’Œç‰¹å®šæ•°æ®ç»“æ„çš„æ•°æ®å¸§ </p><p>1.ç‰©ç†å±‚ Physical     ç¡¬ä»¶äº’è”ï¼ˆæ— çº¿&#x2F;æœ‰çº¿ï¼‰1ä¸ªå­—èŠ‚&#x3D;8ä½</p><h3 id="27-3-ç½‘ç»œé€šä¿¡è¿‡ç¨‹"><a href="#27-3-ç½‘ç»œé€šä¿¡è¿‡ç¨‹" class="headerlink" title="27.3 ç½‘ç»œé€šä¿¡è¿‡ç¨‹"></a>27.3 ç½‘ç»œé€šä¿¡è¿‡ç¨‹</h3><h4 id="27-3-1-åè®®æ•°æ®å•å…ƒPUD"><a href="#27-3-1-åè®®æ•°æ®å•å…ƒPUD" class="headerlink" title="27.3.1 åè®®æ•°æ®å•å…ƒPUD"></a>27.3.1 åè®®æ•°æ®å•å…ƒPUD</h4><p>PDU åè®®æ•°æ®å•å…ƒæ˜¯å€¼å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€’çš„æ•°æ®å•ä½</p><p>ç‰©ç†å±‚çš„PDUæ˜¯æ•°æ®ä½ bit</p><p>æ•°æ®é“¾è·¯å±‚çš„PDUæ˜¯æ•°æ®å¸§ frame</p><p>ç½‘ç»œå±‚çš„PDUæ˜¯æ•°æ®åŒ… packet</p><p>ä¼ è¾“å±‚çš„PDUæ˜¯æ•°æ®æ®µ segment</p><p>å…¶ä»–æ›´é«˜å±‚æ¬¡çš„PUDæ˜¯æ¶ˆæ¯ message</p><h4 id="27-3-2-ä¸‰ç§é€šè®¯æ¨¡å¼"><a href="#27-3-2-ä¸‰ç§é€šè®¯æ¨¡å¼" class="headerlink" title="27.3.2 ä¸‰ç§é€šè®¯æ¨¡å¼"></a>27.3.2 ä¸‰ç§é€šè®¯æ¨¡å¼</h4><p>å•æ’­ï¼ˆunicastï¼‰ï¼šå‘é€æŠ¥æ–‡çš„ç›®æ ‡å”¯ä¸€ï¼Œä¸ä»£è¡¨æ”¶åˆ°çš„äººåªæœ‰ä¸€ä¸ª</p><p>å¹¿æ’­ï¼ˆbroadcastï¼‰ï¼šå‘é€æŠ¥æ–‡çš„ç›®æ ‡æ˜¯ä¸€å®šèŒƒå›´å†…çš„æ‰€æœ‰</p><p>ç»„æ’­ï¼ˆmulticaseï¼‰ï¼šå‘é€æŠ¥æ–‡çš„ç›®æ ‡æ˜¯éƒ¨åˆ†è®¡ç®—æœºï¼Œä¸€éƒ¨åˆ†äºº</p><h4 id="27-3-3-å†²çªåŸŸå’Œå¹¿æ’­åŸŸ"><a href="#27-3-3-å†²çªåŸŸå’Œå¹¿æ’­åŸŸ" class="headerlink" title="27.3.3 å†²çªåŸŸå’Œå¹¿æ’­åŸŸ"></a>27.3.3 å†²çªåŸŸå’Œå¹¿æ’­åŸŸ</h4><p>å†²çªåŸŸï¼šå½“ä¸¤ä¸ªç½‘ç»œè®¾å¤‡åŒæ—¶å‘é€æ•°æ®ï¼Œå¦‚æœå‘é€äº†å†²çªï¼Œåˆ™ä¸¤ä¸ªè®¾å¤‡å¤„äºåŒä¸€ä¸ªå†²çªåŸŸï¼Œåä¹‹ï¼Œåˆ™å„è‡ªå¤„äºä¸åŒçš„å†²çªåŸŸ</p><p>å¹¿æ’­åŸŸï¼šä¸€ä¸ªç½‘ç»œè®¾å¤‡å‘é€å¹¿æ’­ï¼Œå¦ä¸€ä¸ªè®¾å¤‡æ”¶åˆ°äº†ï¼Œåˆ™ä¸¤ä¸ªè®¾å¤‡å¤„åŒä¸€ä¸ªå¹¿æ’­åŸŸï¼Œåä¹‹ï¼Œåˆ™å„è‡ªå¤„äºä¸åŒçš„å¹¿æ’­åŸŸ</p><h4 id="27-3-4-ä¸‰ç§é€šè®¯æœºåˆ¶"><a href="#27-3-4-ä¸‰ç§é€šè®¯æœºåˆ¶" class="headerlink" title="27.3.4 ä¸‰ç§é€šè®¯æœºåˆ¶"></a>27.3.4 ä¸‰ç§é€šè®¯æœºåˆ¶</h4><p>å•å·¥ï¼šåªèƒ½ä¸€ä¸ªæ–¹å‘ä¼ ï¼ˆå–‡å­ã€éŸ³å“ã€æ”¶éŸ³æœºï¼‰</p><p>åŠåŒå·¥ï¼šä¸èƒ½åŒæ—¶æ”¶å’Œå‘ï¼ˆå¯¹è®²æœºï¼‰</p><p>å…¨åŒå·¥ï¼šåŒæ—¶æ”¶å‘ï¼ˆæ‰‹æœºï¼‰</p><h3 id="27-4-ç½‘ç»œè®¾å¤‡"><a href="#27-4-ç½‘ç»œè®¾å¤‡" class="headerlink" title="27.4 ç½‘ç»œè®¾å¤‡"></a>27.4 ç½‘ç»œè®¾å¤‡</h3><h4 id="27-4-1-äº¤æ¢æœº"><a href="#27-4-1-äº¤æ¢æœº" class="headerlink" title="27.4.1 äº¤æ¢æœº"></a>27.4.1 äº¤æ¢æœº</h4><p>äº¤æ¢æœºå¤„äºæ•°æ®é“¾è·¯å±‚ï¼Œäº¤æ¢æœºå†…éƒ¨RAMèŠ¯ç‰‡ï¼Œä¼šè®°å½•ä¸€å¼ MACåœ°å€å’Œäº¤æ¢æœºç«¯å£å¯¹åº”çš„è¡¨ï¼Œå½“ç›®æ ‡çš„MACåœ¨è¡¨ä¸­æœ‰è®°å½•æ—¶ï¼Œäº¤æ¢æœºå°†ç›´æ¥å°†æ•°æ®å¸§å‘é€ç»™å¯¹åº”ç«¯å£ï¼Œå½“ä¸€ä¸ªæ–°çš„ç›®æ ‡åœ°å€å‡ºç°æ—¶ï¼Œäº¤æ¢æœºé€šè¿‡MACè¡¨æ²¡æœ‰æ‰¾åˆ°å¯¹åº”ç«¯å£ï¼Œå°†æ³›æ´ªï¼Œæ•°æ®å¸§ä¼šä»æ‰€æœ‰ç«¯å£è½¬å‘å‡ºå»ï¼Œè¿™ä¸€ä¸ªè¿‡ç¨‹ä¼šè®©äº¤æ¢æœºè®°å½•ä¸‹ç›®æ ‡åœ°å€å’Œæºåœ°å€çš„ç«¯å£ï¼Œä»è€Œä¸‹æ¬¡å°†ä¸åœ¨æ³›æ´ª</p><p>å¦‚æœä¸€ä¸ªæ•°æ®å¸§çš„ç›®æ ‡åœ°å€æ˜¯æ‰€æœ‰åœ°å€ï¼Œäº¤æ¢æœºå°†å¹¿æ’­ï¼Œå°†æ•°æ®å¸§å‘é€åˆ°æ‰€æœ‰çš„ç«¯å£ï¼Œè¿‡å¤šçš„å¹¿æ’­ä¼šé€ æˆå¹¿æ’­é£æš´ï¼Œç½‘ç»œå µå¡</p><h4 id="27-4-2-è·¯ç”±å™¨"><a href="#27-4-2-è·¯ç”±å™¨" class="headerlink" title="27.4.2 è·¯ç”±å™¨"></a>27.4.2 è·¯ç”±å™¨</h4><p>è·¯ç”±å™¨å¤„äºç½‘ç»œå±‚</p><h3 id="27-5-ä»¥å¤ªç½‘"><a href="#27-5-ä»¥å¤ªç½‘" class="headerlink" title="27.5 ä»¥å¤ªç½‘"></a>27.5 ä»¥å¤ªç½‘</h3><h4 id="27-5-1-ä»¥å¤ªç½‘-MAC-å¸§ç»“æ„"><a href="#27-5-1-ä»¥å¤ªç½‘-MAC-å¸§ç»“æ„" class="headerlink" title="27.5.1 ä»¥å¤ªç½‘ MAC å¸§ç»“æ„"></a>27.5.1 ä»¥å¤ªç½‘ MAC å¸§ç»“æ„</h4><ol><li><strong>å‰å¯¼ä¿¡æ¯ï¼ˆPreambleï¼‰</strong>ï¼šé€šå¸¸æ˜¯7ä¸ªå­—èŠ‚çš„å‰å¯¼ç ï¼Œç”¨äºåŒæ­¥æ¥æ”¶ç«¯çš„æ—¶é’Ÿï¼Œå¹¶æ ‡è¯†æ•°æ®å¸§çš„å¼€å§‹ã€‚</li><li><strong>èµ·å§‹å¸§ç•Œå®šç¬¦ï¼ˆStart Frame Delimiterï¼‰</strong>ï¼š1ä¸ªå­—èŠ‚ï¼Œæ ‡å¿—ç€æ•°æ®å¸§çš„å¼€å§‹ã€‚</li><li><strong>ç›®æ ‡MACåœ°å€ï¼ˆDestination MAC Addressï¼‰</strong>ï¼šé€šå¸¸æ˜¯6ä¸ªå­—èŠ‚ï¼ŒæŒ‡ç¤ºäº†æ•°æ®å¸§çš„ç›®æ ‡è®¾å¤‡çš„MACåœ°å€ã€‚</li><li><strong>æºMACåœ°å€ï¼ˆSource MAC Addressï¼‰</strong>ï¼šåŒæ ·æ˜¯6ä¸ªå­—èŠ‚ï¼ŒæŒ‡ç¤ºäº†æ•°æ®å¸§çš„å‘é€è€…çš„MACåœ°å€ã€‚</li><li><strong>ç±»å‹&#x2F;é•¿åº¦å­—æ®µï¼ˆType&#x2F;Length Fieldï¼‰</strong>ï¼šé€šå¸¸æ˜¯2ä¸ªå­—èŠ‚ï¼Œç”¨äºæ ‡è¯†æ•°æ®å¸§ä¸­å°è£…çš„ä¸Šå±‚åè®®ç±»å‹ï¼ˆå¦‚IPv4ã€IPv6ã€ARPç­‰ï¼‰æˆ–æŒ‡å®šæ•°æ®å¸§çš„é•¿åº¦ã€‚</li><li><strong>æ•°æ®ï¼ˆDataï¼‰</strong>ï¼šæ•°æ®å¸§çš„å®é™…æ•°æ®éƒ¨åˆ†ï¼Œé•¿åº¦å¯ä»¥å˜åŒ–ï¼Œæœ€å°é•¿åº¦ä¸º46å­—èŠ‚ã€‚</li><li><strong>æ ¡éªŒå’Œåºåˆ—ï¼ˆFrame Check Sequenceï¼ŒFCSï¼‰</strong>ï¼šé€šå¸¸æ˜¯4ä¸ªå­—èŠ‚ï¼ŒåŒ…æ‹¬CRCï¼ˆå¾ªç¯å†—ä½™æ£€æµ‹ï¼‰æ ¡éªŒç ï¼Œç”¨äºæ£€æµ‹æ•°æ®å¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚</li></ol><h3 id="27-6-è™šæ‹Ÿå±€åŸŸç½‘-VLAN"><a href="#27-6-è™šæ‹Ÿå±€åŸŸç½‘-VLAN" class="headerlink" title="27.6 è™šæ‹Ÿå±€åŸŸç½‘ VLAN"></a>27.6 è™šæ‹Ÿå±€åŸŸç½‘ VLAN</h3><p>å°†äº¤æ¢æœºçš„ç«¯å£åˆ’åˆ†ä¸åŒçš„ç½‘æ®µï¼Œå®ç°å¹¿æ’­åŸŸéš”ç¦»ï¼Œå°†è·¯ç”±å™¨çš„ä¸¤ç«¯åˆ†åˆ«æ¥å…¥ä¸åŒçš„VLANï¼Œå®ç°ä¸é€šçš„VLANé€šè®¯ï¼Œè€Œå¸¦æœ‰è·¯ç”±åŠŸèƒ½çš„äº¤æ¢æœºè¢«ç§°ä¹‹ä¸ºä¸‰å±‚äº¤æ¢æœºï¼Œå³å¯ä»¥å®ç°ç½‘ç»œå±‚åŠŸèƒ½</p><h3 id="27-8-TCP-IPåè®®"><a href="#27-8-TCP-IPåè®®" class="headerlink" title="27.8 TCP&#x2F;IPåè®®"></a>27.8 TCP&#x2F;IPåè®®</h3><h4 id="27-8-1-TCP-IP-åˆ†å±‚ç»“æ„"><a href="#27-8-1-TCP-IP-åˆ†å±‚ç»“æ„" class="headerlink" title="27.8.1 TCP&#x2F;IP åˆ†å±‚ç»“æ„"></a>27.8.1 TCP&#x2F;IP åˆ†å±‚ç»“æ„</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/35354992/1685521192618-e0777325-e0da-44ca-9cd7-177e18e40df8.png?x-oss-process=image/resize,w_868,limit_0" alt="image.png"></p><h4 id="27-8-2-TCP-IP-é€šä¿¡è¿‡ç¨‹"><a href="#27-8-2-TCP-IP-é€šä¿¡è¿‡ç¨‹" class="headerlink" title="27.8.2 TCP&#x2F;IP é€šä¿¡è¿‡ç¨‹"></a>27.8.2 TCP&#x2F;IP é€šä¿¡è¿‡ç¨‹</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/35354992/1685521719075-5f85002a-1d65-429a-8b0e-a283ca884296.png" alt="img"></p><h4 id="27-8-3-TCPåŒ…å¤´ç»“æ„"><a href="#27-8-3-TCPåŒ…å¤´ç»“æ„" class="headerlink" title="27.8.3 TCPåŒ…å¤´ç»“æ„"></a>27.8.3 TCPåŒ…å¤´ç»“æ„</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/35354992/1685523010222-429dab41-9eed-4e5f-a4d3-74a9d7b943e5.png?x-oss-process=image/resize,w_985,limit_0" alt="image.png"></p><h4 id="27-8-4-TCP-ä¸‰æ¬¡æ¡æ‰‹"><a href="#27-8-4-TCP-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="27.8.4 TCP ä¸‰æ¬¡æ¡æ‰‹"></a>27.8.4 TCP ä¸‰æ¬¡æ¡æ‰‹</h4><h4 id="27-8-5-TCP-å››æ¬¡æŒ¥æ‰‹"><a href="#27-8-5-TCP-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="27.8.5 TCP å››æ¬¡æŒ¥æ‰‹"></a>27.8.5 TCP å››æ¬¡æŒ¥æ‰‹</h4><h3 id="27-9-ç«¯å£"><a href="#27-9-ç«¯å£" class="headerlink" title="27.9 ç«¯å£"></a>27.9 ç«¯å£</h3><h4 id="27-9-1-ç«¯å£åˆ†ç±»"><a href="#27-9-1-ç«¯å£åˆ†ç±»" class="headerlink" title="27.9.1 ç«¯å£åˆ†ç±»"></a>27.9.1 ç«¯å£åˆ†ç±»</h4><p>ä¼ è¾“å±‚é€šè¿‡portå·ï¼Œç¡®å®šåº”ç”¨å±‚åè®®ï¼ŒèŒƒå›´0-65535</p><ul><li><p>0-1023ï¼šç³»ç»Ÿç«¯å£æˆ–ç‰¹æƒç«¯å£(ä»…ç®¡ç†å‘˜å¯ç”¨)ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œæ°¸ä¹…çš„åˆ†é…ç»™å›ºå®šçš„ç³»ç»Ÿåº”ç”¨ä½¿ç”¨ï¼Œ22&#x2F;TCP(ssh)ï¼Œ80&#x2F;TCP(http)ï¼Œ443&#x2F;TCP(https)</p></li><li><p>1024-49151ï¼šç”¨æˆ·ç«¯å£æˆ–æ³¨å†Œç«¯å£ï¼Œä½†è¦æ±‚å¹¶ä¸ä¸¥æ ¼ï¼Œåˆ†é…ç»™ç¨‹åºæ³¨å†Œä¸ºæŸåº”ç”¨ä½¿ç”¨ï¼Œ1443&#x2F;TCP(sql server)ï¼Œ1521&#x2F;TCP(oracle)ï¼Œ3306&#x2F;TCP(mysql)ï¼Œ11211&#x2F;tcp&#x2F;udp(memcached)</p></li><li><p>49152-65535ï¼šåŠ¨æ€æˆ–ç§æœ‰ç«¯å£ï¼Œå®¢æˆ·ç«¯éšæœºä½¿ç”¨ç«¯å£ï¼ŒèŒƒå›´å®šä¹‰ï¼š</p></li></ul><h4 id="27-9-2-å®šä¹‰éšæœºç«¯å£èŒƒå›´"><a href="#27-9-2-å®šä¹‰éšæœºç«¯å£èŒƒå›´" class="headerlink" title="27.9.2 å®šä¹‰éšæœºç«¯å£èŒƒå›´"></a>27.9.2 å®šä¹‰éšæœºç«¯å£èŒƒå›´</h4><p>å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œä½¿ç”¨éšæœºç«¯å£ï¼Œå¯ä»¥å®šä¹‰éšæœºç«¯å£ä½¿ç”¨çš„èŒƒå›´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥çœ‹</span><br><span class="line">cat /proc/sys/net/ipv4/ip_local_port_range</span><br><span class="line"></span><br><span class="line"># ä¸´æ—¶ä¿®æ”¹</span><br><span class="line">echo 20000 65535 &gt; /proc/sys/net/ipv4/ip_local_port_range</span><br><span class="line"></span><br><span class="line"># è‘—åæœåŠ¡ç”¨çš„ç«¯å£å·</span><br><span class="line">less /etc/services</span><br></pre></td></tr></table></figure><h4 id="27-9-3-ç«¯å£ç›‘å¬"><a href="#27-9-3-ç«¯å£ç›‘å¬" class="headerlink" title="27.9.3 ç«¯å£ç›‘å¬"></a>27.9.3 ç«¯å£ç›‘å¬</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…ncå·¥å…·åŒ…</span></span><br><span class="line">yum -y install nc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰“å¼€9527ç«¯å£</span></span><br><span class="line">nc -l 9527</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¿é—®9527ç«¯å£</span></span><br><span class="line">nc 192.168.1.8 9527</span><br></pre></td></tr></table></figure><h4 id="27-9-4-æŸ¥çœ‹ç«¯å£è¢«é‚£ä¸ªPID-ç¨‹åºå ç”¨"><a href="#27-9-4-æŸ¥çœ‹ç«¯å£è¢«é‚£ä¸ªPID-ç¨‹åºå ç”¨" class="headerlink" title="27.9.4 æŸ¥çœ‹ç«¯å£è¢«é‚£ä¸ªPID&#x2F;ç¨‹åºå ç”¨"></a>27.9.4 æŸ¥çœ‹ç«¯å£è¢«é‚£ä¸ªPID&#x2F;ç¨‹åºå ç”¨</h4><p>å·¥å…·æ¥è‡ªï¼šyum -y install lsof</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ss -tunp</span><br><span class="line">lsof -i:22</span><br></pre></td></tr></table></figure><h4 id="27-9-5-åˆ¤æ–­è¿œç¨‹ä¸»æœºç«¯å£æ˜¯å¦æ‰“å¼€"><a href="#27-9-5-åˆ¤æ–­è¿œç¨‹ä¸»æœºç«¯å£æ˜¯å¦æ‰“å¼€" class="headerlink" title="27.9.5 åˆ¤æ–­è¿œç¨‹ä¸»æœºç«¯å£æ˜¯å¦æ‰“å¼€"></a>27.9.5 åˆ¤æ–­è¿œç¨‹ä¸»æœºç«¯å£æ˜¯å¦æ‰“å¼€</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">0 è¡¨ç¤ºæ‰“å¼€,1 è¡¨ç¤ºå…³é—­</span></span><br><span class="line">[root@Centos ~][0]$ &lt; /dev/tcp/192.168.1.17/22</span><br><span class="line">[root@Centos ~][0]$ </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…³é—­çŠ¶æ€</span></span><br><span class="line">[root@Centos ~][0]$ &lt; /dev/tcp/192.168.1.17/23</span><br><span class="line">-bash: connect: Connection refused</span><br><span class="line">-bash: /dev/tcp/192.168.1.17/23: Connection refused</span><br><span class="line">[root@Centos ~][1]$ </span><br></pre></td></tr></table></figure><h3 id="27-10-Internet-å±‚"><a href="#27-10-Internet-å±‚" class="headerlink" title="27.10 Internet å±‚"></a>27.10 Internet å±‚</h3><h4 id="27-10-11-ping-å·¥å…·"><a href="#27-10-11-ping-å·¥å…·" class="headerlink" title="27.10.11 ping å·¥å…·"></a>27.10.11 ping å·¥å…·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ping [é€‰é¡¹] ç›®æ ‡IP</span><br><span class="line"></span><br><span class="line">-c ?æŒ‡å®špingè¯·æ±‚æ¬¡æ•°</span><br><span class="line">-i ?æ¯æ¬¡è¯·æ±‚é—´éš”æ—¶é—´,ä»¥ç§’ä¸ºå•ä½</span><br><span class="line">-s ?æŒ‡å®šæ•°æ®åŒ…å¤§å°,ä»¥å­—èŠ‚ä¸ºå•ä½</span><br><span class="line">-t ?è®¾ç½®å­˜æ´»æ•°å€¼TTLçš„å¤§å°ã€‚</span><br><span class="line">-w ?ç­‰å¾…å“åº”çš„è¶…æ—¶æ—¶é—´,ä»¥ç§’ä¸ºå•ä½</span><br><span class="line">-W ?ç­‰å¾…æŒ‡å®šæ—¶é—´åæ‰§è¡Œ</span><br><span class="line">-qå®‰é™æ¨¡å¼,ä¸æ˜¾ç¤ºæ¯ä¸ªpingè¯·æ±‚çš„è¾“å‡º</span><br><span class="line">-fæ´ªæ°´æ¨¡å¼,å°½å…¨åŠ›pingç›®æ ‡IP</span><br><span class="line">-IæŒ‡å®šå‘èµ·pingè¯·æ±‚çš„IP</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ¤æ–­ç½‘ç»œæ˜¯å¦å¯è¾¾</span></span><br><span class="line">ping 192.168.1.7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘é€æŒ‡å®šå­—èŠ‚</span></span><br><span class="line">ping 192.168.1.7 -s 65507</span><br></pre></td></tr></table></figure><h4 id="27-10-12-ARP-åœ°å€è§£æåè®®"><a href="#27-10-12-ARP-åœ°å€è§£æåè®®" class="headerlink" title="27.10.12 ARP åœ°å€è§£æåè®®"></a>27.10.12 ARP åœ°å€è§£æåè®®</h4><p>&#x3D;&#x3D;ARP å·¥ä½œåŸç†&#x3D;&#x3D;</p><ol><li><strong>ARPè¯·æ±‚</strong>ï¼š å½“è®¾å¤‡åœ¨æœ¬åœ°ç½‘ç»œä¸­è¦ä¸å¦ä¸€å°è®¾å¤‡é€šä¿¡æ—¶ï¼Œå®ƒé¦–å…ˆæ£€æŸ¥æœ¬åœ° ARP ç¼“å­˜ï¼ˆARPç¼“å­˜æ˜¯ä¸€ä¸ªå­˜å‚¨IPåœ°å€ä¸MACåœ°å€æ˜ å°„çš„è¡¨æ ¼ï¼‰ã€‚å¦‚æœè¦è®¿é—®çš„ç›®æ ‡åœ°å€ä¸åœ¨ç¼“å­˜ä¸­ï¼Œå®ƒå°†å¹¿æ’­å‘é€ä¸€ä¸ªARPè¯·æ±‚ã€‚è¯¥è¯·æ±‚åŒ…å«å‘é€æ–¹è®¾å¤‡çš„IPåœ°å€å’ŒMACåœ°å€ï¼Œä»¥åŠç›®æ ‡è®¾å¤‡çš„IPåœ°å€ã€‚è¿™ä¸ªå¹¿æ’­å¸§ä¼šå‘é€åˆ°æœ¬åœ°ç½‘ç»œä¸Šçš„æ‰€æœ‰è®¾å¤‡ã€‚å¦‚æœï¼ŒARPåè®®å‘ç°ç›®æ ‡åœ°å€ä¸å’Œè‡ªå·±å¤„äºä¸€ä¸ªç½‘æ®µï¼Œå°†ä¼šæ‰¾è‡ªå·±çš„ç½‘å…³ï¼Œè®©ç½‘å…³å°†è‡ªå·±çš„è¯·æ±‚äº¤ç»™ç›®æ ‡åœ°å€</li><li><strong>ARPåº”ç­”</strong>ï¼š å½“ç½‘ç»œä¸Šçš„è®¾å¤‡æ”¶åˆ°ARPè¯·æ±‚åï¼Œç›®æ ‡è®¾å¤‡ä¼šæ£€æŸ¥è¯·æ±‚ä¸­çš„IPåœ°å€æ˜¯å¦ä¸è‡ªå·±çš„IPåœ°å€ç›¸åŒ¹é…ã€‚å¦‚æœåŒ¹é…ï¼Œç›®æ ‡è®¾å¤‡ä¼šå‘é€ä¸€ä¸ªARPåº”ç­”ï¼ŒåŒ…å«è‡ªå·±çš„MACåœ°å€ã€‚è¿™ä¸ªåº”ç­”æ¶ˆæ¯åªä¼šå‘é€ç»™ARPè¯·æ±‚ä¸­æŒ‡å®šçš„æºè®¾å¤‡ã€‚</li><li><strong>æ›´æ–°ARPç¼“å­˜</strong>ï¼š æºè®¾å¤‡æ”¶åˆ°æ¥è‡ªç›®æ ‡è®¾å¤‡çš„ARPåº”ç­”åï¼Œå®ƒå°†æ›´æ–°è‡ªå·±çš„ARPç¼“å­˜ï¼Œå°†ç›®æ ‡è®¾å¤‡çš„IPåœ°å€å’ŒMACåœ°å€è¿›è¡Œå…³è”ï¼Œä»¥ä¾¿å°†æ¥é€šä¿¡æ—¶èƒ½å¤Ÿç›´æ¥ä½¿ç”¨è¯¥ä¿¡æ¯ã€‚</li><li><strong>é€šä¿¡</strong>ï¼š æœ‰äº†IPåœ°å€åˆ°MACåœ°å€çš„æ˜ å°„åï¼Œæºè®¾å¤‡å°±èƒ½å¤Ÿæ„å»ºæ•°æ®å¸§å¹¶å°†å…¶å‘é€åˆ°ç›®æ ‡è®¾å¤‡ã€‚æ•°æ®å¸§ä¸­åŒ…å«ç›®æ ‡è®¾å¤‡çš„MACåœ°å€ï¼Œç¡®ä¿æ•°æ®èƒ½å¤Ÿè¢«æ­£ç¡®è·¯ç”±åˆ°ç›®æ ‡è®¾å¤‡ã€‚</li></ol><p>&#x3D;&#x3D;å…è´¹ ARP IPåœ°å€å†²çªæ£€æµ‹åŸç†&#x3D;&#x3D;</p><ol><li><strong>æœåŠ¡å™¨è·å–IPåœ°å€</strong>ï¼š æœåŠ¡å™¨åœ¨é…ç½®ç½‘ç»œæ¥å£æ—¶è¢«åˆ†é…äº†IPåœ°å€ï¼Œä¾‹å¦‚192.168.1.7ã€‚</li><li><strong>å‘é€ARPè¯·æ±‚</strong>ï¼š ä¸€æ—¦æœåŠ¡å™¨æ‹¥æœ‰IPåœ°å€ï¼Œå®ƒä¼šå°è¯•ä½¿ç”¨ARPè¯·æ±‚å¹¿æ’­æ¥æŸ¥æ‰¾ä¸è¯¥IPåœ°å€å…³è”çš„MACåœ°å€ã€‚æœåŠ¡å™¨ä¼šå‘é€ARPè¯·æ±‚æ¶ˆæ¯ï¼Œè¯¢é—®å±€åŸŸç½‘ä¸Šçš„æ‰€æœ‰è®¾å¤‡ï¼šâ€è°æ˜¯192.168.1.7çš„MACåœ°å€ï¼Ÿâ€</li><li><strong>ç­‰å¾…å“åº”</strong>ï¼š æœåŠ¡å™¨å°†ç­‰å¾…ä¸€å®šæ¬¡æ•°æˆ–ä¸€æ®µæ—¶é—´ä»¥è·å–ARPå“åº”ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œå…¶ä»–è®¾å¤‡åœ¨å±€åŸŸç½‘ä¸Šæ¥æ”¶åˆ°äº†è¿™ä¸ªARPè¯·æ±‚ã€‚</li><li><strong>æ£€æµ‹å†²çª</strong>ï¼š å¦‚æœå¦ä¸€å°è®¾å¤‡å·²ç»ä½¿ç”¨äº†IPåœ°å€192.168.1.7å¹¶å‘é€äº†ARPå“åº”ï¼Œè¿™å°†å¯¼è‡´æœåŠ¡å™¨æ¥æ”¶åˆ°å¤šä¸ªå…·æœ‰ç›¸åŒIPåœ°å€ä½†ä¸åŒMACåœ°å€çš„ARPå“åº”ã€‚è¿™æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„å†²çªæ ‡å¿—ã€‚</li><li><strong>è§£å†³å†²çª</strong>ï¼š ä¸€æ—¦æœåŠ¡å™¨æ£€æµ‹åˆ°IPåœ°å€å†²çªï¼Œå®ƒåº”è¯¥é‡‡å–æªæ–½æ¥è§£å†³å†²çªï¼Œé€šå¸¸é€šè¿‡æ›´æ”¹å…¶IPåœ°å€æˆ–å®šä½å’Œè§£å†³ä¸ä¹‹å†²çªçš„è®¾å¤‡ã€‚è§£å†³å†²çªåï¼ŒæœåŠ¡å™¨åº”è¯¥é‡æ–°å‘é€ARPè¯·æ±‚ä»¥è·å–æ­£ç¡®çš„MACåœ°å€ã€‚</li></ol><p>&#x3D;&#x3D;åå‘ ARP åŠ¨æ€IPåœ°å€è·å–åŸç†&#x3D;&#x3D;</p><ol><li><strong>RARPæœåŠ¡å™¨</strong>ï¼šåœ¨ç½‘ç»œä¸­ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªRARPæœåŠ¡å™¨ï¼Œå®ƒä»¬ç»´æŠ¤MACåœ°å€åˆ°IPåœ°å€çš„æ˜ å°„è¡¨ã€‚</li><li><strong>RARPè¯·æ±‚</strong>ï¼šå½“è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œå®ƒå¯èƒ½ä¸çŸ¥é“è‡ªå·±çš„IPåœ°å€ï¼Œä½†å®ƒä¼šçŸ¥é“è‡ªå·±çš„MACåœ°å€ã€‚è®¡ç®—æœºå‘é€ä¸€ä¸ªRARPè¯·æ±‚å¹¿æ’­ï¼Œé€šçŸ¥ç½‘ç»œä¸Šçš„RARPæœåŠ¡å™¨è¯´ï¼šâ€œè¿™æ˜¯æˆ‘çš„MACåœ°å€ï¼Œè¯·å‘Šè¯‰æˆ‘æˆ‘çš„IPåœ°å€æ˜¯ä»€ä¹ˆï¼Ÿâ€</li><li><strong>RARPå“åº”</strong>ï¼šRARPæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼ŒæŸ¥è¯¢å…¶æ˜ å°„è¡¨ä»¥æŸ¥æ‰¾ç›¸åº”çš„IPåœ°å€ï¼Œç„¶åå°†å“åº”å‘é€å›è¯·æ±‚è®¡ç®—æœºã€‚è¿™ä¸ªå“åº”åŒ…å«äº†è®¡ç®—æœºæ‰€éœ€çš„IPåœ°å€ã€‚</li><li><strong>IPåœ°å€é…ç½®</strong>ï¼šè®¡ç®—æœºæ¥æ”¶åˆ°RARPå“åº”åï¼Œå¯ä»¥é…ç½®å…¶IPåœ°å€ï¼Œå¹¶éšååœ¨ç½‘ç»œä¸Šæ­£å¸¸é€šä¿¡ã€‚</li></ol><p>&#x3D;&#x3D;ARP æŒ‡ä»¤&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-sIPå’ŒMACåœ°å€ç»‘å®š</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤º arp ç¼“å­˜</span></span><br><span class="line">arp -n</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç† arp ç¼“å­˜</span></span><br><span class="line">arp -d 192.168.1.17</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰‹åŠ¨ç»‘å®šMACåœ°å€</span></span><br><span class="line">arp -s 192.168.1.17 00:0c:29:37:d7:b4</span><br></pre></td></tr></table></figure><h1 id="28-IP-åœ°å€"><a href="#28-IP-åœ°å€" class="headerlink" title="28. IP åœ°å€"></a>28. IP åœ°å€</h1><h3 id="28-1-IP-åœ°å€åˆ†ç±»"><a href="#28-1-IP-åœ°å€åˆ†ç±»" class="headerlink" title="28.1 IP åœ°å€åˆ†ç±»"></a>28.1 IP åœ°å€åˆ†ç±»</h3><p>ç½‘æ®µæ•°&#x3D;2^å¯å˜çš„ç½‘ç»œIDçš„ä½æ•°</p><p>ä¸»æœºæ•°&#x3D;2^ä¸»æœºIDä½æ•°-2</p><h4 id="281-1-Aç±»"><a href="#281-1-Aç±»" class="headerlink" title="281.1 Aç±»"></a>281.1 Aç±»</h4><p>0-127.X.Y.Z</p><p>ç½‘ç»œIDä½æ˜¯æœ€é«˜çš„8ä½ï¼Œä¸»æœºIDæ˜¯24ä½ä½ä½</p><p>ç½‘æ®µæ•°ï¼š2^7-2&#x3D;126</p><p>æ¯ä¸ªç½‘ç»œä¸­çš„ä¸»æœºæ•°ï¼š2^24-2&#x3D;16777214</p><p>é»˜è®¤å­ç½‘æ©ç ï¼š255.0.0.0</p><h4 id="28-1-2-Bç±»"><a href="#28-1-2-Bç±»" class="headerlink" title="28.1.2 Bç±»"></a>28.1.2 Bç±»</h4><p>128-191.X.Y.Z</p><p>ç½‘ç»œIDä½æ˜¯æœ€é«˜çš„16ä½ï¼Œä¸»æœºIDæ˜¯16ä½ä½ä½</p><p>ç½‘æ®µæ•°ï¼š2^16-2&#x3D;16384</p><p>æ¯ä¸ªç½‘ç»œä¸­çš„ä¸»æœºæ•°ï¼š2^16-2&#x3D;65534</p><p>é»˜è®¤å­ç½‘æ©ç ï¼š255.255.0.0</p><h4 id="28-1-3-Cç±»"><a href="#28-1-3-Cç±»" class="headerlink" title="28.1.3 Cç±»"></a>28.1.3 Cç±»</h4><p>192-223.X.Y.Z</p><p>ç½‘ç»œIDä½æ˜¯æœ€é«˜çš„24ä½ï¼Œä¸»æœºIDæ˜¯8ä½ä½ä½</p><p>ç½‘æ®µæ•°ï¼š2^24-3&#x3D;2097152</p><p>æ¯ä¸ªç½‘ç»œä¸­çš„ä¸»æœºæ•°ï¼š2^8-2&#x3D;254</p><p>é»˜è®¤å­ç½‘æ©ç ï¼š255.255.255.0</p><h4 id="28-1-4-Dç±»"><a href="#28-1-4-Dç±»" class="headerlink" title="28.1.4 Dç±»"></a>28.1.4 Dç±»</h4><p>ç»„ï¼ˆå¤šï¼‰æ’­224-239.X.Y.Z</p><h4 id="28-1-5-Eç±»"><a href="#28-1-5-Eç±»" class="headerlink" title="28.1.5 Eç±»"></a>28.1.5 Eç±»</h4><p>ä¿ç•™æœªä½¿ç”¨ï¼Œ240-255</p><h4 id="28-1-6-ç§æœ‰IPåœ°å€"><a href="#28-1-6-ç§æœ‰IPåœ°å€" class="headerlink" title="28.1.6 ç§æœ‰IPåœ°å€"></a>28.1.6 ç§æœ‰IPåœ°å€</h4><p>ä¸ç›´æ¥ç”¨äºäº’è”ç½‘ï¼Œé€šå¸¸æ˜¯åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨</p><p>Aç±» 10.0.0.0åˆ°10.255.255.255</p><p>Bç±» 172.16.0.0åˆ°172.31.255.255</p><p>Cç±» 192.168.0.0åˆ°192.168.255.255</p><h4 id="28-1-7-å…¬æœ‰IPåœ°å€"><a href="#28-1-7-å…¬æœ‰IPåœ°å€" class="headerlink" title="28.1.7 å…¬æœ‰IPåœ°å€"></a>28.1.7 å…¬æœ‰IPåœ°å€</h4><p>äº’è”ç½‘ä¸Šè®¾å¤‡æ‹¥æœ‰çš„å”¯ä¸€åœ°å€</p><p>Aç±» 1.0.0.0åˆ°9.255.255.255</p><p>â€‹11.0.0.0åˆ°126.255.255.255</p><p>Bç±» 128.0.0.0åˆ°172.15.255.255</p><p>â€‹172.32.0.0åˆ°191.255.255.255</p><p>Cç±» 192.0.0.0åˆ°192.167.255.255</p><p>â€‹192.169.0.0åˆ°223.255.255.255</p><h4 id="28-1-8-ç‰¹æ®Šåœ°å€"><a href="#28-1-8-ç‰¹æ®Šåœ°å€" class="headerlink" title="28.1.8 ç‰¹æ®Šåœ°å€"></a>28.1.8 ç‰¹æ®Šåœ°å€</h4><ul><li>0.0.0.0</li></ul><p>â€‹0.0.0.0å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„IPåœ°å€ï¼Œå®ƒè¡¨ç¤ºæ‰€æœ‰ä¸æ¸…æ¥šçš„ä¸»æœºå’Œç›®çš„ç½‘ç»œ</p><ul><li>255.255.255.255</li></ul><p>â€‹é™åˆ¶å¹¿æ’­åœ°å€ã€‚å¯¹æœ¬æœºæ¥è¯´ï¼Œè¿™ä¸ªåœ°å€æŒ‡æœ¬ç½‘æ®µå†…(åŒä¸€å¹¿æ’­åŸŸ)çš„æ‰€æœ‰ä¸»æœº</p><ul><li>127.0.0.1~127.255.255.254</li></ul><p>â€‹æœ¬æœºå›ç¯åœ°å€ï¼Œä¸»è¦ç”¨äºæµ‹è¯•ï¼Œåœ¨ä¼ è¾“ä»‹è´¨ä¸Šæ°¸è¿œä¸åº”è¯¥å‡ºç°ç›®çš„åœ°å€ä½127.0.0.1çš„æ•°æ®åŒ…</p><ul><li>224.0.0.0~239.255.255.255</li></ul><p>â€‹ç»„æ’­åœ°å€ï¼Œ224.0.01ç‰¹å€¼æ‰€æœ‰ä¸»æœºï¼Œ224.0.0.2ç‰¹æŒ‡æ‰€æœ‰è·¯ç”±å™¨ã€‚224.0.0.5å€¼OSPFè·¯ç”±å™¨ï¼Œåœ°å€å¤šç”¨äºä¸€äº›ç‰¹å®šçš„ç¨‹åºä»¥åŠå¤šåª’ä½“ç¨‹åº</p><ul><li>169.254.X.X</li></ul><p>â€‹å¦‚æœwindowsä¸»æœºä½¿ç”¨DHCPè‡ªåŠ¨åˆ†é…åœ°å€ï¼Œè€Œåˆæ— æ³•ä»DHCPæœåŠ¡å™¨è·å–åœ°å€ï¼Œç³»ç»Ÿä¼šä¸ºä¸»æœºåˆ†é…è¿™æ ·çš„åœ°å€</p><h3 id="28-2-å­ç½‘æ©ç "><a href="#28-2-å­ç½‘æ©ç " class="headerlink" title="28.2 å­ç½‘æ©ç "></a>28.2 å­ç½‘æ©ç </h3><p>CIDRï¼šæ— ç±»åŸŸé—´è·¯ç”±ï¼Œç›®å‰çš„ç½‘ç»œå·²ä¸å†æŒ‰Aã€Bã€Cç±»åˆ’åˆ†ç½‘æ®µï¼Œå¯ä»¥ä»»æ„æŒ‡å®šç½‘æ®µçš„èŒƒå›´</p><p>CIDRï¼šæ— ç±»åŸŸé—´è·¯ç”±è¡¨ç¤ºæ³•ï¼šIP&#x2F;ç½‘ç»œIDä½æ•°ï¼Œå¦‚172.16.0.100&#x2F;16</p><p>netmaskå­ç½‘æ©ç ï¼š32ä½æˆ–128ä½ï¼ˆipv6ï¼‰çš„æ•°å­—ï¼Œå’ŒIPæˆå¯¹ä½¿ç”¨ï¼Œç”¨æ¥ç¡®è®¤IPåœ°å€ä¸­çš„ç½‘ç»œIDå’Œä¸»æœºIDï¼Œå¯¹åº”ç½‘ç»œIDçš„ä½ä¸º1ï¼Œå¯¹åº”ä¸»æœºIDçš„ä½ä¸º0ï¼Œå˜ç°ä¸ºè¿ç»­çš„é«˜ä½ä¸º1ï¼Œè¿ç»­çš„ä½ä½ä¸º0</p><h1 id="29-ç½‘ç»œé…ç½®"><a href="#29-ç½‘ç»œé…ç½®" class="headerlink" title="29 ç½‘ç»œé…ç½®"></a>29 ç½‘ç»œé…ç½®</h1><h3 id="29-1-ç½‘å¡ä¿¡æ¯"><a href="#29-1-ç½‘å¡ä¿¡æ¯" class="headerlink" title="29.1 ç½‘å¡ä¿¡æ¯"></a>29.1 ç½‘å¡ä¿¡æ¯</h3><p>å·¥å…·æ¥è‡ªï¼šyum -y install net-tools</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç½‘å¡ä¿¡æ¯,å‘½ä»¤æ ¼å¼ethtool ç½‘å¡å</span></span><br><span class="line">ethtool eth0</span><br></pre></td></tr></table></figure><h3 id="29-2-ç½‘å¡é©±åŠ¨"><a href="#29-2-ç½‘å¡é©±åŠ¨" class="headerlink" title="29.2 ç½‘å¡é©±åŠ¨"></a>29.2 ç½‘å¡é©±åŠ¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç½‘å¡é©±åŠ¨</span></span><br><span class="line">ethtool -i ens33 | grep driver</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½ç½‘å¡é©±åŠ¨,å‘½ä»¤æ ¼å¼modprobe -r ç½‘å¡é©±åŠ¨å</span></span><br><span class="line">modprobe -r e1000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŠ è½½ç½‘å¡é©±åŠ¨,å‘½ä»¤æ ¼å¼modprobe ç½‘å¡é©±åŠ¨å</span></span><br><span class="line">modprobe e1000</span><br></pre></td></tr></table></figure><h3 id="29-3-ç½‘å¡å‘½å"><a href="#29-3-ç½‘å¡å‘½å" class="headerlink" title="29.3 ç½‘å¡å‘½å"></a>29.3 ç½‘å¡å‘½å</h3><h4 id="29-3-1-ç½‘å¡å‘½åè§„åˆ™"><a href="#29-3-1-ç½‘å¡å‘½åè§„åˆ™" class="headerlink" title="29.3.1 ç½‘å¡å‘½åè§„åˆ™"></a>29.3.1 ç½‘å¡å‘½åè§„åˆ™</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">en: Ethernet æœ‰çº¿å±€åŸŸç½‘</span><br><span class="line">w]: wlan æ— çº¿å±€åŸŸç½‘</span><br><span class="line">ww: wwanæ— çº¿å¹¿åŸŸç½‘</span><br><span class="line">o&lt;index&gt;: é›†æˆè®¾å¤‡çš„è®¾å¤‡ç´¢å¼•å·</span><br><span class="line">s&lt;s1ot&gt;: æ‰©å±•æ§½çš„ç´¢å¼•å·</span><br><span class="line">X&lt;MAC&gt;: åŸºäºMACåœ°å€çš„å‘½å</span><br><span class="line">p&lt;bus&gt;s&lt;slot&gt;: enp2s1</span><br></pre></td></tr></table></figure><h4 id="29-3-2-ç½‘å¡å‘½åé…ç½®æ–‡ä»¶"><a href="#29-3-2-ç½‘å¡å‘½åé…ç½®æ–‡ä»¶" class="headerlink" title="29.3.2 ç½‘å¡å‘½åé…ç½®æ–‡ä»¶"></a>29.3.2 ç½‘å¡å‘½åé…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç½‘å¡çš„macåœ°å€æˆ–å…¶ä»–å”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="line">ip addr show</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºè‡ªå®šä¹‰çš„ udev è§„åˆ™æ–‡ä»¶ï¼šåœ¨ /etc/udev/rules.d/ ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª .rules åç¼€çš„æ–‡ä»¶</span></span><br><span class="line">vi /etc/udev/rules.d/eth1-custom-eth.rules</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç½‘å¡é©±åŠ¨,å¯ä»¥åœ¨ä¸‹é¢è§„åˆ™æŒ‡ä»¤ä¸­,å¢åŠ ç½‘å¡é©±åŠ¨é€‰é¡¹</span></span><br><span class="line">ethtool -i ens160 | grep driver</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¾‘è§„åˆ™æ–‡ä»¶å¹¶æ·»åŠ è§„åˆ™ï¼šåœ¨ç¼–è¾‘å™¨ä¸­æ·»åŠ ä¸€ä¸ª SUBSYSTEM å’Œ ATTR&#123;address&#125; åŸºäºç½‘å¡çš„ç¡¬ä»¶æ ‡è¯†ç¬¦çš„è§„åˆ™ã€‚ä½¿ç”¨ NAME å…³é”®å­—æ¥æŒ‡å®šè‡ªå®šä¹‰çš„ç½‘å¡åç§°ã€‚</span></span><br><span class="line">SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;,DRIVERS==&quot;?*&quot;,ATTR&#123;address&#125;==&quot;00:0c:29:d8:cb:85&quot;,ATTR&#123;type&#125;==&quot;1&quot;,KERNEL==&quot;eth*&quot;,NAME=&quot;eth1&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°åŠ è½½ udev è§„åˆ™ï¼šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°åŠ è½½ udev è§„åˆ™ï¼Œä»¥ä½¿æ–°è§„åˆ™ç”Ÿæ•ˆã€‚</span></span><br><span class="line">udevadm control --reload-rules</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ç½‘å¡é…ç½®æ–‡ä»¶åå’Œç½‘å¡å</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯ç½‘ç»œæœåŠ¡</span></span><br><span class="line">systemctl restart NetworkManager</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯æœåŠ¡å™¨</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h4 id="29-2-1-è„šæœ¬ï¼šå¤šç½‘å¡ä¿®æ”¹eth0"><a href="#29-2-1-è„šæœ¬ï¼šå¤šç½‘å¡ä¿®æ”¹eth0" class="headerlink" title="29.2.1 è„šæœ¬ï¼šå¤šç½‘å¡ä¿®æ”¹eth0"></a>29.2.1 è„šæœ¬ï¼šå¤šç½‘å¡ä¿®æ”¹eth0</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ç»ˆç«¯ç¬¦å·å¸¦å‘½ä»¤è¿”å›å€¼</span></span><br><span class="line">[[ $&#123;PS1&#125; = &#x27;[\u@\h \W]\$ &#x27; ]] &amp;&amp; echo &#x27;PS1=&quot;[\u@\h \w][\$?]$ &quot;&#x27; &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ç½‘å¡åç§°ä¸ºeth0</span></span><br><span class="line">iplist=$(cd /sys/class/net/ &amp;&amp; /bin/ls -d e*)</span><br><span class="line">source /etc/os-release</span><br><span class="line">echo -n &gt; /etc/udev/rules.d/70-persistent-net.rules</span><br><span class="line">count=0</span><br><span class="line">Centos_address=7</span><br><span class="line">Rocky_address=9</span><br><span class="line">for i in $iplist; do</span><br><span class="line">    echo &#x27;SUBSYSTEM==&quot;net&quot;,ACTION==&quot;add&quot;,DRIVERS==&quot;?*&quot;,ATTR&#123;address&#125;==&quot;&#x27;$(cat /sys/class/net/$i/address)&#x27;&quot;,ATTR&#123;type&#125;==&quot;1&quot;,KERNEL==&quot;eth*&quot;,&quot;NAME=&quot;eth&#x27;$&#123;count&#125;&#x27;&quot;&#x27; &gt;&gt; /etc/udev/rules.d/70-persistent-net.rules</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">å¦‚æœæ˜¯Rocky Linuxåˆ™æ‰§è¡Œä»¥ä¸‹æ“ä½œ</span></span><br><span class="line">    if [ &quot;$NAME&quot; = &#x27;Rocky Linux&#x27; ]; then     </span><br><span class="line">cat &gt; /etc/NetworkManager/system-connections/$&#123;i&#125;.nmconnection &lt;&lt; EOF1</span><br><span class="line">[connection]</span><br><span class="line">id=eth$&#123;count&#125;</span><br><span class="line">uuid=$(uuidgen)</span><br><span class="line">type=ethernet</span><br><span class="line">autoconnect-priority=-999</span><br><span class="line">interface-name=eth$&#123;count&#125;</span><br><span class="line"></span><br><span class="line">[ethernet]</span><br><span class="line"></span><br><span class="line">[ipv4]</span><br><span class="line">address1=192.168.1.$&#123;Rocky_address&#125;/24,192.168.1.2</span><br><span class="line">dns=192.168.1.2;</span><br><span class="line"></span><br><span class="line">[ipv6]</span><br><span class="line">addr-gen-mode=eui64</span><br><span class="line">method=auto</span><br><span class="line"></span><br><span class="line">[proxy]</span><br><span class="line">EOF1</span><br><span class="line">        count=$((count + 1))</span><br><span class="line">        Rocky_address=$((Rocky_address + 10))   </span><br><span class="line">    fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœæ˜¯CentOS Linuxåˆ™æ‰§è¡Œä»¥ä¸‹æ“ä½œ</span>  </span><br><span class="line">    if [ &quot;$NAME&quot; = &#x27;CentOS Linux&#x27; ]; then</span><br><span class="line">cat &gt; /etc/sysconfig/network-scripts/ifcfg-eth$&#123;count&#125; &lt;&lt; EOF2</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">NAME=eth$&#123;count&#125;</span><br><span class="line">MACADDR=$(cat /sys/class/net/$&#123;i&#125;/address)</span><br><span class="line">DEVICE=eth$&#123;count&#125;</span><br><span class="line">UUID=$(uuidgen)</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.1.$&#123;Centos_address&#125;</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=192.168.1.2</span><br><span class="line">DNS1=192.168.1.2</span><br><span class="line">ONBOOT=yes</span><br><span class="line">EOF2</span><br><span class="line">        count=$((count + 1))</span><br><span class="line">        Centos_address=$((Centos_address + 10))</span><br><span class="line">        mv /etc/sysconfig/network-scripts/ifcfg-$&#123;i&#125; /etc/sysconfig/network-scripts/$&#123;i&#125;</span><br><span class="line">    fi</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°åŠ è½½udevè§„åˆ™æ–‡ä»¶</span></span><br><span class="line">udevadm control --reload-rules</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°ç”Ÿæˆgrub</span></span><br><span class="line">sed -Ei.bak &#x27;/^GRUB_CMDLINE_LINUX/s/(GRUB.*)&quot;/\1 net.ifnames=0 biosdevname=0&quot;/&#x27; /etc/default/grub</span><br><span class="line">grub2-mkconfig -o /boot//grub2/grub.cfg</span><br><span class="line"></span><br><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure><h3 id="29-4-ç½‘ç»œé…ç½®æ–‡ä»¶è¯¦è§£"><a href="#29-4-ç½‘ç»œé…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="29.4 ç½‘ç»œé…ç½®æ–‡ä»¶è¯¦è§£"></a>29.4 ç½‘ç»œé…ç½®æ–‡ä»¶è¯¦è§£</h3><h4 id="29-4-1-Centos-ç½‘å¡é…ç½®"><a href="#29-4-1-Centos-ç½‘å¡é…ç½®" class="headerlink" title="29.4.1 Centos ç½‘å¡é…ç½®"></a>29.4.1 Centos ç½‘å¡é…ç½®</h4><p>cd &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">TYPE=æ¥å£ç±»å‹;å¸¸è§æœ‰çš„Ethernet,Bridge</span><br><span class="line">NAME=æ­¤é…ç½®æ–‡ä»¶ç»™é‚£ä¸ªç½‘å¡ä½¿ç”¨çš„ç½‘å¡å</span><br><span class="line">MACADDR=ä¿®æ”¹ç½‘å¡MACåœ°å€ï¼Œé€»è¾‘ä¸Šä¿®æ”¹,å¯ä»¥ç›´æ¥å†™è‡ªå®šä¹‰çš„MACåœ°å€</span><br><span class="line">DEVICE=æ­¤é…ç½®æ–‡ä»¶ç»™é‚£ä¸ªç½‘å¡ä½¿ç”¨çš„ç½‘å¡å         </span><br><span class="line">HWADDR=å¯¹åº”çš„è®¾å¤‡çš„MACåœ°å€,å¯ä»¥ä½¿ç”¨ip link show sen33 æŸ¥çœ‹ç½‘å¡MACåœ°å€,éœ€è¦å’Œå®é™…MACå¯¹åº”</span><br><span class="line">UUID=è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†,å¯ä»¥ä½¿ç”¨uuidgenç”Ÿæˆ</span><br><span class="line">BOOTPROTO=æ¿€æ´»æ­¤è®¾å¤‡æ—¶ä½¿ç”¨çš„åœ°å€é…ç½®åè®®,å¸¸è§çš„æœ‰dhcpï¼Œstatic(é™æ€),none,bootp</span><br><span class="line">IPADDR=IPåœ°å€ </span><br><span class="line">NETMASK=å­ç½‘æ©ç ,å¦‚255.255.255.0âˆšäºŒé€‰ä¸€</span><br><span class="line">PREFIX=ç½‘ç»œIDçš„ä½æ•°,å¦‚24âˆšäºŒé€‰ä¸€</span><br><span class="line">GATEWAY=é»˜è®¤ç½‘å…³</span><br><span class="line">DNS1=ç¬¬ä¸€ä¸ªDNSæœåŠ¡å™¨</span><br><span class="line">DNS2=ç¬¬ä¸€ä¸ªDNSæœåŠ¡å™¨</span><br><span class="line">DOMAIN=ping wwwè¡¥å…¨çš„åç¼€</span><br><span class="line">ONBOOT=yesè¡¨ç¤ºç½‘å¡éšç³»ç»Ÿå¼€æœºè€Œå¯ç”¨ï¼Œé¿å…å•ç‚¹å¤±è´¥</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">DHCPé…ç½®</span></span><br><span class="line">DEVICE=eht0</span><br><span class="line">BOOTPROTO=dhcp</span><br></pre></td></tr></table></figure><h4 id="29-4-1-Ubuntu-ç½‘å¡é…ç½®"><a href="#29-4-1-Ubuntu-ç½‘å¡é…ç½®" class="headerlink" title="29.4.1 Ubuntu ç½‘å¡é…ç½®"></a>29.4.1 Ubuntu ç½‘å¡é…ç½®</h4><p>å®˜ç½‘æ–‡æ¡£ï¼š</p><p><a href="https://help.ubuntu.com/">https://help.ubuntu.com</a></p><p><a href="https://ubuntu.com/server/docs">https://ubuntu.com/server/docs</a></p><h3 id="29-5-ç½‘ç»œé…ç½®ç›¸å…³å‘½ä»¤"><a href="#29-5-ç½‘ç»œé…ç½®ç›¸å…³å‘½ä»¤" class="headerlink" title="29.5 ç½‘ç»œé…ç½®ç›¸å…³å‘½ä»¤"></a>29.5 ç½‘ç»œé…ç½®ç›¸å…³å‘½ä»¤</h3><h4 id="29-5-1-ifconfig-å‘½ä»¤"><a href="#29-5-1-ifconfig-å‘½ä»¤" class="headerlink" title="29.5.1 ifconfig å‘½ä»¤"></a>29.5.1 ifconfig å‘½ä»¤</h4><p>å·¥å…·æ¥è‡ªï¼šyum -y install net-tools</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ´»åŠ¨çš„ç½‘å¡ä¿¡æ¯</span></span><br><span class="line">ifconfig</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ•ˆæœç±»ä¼¼æ‹”ç½‘çº¿,ç¦ç”¨ç½‘å¡</span></span><br><span class="line">ifconfig ens33 down</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ•ˆæœç±»ä¼¼æ’ç½‘çº¿,å¯ç”¨ç½‘å¡</span></span><br><span class="line">ifconfig ens33 up</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶è®¾ç½®ç½‘å¡IP,é‡å¯å¤±æ•ˆï¼Œæƒ³è¦æ¢å¤å¯ä»¥é‡æ–°è®¾ç½®åŸæ¥çš„IP</span></span><br><span class="line">ifconfig ens33 192.168.1.100</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç©ºç½‘å¡IP,é‡å¯å¤±æ•ˆ</span></span><br><span class="line">ifconfig ens33 0.0.0.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶æ·»åŠ ä¸€ä¸ªIP,å¹¶è®¾ç½®è™šæ‹Ÿæ¥å£åä¸ºens33-1</span></span><br><span class="line">ifconfig ens33:ens33-1 192.168.1.101</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ä¸´æ—¶IP</span></span><br><span class="line">ifconfig ens33:ens33-1 down</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç½‘å¡æµé‡ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line">ifconfig -s</span><br></pre></td></tr></table></figure><h4 id="29-5-2-ip-å‘½ä»¤"><a href="#29-5-2-ip-å‘½ä»¤" class="headerlink" title="29.5.2 ip å‘½ä»¤"></a>29.5.2 ip å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰ç½‘å¡çŠ¶æ€</span></span><br><span class="line">ip link</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæŒ‡å®šç½‘å¡ä¿¡æ¯</span></span><br><span class="line">ip addr show eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‹”ç½‘çº¿</span></span><br><span class="line">ip link set eth0 down</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ’ç½‘çº¿</span></span><br><span class="line">ip link set eth0 up</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶ä¿®æ”¹ç½‘å¡å</span></span><br><span class="line">ip link set ens33 name eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶æ·»åŠ ä¸€ä¸ªIPåœ°å€</span></span><br><span class="line">ip addr add 192.168.1.100/24 dev eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶åˆ é™¤ä¸€ä¸ªIPåœ°å€</span></span><br><span class="line">ip addr del 192.168.1.100/24 dev eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¸…ç©ºIPåœ°å€</span></span><br><span class="line">ip addr flush dev eth0 </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹IPåœ°å€</span></span><br><span class="line">ip addr change 192.168.1.100/24 dev eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç½‘å¡æµé‡ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line">ip -s link show eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºè·¯ç”±ä¿¡æ¯</span></span><br><span class="line">ip route</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ¥å£è·¯ç”±ä¿¡æ¯</span></span><br><span class="line">ip route show dev eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ ç½‘ç»œæ¥å£çš„é»˜è®¤ç½‘å…³</span></span><br><span class="line">ip route add default via 192.168.0.1 dev eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç½‘ç»œæ¥å£çš„é»˜è®¤ç½‘å…³</span></span><br><span class="line">ip route del default via 192.168.0.1 dev eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ ä¸€æ¡ç½‘ç»œè·¯ç”±</span></span><br><span class="line">ip route add 192.168.2.0/24 via 192.168.1.1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ä¸€æ¡ç½‘ç»œè·¯ç”±</span></span><br><span class="line">ip route del 192.168.2.0/24 via 192.168.1.1</span><br></pre></td></tr></table></figure><h4 id="29-5-3-nmcli-å‘½ä»¤"><a href="#29-5-3-nmcli-å‘½ä»¤" class="headerlink" title="29.5.3 nmcli å‘½ä»¤"></a>29.5.3 nmcli å‘½ä»¤</h4><p>nmcli æ˜¯è½¯ä»¶ NetworkManager çš„æä¾›çš„å‘½ä»¤ã€‚ä½¿ç”¨ nmcli å‘½ä»¤æ—¶ï¼Œå¿…é¡»ç¡®ä¿ NetworkManager ä¸ºè¿è¡ŒçŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">networking å¯ä»¥ç®€å†™ä¸ºï¼Œnï¼Œneï¼Œnetï¼Œnetwï¼Œnetwoï¼Œnetworï¼Œnetwork</span><br><span class="line">connectivity å¯ä»¥ç®€å†™ä¸ºï¼Œcï¼Œcoï¼Œconï¼Œconn ......</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ NetworkManager æ˜¯å¦æ¥ç®¡ç½‘ç»œè®¾ç½®</span></span><br><span class="line">nmcli networking</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç½‘ç»œæœåŠ¡</span></span><br><span class="line">nmcli net on</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…³é—­ç½‘ç»œæœåŠ¡,æ‰€æœ‰ç½‘å¡å…¨down</span></span><br><span class="line">nmcli net off</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°åŠ è½½ç½‘ç»œæœåŠ¡</span></span><br><span class="line">nmcli connection reload</span><br></pre></td></tr></table></figure><table><thead><tr><th>nmcli con mod</th><th>å¯¹åº”æ–‡ä»¶é…ç½®</th></tr></thead><tbody><tr><td>ipv4.method manual</td><td>BOOTPROTO&#x3D;none</td></tr><tr><td>ipv4.method auto</td><td>BOOTPROTO&#x3D;dhcp</td></tr><tr><td>ipv4.addresses 192.168.2.1&#x2F;24</td><td>IPADDR&#x3D;192.168.2.1      PREFIX&#x3D;24</td></tr><tr><td>ipv4.gateway 172.16.0.200</td><td>GATEWAY&#x3D;172.16.0.200</td></tr><tr><td>ipv4.dns 8.8.8.8</td><td>DNS0&#x3D;8.8.8.8</td></tr><tr><td>ipv4.dns-search example.com</td><td>DOMAIN&#x3D;example.com</td></tr><tr><td>ipv4.ignore-auto-dns true</td><td>PEERDNS&#x3D;no</td></tr><tr><td>connection.autoconnect yes</td><td>ONBOOT&#x3D;yes</td></tr><tr><td>connection.id eth0</td><td>NAME&#x3D;eth0</td></tr><tr><td>connection.interface-name eth0</td><td>DEVICE&#x3D;eth0</td></tr><tr><td>802-3-ethernet.mac-address  . . .</td><td>HWADDR&#x3D;. . .</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><h5 id="29-5-3-1-nmcli-å®ç°bonding"><a href="#29-5-3-1-nmcli-å®ç°bonding" class="headerlink" title="29.5.3.1 nmcli å®ç°bonding"></a>29.5.3.1 nmcli å®ç°bonding</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºBondingæ¥å£</span></span><br><span class="line">nmcli con add type bond con-name mybond0 ifname bond0 mode active-backup ipv4.method manual ipv4.addresses 192.168.1.200/24 </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ ä»å±æ¥å£</span></span><br><span class="line">nmcli con add con-name mybond0-eth0 ifname ens33 type bond-slave master bond0</span><br><span class="line">nmcli con add con-name mybond0-eth1 ifname ens36 type bond-slave master bond0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ³¨: å¦‚æœæ²¡æœ‰ä¸ºä»å±æ¥å£æä¾›è¿æ¥åï¼Œåˆ™è¯¥åç§°æ˜¯æ¥å£åç§°åŠ ç±»å‹æ„æˆ</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„æ¥å£</span></span><br><span class="line">nmcli connection</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åŸç½‘å¡çš„æ¥å£</span></span><br><span class="line">nmcli connection delete æ¥å£å</span><br><span class="line">nmcli connection delete æ¥å£å</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¦å¯åŠ¨Bondingæ¥å£ï¼Œå¿…é¡»é¦–å…ˆå¯åŠ¨ä»å±æ¥å£</span></span><br><span class="line">nmcli con up mybond0-eth0</span><br><span class="line">nmcli con up mybond0-eth1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨Bondingæ¥å£</span></span><br><span class="line">nmcli con up mybond0</span><br></pre></td></tr></table></figure><h3 id="29-6-éªŒè¯ç”Ÿæ•ˆçš„ç½‘ç»œé…ç½®"><a href="#29-6-éªŒè¯ç”Ÿæ•ˆçš„ç½‘ç»œé…ç½®" class="headerlink" title="29.6 éªŒè¯ç”Ÿæ•ˆçš„ç½‘ç»œé…ç½®"></a>29.6 éªŒè¯ç”Ÿæ•ˆçš„ç½‘ç»œé…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯IPåœ°å€æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">ip addr</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯ç½‘å…³æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">route -n</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯DNSæ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">cat /etc/resolv.conf</span><br></pre></td></tr></table></figure><h3 id="29-6-ç½‘å¡åŒIPæ°¸ä¹…ä¿å­˜"><a href="#29-6-ç½‘å¡åŒIPæ°¸ä¹…ä¿å­˜" class="headerlink" title="29.6 ç½‘å¡åŒIPæ°¸ä¹…ä¿å­˜"></a>29.6 ç½‘å¡åŒIPæ°¸ä¹…ä¿å­˜</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.å¯ä»¥ç›´æ¥åœ¨åŸIPé…ç½®æ–‡ä»¶ä¸­ï¼Œå†™ä¸¤ä¸ªIPã€å­ç½‘æ©ç ã€ç½‘å…³</span><br><span class="line">2.å¯ä»¥å°†ç½‘å¡æ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œæ”¹æˆ DEVICE=ens33:1 å¤åˆ¶çš„ç½‘å¡æ–‡ä»¶åç§°ä¹Ÿæ”¹æˆifcfg-ens33:1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯ç½‘ç»œæœåŠ¡</span></span><br><span class="line">systemctl start network</span><br></pre></td></tr></table></figure><h3 id="29-7-ç½‘å¡é…ç½®é™æ€å’ŒåŠ¨æ€åŒæ—¶ä½¿ç”¨"><a href="#29-7-ç½‘å¡é…ç½®é™æ€å’ŒåŠ¨æ€åŒæ—¶ä½¿ç”¨" class="headerlink" title="29.7 ç½‘å¡é…ç½®é™æ€å’ŒåŠ¨æ€åŒæ—¶ä½¿ç”¨"></a>29.7 ç½‘å¡é…ç½®é™æ€å’ŒåŠ¨æ€åŒæ—¶ä½¿ç”¨</h3><p>&#x3D;&#x3D;ç½‘å¡åˆ«åçš„é…ç½®æ–‡ä»¶å¿…é¡»ä½¿ç”¨é™æ€åœ°å€&#x3D;&#x3D;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.å°†ç½‘å¡æ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œæ”¹æˆ DEVICE=ens33:1 å¤åˆ¶çš„ç½‘å¡æ–‡ä»¶åç§°ä¹Ÿæ”¹æˆifcfg-ens33:1</span><br><span class="line">2.ä¿®æ”¹ifcfg-ens33é…ç½®æ–‡ä»¶ä¸ºDHCP</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯æœåŠ¡å™¨</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><h3 id="29-8-ç½‘å¡èšåˆ"><a href="#29-8-ç½‘å¡èšåˆ" class="headerlink" title="29.8 ç½‘å¡èšåˆ"></a>29.8 ç½‘å¡èšåˆ</h3><p>å°†å¤šå—ç½‘å¡ç»‘å®šåŒä¸€IPåœ°å€å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¯ä»¥å®ç°é«˜å¯ç”¨æˆ–è€…å‡è¡¡è´Ÿè½½ï¼Œç›´æ¥ç»™ä¸¤å—ç½‘å¡è®¾ç½®åŒä¸€IPåœ°å€æ˜¯ä¸å¯ä»¥çš„ï¼Œé€šè¿‡bondingï¼Œè™šæ‹Ÿä¸€å—ç½‘å¡å¯¹å¤–æä¾›è¿æ¥ï¼Œç‰©ç†ç½‘å¡çš„è¢«ä¿®æ”¹ä¸ºç›¸åŒçš„MACåœ°å€</p><h4 id="29-8-1-bonding-7ç§å·¥ä½œæ¨¡å¼"><a href="#29-8-1-bonding-7ç§å·¥ä½œæ¨¡å¼" class="headerlink" title="29.8.1 bonding 7ç§å·¥ä½œæ¨¡å¼"></a>29.8.1 bonding 7ç§å·¥ä½œæ¨¡å¼</h4><ul><li><p>Round Robin (balance-rr)ï¼š Mode 0</p><p>è½®è¯¢ï¼Œæ•°æ®åŒ…ä¾æ¬¡åœ¨å¯ç”¨çš„æ¥å£ä¹‹é—´è½®æµå‘é€ã€‚å®ƒå¯ä»¥æä¾›è´Ÿè½½å‡è¡¡</p></li><li><p>Active-Backupï¼š Mode 1</p><p>ä¸»å¤‡ï¼Œä¸€ä¸ªæ¥å£å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå¦ä¸€ä¸ªæ¥å£å¤„äºå¤‡ç”¨çŠ¶æ€ã€‚å¦‚æœæ´»åŠ¨æ¥å£å¤±æ•ˆï¼Œå¤‡ç”¨æ¥å£ä¼šæ¥ç®¡å¹¶æˆä¸ºæ´»åŠ¨æ¥å£</p></li><li><p>XOR (balance-xor)ï¼šMode 2</p><p>æ ¹æ®å‘é€æ•°æ®åŒ…çš„æºå’Œç›®æ ‡MACåœ°å€ï¼Œå°†æ•°æ®åŒ…åˆ†å¸ƒåˆ°å¯ç”¨æ¥å£ã€‚åŒä¸€æºå’Œç›®æ ‡åœ°å€çš„æ•°æ®åŒ…å°†å§‹ç»ˆé€šè¿‡ç›¸åŒçš„æ¥å£å‘é€ã€‚</p></li><li><p>Broadcastï¼šMode 3</p><p>æ‰€æœ‰æ¥å£éƒ½è¢«ç”¨äºå‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œä½†åªæœ‰æ¥æ”¶æ•°æ®æ—¶ä¼šå°†æ•°æ®åŒ…å‘é€åˆ°æ‰€æœ‰æ¥å£ã€‚</p></li><li><p>802.3ad (LACP)ï¼šMode 4</p><p>é€šè¿‡ä½¿ç”¨ LACPï¼ˆLink Aggregation Control Protocolï¼‰åè®®æ¥åŠ¨æ€åå•†å·¥ä½œæ¨¡å¼ï¼Œä»è€Œå®ç°æ¥å£ç»‘å®šã€‚è¿™éœ€è¦äº¤æ¢æœºç«¯ä¹Ÿæ”¯æŒ LACPã€‚</p></li><li><p>TLB (balance-tlb)ï¼šMode 5</p><p>æ ¹æ®æ¯ä¸ªæ¥å£çš„è´Ÿè½½æƒ…å†µï¼Œå°†æ•°æ®åŒ…å‘é€åˆ°å¯ç”¨æ¥å£ã€‚æ¥å£çš„è´Ÿè½½è¶Šä½ï¼Œå‘é€çš„æ•°æ®åŒ…è¶Šå¤šã€‚</p></li><li><p>ALB (balance-alb)ï¼šMode 6</p><p>ç±»ä¼¼äº <code>balance-tlb</code>ï¼Œä½†åœ¨æ¥å£å¤±æ•ˆæ—¶ï¼Œä¼šå°†MACåœ°å€æ˜ å°„åˆ°å¦ä¸€ä¸ªå¯ç”¨æ¥å£ï¼Œä»¥æä¾›å†—ä½™ã€‚</p></li></ul><h4 id="29-8-2"><a href="#29-8-2" class="headerlink" title="29.8.2"></a>29.8.2</h4><h4 id="29-8-3-å®ç°-Mode-1-æ¨¡å¼"><a href="#29-8-3-å®ç°-Mode-1-æ¨¡å¼" class="headerlink" title="29.8.3 å®ç° Mode 1 æ¨¡å¼"></a>29.8.3 å®ç° Mode 1 æ¨¡å¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºbondingè®¾å¤‡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-bond1</span><br><span class="line">TYPE=bond</span><br><span class="line">DEVICE=bond1</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=192.168.1.200</span><br><span class="line">PREFIX=24</span><br><span class="line">BONDING_OPTS=&quot;mode=1 miimon=100&quot;    miimonæŒ‡å®šé“¾è·¯ç›‘æµ‹æ—¶é—´é—´éš”ã€‚å¦‚æœmiimon=100ï¼Œé‚£ä¹ˆç³»ç»Ÿæ¯100msæ£€æµ‹ä¸€æ¬¡é“¾è·¯è¿æ¥çŠ¶æ€ï¼Œå¦‚æœæœ‰ä¸€æ¡çº¿è·¯ä¸é€šå°±è½¬å…¥å¦ä¸€æ¡çº¿è·¯,è¿™é‡Œä½¿ç”¨ mode1 æ¨¡å¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">MASTER=bond1</span><br><span class="line">SLAVE=yes</span><br><span class="line">ONBOOT=yes</span><br><span class="line"></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">DEVICE=eth1</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">MASTER=bond1</span><br><span class="line">SLAVE=yes</span><br><span class="line">ONBOOT=yes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯ç½‘ç»œæœåŠ¡</span></span><br><span class="line">systemctl restart network</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯åç¡®è®¤ä¾ç„¶èƒ½ç”Ÿæ•ˆ</span></span><br><span class="line">shutdown -r now</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹bondçŠ¶æ€</span></span><br><span class="line">cat /proc/net/bonding/bond1</span><br></pre></td></tr></table></figure><p>åˆ é™¤bond</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¦ç”¨</span></span><br><span class="line">ip link set down dev bond0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½é©±åŠ¨</span></span><br><span class="line">modprobe -r bonding</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤bondingé…ç½®æ–‡ä»¶</span></span><br><span class="line">mv /etc/sysconfig/network-scripts/ifcfg-bond1 /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤åŸæ¥ç½‘å¡çš„é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h4 id="29-8-4"><a href="#29-8-4" class="headerlink" title="29.8.4"></a>29.8.4</h4><h4 id="29-8-5-å®ç°-Mode-3-æ¨¡å¼"><a href="#29-8-5-å®ç°-Mode-3-æ¨¡å¼" class="headerlink" title="29.8.5 å®ç° Mode 3 æ¨¡å¼"></a>29.8.5 å®ç° Mode 3 æ¨¡å¼</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºbondingè®¾å¤‡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-bond1</span><br><span class="line">TYPE=bond</span><br><span class="line">DEVICE=bond1</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=192.168.1.200</span><br><span class="line">PREFIX=24</span><br><span class="line">BONDING_OPTS=&quot;mode=3 miimon=100&quot;    miimonæŒ‡å®šé“¾è·¯ç›‘æµ‹æ—¶é—´é—´éš”ã€‚å¦‚æœmiimon=100ï¼Œé‚£ä¹ˆç³»ç»Ÿæ¯100msæ£€æµ‹ä¸€æ¬¡é“¾è·¯è¿æ¥çŠ¶æ€ï¼Œå¦‚æœæœ‰ä¸€æ¡çº¿è·¯ä¸é€šå°±è½¬å…¥å¦ä¸€æ¡çº¿è·¯,è¿™é‡Œä½¿ç”¨ mode1 æ¨¡å¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">MASTER=bond1</span><br><span class="line">SLAVE=yes</span><br><span class="line">ONBOOT=yes</span><br><span class="line"></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">DEVICE=eth1</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">MASTER=bond1</span><br><span class="line">SLAVE=yes</span><br><span class="line">ONBOOT=yes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯ç½‘ç»œæœåŠ¡</span></span><br><span class="line">systemctl restart network</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯åç¡®è®¤ä¾ç„¶èƒ½ç”Ÿæ•ˆ</span></span><br><span class="line">shutdown -r now</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹bondçŠ¶æ€</span></span><br><span class="line">cat /proc/net/bonding/bond1</span><br></pre></td></tr></table></figure><p>åˆ é™¤bond</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç¦ç”¨ç½‘å¡</span></span><br><span class="line">ip link set down dev bond1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¸è½½é©±åŠ¨</span></span><br><span class="line">modprobe -r bonding</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤bondingé…ç½®æ–‡ä»¶</span></span><br><span class="line">mv /etc/sysconfig/network-scripts/ifcfg-bond1 /tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ¢å¤åŸæ¥ç½‘å¡çš„é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h4 id="29-8-6"><a href="#29-8-6" class="headerlink" title="29.8.6"></a>29.8.6</h4><h4 id="29-8-7"><a href="#29-8-7" class="headerlink" title="29.8.7"></a>29.8.7</h4><h4 id="29-8-8"><a href="#29-8-8" class="headerlink" title="29.8.8"></a>29.8.8</h4><h3 id="29-9-ç½‘ç»œç»„-Network-Teaming"><a href="#29-9-ç½‘ç»œç»„-Network-Teaming" class="headerlink" title="29.9 ç½‘ç»œç»„ Network Teaming"></a>29.9 ç½‘ç»œç»„ Network Teaming</h3><p>ç½‘ç»œç»„ï¼šæ˜¯å°†å¤šä¸ªç½‘å¡èšåˆåœ¨ä¸€èµ·çš„æ–¹æ³•ï¼Œä»è€Œå®ç°å†—é”™å’Œæé«˜ååé‡ï¼Œç½‘ç»œç»„ä¸åŒäºæ—§ç‰ˆä¸­<code>bonding</code>æŠ€æœ¯ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œæ‰©å±•æ€§ï¼Œç½‘ç»œç»„ç”±å†…æ ¸é©±åŠ¨å’Œ<code>teamd</code>å®ˆæŠ¤è¿›ç¨‹å®ç°</p><h4 id="29-9-1-å®ç°ç½‘ç»œç»„"><a href="#29-9-1-å®ç°ç½‘ç»œç»„" class="headerlink" title="29.9.1 å®ç°ç½‘ç»œç»„"></a>29.9.1 å®ç°ç½‘ç»œç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºteamæ¥å£</span></span><br><span class="line">nmcli con add con-name myteam0 ifname team0 type team config &#x27;&#123;&quot;runner&quot;:&#123;&quot;name&quot;:&quot;activebackup&quot;&#125;&#125;&#x27; ipv4.method manual ipv4.addresses 192.168.1.200/24 </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ ä»å±æ¥å£</span></span><br><span class="line">nmcli con add con-name myteam0-eth0  type team-slave master team0 ifname ens33</span><br><span class="line">nmcli con add con-name myteam0-eth1  type team-slave master team0 ifname ens36</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ³¨: å¦‚æœæ²¡æœ‰ä¸ºä»å±æ¥å£æä¾›è¿æ¥åï¼Œåˆ™è¯¥åç§°æ˜¯æ¥å£åç§°åŠ ç±»å‹æ„æˆ</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„æ¥å£</span></span><br><span class="line">nmcli connection</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åŸç½‘å¡çš„æ¥å£</span></span><br><span class="line">nmcli connection delete æ¥å£å</span><br><span class="line">nmcli connection delete æ¥å£å</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°åŠ è½½ç½‘å¡é…ç½®æ–‡ä»¶</span></span><br><span class="line">nmcli con reload</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¦å¯åŠ¨Bondingæ¥å£ï¼Œå¿…é¡»é¦–å…ˆå¯åŠ¨ä»å±æ¥å£</span></span><br><span class="line">nmcli con up mybond0-eth0</span><br><span class="line">nmcli con up mybond0-eth1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨Bondingæ¥å£</span></span><br><span class="line">nmcli con up mybond0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç½‘ç»œç»„çŠ¶æ€</span></span><br><span class="line">teamdctl team0 state</span><br></pre></td></tr></table></figure><h3 id="29-10-Linux-ç½‘ç»œæ¡¥"><a href="#29-10-Linux-ç½‘ç»œæ¡¥" class="headerlink" title="29.10 Linux ç½‘ç»œæ¡¥"></a>29.10 Linux ç½‘ç»œæ¡¥</h3><p>å·¥å…·æ¥è‡ªï¼šyum -y install bridge-utils</p><h3 id="29-11-ç½‘ç»œæµ‹è¯•è¯Šæ–­å·¥å…·"><a href="#29-11-ç½‘ç»œæµ‹è¯•è¯Šæ–­å·¥å…·" class="headerlink" title="29.11 ç½‘ç»œæµ‹è¯•è¯Šæ–­å·¥å…·"></a>29.11 ç½‘ç»œæµ‹è¯•è¯Šæ–­å·¥å…·</h3><ul><li><h4 id="æµ‹è¯•ç½‘ç»œè¿é€šæ€§"><a href="#æµ‹è¯•ç½‘ç»œè¿é€šæ€§" class="headerlink" title="æµ‹è¯•ç½‘ç»œè¿é€šæ€§"></a>æµ‹è¯•ç½‘ç»œè¿é€šæ€§</h4><p>ping</p></li><li><p>æ˜¾ç¤ºæ­£ç¡®çš„è·¯ç”±è¡¨</p><p>ip route</p></li><li><p>è·¯ç”±è¿½è¸ª</p><p>traceroute</p><p>tracepath</p><p>mtr</p></li><li><p>ç¡®è®¤åç§°æœåŠ¡å™¨ä½¿ç”¨</p><p>nslookup</p><p>host</p><p>dig</p></li><li><p>æŠ“åŒ…å·¥å…·</p><p>tcpdump</p><p>wireshark</p></li><li><p>å®‰å…¨æ‰«æå·¥å…·</p><p>nmap</p><p>netcat</p></li><li><p>æµé‡æ§åˆ¶å·¥å…·</p><p>tc</p></li></ul><h4 id="29-11-1-tcpdump"><a href="#29-11-1-tcpdump" class="headerlink" title="29.11.1 tcpdump"></a>29.11.1 tcpdump</h4><p>ç½‘ç»œæ•°æ®åŒ…æˆªå–åˆ†æå·¥å…·ï¼Œæ”¯æŒé’ˆå¯¹ç½‘ç»œå±‚ã€åè®®ã€ä¸»æœºã€ç½‘ç»œæˆ–ç«¯å£çš„è¿‡æ»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">-aå°è¯•å°†ç½‘ç»œå’Œå¹¿æ’­åœ°å€è½¬æ¢æˆåç§°</span><br><span class="line">-c ?æ”¶åˆ°æŒ‡å®šçš„æ•°æ®åŒ…æ•°ç›®å,å°±åœæ­¢è¾“å‡ºæ“ä½œ</span><br><span class="line">-dæŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆå¯é˜…è¯»çš„æ ¼å¼,å¹¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span><br><span class="line">-ddæŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆCè¯­è¨€çš„æ ¼å¼,å¹¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span><br><span class="line">-dddæŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆåè¿›åˆ¶æ•°å­—çš„æ ¼å¼,å¹¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span><br><span class="line">-eåœ¨æ¯åˆ—è¾“å‡ºèµ„æ–™ä¸Šæ˜¾ç¤ºè¿æ¥å±‚çº§çš„æ–‡ä»¶å¤´</span><br><span class="line">-fç”¨æ•°å­—æ˜¾ç¤ºå®é™…ç½‘ç»œåœ°å€</span><br><span class="line">-F &lt;æ–‡ä»¶&gt;     æŒ‡å®šå†…å«è¡¨è¾¾æ–¹å¼çš„æ–‡ä»¶</span><br><span class="line">-i &lt;ç½‘ç»œç•Œé¢&gt; ä½¿ç”¨æŒ‡å®šçš„ç½‘ç»œç•Œé¢é€å‡ºæ•°æ®åŒ…</span><br><span class="line">-lä½¿ç”¨æ ‡å‡†è¾“å‡ºåˆ—çš„ç¼“å†²åŒº</span><br><span class="line">-nä¸æŠŠä¸»æœºçš„ç½‘ç»œåœ°å€è½¬æ¢æˆåå­—</span><br><span class="line">-Nä¸åˆ—å‡ºåŸŸåã€‚</span><br><span class="line">-oä¸å°†æ•°æ®åŒ…ç¼–ç æœ€ä½³åŒ–ã€‚</span><br><span class="line">-pä¸è®©ç½‘ç»œç•Œé¢è¿›å…¥æ··æ‚æ¨¡å¼ã€‚</span><br><span class="line">-q å¿«é€Ÿè¾“å‡ºï¼Œä»…åˆ—å‡ºå°‘æ•°çš„ä¼ è¾“åè®®ä¿¡æ¯ã€‚</span><br><span class="line">-r&lt;æ•°æ®åŒ…æ–‡ä»¶&gt;  ä»æŒ‡å®šçš„æ–‡ä»¶è¯»å–æ•°æ®åŒ…æ•°æ®ã€‚</span><br><span class="line">-s&lt;æ•°æ®åŒ…å¤§å°&gt;   è®¾ç½®æ¯ä¸ªæ•°æ®åŒ…çš„å¤§å°ã€‚</span><br><span class="line">-S ç”¨ç»å¯¹è€Œéç›¸å¯¹æ•°å€¼åˆ—å‡ºTCPå…³è”æ•°</span><br><span class="line">-t åœ¨æ¯åˆ—å€¾å€’èµ„æ–™ä¸Šä¸æ˜¾ç¤ºæ—¶é—´æˆ³è®°ã€‚</span><br><span class="line">-tt åœ¨æ¯åˆ—å€¾å€’èµ„æ–™ä¸Šæ˜¾ç¤ºæœªç»æ ¼å¼åŒ–çš„æ—¶é—´æˆ³è®°</span><br><span class="line">-T&lt;æ•°æ®åŒ…ç±»å‹&gt;  å¼ºåˆ¶å°†è¡¨è¾¾æ–¹å¼æ‰€æŒ‡å®šçš„æ•°æ®åŒ…è½¬è¯‘æˆè®¾ç½®çš„æ•°æ®åŒ…ç±»å‹</span><br><span class="line">-v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚</span><br><span class="line">-vv æ›´è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚</span><br><span class="line">-x ç”¨åå…­è¿›åˆ¶å­—ç åˆ—å‡ºæ•°æ®åŒ…èµ„æ–™ã€‚</span><br><span class="line">-w&lt;æ•°æ®åŒ…æ–‡ä»¶&gt; æŠŠæ•°æ®åŒ…æ•°æ®å†™å…¥æŒ‡å®šçš„æ–‡ä»¶ã€‚</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸æŒ‡å®šä»»ä½•å‚æ•°,ç›‘å¬ç¬¬ä¸€å—ç½‘å¡ä¸Šç»è¿‡çš„æ•°æ®åŒ…ã€‚</span></span><br><span class="line">tcpdump</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘å¬ç‰¹å®šç½‘å¡</span></span><br><span class="line">tcpdump -i eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘å¬ä¸»æœºå‡ºå…¥çš„é€šä¿¡åŒ…</span></span><br><span class="line">tcpdump host 192.168.1.100</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘å¬ç‰¹å®šæ¥æº</span></span><br><span class="line">tcpdump src host hostname</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘å¬ç‰¹å®šç›®æ ‡åœ°å€</span></span><br><span class="line">tcpdump dst host hostname</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœä¸æŒ‡å®šsrcå’Œdst,é‚£ä¹ˆæ¥æºæˆ–è€…ç›®æ ‡æ˜¯hostnameçš„é€šä¿¡éƒ½ä¼šè¢«ç›‘å¬</span></span><br><span class="line">tcpdump host hostname</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘å¬ç‰¹å®šç«¯å£</span></span><br><span class="line">tcpdump port 3000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘å¬TCP/UDP</span></span><br><span class="line">tcpdump tcp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ¥æºä¸»æœº+ç«¯å£+TCPï¼Œç›‘å¬æ¥è‡ªä¸»æœº10.0.0.100åœ¨ç«¯å£22ä¸Šçš„TCPæ•°æ®åŒ…</span></span><br><span class="line">tcpdump tcp port 22 and src host 10.0.0.100</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç›‘å¬ç‰¹å®šä¸»æœºä¹‹é—´çš„é€šä¿¡</span></span><br><span class="line">tcpdump ip host 10.0.0.101 and 10.0.0.102</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">10.0.0.101å’Œé™¤äº†10.0.0.1ä¹‹å¤–çš„ä¸»æœºä¹‹é—´çš„é€šä¿¡</span></span><br><span class="line">tcpdump ip host 10.0.0.101 and ! 10.0.0.1</span><br></pre></td></tr></table></figure><h4 id="29-11-2-nmap"><a href="#29-11-2-nmap" class="headerlink" title="29.11.2 nmap"></a>29.11.2 nmap</h4><p>æ‰«æè¿œç¨‹ä¸»æœºå·¥å…·ï¼šyum -y install nmap</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">-sTTCP connect()æ‰«æï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ TCP æ‰«ææ–¹å¼ã€‚è¿™ç§æ‰«æå¾ˆå®¹æ˜“è¢«æ£€æµ‹åˆ°ï¼Œåœ¨ç›®æ ‡ä¸»æœºçš„æ—¥å¿—ä¸­ä¼šè®°å½•å¤§æ‰¹çš„è¿æ¥è¯·æ±‚ä»¥åŠé”™è¯¯ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">-sSTCP åŒæ­¥æ‰«æ (TCP SYN)ï¼Œå› ä¸ºä¸å¿…å…¨éƒ¨æ‰“å¼€ä¸€ä¸ª TCP è¿æ¥ï¼Œæ‰€ä»¥è¿™é¡¹æŠ€æœ¯é€šå¸¸ç§°ä¸ºåŠå¼€æ‰«æ (half-sSopen)ã€‚è¿™é¡¹æŠ€æœ¯æœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå¾ˆå°‘æœ‰ç³»ç»Ÿèƒ½å¤ŸæŠŠè¿™è®°å…¥ç³»ç»Ÿæ—¥å¿—</span><br><span class="line"></span><br><span class="line">-sF,-sX,-SNç§˜å¯†FIN æ•°æ®åŒ…æ‰«æã€åœ£è¯æ ‘(Xma Tree)ã€ç©º(Nu1) æ‰«æ¨¡å¼ã€‚è¿™äº›æ‰«ææ–¹å¼çš„ç†è®ºä¾æ®æ˜¯:å…³é—­çš„ç«¯å£éœ€è¦å¯¹ä½ çš„æ¢æµ‹åŒ…å›åº” RST åŒ…ï¼Œè€Œæ‰“å¼€çš„ç«¯å£å¿…éœ€å¿½ç•¥æœ‰é—®é¢˜çš„åŒ…</span><br><span class="line"></span><br><span class="line">-sPping æ‰«æï¼Œç”¨ ping æ–¹å¼æ£€æŸ¥ç½‘ç»œä¸Šå“ªäº›ä¸»æœºæ­£åœ¨è¿è¡Œã€‚å½“ä¸»æœºé˜»å¡ ICMP echo è¯·æ±‚åŒ…æ˜¯ ping æ‰«ææ˜¯sPæ— æ•ˆçš„ã€‚nmap åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šè¿›è¡Œ ping æ‰«æï¼Œåªæœ‰ç›®æ ‡ä¸»æœºå¤„äºè¿è¡ŒçŠ¶æ€ï¼Œæ‰ä¼šè¿›è¡Œåç»­çš„æ‰«æ</span><br><span class="line"></span><br><span class="line">-sUUDP çš„æ•°æ®åŒ…è¿›è¡Œæ‰«æï¼Œæƒ³çŸ¥é“åœ¨æŸå°ä¸»æœºä¸Šæä¾›å“ªäº› UDP æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-SAACK æ‰«æï¼Œè¿™é¡¹é«˜çº§çš„æ‰«ææ–¹æ³•é€šå¸¸å¯ä»¥ç”¨æ¥ç©¿è¿‡é˜²ç«å¢™ã€‚</span><br><span class="line">-swæ»‘åŠ¨çª—å£æ‰«æï¼Œéå¸¸ç±»ä¼¼äº ACK çš„æ‰«æ</span><br><span class="line">-SRRPC æ‰«æï¼Œå’Œå…¶å®ƒä¸åŒçš„ç«¯å£æ‰«ææ–¹æ³•ç»“åˆä½¿ç”¨ã€‚</span><br><span class="line"></span><br><span class="line">-bFTP åå¼¹æ”»å‡» (bounce attack)ï¼Œè¿æ¥åˆ°é˜²ç«å¢™åé¢çš„ä¸€å° FTP æœåŠ¡å™¨åšä»£ç†ï¼Œæ¥ç€è¿›è¡Œç«¯å£æ‰«æ</span><br><span class="line">-pOåœ¨æ‰«æä¹‹å‰ï¼Œä¸ ping ä¸»æœºã€‚</span><br><span class="line"></span><br><span class="line">-PTæ‰«æä¹‹å‰ï¼Œä½¿ç”¨ TCP ping ç¡®å®šå“ªäº›ä¸»æœºæ­£åœ¨è¿è¡Œ</span><br><span class="line"></span><br><span class="line">-PSå¯¹äº root ç”¨æˆ·ï¼Œè¿™ä¸ªé€‰é¡¹è®© nmap ä½¿ç”¨ SYN åŒ…è€Œä¸æ˜¯ ACK åŒ…æ¥å¯¹ç›®æ ‡ä¸»æœºè¿›è¡Œæ‰«æã€‚</span><br><span class="line">-PIè®¾ç½®è¿™ä¸ªé€‰é¡¹ï¼Œè®© nmap ä½¿ç”¨çœŸæ­£çš„ ping(ICMP echo è¯·æ±‚)æ¥æ‰«æç›®æ ‡ä¸»æœºæ˜¯å¦æ­£åœ¨è¿è¡Œã€‚</span><br><span class="line">-PBè¿™æ˜¯é»˜è®¤çš„ ping æ‰«æé€‰é¡¹ã€‚å®ƒä½¿ç”¨ ACK(-PT)å’Œ ICMP(-PI) ä¸¤ç§æ‰«å‹å¹¶è¡Œæ‰«æã€‚å¦‚æœé˜²ç«å¢™èƒ½å¤Ÿè¿‡æ»¤å…¶ä¸­ä¸€ç§åŒ…ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä½ å°±èƒ½å¤Ÿç©¿è¿‡é˜²ç«å¢™ã€‚</span><br><span class="line"></span><br><span class="line">-Oè¿™ä¸ªé€‰é¡¹æ¿€æ´»å¯¹ TCP/IP æŒ‡çº¹ç‰¹å¾ (fingerprinting) çš„æ‰«æï¼Œè·å¾—è¿œç¨‹ä¸»æœºçš„æ ‡å¿—ï¼Œä¹Ÿå°±æ˜¯æ“ä½œç³»ç»Ÿç±»å‹</span><br><span class="line">-Iæ‰“å¼€ nmap çš„åå‘æ ‡å¿—æ‰«æåŠŸèƒ½</span><br><span class="line">-fä½¿ç”¨ç¢ç‰‡ IP æ•°æ®åŒ…å‘é€ SYNã€FINã€XMASã€NULLã€‚åŒ…å¢åŠ åŒ…è¿‡æ»¤ã€å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„éš¾åº¦ï¼Œä½¿å…¶æ— æ³•çŸ¥é“ä½ çš„ä¼å›¾</span><br><span class="line"></span><br><span class="line">-vå†—ä½™æ¨¡å¼ï¼Œå¼ºçƒˆæ¨èè¿™ä¸ªé€‰é¡¹ï¼Œå®ƒä¼šç»™å‡ºæ‰«æè¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">-S &lt;IP&gt;ä¸€äº›æƒ…å†µä¸‹ nmap å¯èƒ½æ— æ³•ç¡®å®šä½ çš„æºåœ°å€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ç”¨è¿™ä¸ªé€‰é¡¹ç»™å‡º IP åœ°å€</span><br><span class="line">-g portè®¾ç½®æ‰«æçš„æºç«¯å£</span><br><span class="line">-oNæŠŠæ‰«æç»“æœé‡å®šå‘åˆ°ä¸€ä¸ªå¯è¯»çš„æ–‡ä»¶ logfilename ä¸­</span><br><span class="line"></span><br><span class="line">-oSæ‰«æç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span><br><span class="line">--host_timeoutè®¾ç½®æ‰«æä¸€å°ä¸»æœºçš„æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ²¡æœ‰è¶…æ—¶é™åˆ¶</span><br><span class="line">--max_rtt_timeoutè®¾ç½®å¯¹æ¯æ¬¡æ¢æµ‹çš„ç­‰å¾…æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´é™åˆ¶å°±é‡ä¼ æˆ–è¶…æ—¶ï¼Œé»˜è®¤å€¼å¤§çº¦æ˜¯900æ¯«ç§’</span><br><span class="line"></span><br><span class="line">--min_rtt_timeoutè®¾ç½® nmap å¯¹æ¯æ¬¡æ¢æµ‹è‡³å°‘ç­‰å¾…ä½ æŒ‡å®šçš„æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½</span><br><span class="line">-M countè®¾ç½®è¿›è¡Œ TCP connect() æ‰«ææ—¶ï¼Œæœ€å¤šä½¿ç”¨å¤šå°‘ä¸ªå¥—æ¥å­—è¿›è¡Œå¹¶è¡Œçš„æ‰«æ</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">TCP ack æ‰«æï¼Œå¹¶å‘2000ï¼Œé€Ÿåº¦å¿«</span></span><br><span class="line">nmap -n -PA --min-parallelism 2000 172.16.0.0/16</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»…åˆ—å‡ºæŒ‡å®šç½‘æ®µä¸Šçš„æ¯å°ä¸»æœºï¼Œä¸å‘é€ä»»ä½•æŠ¥æ–‡åˆ°ç›®æ ‡ä¸»æœº</span></span><br><span class="line">nmap -sL 192.168.1.0/24</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰«æä¸»æœºèŒƒå›´</span></span><br><span class="line">nmap -sP 192.168.1.0-255</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰«æåœ°å€æ®µ</span></span><br><span class="line">nmap -sP -v 192.168.1.0/24</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰«ææŒ‡å®šä¸»æœºç«¯å£ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line">nmap -v -A 10.0.0.7</span><br></pre></td></tr></table></figure><h1 id="30-è·¯ç”±ç®¡ç†"><a href="#30-è·¯ç”±ç®¡ç†" class="headerlink" title="30. è·¯ç”±ç®¡ç†"></a>30. è·¯ç”±ç®¡ç†</h1><h3 id="30-1-è·¯ç”±è¡¨æ„æˆ"><a href="#30-1-è·¯ç”±è¡¨æ„æˆ" class="headerlink" title="30.1 è·¯ç”±è¡¨æ„æˆ"></a>30.1 è·¯ç”±è¡¨æ„æˆ</h3><ul><li><p>Destinationï¼šç›®æ ‡ç½‘ç»œIDï¼Œè¡¨ç¤ºå¯ä»¥åˆ°è¾¾çš„ç›®æ ‡ç½‘ç»œIDï¼Œ0.0.0.0è¡¨ç¤ºæ‰€æœ‰æœªçŸ¥ç½‘ç»œï¼Œåˆç§°ä¸ºé»˜è®¤è·¯ç”±ï¼Œä¼˜å…ˆçº§æœ€ä½</p></li><li><p>Gatewayï¼š(ç½‘å…³)åˆ°è¾¾éç›´è¿çš„ç½‘ç»œï¼Œå°†æ•°æ®å‘é€åˆ°ä¸´è¿‘ï¼ˆä¸‹ä¸€ä¸ªï¼‰è·¯ç”±å™¨çš„ä¸´è¿‘æœ¬ä¸»æœºçš„æ¥å£çš„IPåœ°å€ï¼Œå¦‚æœæ˜¯ç›´è¿ç½‘ç»œgatewayæ˜¯0.0.0.0rout</p></li><li><p>Genmaskï¼šï¼ˆå­ç½‘æ©ç ï¼‰ç›®æ ‡ç½‘ç»œå¯¹åº”çš„netmask</p></li><li><p>Metricï¼šåˆ°è¾¾è¿œç¨‹ä¸»æœºçš„è´¹ç”¨ï¼Œå€¼è¶Šå°‘ï¼Œè·¯ç”±é€‰æ‹©åå‘æ€§è¶Šé«˜</p></li><li><p>Ifaceï¼šåˆ°è¾¾å¯¹åº”ç½‘ç»œï¼Œåº”è¯¥ç”±å½“å‰ä¸»æœºé‚£ä¸ªç½‘å¡å‘é€å‡ºæ¥</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos ~][0]$ route -n</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.1.2     0.0.0.0         UG    100    0        0 ens33</span><br><span class="line">192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 ens33</span><br></pre></td></tr></table></figure><h3 id="30-2-route-å‘½ä»¤"><a href="#30-2-route-å‘½ä»¤" class="headerlink" title="30.2 route å‘½ä»¤"></a>30.2 route å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">route</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹è·¯ç”±è¡¨</span></span><br><span class="line">route -n</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ·»åŠ ä¸€ä¸ªä¸»æœºè·¯ç”±(åˆ°è¾¾ä¸€ä¸ªIPåœ°å€æ€ä¹ˆèµ°)</span></span><br><span class="line">route add -host ç›®æ ‡IP gw ç½‘å…³(ä¸‹ä¸€è·³) dev ç½‘å¡åç§°</span><br><span class="line">route add -host 192.168.30.1 gw 172.16.0.1 dev ens33</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ·»åŠ ä¸€ä¸ªç½‘ç»œè·¯ç”±(åˆ°è¾¾ä¸€ä¸ªç½‘æ®µåœ°å€æ€ä¹ˆèµ°)</span></span><br><span class="line">route add -net ç›®æ ‡IP gw ç½‘å…³(ä¸‹ä¸€è·³) dev ç½‘å¡åç§°</span><br><span class="line">route add -net 192.168.0.0/24 gw 172.16.0.1 dev ens33</span><br><span class="line">route add -net 192.168.0.0 netmask 255.255.255.0 gw 172.16.0.1 dev ens33</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ·»åŠ ä¸€ä¸ªç½‘ç»œè·¯ç”±ï¼Œç»™ä»–è®¾ç½®è´¹ç”¨,è´¹ç”¨è¶Šä½,ä½¿ç”¨åå‘æ€§è¶Šé«˜</span></span><br><span class="line">route add -net 192.168.0.0/24 gw 172.16.0.1 dev ens33 metric 200</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ·»åŠ ä¸€ä¸ªé»˜è®¤è·¯ç”±</span></span><br><span class="line">route add -net 0.0.0.0 netmask 0.0.0.0 gw 172.16.0.1</span><br><span class="line">route add -net 0.0.0.0/0 gw 172.16.0.1</span><br><span class="line">route add default gw 172.16.0.1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤é™æ€ä¸»æœºè·¯ç”±</span></span><br><span class="line">route del -host 192.168.30.1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤é™æ€ç½‘ç»œè·¯ç”±</span></span><br><span class="line">route del -net 192.168.0.0 netmask 255.255.255.0</span><br></pre></td></tr></table></figure><h3 id="30-3-2è·¯ç”±å™¨çš„è·¯ç”±å®ç°"><a href="#30-3-2è·¯ç”±å™¨çš„è·¯ç”±å®ç°" class="headerlink" title="30.3 2è·¯ç”±å™¨çš„è·¯ç”±å®ç°"></a>30.3 2è·¯ç”±å™¨çš„è·¯ç”±å®ç°</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/35354992/1686123844695-27c340d6-b728-4f00-bfc0-fc2986511f91.png" alt="img"></p><p>Route 1 è·¯ç”±è¡¨</p><table><thead><tr><th>ç›®æ ‡ç½‘ç»œ</th><th>ç½‘å…³</th><th>å­ç½‘æ©ç </th><th>æ¥å£</th></tr></thead><tbody><tr><td>Destination</td><td>Gateway</td><td>Genmask</td><td></td></tr><tr><td>172.16.0.0</td><td>0.0.0.0</td><td>255.255.0.0</td><td>eth0</td></tr><tr><td>10.0.0.0</td><td>0.0.0.0</td><td>255.0.0.0</td><td>eth1</td></tr><tr><td>192.168.0.0</td><td>10.0.0.201</td><td>255.255.255.0</td><td>eth1</td></tr></tbody></table><p>Route 2 è·¯ç”±è¡¨</p><table><thead><tr><th>ç›®æ ‡ç½‘ç»œ</th><th>ç½‘å…³</th><th>å­ç½‘æ©ç </th><th>æ¥å£</th></tr></thead><tbody><tr><td>Destination</td><td>Gateway</td><td>Genmask</td><td></td></tr><tr><td>172.16.0.0</td><td>10.0.0.200</td><td>255.255.0.0</td><td>eth1</td></tr><tr><td>10.0.0.0</td><td>0.0.0.0</td><td>255.0.0.0</td><td>eth1</td></tr><tr><td>192.168.0.0</td><td>0.0.0.0</td><td>255.255.255.0</td><td>eth0</td></tr></tbody></table><h3 id="30-4-3è·¯ç”±å™¨çš„è·¯ç”±å®ç°"><a href="#30-4-3è·¯ç”±å™¨çš„è·¯ç”±å®ç°" class="headerlink" title="30.4 3è·¯ç”±å™¨çš„è·¯ç”±å®ç°"></a>30.4 3è·¯ç”±å™¨çš„è·¯ç”±å®ç°</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/35354992/1686145331121-fc47a827-1472-458f-8be7-841ff2efe766.png" alt="img"></p><table><thead><tr><th>è·¯ç”±å™¨</th><th>ç›®æ ‡åœ°å€</th><th>ç½‘å…³</th></tr></thead><tbody><tr><td>1</td><td>172.20.0.0&#x2F;16</td><td>172.18.0.201</td></tr><tr><td>1</td><td>172.22.0.0&#x2F;16</td><td>172.18.0.201</td></tr><tr><td>2</td><td>172.16.0.0</td><td>172.18.0.200</td></tr><tr><td>2</td><td>172.22.0.0</td><td>172.20.0.201</td></tr><tr><td>3</td><td>0.0.0.0</td><td>172.20.2.200</td></tr></tbody></table><h3 id="30-5-è·¯ç”±çš„ä¿å­˜"><a href="#30-5-è·¯ç”±çš„ä¿å­˜" class="headerlink" title="30.5 è·¯ç”±çš„ä¿å­˜"></a>30.5 è·¯ç”±çš„ä¿å­˜</h3><p>è¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/route-eth0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·¯ç”±è¡¨é…ç½®é£æ ¼</span></span><br><span class="line">(1)TARGET via GW</span><br><span class="line">ä¾‹ï¼š10.0.0.8/8 via 172.16.0.1</span><br><span class="line"></span><br><span class="line">(2)æ¯ä¸‰è¡Œå®šä¹‰ä¸€æ¡è·¯ç”±?å·æ˜¯ç¬¬å‡ æ¡è·¯ç”±,ä¾‹: 1ã€2ã€3</span><br><span class="line">ADDRESS?=TARGET</span><br><span class="line">NETMASK?=mask</span><br><span class="line">GATWAY?=GW</span><br></pre></td></tr></table></figure><h1 id="31-è¿›ç¨‹ï¼Œæ€§èƒ½ç›¸å…³å·¥å…·"><a href="#31-è¿›ç¨‹ï¼Œæ€§èƒ½ç›¸å…³å·¥å…·" class="headerlink" title="31. è¿›ç¨‹ï¼Œæ€§èƒ½ç›¸å…³å·¥å…·"></a>31. è¿›ç¨‹ï¼Œæ€§èƒ½ç›¸å…³å·¥å…·</h1><h3 id="31-1-è¿›ç¨‹ç®¡ç†å·¥å…·"><a href="#31-1-è¿›ç¨‹ç®¡ç†å·¥å…·" class="headerlink" title="31.1 è¿›ç¨‹ç®¡ç†å·¥å…·"></a>31.1 è¿›ç¨‹ç®¡ç†å·¥å…·</h3><h4 id="31-1-1-pstree-è¿›ç¨‹æ ‘"><a href="#31-1-1-pstree-è¿›ç¨‹æ ‘" class="headerlink" title="31.1.1 pstree è¿›ç¨‹æ ‘"></a>31.1.1 pstree è¿›ç¨‹æ ‘</h4><p>å·¥å…·æ¥è‡ªï¼š<code>yum -y install psmisc</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pstree [é€‰é¡¹] [PID|USER]</span><br><span class="line"></span><br><span class="line">-pæ˜¾ç¤ºPID</span><br><span class="line">-Tä¸æ˜¾ç¤ºçº¿ç¨‹threadï¼Œé»˜è®¤æ˜¾ç¤ºçº¿ç¨‹</span><br><span class="line">-uæ˜¾ç¤ºç”¨æˆ·åˆ‡æ¢</span><br><span class="line">-H pidé«˜äº®æ˜¾ç¤ºçˆ¶è¿›ç¨‹å’Œå‰è¾ˆè¿›ç¨‹</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸä¸ªç”¨æˆ·è¿›ç¨‹</span></span><br><span class="line">pstree root</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¿›ç¨‹ID</span></span><br><span class="line">pstree -pT</span><br></pre></td></tr></table></figure><h4 id="31-1-2-ps-è¿›ç¨‹ä¿¡æ¯"><a href="#31-1-2-ps-è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="31.1.2 ps è¿›ç¨‹ä¿¡æ¯"></a>31.1.2 ps è¿›ç¨‹ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">aæ˜¾ç¤ºæ‰€æœ‰ç»ˆç«¯è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">xé€‰é¡¹åŒ…æ‹¬ä¸åœ¨ç»ˆç«¯è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">ué€‰é¡¹æ˜¾ç¤ºè¿›ç¨‹æ‰€æœ‰è€…ä¿¡æ¯</span><br><span class="line">fæ˜¾ç¤ºçˆ¶å­è¿›ç¨‹å…³ç³»</span><br><span class="line">oæ˜¾ç¤ºå®šåˆ¶çš„ä¿¡æ¯</span><br><span class="line">Læ˜¾ç¤ºæ”¯æŒçš„å±æ€§åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">-k|--sortå¯¹å±æ€§æ’åº,åœ¨å±æ€§å‰åŠ  - è¡¨ç¤ºå€’åº</span><br><span class="line">-oæŒ‘é€‰è¦æ˜¾ç¤ºçš„å±æ€§,pid,user,%cpu,cmd ...</span><br><span class="line">-CæŒ‡å®šå‘½ä»¤,å¤šä¸ªå‘½ä»¤ç”¨,åˆ†éš”</span><br><span class="line">-eæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œç›¸å½“äº-A</span><br><span class="line">-Læ˜¾ç¤ºçº¿ç¨‹</span><br><span class="line">-fæ˜¾ç¤ºå®Œæ•´æ ¼å¼ç¨‹åºä¿¡æ¯</span><br><span class="line">-Fæ˜¾ç¤ºæ›´å®Œæ•´æ ¼å¼çš„è¿›ç¨‹ä¿¡æ¯</span><br><span class="line">-Hä»¥è¿›ç¨‹å±‚çº§æ ¼å¼æ˜¾ç¤ºè¿›ç¨‹ç›¸å…³ä¿¡æ¯</span><br><span class="line">-u UID|USER_NAMEæŒ‡å®šæœ‰æ•ˆçš„ç”¨æˆ·IDæˆ–åç§°</span><br><span class="line">-U UID|USER_NAMEæŒ‡å®šçœŸæ­£çš„ç”¨æˆ·IDæˆ–åç§°</span><br><span class="line">-g GID|GROUP_NAMEæŒ‡å®šæœ‰æ•ˆçš„gidæˆ–ç»„åç§°</span><br><span class="line">-G GID|GROUP_NAMEæŒ‡å®šçœŸæ­£çš„gidæˆ–ç»„åç§°</span><br><span class="line">-p PIDæ˜¾ç¤ºæŒ‡pidçš„è¿›ç¨‹</span><br><span class="line">--ppid PIDæ˜¾ç¤ºå±äºpidçš„å­è¿›ç¨‹</span><br><span class="line">-t ttyæŒ‡å®štty,ç›¸å½“äº t</span><br><span class="line">-Mæ˜¾ç¤ºSELinuä¿¡æ¯,ç›¸å½“äº Z</span><br><span class="line"></span><br><span class="line">niï¼šniceå€¼</span><br><span class="line">priï¼špriorityä¼˜å…ˆçº§</span><br><span class="line">rtprioï¼šå®æ—¶ä¼˜å…ˆçº§</span><br><span class="line">psrï¼šprocessor cpuç¼–å·</span><br></pre></td></tr></table></figure><h4 id="31-1-3-æœç´¢è¿›ç¨‹å’Œå¥åº·æ£€æŸ¥"><a href="#31-1-3-æœç´¢è¿›ç¨‹å’Œå¥åº·æ£€æŸ¥" class="headerlink" title="31.1.3 æœç´¢è¿›ç¨‹å’Œå¥åº·æ£€æŸ¥"></a>31.1.3 æœç´¢è¿›ç¨‹å’Œå¥åº·æ£€æŸ¥</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pidof mysqld</span><br><span class="line"></span><br><span class="line">-xæŒ‰è„šæœ¬åç§°æŸ¥è¯¢PID</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‰è„šæœ¬åç§°æŸ¥è¯¢PID</span></span><br><span class="line">pidof -x iptables.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">pgrep mysqld</span><br><span class="line"></span><br><span class="line">-u  ç”Ÿæ•ˆè€…</span><br><span class="line">-UçœŸæ­£å‘èµ·è¿è¡Œå‘½ä»¤è€…</span><br><span class="line">-tä¸æŒ‡å®šç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹</span><br><span class="line">-læ˜¾ç¤ºè¿›ç¨‹å</span><br><span class="line">-aæ˜¾ç¤ºè¿›ç¨‹çš„å®Œæ•´å‘½ä»¤</span><br><span class="line">-p PIDæ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹çš„å­è¿›ç¨‹</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¿›ç¨‹PID</span></span><br><span class="line">pgrep sshd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ä½ æŸä¸ªç»ˆç«¯è¿è¡Œè¿›ç¨‹</span></span><br><span class="line">pgrep -at pts/0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ¤æ–­è¿›ç¨‹æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">pidof sshd &amp;&gt; /dev/null &amp;&amp; echo &quot;è¿›ç¨‹å­˜åœ¨&quot; || echo &quot;è¿›ç¨‹ä¸å­˜åœ¨&quot;</span><br><span class="line">pgrep -c sshd &amp;&gt; /dev/null &amp;&amp; echo &quot;è¿›ç¨‹å­˜åœ¨&quot; || echo &quot;è¿›ç¨‹ä¸å­˜åœ¨&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ¤æ–­è¿›ç¨‹æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">kill -0 PID &amp;&gt; /dev/null;echo $?</span><br><span class="line">killall -0 ssh &amp;&gt; /dev/null;echo $?</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›ç¨‹çš„å¥åº·æ€§æ£€æŸ¥</span></span><br><span class="line">æ¨¡æ‹Ÿå®¢æˆ·ç«¯å‘èµ·è®¿é—®ï¼Œä»¥æ­¤æ¥åˆ¤æ–­æ˜¯å¦å¥åº·</span><br></pre></td></tr></table></figure><h4 id="31-1-4-è°ƒæ•´è¿›ç¨‹ä¼˜å…ˆçº§"><a href="#31-1-4-è°ƒæ•´è¿›ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="31.1.4 è°ƒæ•´è¿›ç¨‹ä¼˜å…ˆçº§"></a>31.1.4 è°ƒæ•´è¿›ç¨‹ä¼˜å…ˆçº§</h4><ul><li><strong>é™æ€ä¼˜å…ˆçº§ï¼š</strong> é™æ€ä¼˜å…ˆçº§æ˜¯ä¸€ä¸ªç”¨äºè¡¨ç¤ºè¿›ç¨‹ç›¸å¯¹äºå…¶ä»–è¿›ç¨‹çš„ç›¸å¯¹ä¼˜å…ˆçº§çš„æ•´æ•°å€¼ã€‚å®ƒé€šå¸¸åœ¨èŒƒå›´ <code>[100, 139]</code> å†…ï¼Œå…¶ä¸­ <code>100</code> æ˜¯æœ€ä½ä¼˜å…ˆçº§ï¼Œè€Œ <code>139</code> æ˜¯æœ€é«˜ä¼˜å…ˆçº§ã€‚</li><li><strong>Niceå€¼ï¼š</strong> Niceå€¼æ˜¯ä¸€ä¸ªèŒƒå›´åœ¨ <code>-20</code> åˆ° <code>19</code> ä¹‹é—´çš„æ•´æ•°ï¼Œç”¨äºè¡¨ç¤ºè¿›ç¨‹çš„ç›¸å¯¹ä¼˜å…ˆçº§ã€‚<code>-20</code> æ˜¯æœ€é«˜ä¼˜å…ˆçº§ï¼ˆæœ€ä¸niceï¼‰ï¼Œ<code>19</code> æ˜¯æœ€ä½ä¼˜å…ˆçº§ï¼ˆæœ€niceï¼‰ã€‚è¾ƒå°çš„Niceå€¼å¯¹åº”äºæ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œè¾ƒå¤§çš„Niceå€¼å¯¹åº”äºæ›´ä½çš„ä¼˜å…ˆçº§ã€‚</li><li><strong>é»˜è®¤çš„Niceå€¼ï¼š</strong> å½“è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œé»˜è®¤çš„Niceå€¼ä¸º <code>0</code>ï¼Œè¿™å¯¹åº”äºé™æ€ä¼˜å…ˆçº§ <code>120</code>ã€‚å› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹çš„ä¼˜å…ˆçº§ä¸º <code>120</code>ã€‚</li><li><strong>åªæœ‰æ ¹ç”¨æˆ·å¯ä»¥é™ä½Niceå€¼ï¼š</strong> é€šå¸¸ï¼Œåªæœ‰è¶…çº§ç”¨æˆ·ï¼ˆæ ¹ç”¨æˆ·ï¼‰æ‰èƒ½é™ä½ï¼ˆæé«˜ä¼˜å…ˆæ€§ï¼‰è¿›ç¨‹çš„Niceå€¼ï¼Œå³å°†Niceå€¼ä»æ­£æ•°å‡å°åˆ°è´Ÿæ•°ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>renice</code> å‘½ä»¤æ¥å®ç°ã€‚éç‰¹æƒç”¨æˆ·åªèƒ½å¢åŠ Niceå€¼ï¼ˆå‡å°ä¼˜å…ˆçº§ï¼‰ã€‚</li><li><strong>ä¼˜å…ˆçº§æœ€é«˜ä¸º-19ï¼Œæœ€ä½ä¸º20ï¼š</strong> ç”±äºNiceå€¼çš„èŒƒå›´æ˜¯ <code>-20</code> åˆ° <code>19</code>ï¼Œå¯¹åº”çš„é™æ€ä¼˜å…ˆçº§èŒƒå›´æ˜¯ <code>[100, 139]</code>ï¼Œæ‰€ä»¥æœ€é«˜çš„è¿›ç¨‹ä¼˜å…ˆçº§æ˜¯ <code>-19</code> å¯¹åº”é™æ€ä¼˜å…ˆçº§ <code>100</code>ï¼Œè€Œæœ€ä½çš„è¿›ç¨‹ä¼˜å…ˆçº§æ˜¯ <code>20</code> å¯¹åº”é™æ€ä¼˜å…ˆçº§ <code>139</code>ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥æœ€é«˜ä¼˜å…ˆçº§æ¥å¯åŠ¨è¿›ç¨‹</span></span><br><span class="line">nice -n -19 ping 127.0.0.1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»¥æœ€ä½ä¼˜å…ˆçº§æ¥å¯åŠ¨è¿›ç¨‹</span></span><br><span class="line">nice -n 20 ping 127.0.0.1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è°ƒæ•´æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¼˜å…ˆçº§</span></span><br><span class="line">renice -n -10 3727</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¿›ç¨‹ä¼˜å…ˆçº§</span></span><br><span class="line">prtstat -r $(pidof ping) | grep nice</span><br></pre></td></tr></table></figure><h4 id="31-1-5-lsof-æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€æ–‡ä»¶"><a href="#31-1-5-lsof-æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€æ–‡ä»¶" class="headerlink" title="31.1.5 lsof æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€æ–‡ä»¶"></a>31.1.5 lsof æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæŒ‡å®šè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line">lsof -p &lt;PID&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºä½¿ç”¨è¯¥ç›®å½•æˆ–æ–‡ä»¶çš„è¿›ç¨‹</span></span><br><span class="line">lsof /path/to/file</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæŸä¸ªç”¨æˆ·æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line">lsof -u username</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæŸä¸ªç‰¹å®šç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨</span></span><br><span class="line">lsof -i :80</span><br></pre></td></tr></table></figure><p>èŒƒä¾‹ï¼šè¯¯åˆ é™¤è¢«ä½¿ç”¨çš„æ–‡ä»¶ï¼Œæ¢å¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¨¡æ‹Ÿæ–‡ä»¶è¢«ä½¿ç”¨</span></span><br><span class="line">tail -f /var/log/dpkg.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ä½¿ç”¨ä¸­çš„æ–‡ä»¶</span></span><br><span class="line">rm -rf /var/log/dpkg.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥æ‰¾è¢«åˆ é™¤ä½†ä»ç„¶è¢«è¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶</span></span><br><span class="line">lsof | grep &#x27;deleted&#x27;</span><br><span class="line">tail   5285     root    3r   REG    252,3  766  788975 /var/log/dpkg.log (deleted)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤æ–‡ä»¶</span></span><br><span class="line">cat /proc/$(pidof tail)/fd/3 &gt; /var/log/dpkg.log</span><br></pre></td></tr></table></figure><h3 id="31-2-ç³»ç»Ÿæ€§èƒ½å·¥å…·"><a href="#31-2-ç³»ç»Ÿæ€§èƒ½å·¥å…·" class="headerlink" title="31.2 ç³»ç»Ÿæ€§èƒ½å·¥å…·"></a>31.2 ç³»ç»Ÿæ€§èƒ½å·¥å…·</h3><h4 id="31-2-1-uptime-è´Ÿè½½æŸ¥è¯¢"><a href="#31-2-1-uptime-è´Ÿè½½æŸ¥è¯¢" class="headerlink" title="31.2.1 uptime è´Ÿè½½æŸ¥è¯¢"></a>31.2.1 uptime è´Ÿè½½æŸ¥è¯¢</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@Ubuntu:~# uptime</span><br><span class="line"> 21:24:39 up 11:45,  2 users,  load average: 0.02, 0.01, 0.00</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¾“å‡ºè¯´æ˜</span></span><br><span class="line">21:24:39: å½“å‰ç³»ç»Ÿæ—¶é—´ä¸º 21 ç‚¹ 24 åˆ† 39 ç§’ã€‚</span><br><span class="line">up 11:45: ç³»ç»Ÿå·²ç»è¿è¡Œäº† 11 å°æ—¶ 45 åˆ†é’Ÿã€‚è¿™è¡¨ç¤ºè‡ªä¸Šæ¬¡å¯åŠ¨ç³»ç»Ÿä»¥æ¥çš„è¿è¡Œæ—¶é—´ã€‚</span><br><span class="line">2 users: å½“å‰æœ‰ 2 ä¸ªç”¨æˆ·ç™»å½•åˆ°ç³»ç»Ÿã€‚</span><br><span class="line">load average: 0.02, 0.01, 0.00: è´Ÿè½½å¹³å‡å€¼ã€‚è´Ÿè½½å¹³å‡å€¼æ˜¾ç¤ºäº†ç³»ç»Ÿåœ¨è¿‡å» 1 åˆ†é’Ÿã€5 åˆ†é’Ÿå’Œ 15 åˆ†é’Ÿå†…çš„å¹³å‡è´Ÿè½½æƒ…å†µ</span><br></pre></td></tr></table></figure><p>&#x2F;proc&#x2F;uptime åŒ…æ‹¬ä¸¤ä¸ªå€¼ï¼Œå•ä½s</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@Ubuntu:~# cat /proc/uptime</span><br><span class="line">42711.43 84637.93</span><br><span class="line"></span><br><span class="line">42711.43ç³»ç»Ÿå¼€æœºæ—¶é—´</span><br><span class="line">84637.93ç³»ç»Ÿç©ºé—²å®ç°,æŒ‰CPUæ ¸æ•°è®¡ç®—ï¼Œä¸¤é¢—CPUçš„ç©ºé—²æ—¶é—´éœ€è¦ä¹˜2</span><br></pre></td></tr></table></figure><h4 id="31-2-3-prtstat-æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯"><a href="#31-2-3-prtstat-æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="31.2.3  prtstat æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯"></a>31.2.3  prtstat æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯</h4><p>å·¥å…·æ¥è‡ªï¼š<code>yum -y install psmisc</code>   å¯ä»¥æ˜¾ç¤ºæ›´ä¸ºè¯¦ç»†çš„ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prtstat [è¿›ç¨‹PID]</span><br><span class="line"></span><br><span class="line">-ræ›´æ¸…æ™°çš„æ˜¾ç¤º</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹sshdè¿›ç¨‹è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">prtstat -r $(pidof sshd)</span><br></pre></td></tr></table></figure><h4 id="31-2-4-top-æŸ¥çœ‹è¿›ç¨‹å®æ—¶"><a href="#31-2-4-top-æŸ¥çœ‹è¿›ç¨‹å®æ—¶" class="headerlink" title="31.2.4 top æŸ¥çœ‹è¿›ç¨‹å®æ—¶"></a>31.2.4 top æŸ¥çœ‹è¿›ç¨‹å®æ—¶</h4><h4 id="31-2-5-mpstat-æ˜¾ç¤ºCPUç›¸å…³ç»Ÿè®¡"><a href="#31-2-5-mpstat-æ˜¾ç¤ºCPUç›¸å…³ç»Ÿè®¡" class="headerlink" title="31.2.5 mpstat æ˜¾ç¤ºCPUç›¸å…³ç»Ÿè®¡"></a>31.2.5 mpstat æ˜¾ç¤ºCPUç›¸å…³ç»Ÿè®¡</h4><p>å·¥å…·æ¥è‡ªï¼š<code>yum -y install sysstat</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸€ç§’é’Ÿæ”¶é›†ä¸€æ¬¡æ•°æ®,æ”¶é›†5æ¬¡é€€å‡º</span></span><br><span class="line">root@Ubuntu:~# mpstat 1 5</span><br><span class="line">Linux 5.15.0-83-generic (Ubuntu) 11/07/2023 _x86_64_(2 CPU)</span><br><span class="line"></span><br><span class="line">09:37:00 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">09:37:00 PM  all    0.28    0.01    0.15    0.02    0.00    0.00    0.00    0.00    0.00   99.53</span><br></pre></td></tr></table></figure><h3 id="31-3-Centos-8-å›¾å½¢åŒ–ç³»ç»Ÿç®¡ç†å·¥å…·"><a href="#31-3-Centos-8-å›¾å½¢åŒ–ç³»ç»Ÿç®¡ç†å·¥å…·" class="headerlink" title="31.3 Centos 8 å›¾å½¢åŒ–ç³»ç»Ÿç®¡ç†å·¥å…·"></a>31.3 Centos 8 å›¾å½¢åŒ–ç³»ç»Ÿç®¡ç†å·¥å…·</h3><p>Cockpit æ˜¯ Centos 8 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œæ˜¯ä¸€ä¸ªåŸºäºwebç•Œé¢çš„åº”ç”¨ï¼Œå®ƒæä¾›äº†å¯¹ç³»ç»Ÿçš„å›¾å½¢åŒ–ç®¡ç†</p><ul><li>ç›‘æ§ç³»ç»Ÿæ´»åŠ¨ï¼ˆCPUï¼Œå†…å­˜ï¼Œç£ç›˜IOå’Œç½‘ç»œæµé‡ï¼‰</li><li>æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ¡ç›®</li><li>æŸ¥çœ‹ç£ç›˜åˆ†åŒºçš„å®¹é‡</li><li>æŸ¥çœ‹ç½‘ç»œæ´»åŠ¨ï¼ˆå‘é€å’Œæ¥æ”¶ï¼‰</li><li>æŸ¥çœ‹ç”¨æˆ·è´¦æˆ·</li><li>æ£€æŸ¥ç³»ç»ŸæœåŠ¡çš„çŠ¶æ€</li><li>æå–å·²å®‰è£…åº”ç”¨çš„ä¿¡æ¯</li><li>æŸ¥çœ‹å’Œå®‰è£…å¯ç”¨æ›´æ–°ï¼ˆå¦‚æœä»¥rootèº«ä»½ç™»å½•ï¼‰ï¼Œå¹¶åœ¨éœ€è¦æ—¶é‡å¯ç³»ç»Ÿ</li><li>æ‰“å¼€å¹¶ä½¿ç”¨ç»ˆç«¯çª—å£</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…cockpit</span></span><br><span class="line">dnf -y install cockpit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl enable --now cockpit.socket</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¿é—®ç•Œé¢</span></span><br><span class="line">https://192.168.1.8:9090</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è´¦å·/å¯†ç </span></span><br><span class="line">è´¦å·/å¯†ç ä¸ºrootçš„è´¦å·å¯†ç </span><br></pre></td></tr></table></figure><h1 id="32-ä¿¡å·å‘é€-Kill"><a href="#32-ä¿¡å·å‘é€-Kill" class="headerlink" title="32. ä¿¡å·å‘é€ Kill"></a>32. ä¿¡å·å‘é€ Kill</h1><p><code>kill</code>ï¼šå†…éƒ¨å‘½ä»¤ï¼Œå¯ç”¨æ¥å‘è¿›ç¨‹å‘é€æ§åˆ¶ä¿¡å·ï¼Œä»¥å®ç°å¯¹è¿›ç¨‹ç®¡ç†ï¼Œæ¯ä¸ªä¿¡å·å¯¹åº”ä¸€ä¸ªæ•°å­—ï¼Œä¿¡å·åç§°ä»¥SIGå¼€å¤´ï¼Œå¯ä»¥çœç•¥ï¼Œä¸åŒºåˆ†å¤§å°å†™</p><h3 id="32-1-æŸ¥çœ‹ä¿¡å·åˆ—è¡¨"><a href="#32-1-æŸ¥çœ‹ä¿¡å·åˆ—è¡¨" class="headerlink" title="32.1 æŸ¥çœ‹ä¿¡å·åˆ—è¡¨"></a>32.1 æŸ¥çœ‹ä¿¡å·åˆ—è¡¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kill -l</span><br><span class="line">trap -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿¡å·åˆ—è¡¨</span></span><br><span class="line"> 1) SIGHUP 2)  SIGINT 3)  SIGQUIT 4)  SIGILL 5)  SIGTRAP</span><br><span class="line"> 6) SIGABRT 7)  SIGBUS 8)  SIGFPE 9)  SIGKILL10) SIGUSR1</span><br><span class="line">11) SIGSEGV12) SIGUSR213) SIGPIPE14) SIGALRM15) SIGTERM</span><br><span class="line">16) SIGSTKFLT17) SIGCHLD18) SIGCONT19) SIGSTOP20) SIGTSTP</span><br><span class="line">21) SIGTTIN22) SIGTTOU23) SIGURG24) SIGXCPU25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM27) SIGPROF28) SIGWINCH29) SIGIO30) SIGPWR</span><br><span class="line">31) SIGSYS34) SIGRTMIN35) SIGRTMIN+136) SIGRTMIN+237) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+439) SIGRTMIN+540) SIGRTMIN+641) SIGRTMIN+742) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+944) SIGRTMIN+1045) SIGRTMIN+1146) SIGRTMIN+1247) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+1449) SIGRTMIN+1550) SIGRTMAX-1451) SIGRTMAX-1352) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-1154) SIGRTMAX-1055) SIGRTMAX-956) SIGRTMAX-857) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-659) SIGRTMAX-560) SIGRTMAX-461) SIGRTMAX-362) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-164) SIGRTMAX</span><br></pre></td></tr></table></figure><h3 id="32-2-å¸¸ç”¨ä¿¡å·"><a href="#32-2-å¸¸ç”¨ä¿¡å·" class="headerlink" title="32.2 å¸¸ç”¨ä¿¡å·"></a>32.2 å¸¸ç”¨ä¿¡å·</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0)ç”¨äºæ£€æŸ¥è¿›ç¨‹æ˜¯å¦ä»åœ¨è¿è¡Œ killall -0 haproxy</span><br><span class="line">1)  SIGHUPæ— é¡»å…³é—­è¿›ç¨‹è€Œè®©å…¶é‡è¯»é…ç½®æ–‡ä»¶</span><br><span class="line">2)  SIGINTä¸­æ­¢æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼šç›¸å½“äºctl+c</span><br><span class="line">3)  SIGQUTTç›¸å½“äºctl+\</span><br><span class="line">9)  SIGKILLå¼ºåˆ¶æ€æ­»æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">15) SIGTERMä¼˜é›…çš„ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">18) SIGCONTç»§ç»­è¿è¡Œ</span><br><span class="line">19) SIGSTOPåå°ä¼‘çœ </span><br></pre></td></tr></table></figure><h3 id="32-3-å‘é€ä¿¡å·çš„æ–¹æ³•"><a href="#32-3-å‘é€ä¿¡å·çš„æ–¹æ³•" class="headerlink" title="32.3 å‘é€ä¿¡å·çš„æ–¹æ³•"></a>32.3 å‘é€ä¿¡å·çš„æ–¹æ³•</h3><p>ä¿¡å·çš„æ•°å­—è¡¨ç¤ºï¼š1ï¼Œ2 ï¼Œ9</p><p>ä¿¡å·å®Œæ•´åç§°ï¼šSIGHUPï¼Œsighup</p><p>ä¿¡å·çš„ç®€å†™åç§°ï¼šHUPï¼Œhup</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æŒ‰PIDå‘é€ä¿¡å·</span><br><span class="line">kill pid</span><br><span class="line">kill -9pid</span><br><span class="line">kill -15 pid</span><br></pre></td></tr></table></figure><p>æŒ‰å‘½ä»¤æ¥å‘é€ï¼Œå·¥å…·æ¥è‡ªï¼š<code>yum -y install psmisc</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">killall -SIGTERM  ping</span><br><span class="line">killall -TERM  ping</span><br><span class="line">killall -15  ping</span><br></pre></td></tr></table></figure><h3 id="32-4-ä½œä¸šç®¡ç†"><a href="#32-4-ä½œä¸šç®¡ç†" class="headerlink" title="32.4 ä½œä¸šç®¡ç†"></a>32.4 ä½œä¸šç®¡ç†</h3><p>Linux çš„ä½œä¸šæ§åˆ¶</p><ul><li>å‰å°ä½œä¸šï¼šé€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä¸”å¯åŠ¨åä¸€ç›´å æ®ç»ˆç«¯</li><li>åå°ä½œä¸šï¼šå¯é€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä½†å¯åŠ¨åç«‹å³è½¬å…¥åå°è¿è¡Œ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†ä¸€ä¸ªå‰å°çš„ä½œä¸šè°ƒå…¥åå°ä¼‘çœ </span></span><br><span class="line">Ctrl + z</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†ä¸€ä¸ªå‰å°ä½œä¸šè°ƒå…¥åå°æ‰§è¡Œ</span></span><br><span class="line">kill -18 PID</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†ä¸€ä¸ªè¿˜æ²¡æœ‰å¯åŠ¨çš„ä½œä¸šè°ƒå…¥åå°æ‰§è¡Œ</span></span><br><span class="line">COMMAND &amp;</span><br></pre></td></tr></table></figure><p>åå°ä½œä¸šè™½ç„¶è¢«é€å¾€åå°è¿è¡Œï¼Œä½†å…¶ä¾ç„¶ä¸ç»ˆç«¯æœ‰å…³ï¼›é€€å‡ºç»ˆç«¯ï¼Œå°†å…³é—­åå°ä½œä¸šï¼Œå¦‚æœå¸Œæœ›é€å¾€åå°åï¼Œå‰¥ç¦»ä¸ç»ˆç«¯çš„å…³ç³»</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nohup COMMAND &amp;&gt; /dev/null &amp;</span><br><span class="line"></span><br><span class="line">screen;COMMAND</span><br><span class="line">tmux;COMMAND</span><br></pre></td></tr></table></figure><h3 id="32-5-ä½œä¸šæ§åˆ¶"><a href="#32-5-ä½œä¸šæ§åˆ¶" class="headerlink" title="32.5 ä½œä¸šæ§åˆ¶"></a>32.5 ä½œä¸šæ§åˆ¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰ç»ˆç«¯çš„æ‰€æœ‰ä½œä¸š</span></span><br><span class="line">jobs</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŠŠæŒ‡å®šçš„åå°ä½œä¸šè°ƒå›å‰å°</span></span><br><span class="line">fg</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®©é€å¾€åå°çš„ä½œä¸šåœ¨åå°ç»§ç»­è¿è¡Œ</span></span><br><span class="line">bg</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç»ˆæ­¢æŒ‡å®šçš„ä½œä¸š</span></span><br><span class="line">kill</span><br></pre></td></tr></table></figure><h3 id="32-6-ä»»åŠ¡å¹¶è¡Œè¿è¡Œ"><a href="#32-6-ä»»åŠ¡å¹¶è¡Œè¿è¡Œ" class="headerlink" title="32.6 ä»»åŠ¡å¹¶è¡Œè¿è¡Œ"></a>32.6 ä»»åŠ¡å¹¶è¡Œè¿è¡Œ</h3><p>åˆ©ç”¨åå°æ‰§è¡Œï¼Œå®ç°å¹¶è¡ŒåŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œæé«˜æ•ˆç‡</p><p>æ–¹æ³•ä¸€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 127.0.0.1 &amp;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(ping 127.0.0.1);(ping 127.0.0.2);(ping 127.0.0.3)</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 127.0.0.1 &amp; ping 127.0.0.2 &amp; ping 127.0.0.3</span><br></pre></td></tr></table></figure><p>å¤šç»„å‘½ä»¤åå°å¹¶è¡Œè¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; ping 127.0.0.1;ping 127.0.0.2; &#125;&amp; &#123; ping 127.0.0.3;ping 127.0.0.4; &#125;&amp;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NET=192.168.1</span><br><span class="line">for i in &#123;1..254&#125; ;do</span><br><span class="line">    &#123;   </span><br><span class="line">        ping -c1 -w1 $&#123;NET&#125;.$&#123;i&#125; &amp;&gt; /dev/null &amp;&amp; echo $&#123;NET&#125;.$&#123;i&#125; is UP || echo $&#123;NET&#125;.$&#123;i&#125; is DOWN</span><br><span class="line">    &#125; &amp;</span><br><span class="line">done</span><br><span class="line">wait</span><br></pre></td></tr></table></figure><h1 id="33-è®¡åˆ’ä»»åŠ¡"><a href="#33-è®¡åˆ’ä»»åŠ¡" class="headerlink" title="33. è®¡åˆ’ä»»åŠ¡"></a>33. è®¡åˆ’ä»»åŠ¡</h1><p>é€šè¿‡è®¡åˆ’ä»»åŠ¡ï¼Œå¯ä»¥è®©ç³»ç»Ÿè‡ªåŠ¨çš„æŒ‰æ—¶é—´æˆ–å‘¨æœŸæ€§è®¡åˆ’æ‰§è¡Œä»»åŠ¡</p><h3 id="33-1-ä¸€æ¬¡æ€§ä»»åŠ¡"><a href="#33-1-ä¸€æ¬¡æ€§ä»»åŠ¡" class="headerlink" title="33.1 ä¸€æ¬¡æ€§ä»»åŠ¡"></a>33.1 ä¸€æ¬¡æ€§ä»»åŠ¡</h3><p>at å·¥å…·</p><ul><li>äº¤äº’å¼å·¥å…·ï¼Œç”± <code>yum -y install at</code> æä¾›</li><li>ä¾èµ– <code>systemctl status atd.service</code> æœåŠ¡ï¼Œéœ€è¦å¯åŠ¨æ‰èƒ½å®ç° at ä»»åŠ¡</li><li>at ä»»åŠ¡é˜Ÿåˆ—å­˜æ”¾åœ¨&#x2F;var&#x2F;spool&#x2F;at&#x2F;</li></ul><p>at å‘½ä»¤</p><ul><li><p>ä½œä¸šæ‰§è¡Œå‘½ä»¤çš„ç»“æœä¸­ï¼Œæ ‡å‡†è¾“å‡ºå’Œé”™è¯¯ä»¥æ‰§è¡Œä»»åŠ¡è€…çš„èº«ä»½é‚®ä»¶é€šçŸ¥ç»™root</p></li><li><p>é»˜è®¤Centos8æœ€å°åŒ–å®‰è£…æ˜¯æ²¡æœ‰å®‰è£…é‚®ä»¶æœåŠ¡å™¨ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">at [é€‰é¡¹] æ—¶é—´</span><br><span class="line"></span><br><span class="line">-væ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">-t timeæ—¶é—´æ ¼å¼</span><br><span class="line">14:20åœ¨ä»Šæ—¥çš„14:20æ‰§è¡Œï¼Œå¦‚æœå·²è¿‡ï¼Œåˆ™æ˜å¤©æ‰§è¡Œ</span><br><span class="line">14:20 2016-09-20æŒ‡å®šå…·ä½“æ—¶é—´æ—¥æœŸæ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">-låˆ—å‡ºæŒ‡å®šé˜Ÿåˆ—ä¸­ç­‰å¾…è¿è¡Œçš„ä½œä¸š</span><br><span class="line">-dåˆ é™¤æŒ‡å®šçš„ä½œä¸š</span><br><span class="line">-cæŸ¥çœ‹å…·ä½“ä½œä¸šä»»åŠ¡</span><br><span class="line">-f /path/fileæŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–ä»»åŠ¡</span><br><span class="line">-må½“ä»»åŠ¡è¢«å®Œæˆä¹‹åï¼Œå°†ç»™ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œå³ä½¿æ²¡æœ‰æ ‡å‡†è¾“å‡º</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæ‰€æœ‰è®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">at -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸä¸ªè®¡åˆ’ä»»åŠ¡å…·ä½“å†…å®¹</span></span><br><span class="line">at -c 3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æŒ‡å®šè®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">at -d 3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éäº¤äº’å¼åˆ›å»ºè®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">echo &#x27;echo 123&#x27; | at 14:25</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éäº¤äº’å¼åˆ›å»ºè®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">at 14:25 &lt; at.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">äº¤äº’å¼æ‰§è¡Œè®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">at</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">Ctrl + D ä¿å­˜è®¡åˆ’ä»»åŠ¡</span><br></pre></td></tr></table></figure><h3 id="33-2-ä¸€æ¬¡æ€§ä»»åŠ¡æƒé™æ§åˆ¶"><a href="#33-2-ä¸€æ¬¡æ€§ä»»åŠ¡æƒé™æ§åˆ¶" class="headerlink" title="33.2 ä¸€æ¬¡æ€§ä»»åŠ¡æƒé™æ§åˆ¶"></a>33.2 ä¸€æ¬¡æ€§ä»»åŠ¡æƒé™æ§åˆ¶</h3><ul><li>ç™½åå•ï¼š&#x2F;etc&#x2F;at.allowé»˜è®¤ä¸å­˜åœ¨ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨äº†ï¼Œé‚£ä¹ˆåªæœ‰è¯¥æ–‡ä»¶ä¸­çš„ç”¨æˆ·æ‰èƒ½æ‰§è¡Œatå‘½ä»¤</li><li>é»‘åå•ï¼š&#x2F;etc&#x2F;at&#x2F;at.denyé»˜è®¤å­˜åœ¨ï¼Œæ‹’ç»è¯¥æ–‡ä»¶ä¸­ç”¨æˆ·æ‰§è¡Œatå‘½ä»¤ï¼Œè€Œæ²¡æœ‰åœ¨at.denyæ–‡ä»¶ä¸­çš„ä½¿ç”¨è€…åˆ™å¯æ‰§è¡Œ</li><li>å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼Œåªæœ‰rootå¯ä»¥æ‰§è¡Œatå‘½ä»¤</li></ul><h3 id="33-3-å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡"><a href="#33-3-å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡" class="headerlink" title="33.3 å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡"></a>33.3 å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡</h3><p>å‘¨æœŸæ€§ä»»åŠ¡è®¡åˆ’cronç›¸å…³çš„ç¨‹åºåŒ…ï¼š</p><ul><li><p>cronieï¼šä¸»ç¨‹åºåŒ…ï¼Œæä¾›crondå®ˆæŠ¤è¿›ç¨‹åŠç›¸å…³è¾…åŠ©å·¥å…·</p></li><li><p>crontabsï¼šåŒ…å« CentOS æä¾›ç³»ç»Ÿç»´æŠ¤ä»»åŠ¡</p></li><li><p>cronie-anacronï¼šcronieçš„è¡¥å……ç¨‹åºï¼Œcronieçš„è¡¥å……ç¨‹åºï¼Œç”¨äºç›‘æ§cronieä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ï¼Œå¦‚ï¼šcronieä¸­çš„ä»»åŠ¡åœ¨è¿‡å»è¯¥è¿è¡Œçš„æ—¶é—´ç‚¹æœªèƒ½æ­£å¸¸è¿è¡Œï¼Œåˆ™anacronä¼šéšåå¯åŠ¨ä¸€æ¬¡æ­¤ä»»åŠ¡</p></li><li><p>cronä¾èµ–äºcrondæœåŠ¡ï¼Œç¡®ä¿crondå®ˆæŠ¤è¿›ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼š</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Centos 7 +</span></span><br><span class="line">systemctl status crond.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Centos 6</span></span><br><span class="line">service crond.service status</span><br></pre></td></tr></table></figure><p>cron ä»»åŠ¡åˆ†ä¸º</p><ul><li>ç³»ç»Ÿcronä»»åŠ¡ï¼šç³»ç»Ÿç»´æŠ¤ä½œä¸šï¼Œ<code>/etc/crontab</code> ä¸»é…ç½®æ–‡ä»¶ï¼Œ<code>/etc/cron.d</code> å­é…ç½®æ–‡ä»¶</li><li>ç”¨æˆ·cronä»»åŠ¡ï¼šä¿å­˜åœ¨ <code>/var/spool/cron/USERNAME</code> åˆ©ç”¨ <code>crontab</code> å‘½ä»¤ç®¡ç†</li></ul><h4 id="33-3-1-etc-crontab-é…ç½®æ–‡ä»¶è§£æ"><a href="#33-3-1-etc-crontab-é…ç½®æ–‡ä»¶è§£æ" class="headerlink" title="33.3.1 &#x2F;etc&#x2F;crontab é…ç½®æ–‡ä»¶è§£æ"></a>33.3.1 &#x2F;etc&#x2F;crontab é…ç½®æ–‡ä»¶è§£æ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bashé»˜è®¤çš„shellç±»å‹</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/biné»˜è®¤ä½¿ç”¨çš„PATHå˜é‡,ä¸åœ¨å…¶ä¸­çš„å‘½ä»¤æ— æ³•æ‰§è¡Œ,å¯ä¸ºå…¶ä¿®æ”¹</span><br><span class="line">MAILTO=rooté»˜è®¤æ¯”å“¦å‡†è¾“å‡ºå’Œé”™è¯¯å‘é€é‚®ä»¶ç»™root,å¯ä»¥æŒ‡å‘å…¶ä»–ç”¨æˆ·</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">For details see man 4 crontabs</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Example of job definition:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">.---------------- minute (0 - 59)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">|  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">|  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">|  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">|  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">|  |  |  |  |</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">*  *  *  *  * user-name  <span class="built_in">command</span> to be executed</span></span><br></pre></td></tr></table></figure><h4 id="33-3-2-cron-ç›¸å…³æ–‡ä»¶"><a href="#33-3-2-cron-ç›¸å…³æ–‡ä»¶" class="headerlink" title="33.3.2 cron ç›¸å…³æ–‡ä»¶"></a>33.3.2 cron ç›¸å…³æ–‡ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@rocky9 ~]# rpm -ql crontabs</span><br><span class="line">/etc/cron.dailyè¯¥ç›®å½•ä¸‹ä»»åŠ¡è„šæœ¬,å°†æ¯æ—¥è¿è¡Œ</span><br><span class="line">/etc/cron.hourlyè¯¥ç›®å½•ä¸‹ä»»åŠ¡è„šæœ¬,å°†æ¯å°æ—¶è¿è¡Œ,é»˜è®¤å°†åœ¨æ¯å°æ—¶ç¬¬ä¸€åˆ†é’Ÿæ‰§è¡Œ</span><br><span class="line">/etc/cron.monthlyè¯¥ç›®å½•ä¸‹ä»»åŠ¡è„šæœ¬,å°†æ¯æœˆè¿è¡Œ</span><br><span class="line">/etc/cron.weeklyè¯¥ç›®å½•ä¸‹ä»»åŠ¡è„šæœ¬,å°†æ¯å‘¨è¿è¡Œ</span><br><span class="line">/etc/crontabç³»ç»ŸèŒƒå›´çš„ cron é…ç½®æ–‡ä»¶</span><br><span class="line">/etc/sysconfig/run-parts</span><br><span class="line">/usr/bin/run-partsrun-parts å·¥å…·çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚å®ƒå¯ä»¥æŒ‡å®šç›®å½•ï¼Œå¹¶è¿è¡Œç›®å½•ä¸‹æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶</span><br><span class="line">/usr/share/licenses/crontabs</span><br><span class="line">/usr/share/licenses/crontabs/COPYING</span><br><span class="line">/usr/share/man/man4/crontabs.4.gz</span><br><span class="line">/usr/share/man/man4/run-parts.4.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@rocky9 ~]# rpm -ql cronie</span><br><span class="line">/etc/cron.dè¯¥ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶,éƒ½å°†è¢«è®¡åˆ’ä»»åŠ¡è°ƒåº¦,æ¨¡æ¿å‚è€ƒ/etc/cron.d/0hourly</span><br><span class="line">/etc/cron.d/0hourly</span><br><span class="line">/etc/cron.denyç”¨äºé™åˆ¶å“ªäº›ç”¨æˆ·å¯ä»¥å°†è¢«ç¦æ­¢ä½¿ç”¨ cronã€‚</span><br><span class="line">/etc/cron.allowç”¨äºé™åˆ¶é‚£äº›ç”¨æˆ·å¯ä»¥ä½¿ç”¨ cron ,ä¸åœ¨å†…çš„ç”¨æˆ·å°†è¢«ç¦æ­¢,æ–‡ä»¶é»˜è®¤ä¸å­˜åœ¨</span><br><span class="line">/etc/pam.d/crond</span><br><span class="line">/etc/sysconfig/crond</span><br><span class="line">/usr/bin/cronnext</span><br><span class="line">/usr/bin/crontab</span><br><span class="line">/usr/lib/.build-id</span><br><span class="line">/usr/lib/.build-id/a7</span><br><span class="line">/usr/lib/.build-id/a7/7c55caedd2e23684df35300abf811b57fefb8a</span><br><span class="line">/usr/lib/.build-id/b4</span><br><span class="line">/usr/lib/.build-id/b4/d97b486d8886a5561b1185920175ebcfed2e33</span><br><span class="line">/usr/lib/.build-id/b7</span><br><span class="line">/usr/lib/.build-id/b7/fe9e700dc97ea6d1f7fcf0404f85026c21aa1a</span><br><span class="line">/usr/lib/systemd/system/crond.service</span><br><span class="line">/usr/sbin/crond</span><br><span class="line">/usr/share/doc/cronie</span><br><span class="line">/usr/share/doc/cronie/AUTHORS</span><br><span class="line">/usr/share/doc/cronie/ChangeLog</span><br><span class="line">/usr/share/doc/cronie/README</span><br><span class="line">/usr/share/licenses/cronie</span><br><span class="line">/usr/share/licenses/cronie/COPYING</span><br><span class="line">/usr/share/man/man1/cronnext.1.gz</span><br><span class="line">/usr/share/man/man1/crontab.1.gz</span><br><span class="line">/usr/share/man/man5/crontab.5.gz</span><br><span class="line">/usr/share/man/man8/cron.8.gz</span><br><span class="line">/usr/share/man/man8/crond.8.gz</span><br><span class="line">/var/spool/cron</span><br></pre></td></tr></table></figure><h4 id="33-3-2-ä¿®æ”¹-crontab-é»˜è®¤æ‰“å¼€çš„ç¼–è¾‘å™¨"><a href="#33-3-2-ä¿®æ”¹-crontab-é»˜è®¤æ‰“å¼€çš„ç¼–è¾‘å™¨" class="headerlink" title="33.3.2 ä¿®æ”¹ crontab é»˜è®¤æ‰“å¼€çš„ç¼–è¾‘å™¨"></a>33.3.2 ä¿®æ”¹ crontab é»˜è®¤æ‰“å¼€çš„ç¼–è¾‘å™¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export EDITOR=vim</span><br></pre></td></tr></table></figure><h3 id="33-6-ç”¨æˆ·è®¡åˆ’ä»»åŠ¡-crontab"><a href="#33-6-ç”¨æˆ·è®¡åˆ’ä»»åŠ¡-crontab" class="headerlink" title="33.6 ç”¨æˆ·è®¡åˆ’ä»»åŠ¡ crontab"></a>33.6 ç”¨æˆ·è®¡åˆ’ä»»åŠ¡ crontab</h3><p><code>crontab</code>ä»»åŠ¡ï¼š</p><ul><li>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±ä¸“ç”¨çš„ cron ä»»åŠ¡æ–‡ä»¶ï¼š  <code>/var/spool/cron/USERNAME</code></li><li>é»˜è®¤æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯ä¼šè¢«å‘é€é‚®ä»¶ç»™å¯¹åº”çš„ç”¨æˆ·ï¼šå¦‚ <code>deployer</code> åˆ›å»ºçš„ä»»åŠ¡å°±å‘é€è‡³<code>deployer</code>çš„é‚®ç®±</li><li>rootèƒ½å¤Ÿä¿®æ”¹å…¶ä»–ç”¨æˆ·çš„ä½œä¸š</li><li>ç”¨æˆ·çš„ cron ä¸­é»˜è®¤ PATH&#x3D;&#x2F;usr&#x2F;bin:&#x2F;binï¼Œå¦‚æœä½¿ç”¨å…¶ä»–è·¯å¾„ï¼Œåœ¨ä»»åŠ¡æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŠ  PATH&#x3D;&#x2F;path</li><li>cron ä»»åŠ¡ä¸­ % è¡¨ç¤ºæ¢è¡Œçš„ç‰¹æ®Šæ„ä¹‰ï¼Œä¸”ç¬¬ä¸€ä¸ª%åçš„æ‰€æœ‰å­—ç¬¦ä¸²ä¼šè¢«å½“ä½œå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œéœ€è¦ \ è½¬ä¹‰ï¼Œå°† % æ”¾ç½®äºå•å¼•å·ä¸­ä¹Ÿæ˜¯ä¸æ”¯æŒçš„</li></ul><p><code>crontab</code>å‘½ä»¤æ ¼å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">crontab [ -u user ] [ -l | -r | -e | -i ]</span><br><span class="line"></span><br><span class="line">-låˆ—å‡ºæ‰€æœ‰ä»»åŠ¡</span><br><span class="line">-eç¼–è¾‘ä»»åŠ¡</span><br><span class="line">-rç§»é™¤æ‰€æœ‰ä»»åŠ¡</span><br><span class="line">-riä»¥äº¤äº’å¼æ¨¡å¼ç§»é™¤æŒ‡å®šä»»åŠ¡</span><br><span class="line">-u user ä»…rootå¯è¿è¡Œï¼Œç®¡ç†æŒ‡å®šç”¨æˆ·cronä»»åŠ¡</span><br></pre></td></tr></table></figure><h3 id="33-7-ç‰¹æ®Šçš„è®¡åˆ’ä»»åŠ¡è¦æ±‚"><a href="#33-7-ç‰¹æ®Šçš„è®¡åˆ’ä»»åŠ¡è¦æ±‚" class="headerlink" title="33.7 ç‰¹æ®Šçš„è®¡åˆ’ä»»åŠ¡è¦æ±‚"></a>33.7 ç‰¹æ®Šçš„è®¡åˆ’ä»»åŠ¡è¦æ±‚</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®ç°ç§’çº§çš„è®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">for i in &#123;1..60&#125; ;do echo &quot;ç¬¬$&#123;i&#125;æ¬¡&quot; ;sleep 20 ;done </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚ä½•å®ç°7åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</span></span><br><span class="line">sleep 2æš‚åœ2ç§’,é»˜è®¤</span><br><span class="line">sleep 2mæš‚åœ2åˆ†é’Ÿ</span><br><span class="line">sleep 2hæš‚åœ2å°æ—¶</span><br><span class="line">sleep 2dæš‚åœ2å¤©</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®ç°å¾®ç§’çº§åˆ«çš„è®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">sleep  é«˜ç‰ˆæœ¬æ”¯æŒ</span><br><span class="line">usleep æ”¯æŒ</span><br></pre></td></tr></table></figure><h1 id="35-å†…æ ¸å‚æ•°ç®¡ç†"><a href="#35-å†…æ ¸å‚æ•°ç®¡ç†" class="headerlink" title="35. å†…æ ¸å‚æ•°ç®¡ç†"></a>35. å†…æ ¸å‚æ•°ç®¡ç†</h1><h3 id="35-1-å†…æ ¸å‚æ•°é…ç½®æ–‡ä»¶"><a href="#35-1-å†…æ ¸å‚æ•°é…ç½®æ–‡ä»¶" class="headerlink" title="35.1 å†…æ ¸å‚æ•°é…ç½®æ–‡ä»¶"></a>35.1 å†…æ ¸å‚æ•°é…ç½®æ–‡ä»¶</h3><ul><li><p>é»˜è®¤é…ç½®æ–‡ä»¶ï¼š<code>/etc/sysctl.conf</code></p></li><li><p>å…¶ä»–é…ç½®æ–‡ä»¶ï¼š<code>/usr/lib/sysctl.d/*.conf</code> <code>/run/sysctl.d/*.conf</code> <code>/etc/sysctl.d/*.conf </code></p></li></ul><h3 id="35-2-sysctl-ç®¡ç†å‘½ä»¤"><a href="#35-2-sysctl-ç®¡ç†å‘½ä»¤" class="headerlink" title="35.2 sysctl ç®¡ç†å‘½ä»¤"></a>35.2 sysctl ç®¡ç†å‘½ä»¤</h3><p><code>sysctl</code>å‘½ä»¤ç”¨äºæŸ¥çœ‹æˆ–è€…è®¾å®šæ­¤ç›®å½•ä¸­è¯¸å¤šå‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sysctl </span><br><span class="line"></span><br><span class="line">-aæŸ¥çœ‹æ‰€æœ‰ç”Ÿæ•ˆçš„å‚æ•°</span><br><span class="line">-wä¸´æ—¶ä¿®æ”¹å†…æ ¸å‚æ•°</span><br><span class="line">-p fileä½¿è¯¥é…ç½®æ–‡ä»¶å†…æ ¸å‚æ•°ç”Ÿæ•ˆ</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸´æ—¶ä¿®æ”¹å†…æ ¸å‚æ•°</span></span><br><span class="line">sysctl -w net.ipv4.ip_forward=1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ°¸ä¹…ä½¿å†…æ ¸å‚æ•°ç”Ÿæ•ˆ</span></span><br><span class="line">echo net.ipv4.ip_forward=1 &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸä¸ªå†…æ ¸å‚æ•°çš„å€¼</span></span><br><span class="line">sysctl net.ipv4.ip_forward</span><br></pre></td></tr></table></figure><h3 id="35-3-å¸¸ç”¨å†…æ ¸å‚æ•°"><a href="#35-3-å¸¸ç”¨å†…æ ¸å‚æ•°" class="headerlink" title="35.3 å¸¸ç”¨å†…æ ¸å‚æ•°"></a>35.3 å¸¸ç”¨å†…æ ¸å‚æ•°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€å¯ip_forwardè½¬å‘</span></span><br><span class="line">echo net.ipv4.ip_forward = 1 &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¿½ç•¥pingè¯·æ±‚</span></span><br><span class="line">echo net.ipv4.icmp_echo_ignore_all = 1 &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…è®¸åº”ç”¨ç¨‹åºç›‘å¬æœ¬åœ°ä¸å­˜åœ¨çš„IP</span></span><br><span class="line">echo net.ipv4.ip_nonlocal_bind = 1 &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é™åˆ¶æ“ä½œç³»ç»Ÿæ‰“å¼€çš„æ–‡ä»¶æ•°é‡</span></span><br><span class="line">echo fs.file-man = 1020000 &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">TCPè¿æ¥å…³é—­æ—¶ç­‰å¾…å¥—æ¥å­—ä¸­çš„æ•°æ®å‘é€å®Œæ¯•çš„æ—¶é—´</span></span><br><span class="line">net.ipv4.tcp_fin_timeout = 2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…è®¸é‡æ–°ä½¿ç”¨å¤„äºTIME_WAITçŠ¶æ€çš„å¥—æ¥å­—</span></span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ç”¨TIME-WAITçŠ¶æ€çš„å¿«é€Ÿå›æ”¶æœºåˆ¶</span></span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ç”¨TCP SYN cookiesï¼Œé˜²èŒƒSYNæ”»å‡»</span></span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">TCP keepaliveè¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼Œç”¨äºæ£€æµ‹è¿æ¥æ˜¯å¦ä»ç„¶æ´»è·ƒ</span></span><br><span class="line">net.ipv4.tcp_keepalive_time = 600</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æœ¬åœ°ç«¯å£èŒƒå›´ï¼Œç”¨äºä¸»åŠ¨å‘èµ·è¿æ¥æ—¶çš„æœ¬åœ°ç«¯å£é€‰æ‹©</span></span><br><span class="line">net.ipv4.ip_local_port_range = 2000 65000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŠè¿æ¥é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦</span></span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 16384</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç³»ç»Ÿä¸­TIME-WAITçŠ¶æ€çš„æœ€å¤§æ•°é‡</span></span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 36000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·¯ç”±è¡¨é¡¹åœ¨æ²¡æœ‰è¢«ä½¿ç”¨çš„æ—¶é—´é—´éš”åè¢«ç³»ç»Ÿåƒåœ¾å›æ”¶çš„æ—¶é—´ï¼Œå•ä½ç§’</span></span><br><span class="line">net.ipv4.route.gc_timeout = 100</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ”¾å¼ƒè¿æ¥ä¹‹å‰ï¼ŒTCPå‘é€SYNåŒ…çš„æœ€å¤§é‡è¯•æ¬¡æ•°</span></span><br><span class="line">net.ipv4.tcp_syn_retries = 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ”¾å¼ƒè¿æ¥ä¹‹å‰ï¼ŒTCPå‘é€SYN+ACKåŒ…çš„æœ€å¤§é‡è¯•æ¬¡æ•°</span></span><br><span class="line">net.ipv4.tcp_synack_retries = 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç³»ç»Ÿä¸­å…è®¸çš„æœ€å¤§å­¤ç«‹çš„å¥—æ¥å­—æ•°é‡</span></span><br><span class="line">net.ipv4.tcp_max_orphans = 16384</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç³»ç»Ÿä¸­å…è®¸çš„æœ€å¤§å¥—æ¥å­—è¿æ¥æ•°ï¼Œå½±å“ç›‘å¬é˜Ÿåˆ—çš„å¤§å°</span></span><br><span class="line">net.core.somaxconn = 16384</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç½‘ç»œè®¾å¤‡é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œå½±å“ä¼ å…¥æ•°æ®åŒ…çš„å¤„ç†é€Ÿåº¦</span></span><br><span class="line">net.core.netdev_max_backlog = 16384</span><br></pre></td></tr></table></figure><h1 id="36-å†…æ ¸æ¨¡å—ç®¡ç†"><a href="#36-å†…æ ¸æ¨¡å—ç®¡ç†" class="headerlink" title="36. å†…æ ¸æ¨¡å—ç®¡ç†"></a>36. å†…æ ¸æ¨¡å—ç®¡ç†</h1><h3 id="36-1-å†…æ ¸ç‰ˆæœ¬"><a href="#36-1-å†…æ ¸ç‰ˆæœ¬" class="headerlink" title="36.1 å†…æ ¸ç‰ˆæœ¬"></a>36.1 å†…æ ¸ç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uanme [é€‰é¡¹]</span><br><span class="line"></span><br><span class="line">-ræ˜¾ç¤ºå†…æ ¸ç‰ˆæœ¬</span><br><span class="line">-næ˜¾ç¤ºä¸»æœºå‘½</span><br><span class="line">-aæ˜¾ç¤ºç³»ç»Ÿçš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬å†…æ ¸åç§°ã€ä¸»æœºåã€å†…æ ¸ç‰ˆæœ¬å·ã€æœºå™¨ç±»å‹ç­‰</span><br></pre></td></tr></table></figure><h3 id="36-2-å†…æ ¸æ¨¡å‘½ä»¤"><a href="#36-2-å†…æ ¸æ¨¡å‘½ä»¤" class="headerlink" title="36.2 å†…æ ¸æ¨¡å‘½ä»¤"></a>36.2 å†…æ ¸æ¨¡å‘½ä»¤</h3><h4 id="36-2-1-æŸ¥çœ‹å†…æ ¸æ¨¡å—"><a href="#36-2-1-æŸ¥çœ‹å†…æ ¸æ¨¡å—" class="headerlink" title="36.2.1 æŸ¥çœ‹å†…æ ¸æ¨¡å—"></a>36.2.1 æŸ¥çœ‹å†…æ ¸æ¨¡å—</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">modinfo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å†…æ ¸å·²ç»åŠ è½½çš„æ¨¡å—</span></span><br><span class="line">lsmod </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ¨¡å—æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">modinfo -n module_name</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ¨¡å—å‚æ•°</span></span><br><span class="line">modinfo -p module_name</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ¨¡å—æè¿°</span></span><br><span class="line">modinfo -d module_name</span><br></pre></td></tr></table></figure><h4 id="36-2-2-æœç´¢å†…æ ¸æ¨¡å—"><a href="#36-2-2-æœç´¢å†…æ ¸æ¨¡å—" class="headerlink" title="36.2.2 æœç´¢å†…æ ¸æ¨¡å—"></a>36.2.2 æœç´¢å†…æ ¸æ¨¡å—</h4><h4 id="36-2-3-åŠ è½½å†…æ ¸æ¨¡å—"><a href="#36-2-3-åŠ è½½å†…æ ¸æ¨¡å—" class="headerlink" title="36.2.3 åŠ è½½å†…æ ¸æ¨¡å—"></a>36.2.3 åŠ è½½å†…æ ¸æ¨¡å—</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">modprobe</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŠ è½½å†…æ ¸æ¨¡å—</span></span><br><span class="line">modprobe module_name</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½å†…æ ¸æ¨¡å—</span></span><br><span class="line">modprobe -r module_name</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼ºåˆ¶åŠ è½½æ¨¡å—</span></span><br><span class="line">modprobe -f module_name</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ¨¡å—ä¿¡æ¯</span></span><br><span class="line">modprobe -c</span><br></pre></td></tr></table></figure><h4 id="36-2-4-å¸è½½å†…æ ¸æ¨¡å—"><a href="#36-2-4-å¸è½½å†…æ ¸æ¨¡å—" class="headerlink" title="36.2.4 å¸è½½å†…æ ¸æ¨¡å—"></a>36.2.4 å¸è½½å†…æ ¸æ¨¡å—</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rmmod</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½å†…æ ¸æ¨¡å—</span></span><br><span class="line">rmmod module_name</span><br></pre></td></tr></table></figure><h1 id="37-systemd"><a href="#37-systemd" class="headerlink" title="37. systemd"></a>37. systemd</h1><h3 id="37-1-Unit-åˆ†ç±»"><a href="#37-1-Unit-åˆ†ç±»" class="headerlink" title="37.1 Unit åˆ†ç±»"></a>37.1 Unit åˆ†ç±»</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@Centos7 ~]$ systemctl -t help</span><br><span class="line">Available unit types:</span><br><span class="line">serviceæ–‡ä»¶æ‰©å±•åä¸º.service,ç”¨äºå®šä¹‰ç³»ç»ŸæœåŠ¡</span><br><span class="line">socketå®šä¹‰è¿›ç¨‹é—´é€šä¿¡ç”¨çš„socketæ–‡ä»¶ï¼Œä¹Ÿå¯åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå»¶è¿Ÿå¯åŠ¨æœåŠ¡ï¼Œå®ç°æŒ‰éœ€åŠŸèƒ½</span><br><span class="line">busname</span><br><span class="line">targetæ–‡ä»¶æ‰©å±•åä¸º.targetï¼Œç”¨äºæ¨¡æ‹Ÿå®ç°è¿è¡Œçº§åˆ«</span><br><span class="line">snapshotç®¡ç†ç³»ç»Ÿå¿«ç…§</span><br><span class="line">deviceç”¨äºå®šä¹‰å†…æ ¸è¯†åˆ«çš„è®¾å¤‡</span><br><span class="line">mountå®šä¹‰æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹</span><br><span class="line">automountæ–‡ä»¶ç³»ç»Ÿçš„è‡ªåŠ¨æŒ‚è½½ç‚¹</span><br><span class="line">swapç”¨äºæ ‡è¯†swapè®¾å¤‡   </span><br><span class="line">timer</span><br><span class="line">pathç”¨äºå®šä¹‰æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä½¿ç”¨ï¼Œå¸¸ç”¨å…³äºå½“æ–‡ä»¶ç³»ç»Ÿå˜åŒ–æ—¶ï¼Œå»¶è¿Ÿæ¿€æ´»æœåŠ¡ï¼Œå¦‚spoolç›®å½•</span><br><span class="line">slice</span><br><span class="line">scope</span><br></pre></td></tr></table></figure><h3 id="37-2-Unit-çš„é…ç½®æ–‡ä»¶"><a href="#37-2-Unit-çš„é…ç½®æ–‡ä»¶" class="headerlink" title="37.2 Unit çš„é…ç½®æ–‡ä»¶"></a>37.2 Unit çš„é…ç½®æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/lib/systemd/systemæ¯ä¸ªæœåŠ¡æœ€ä¸»è¦çš„å¯åŠ¨è„šæœ¬è®¾ç½®ï¼Œç±»ä¼¼äºä¹‹å‰çš„/etc/init.d/</span><br><span class="line">/lib/systemd/systemubuntçš„å¯¹åº”ç›®å½•</span><br><span class="line">/run/systemd/systemç³»ç»Ÿæ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€äº§ç”Ÿçš„æœåŠ¡è„šæœ¬ï¼Œæ¯”ä¸Šé¢ç›®å½•ä¼˜å…ˆè¿è¡Œ</span><br><span class="line">/etc/systemd/systemç®¡ç†å‘˜å»ºç«‹çš„æ‰§è¡Œè„šæœ¬ï¼Œç±»ä¼¼äº/etc/rc*.d/S*çš„åŠŸèƒ½ï¼Œæ¯”ä¸Šé¢ç›®å½•ä¼˜å…ˆè¿è¡Œ</span><br></pre></td></tr></table></figure><h3 id="37-3-systemctl-å‘½ä»¤"><a href="#37-3-systemctl-å‘½ä»¤" class="headerlink" title="37.3 systemctl å‘½ä»¤"></a>37.3 systemctl å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">systemctl COMMAND name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ï¼šç›¸å½“äºservice name start</span></span><br><span class="line">[root@Centos7 /]$ systemctl start name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢ï¼šç›¸å½“äºservice name stop</span></span><br><span class="line">[root@Centos7 /]$ systemctl stop name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯ï¼šç›¸å½“äºservice name restart</span></span><br><span class="line">[root@Centos7 /]$ systemctl restart name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹çŠ¶æ€ï¼šç›¸å½“äºservice name status</span></span><br><span class="line">[root@Centos7 /]$ systemctl status name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¦æ­¢è‡ªåŠ¨å’Œæ‰‹åŠ¨å¯åŠ¨</span></span><br><span class="line">systemctk mask name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–æ¶ˆç¦æ­¢</span></span><br><span class="line">systemctl unmask name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸæœåŠ¡å½“å‰æ¿€æ´»ä¸å¦çš„çŠ¶æ€</span></span><br><span class="line">systemctl is-active name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰å·²ç»æ¿€æ´»çš„æœåŠ¡</span></span><br><span class="line">systemctl list-units --type service --all  | grep </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾å®šæŸæœåŠ¡å¼€æœºè‡ªå¯ï¼Œç›¸å½“äºchkconfig name on</span></span><br><span class="line">systemctl enable name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾å®šæœåŠ¡å¼€æœºå¯åŠ¨ï¼Œå¹¶é©¬ä¸Šå¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl enable --now name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾å®šæœåŠ¡å¼€æœºä¸å¯åŠ¨ï¼Œå¹¶é©¬ä¸Šå…³é—­æœåŠ¡</span></span><br><span class="line">systemctl disable --now postfix.service </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸæœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨<span class="built_in">enable</span>è¿”å›ä¸º0 <span class="built_in">disable</span>è¿”å›ä¸º1</span></span><br><span class="line">systemctl is-enabled postfix.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºå¤±è´¥çš„æœåŠ¡</span></span><br><span class="line">systemctl --failed --type=service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾å®šæŸæœåŠ¡å¼€æœºç¦æ­¢å¯åŠ¨ï¼šç›¸å½“äºchkconfig name off</span></span><br><span class="line">systemctl disable name.sercice</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„å¼€æœºè‡ªå¯çŠ¶æ€ï¼Œç›¸å½“äºchkconfig --list</span></span><br><span class="line">systemctl list-unit-files --type service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æœåŠ¡çš„ä¾èµ–å…³ç³»</span></span><br><span class="line">systemctl list-dependencies name.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ€æ‰è¿›ç¨‹ï¼š</span></span><br><span class="line">systemctl kill unitname</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šçŸ¥systemdé‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ï¼Œè€Œåå¯ä»¥é€‰æ‹©é‡å¯</span></span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h3 id="37-4-æœåŠ¡çŠ¶æ€è§£é‡Š"><a href="#37-4-æœåŠ¡çŠ¶æ€è§£é‡Š" class="headerlink" title="37.4 æœåŠ¡çŠ¶æ€è§£é‡Š"></a>37.4 æœåŠ¡çŠ¶æ€è§£é‡Š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">loaded unité…ç½®æ–‡ä»¶å·²å¤„ç†</span><br><span class="line">activeï¼ˆrunningï¼‰ä¸€æ¬¡æˆ–å¤šæ¬¡æŒç»­å¤„ç†çš„è¿è¡Œ</span><br><span class="line">activeï¼ˆexitedï¼‰æˆåŠŸå®Œæˆä¸€æ¬¡æ€§é…ç½®</span><br><span class="line">activeï¼ˆwaitingï¼‰è¿è¡Œä¸­ï¼Œç­‰å¾…ä¸€ä¸ªæ—¶é—´</span><br><span class="line">inactive ä¸è¿è¡Œ</span><br><span class="line">enabled å¼€æœºå¯åŠ¨</span><br><span class="line">disabled å¼€æœºä¸å¯åŠ¨</span><br><span class="line">static å¼€æœºä¸å¯åŠ¨ï¼Œä½†å¯è¢«å¦å¤–ä¸€ä¸ªå¯åŠ¨çš„æœåŠ¡æ¿€æ´»</span><br><span class="line">indirect é‡å®šå‘åˆ°åˆ«å¤„</span><br><span class="line">deactivating (stop-sigterm)</span><br></pre></td></tr></table></figure><h3 id="37-5-Unit-æ–‡ä»¶æ ¼å¼"><a href="#37-5-Unit-æ–‡ä»¶æ ¼å¼" class="headerlink" title="37.5 Unit æ–‡ä»¶æ ¼å¼"></a>37.5 Unit æ–‡ä»¶æ ¼å¼</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">èŒƒä¾‹ï¼š</span><br><span class="line">[Unit]</span><br><span class="line">Description=Mysql5.7 service  æè¿°è¿™ä¸ªserviceçš„åå­—ã€ä¿¡æ¯</span><br><span class="line">After=network.targetè¡¨ç¤ºæœ¬æœåŠ¡åœ¨network.targetæœåŠ¡ä¹‹åå¯åŠ¨ï¼Œä¸æ¶‰åŠä¾èµ–</span><br><span class="line">Before=xxx.serviceè¡¨ç¤ºæœ¬æœåŠ¡åœ¨xxx.serviceä¹‹å‰å¯åŠ¨ï¼Œä¸æ¶‰åŠä¾èµ–</span><br><span class="line">Wants=è¡¨ç¤ºå¼±ä¾èµ–å…³ç³»ï¼ŒæŸä¸ªæœåŠ¡åœæ­¢äº†ï¼Œä¹Ÿä¸å½±å“æœ¬æœåŠ¡</span><br><span class="line">Requires=è¡¨ç¤ºå¼ºä¾èµ–å…³ç³»ï¼ŒæŸä¸ªæœåŠ¡åœæ­¢äº†ï¼Œæœ¬æœåŠ¡å¿…é¡»åœæ­¢</span><br><span class="line">ConditionPathExists=åé¢è·Ÿè·¯å¾„ï¼Œè¡¨ç¤ºåªæœ‰æŒ‡å®šè·¯å¾„å­˜åœ¨ï¼Œæ‰å¯ä»¥å¯åŠ¨</span><br><span class="line">[Service]</span><br><span class="line">User=å¯ä»¥è®¾ç½®æœåŠ¡çš„ç”¨æˆ·å</span><br><span class="line">Group=                        å¯ä»¥è®¾ç½®æœåŠ¡å¯åŠ¨æ—¶çš„ç»„</span><br><span class="line">Type=simpleå®šä¹‰æœåŠ¡çš„ç±»å‹</span><br><span class="line">                            simpleï¼šæœ€ç®€å•å¸¸è§çš„ç±»å‹ï¼ŒæŒ‡å®šæœåŠ¡åœ¨å¯åŠ¨åç›´æ¥å¼€å§‹è¿è¡Œï¼Œå¹¶ä¿æŒçŠ¶æ€ï¼Œç›´åˆ°æœåŠ¡è¢«ç»ˆæ­¢</span><br><span class="line">                              forkingï¼šè¿™ç§ç±»å‹çš„æœåŠ¡ä¼šäº§ç”Ÿä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå®é™…çš„æœåŠ¡æ“ä½œï¼Œä¸€æ—¦å­è¿›ç¨‹å¼€å§‹æ‰§è¡ŒæœåŠ¡ä»»åŠ¡ï¼Œçˆ¶è¿›ç¨‹å°†ç«‹å³é€€å‡º</span><br><span class="line">                              oneshot: ä¸€æ¬¡æ€§çš„æœåŠ¡ï¼Œåªéœ€è¦åœ¨å¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åç«‹å³é€€å‡º</span><br><span class="line">                            notifyï¼šä¸simpleç›¸åŒï¼Œä½†æ˜¯çº¦å®šæœåŠ¡ä¼šåœ¨å°±ç»ªåå‘systemdå‘é€ä¸€ä¸ªä¿¡å·ï¼Œè¿™ä¸€é€šçŸ¥çš„å®ç°ç”± libsystemd-daemon.soæä¾›</span><br><span class="line">                            dbusï¼šè‹¥ä»¥æ­¤æ–¹å¼å¯åŠ¨ï¼Œå½“æŒ‡å®šçš„BusNameå‡ºç°åœ¨DBusç³»ç»Ÿæ€»çº¿ä¸Šæ—¶ï¼Œsystemdè®¤ä¸ºæœåŠ¡å°±ç»ª</span><br><span class="line">                            idleï¼šsystemdä¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡å¤„ç†å®Œæˆåï¼Œæ‰å¼€å§‹æ‰§è¡Œidleç±»å‹çš„å•å…ƒï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–è¡Œä¸ºå’Œsimpleç±»ä¼¼ã€‚</span><br><span class="line">                            . . . </span><br><span class="line">PIDFile=æœåŠ¡PIDæ–‡ä»¶è·¯å¾„</span><br><span class="line">ExecStart=æŒ‡å®šå¯åŠ¨å•å…ƒçš„å‘½ä»¤æˆ–è€…è„šæœ¬</span><br><span class="line">ExecStartPre=æŒ‡å®šå•å…ƒå¯åŠ¨å‰æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬</span><br><span class="line">ExecStartPost=æŒ‡å®šå•å…ƒå¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬</span><br><span class="line">ExecReload=æŒ‡å®šå•å…ƒä¸åœæ­¢æœåŠ¡ï¼Œä½†æ˜¯é‡æ–°åŠ è½½é…ç½®æˆ–çŠ¶æ€</span><br><span class="line">ExecStop=æŒ‡å®šå•å…ƒåœæ­¢æ—¶æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬</span><br><span class="line">PrivateTmp=Trueè¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´ï¼Œä¸æŒ‡å®šçš„è¯é»˜è®¤æ˜¯/tmp</span><br><span class="line">Restart=noï¼šé»˜è®¤å€¼ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨é‡å¯æœåŠ¡ï¼Œå¦‚æœæœåŠ¡æ„å¤–ç»ˆæ­¢ï¼ŒSystemdä¸ä¼šå°è¯•è‡ªåŠ¨é‡æ–°å¯åŠ¨å®ƒ</span><br><span class="line">                              alwaysï¼šè¡¨ç¤ºæ€»æ˜¯è‡ªåŠ¨é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæ— è®ºæœåŠ¡ä»¥ä½•ç§æ–¹å¼ç»ˆæ­¢(åŒ…æ‹¬æ­£å¸¸å’Œå¼‚å¸¸)ï¼ŒSystemdéƒ½ä¼šè‡ªåŠ¨å°è¯•é‡æ–°å¯åŠ¨è¯¥æœåŠ¡</span><br><span class="line">                            successï¼šè¡¨ç¤ºåªæœ‰åœ¨æœåŠ¡ä»¥0è¿”å›ç é€€å‡ºæ—¶ï¼Œæ‰ä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨ï¼Œå¦‚æœæœåŠ¡ä»¥éé›¶è¿”å›ç é€€å‡ºæˆ–å‘ç”Ÿå¼‚å¸¸æ—¶ï¼ŒSystemdä¸ä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨</span><br><span class="line">                              failureï¼šè¡¨ç¤ºåªæœ‰æœåŠ¡ä»¥é0è¿”å›ç é€€å‡ºæ—¶ï¼Œæ‰ä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨ï¼Œå¦‚æœæœåŠ¡ä»¥0è¿”å›ç é€€å‡ºæˆ–å‘ç”Ÿå¼‚å¸¸ç»ˆæ­¢ï¼ŒSystemdä¸ä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨</span><br><span class="line">                              </span><br><span class="line">RestartSec=10så®šä¹‰æœåŠ¡è‡ªåŠ¨é‡å¯é—´éš”æ—¶é—´s:ç§’min:åˆ†é’Ÿ h:å°æ—¶ ms:æ¯«ç§’ us:å¾®å¦™</span><br><span class="line">RemainAfterExit=å¦‚æœè®¾ç½®è¿™ä¸ªé€‰æ‹©ä¸ºçœŸï¼ŒæœåŠ¡ä¼šè¢«è®¤ä¸ºæ˜¯åœ¨æ¿€æ´»çŠ¶æ€ï¼Œå³ä½¿æ‰€ä»¥çš„è¿›ç¨‹å·²ç»é€€å‡ºï¼Œé»˜è®¤çš„å€¼ä¸ºå‡ï¼Œè¿™ä¸ªé€‰é¡¹åªæœ‰åœ¨Type=oneshotæ—¶éœ€è¦è¢«é…ç½®ã€‚</span><br><span class="line">WorkingDirectory=æŒ‡å®šæœåŠ¡çš„å®‰è£…ç›®å½•</span><br><span class="line">EnvironmentFile=æŒ‡å®šä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„è·¯å¾„ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†ä¸€ç³»åˆ—ç¯å¢ƒå˜é‡çš„å®šä¹‰ï¼Œæ¯è¡Œä¸€ä¸ªã€‚è¿™äº›ç¯å¢ƒå˜é‡å°†åœ¨æœåŠ¡å¯åŠ¨æ—¶åŠ è½½ï¼Œä»¥ä¾›æœåŠ¡è¿›ç¨‹ä½¿ç”¨ã€‚</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">ALias=ä¸ºæœåŠ¡æ·»åŠ ä¸€ä¸ªåˆ«åï¼Œå¯ä»¥é€šè¿‡åˆ«åè°ƒç”¨æˆ–è€…å¯åŠ¨</span><br><span class="line">WantedBy=multi-user.target    æŒ‡çš„æ˜¯æœåŠ¡æ‰€åœ¨çš„Targetæ˜¯multi-user.targetï¼Œä¹Ÿå°±æ˜¯å½“ç³»ç»Ÿè¿è¡Œçº§åˆ«ä¸ºå¤šç”¨æˆ·æ—¶ï¼Œç³»ç»Ÿåº”è¯¥å¯åŠ¨è¯¥æœåŠ¡</span><br><span class="line">DefaultInstance=              æŒ‡å®šä¸€ä¸ªé»˜è®¤å•å…ƒ</span><br></pre></td></tr></table></figure><h3 id="37-6-ç³»ç»Ÿè¿è¡Œçº§åˆ«"><a href="#37-6-ç³»ç»Ÿè¿è¡Œçº§åˆ«" class="headerlink" title="37.6 ç³»ç»Ÿè¿è¡Œçº§åˆ«"></a>37.6 ç³»ç»Ÿè¿è¡Œçº§åˆ«</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/lib/systemd/system/runlevel0.target -&gt; poweroff.target # å…³æœº</span><br><span class="line">/lib/systemd/system/runlevel1.target -&gt; rescue.target# æ•‘æ´æ¨¡å¼</span><br><span class="line">/lib/systemd/system/runlevel3.target -&gt; multi-user.target # å¤šç”¨æˆ·ï¼Œå‘½ä»¤è¡Œ</span><br><span class="line">/lib/systemd/system/runlevel4.target -&gt; multi-user.target # å¤šç”¨æˆ·ï¼Œå‘½ä»¤è¡Œ</span><br><span class="line">/lib/systemd/system/runlevel5.target -&gt; graphical.target# å›¾å½¢åŒ–</span><br><span class="line">/lib/systemd/system/runlevel6.target -&gt; reboot.target# é‡æ–°å¯åŠ¨</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸä¸ªtargetåŒ…å«çš„èµ„æº</span></span><br><span class="line">systemctl list-dependencies reboot.target</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç›®å‰æ”¯æŒçš„targetåˆ—è¡¨</span></span><br><span class="line">systemctl list-units -t target</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢ç›®å‰çš„targetæ¨¡å¼</span></span><br><span class="line">systemctl isolate reboot.target</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®é»˜è®¤çš„targetæ¨¡å¼</span></span><br><span class="line">systemctl set-default multi-user.target</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é»˜è®¤çš„targetæ¨¡å¼</span></span><br><span class="line">systemctl get-default</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°é»˜è®¤çš„targetæ¨¡å¼</span></span><br><span class="line">systemctl default</span><br></pre></td></tr></table></figure><h3 id="37-8-ç¦ç”¨-Ctrl-alt-delete"><a href="#37-8-ç¦ç”¨-Ctrl-alt-delete" class="headerlink" title="37.8 ç¦ç”¨ Ctrl+alt+delete"></a>37.8 ç¦ç”¨ Ctrl+alt+delete</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl mask ctrl-alt-del.target</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><h1 id="å°¾é¡µ"><a href="#å°¾é¡µ" class="headerlink" title="å°¾é¡µ"></a>å°¾é¡µ</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LANG=zh_CN.UTF-8</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LinuxåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡æ¡£ </tag>
            
            <tag> åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
